var Vx=l=>{throw TypeError(l)};var uf=(l,e,t)=>e.has(l)||Vx("Cannot "+t);var gt=(l,e,t)=>(uf(l,e,"read from private field"),t?t.call(l):e.get(l)),Rn=(l,e,t)=>e.has(l)?Vx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(l):e.set(l,t),js=(l,e,t,s)=>(uf(l,e,"write to private field"),s?s.call(l,t):e.set(l,t),t),kn=(l,e,t)=>(uf(l,e,"access private method"),t);var qx=(l,e,t,s)=>({set _(i){js(l,e,i,t)},get _(){return gt(l,e,s)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function my(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var hf={exports:{}},Lo={};var Gx;function UA(){if(Gx)return Lo;Gx=1;var l=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,i,r){var c=null;if(r!==void 0&&(c=""+r),i.key!==void 0&&(c=""+i.key),"key"in i){r={};for(var u in i)u!=="key"&&(r[u]=i[u])}else r=i;return i=r.ref,{$$typeof:l,type:s,key:c,ref:i!==void 0?i:null,props:r}}return Lo.Fragment=e,Lo.jsx=t,Lo.jsxs=t,Lo}var $x;function IA(){return $x||($x=1,hf.exports=UA()),hf.exports}var o=IA(),ff={exports:{}},je={};var Yx;function zA(){if(Yx)return je;Yx=1;var l=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),x=Symbol.iterator;function y(F){return F===null||typeof F!="object"?null:(F=x&&F[x]||F["@@iterator"],typeof F=="function"?F:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,j={};function N(F,G,Z){this.props=F,this.context=G,this.refs=j,this.updater=Z||A}N.prototype.isReactComponent={},N.prototype.setState=function(F,G){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,G,"setState")},N.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function D(){}D.prototype=N.prototype;function L(F,G,Z){this.props=F,this.context=G,this.refs=j,this.updater=Z||A}var k=L.prototype=new D;k.constructor=L,w(k,N.prototype),k.isPureReactComponent=!0;var U=Array.isArray;function C(){}var B={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function E(F,G,Z){var Q=Z.ref;return{$$typeof:l,type:F,key:G,ref:Q!==void 0?Q:null,props:Z}}function O(F,G){return E(F.type,G,F.props)}function I(F){return typeof F=="object"&&F!==null&&F.$$typeof===l}function V(F){var G={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Z){return G[Z]})}var z=/\/+/g;function H(F,G){return typeof F=="object"&&F!==null&&F.key!=null?V(""+F.key):G.toString(36)}function $(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(C,C):(F.status="pending",F.then(function(G){F.status==="pending"&&(F.status="fulfilled",F.value=G)},function(G){F.status==="pending"&&(F.status="rejected",F.reason=G)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function S(F,G,Z,Q,K){var de=typeof F;(de==="undefined"||de==="boolean")&&(F=null);var ue=!1;if(F===null)ue=!0;else switch(de){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(F.$$typeof){case l:case e:ue=!0;break;case f:return ue=F._init,S(ue(F._payload),G,Z,Q,K)}}if(ue)return K=K(F),ue=Q===""?"."+H(F,0):Q,U(K)?(Z="",ue!=null&&(Z=ue.replace(z,"$&/")+"/"),S(K,G,Z,"",function(xe){return xe})):K!=null&&(I(K)&&(K=O(K,Z+(K.key==null||F&&F.key===K.key?"":(""+K.key).replace(z,"$&/")+"/")+ue)),G.push(K)),1;ue=0;var ve=Q===""?".":Q+":";if(U(F))for(var he=0;he<F.length;he++)Q=F[he],de=ve+H(Q,he),ue+=S(Q,G,Z,de,K);else if(he=y(F),typeof he=="function")for(F=he.call(F),he=0;!(Q=F.next()).done;)Q=Q.value,de=ve+H(Q,he++),ue+=S(Q,G,Z,de,K);else if(de==="object"){if(typeof F.then=="function")return S($(F),G,Z,Q,K);throw G=String(F),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return ue}function _(F,G,Z){if(F==null)return F;var Q=[],K=0;return S(F,Q,"","",function(de){return G.call(Z,de,K++)}),Q}function q(F){if(F._status===-1){var G=F._result;G=G(),G.then(function(Z){(F._status===0||F._status===-1)&&(F._status=1,F._result=Z)},function(Z){(F._status===0||F._status===-1)&&(F._status=2,F._result=Z)}),F._status===-1&&(F._status=0,F._result=G)}if(F._status===1)return F._result.default;throw F._result}var Y=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},ee={map:_,forEach:function(F,G,Z){_(F,function(){G.apply(this,arguments)},Z)},count:function(F){var G=0;return _(F,function(){G++}),G},toArray:function(F){return _(F,function(G){return G})||[]},only:function(F){if(!I(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return je.Activity=g,je.Children=ee,je.Component=N,je.Fragment=t,je.Profiler=i,je.PureComponent=L,je.StrictMode=s,je.Suspense=h,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,je.__COMPILER_RUNTIME={__proto__:null,c:function(F){return B.H.useMemoCache(F)}},je.cache=function(F){return function(){return F.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(F,G,Z){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var Q=w({},F.props),K=F.key;if(G!=null)for(de in G.key!==void 0&&(K=""+G.key),G)!R.call(G,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&G.ref===void 0||(Q[de]=G[de]);var de=arguments.length-2;if(de===1)Q.children=Z;else if(1<de){for(var ue=Array(de),ve=0;ve<de;ve++)ue[ve]=arguments[ve+2];Q.children=ue}return E(F.type,K,Q)},je.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:r,_context:F},F},je.createElement=function(F,G,Z){var Q,K={},de=null;if(G!=null)for(Q in G.key!==void 0&&(de=""+G.key),G)R.call(G,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(K[Q]=G[Q]);var ue=arguments.length-2;if(ue===1)K.children=Z;else if(1<ue){for(var ve=Array(ue),he=0;he<ue;he++)ve[he]=arguments[he+2];K.children=ve}if(F&&F.defaultProps)for(Q in ue=F.defaultProps,ue)K[Q]===void 0&&(K[Q]=ue[Q]);return E(F,de,K)},je.createRef=function(){return{current:null}},je.forwardRef=function(F){return{$$typeof:u,render:F}},je.isValidElement=I,je.lazy=function(F){return{$$typeof:f,_payload:{_status:-1,_result:F},_init:q}},je.memo=function(F,G){return{$$typeof:p,type:F,compare:G===void 0?null:G}},je.startTransition=function(F){var G=B.T,Z={};B.T=Z;try{var Q=F(),K=B.S;K!==null&&K(Z,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(C,Y)}catch(de){Y(de)}finally{G!==null&&Z.types!==null&&(G.types=Z.types),B.T=G}},je.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},je.use=function(F){return B.H.use(F)},je.useActionState=function(F,G,Z){return B.H.useActionState(F,G,Z)},je.useCallback=function(F,G){return B.H.useCallback(F,G)},je.useContext=function(F){return B.H.useContext(F)},je.useDebugValue=function(){},je.useDeferredValue=function(F,G){return B.H.useDeferredValue(F,G)},je.useEffect=function(F,G){return B.H.useEffect(F,G)},je.useEffectEvent=function(F){return B.H.useEffectEvent(F)},je.useId=function(){return B.H.useId()},je.useImperativeHandle=function(F,G,Z){return B.H.useImperativeHandle(F,G,Z)},je.useInsertionEffect=function(F,G){return B.H.useInsertionEffect(F,G)},je.useLayoutEffect=function(F,G){return B.H.useLayoutEffect(F,G)},je.useMemo=function(F,G){return B.H.useMemo(F,G)},je.useOptimistic=function(F,G){return B.H.useOptimistic(F,G)},je.useReducer=function(F,G,Z){return B.H.useReducer(F,G,Z)},je.useRef=function(F){return B.H.useRef(F)},je.useState=function(F){return B.H.useState(F)},je.useSyncExternalStore=function(F,G,Z){return B.H.useSyncExternalStore(F,G,Z)},je.useTransition=function(){return B.H.useTransition()},je.version="19.2.3",je}var Xx;function lm(){return Xx||(Xx=1,ff.exports=zA()),ff.exports}var M=lm();const it=my(M);var mf={exports:{}},Oo={},pf={exports:{}},gf={};var Wx;function HA(){return Wx||(Wx=1,(function(l){function e(S,_){var q=S.length;S.push(_);e:for(;0<q;){var Y=q-1>>>1,ee=S[Y];if(0<i(ee,_))S[Y]=_,S[q]=ee,q=Y;else break e}}function t(S){return S.length===0?null:S[0]}function s(S){if(S.length===0)return null;var _=S[0],q=S.pop();if(q!==_){S[0]=q;e:for(var Y=0,ee=S.length,F=ee>>>1;Y<F;){var G=2*(Y+1)-1,Z=S[G],Q=G+1,K=S[Q];if(0>i(Z,q))Q<ee&&0>i(K,Z)?(S[Y]=K,S[Q]=q,Y=Q):(S[Y]=Z,S[G]=q,Y=G);else if(Q<ee&&0>i(K,q))S[Y]=K,S[Q]=q,Y=Q;else break e}}return _}function i(S,_){var q=S.sortIndex-_.sortIndex;return q!==0?q:S.id-_.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;l.unstable_now=function(){return r.now()}}else{var c=Date,u=c.now();l.unstable_now=function(){return c.now()-u}}var h=[],p=[],f=1,g=null,x=3,y=!1,A=!1,w=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function k(S){for(var _=t(p);_!==null;){if(_.callback===null)s(p);else if(_.startTime<=S)s(p),_.sortIndex=_.expirationTime,e(h,_);else break;_=t(p)}}function U(S){if(w=!1,k(S),!A)if(t(h)!==null)A=!0,C||(C=!0,V());else{var _=t(p);_!==null&&$(U,_.startTime-S)}}var C=!1,B=-1,R=5,E=-1;function O(){return j?!0:!(l.unstable_now()-E<R)}function I(){if(j=!1,C){var S=l.unstable_now();E=S;var _=!0;try{e:{A=!1,w&&(w=!1,D(B),B=-1),y=!0;var q=x;try{t:{for(k(S),g=t(h);g!==null&&!(g.expirationTime>S&&O());){var Y=g.callback;if(typeof Y=="function"){g.callback=null,x=g.priorityLevel;var ee=Y(g.expirationTime<=S);if(S=l.unstable_now(),typeof ee=="function"){g.callback=ee,k(S),_=!0;break t}g===t(h)&&s(h),k(S)}else s(h);g=t(h)}if(g!==null)_=!0;else{var F=t(p);F!==null&&$(U,F.startTime-S),_=!1}}break e}finally{g=null,x=q,y=!1}_=void 0}}finally{_?V():C=!1}}}var V;if(typeof L=="function")V=function(){L(I)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,H=z.port2;z.port1.onmessage=I,V=function(){H.postMessage(null)}}else V=function(){N(I,0)};function $(S,_){B=N(function(){S(l.unstable_now())},_)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(S){S.callback=null},l.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<S?Math.floor(1e3/S):5},l.unstable_getCurrentPriorityLevel=function(){return x},l.unstable_next=function(S){switch(x){case 1:case 2:case 3:var _=3;break;default:_=x}var q=x;x=_;try{return S()}finally{x=q}},l.unstable_requestPaint=function(){j=!0},l.unstable_runWithPriority=function(S,_){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var q=x;x=S;try{return _()}finally{x=q}},l.unstable_scheduleCallback=function(S,_,q){var Y=l.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Y+q:Y):q=Y,S){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=q+ee,S={id:f++,callback:_,priorityLevel:S,startTime:q,expirationTime:ee,sortIndex:-1},q>Y?(S.sortIndex=q,e(p,S),t(h)===null&&S===t(p)&&(w?(D(B),B=-1):w=!0,$(U,q-Y))):(S.sortIndex=ee,e(h,S),A||y||(A=!0,C||(C=!0,V()))),S},l.unstable_shouldYield=O,l.unstable_wrapCallback=function(S){var _=x;return function(){var q=x;x=_;try{return S.apply(this,arguments)}finally{x=q}}}})(gf)),gf}var Kx;function VA(){return Kx||(Kx=1,pf.exports=HA()),pf.exports}var xf={exports:{}},os={};var Qx;function qA(){if(Qx)return os;Qx=1;var l=lm();function e(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)p+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function r(h,p,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:h,containerInfo:p,implementation:f}}var c=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return os.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,os.createPortal=function(h,p){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return r(h,p,null,f)},os.flushSync=function(h){var p=c.T,f=s.p;try{if(c.T=null,s.p=2,h)return h()}finally{c.T=p,s.p=f,s.d.f()}},os.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(h,p))},os.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},os.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var f=p.as,g=u(f,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,y=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;f==="style"?s.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:g,integrity:x,fetchPriority:y}):f==="script"&&s.d.X(h,{crossOrigin:g,integrity:x,fetchPriority:y,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},os.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var f=u(p.as,p.crossOrigin);s.d.M(h,{crossOrigin:f,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(h)},os.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var f=p.as,g=u(f,p.crossOrigin);s.d.L(h,f,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},os.preloadModule=function(h,p){if(typeof h=="string")if(p){var f=u(p.as,p.crossOrigin);s.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:f,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(h)},os.requestFormReset=function(h){s.d.r(h)},os.unstable_batchedUpdates=function(h,p){return h(p)},os.useFormState=function(h,p,f){return c.H.useFormState(h,p,f)},os.useFormStatus=function(){return c.H.useHostTransitionStatus()},os.version="19.2.3",os}var Zx;function GA(){if(Zx)return xf.exports;Zx=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(e){console.error(e)}}return l(),xf.exports=qA(),xf.exports}var Jx;function $A(){if(Jx)return Oo;Jx=1;var l=VA(),e=lm(),t=GA();function s(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function r(n){var a=n,d=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(d=a.return),n=a.return;while(n)}return a.tag===3?d:null}function c(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function u(n){if(n.tag===31){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function h(n){if(r(n)!==n)throw Error(s(188))}function p(n){var a=n.alternate;if(!a){if(a=r(n),a===null)throw Error(s(188));return a!==n?null:n}for(var d=n,m=a;;){var b=d.return;if(b===null)break;var v=b.alternate;if(v===null){if(m=b.return,m!==null){d=m;continue}break}if(b.child===v.child){for(v=b.child;v;){if(v===d)return h(b),n;if(v===m)return h(b),a;v=v.sibling}throw Error(s(188))}if(d.return!==m.return)d=b,m=v;else{for(var T=!1,P=b.child;P;){if(P===d){T=!0,d=b,m=v;break}if(P===m){T=!0,m=b,d=v;break}P=P.sibling}if(!T){for(P=v.child;P;){if(P===d){T=!0,d=v,m=b;break}if(P===m){T=!0,m=v,d=b;break}P=P.sibling}if(!T)throw Error(s(189))}}if(d.alternate!==m)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?n:a}function f(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=f(n),a!==null)return a;n=n.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),L=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function V(n){return n===null||typeof n!="object"?null:(n=I&&n[I]||n["@@iterator"],typeof n=="function"?n:null)}var z=Symbol.for("react.client.reference");function H(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===z?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case w:return"Fragment";case N:return"Profiler";case j:return"StrictMode";case U:return"Suspense";case C:return"SuspenseList";case E:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case A:return"Portal";case L:return n.displayName||"Context";case D:return(n._context.displayName||"Context")+".Consumer";case k:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case B:return a=n.displayName||null,a!==null?a:H(n.type)||"Memo";case R:a=n._payload,n=n._init;try{return H(n(a))}catch{}}return null}var $=Array.isArray,S=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},Y=[],ee=-1;function F(n){return{current:n}}function G(n){0>ee||(n.current=Y[ee],Y[ee]=null,ee--)}function Z(n,a){ee++,Y[ee]=n.current,n.current=a}var Q=F(null),K=F(null),de=F(null),ue=F(null);function ve(n,a){switch(Z(de,a),Z(K,n),Z(Q,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?hx(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=hx(a),n=fx(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}G(Q),Z(Q,n)}function he(){G(Q),G(K),G(de)}function xe(n){n.memoizedState!==null&&Z(ue,n);var a=Q.current,d=fx(a,n.type);a!==d&&(Z(K,n),Z(Q,d))}function Pe(n){K.current===n&&(G(Q),G(K)),ue.current===n&&(G(ue),Ro._currentValue=q)}var $e,Ce;function Ee(n){if($e===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);$e=a&&a[1]||"",Ce=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$e+n+Ce}var Ne=!1;function Le(n,a){if(!n||Ne)return"";Ne=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(a){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ae){var ne=ae}Reflect.construct(n,[],ce)}else{try{ce.call()}catch(ae){ne=ae}n.call(ce.prototype)}}else{try{throw Error()}catch(ae){ne=ae}(ce=n())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ae){if(ae&&ne&&typeof ae.stack=="string")return[ae.stack,ne.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=m.DetermineComponentFrameRoot(),T=v[0],P=v[1];if(T&&P){var X=T.split(`
`),se=P.split(`
`);for(b=m=0;m<X.length&&!X[m].includes("DetermineComponentFrameRoot");)m++;for(;b<se.length&&!se[b].includes("DetermineComponentFrameRoot");)b++;if(m===X.length||b===se.length)for(m=X.length-1,b=se.length-1;1<=m&&0<=b&&X[m]!==se[b];)b--;for(;1<=m&&0<=b;m--,b--)if(X[m]!==se[b]){if(m!==1||b!==1)do if(m--,b--,0>b||X[m]!==se[b]){var re=`
`+X[m].replace(" at new "," at ");return n.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",n.displayName)),re}while(1<=m&&0<=b);break}}}finally{Ne=!1,Error.prepareStackTrace=d}return(d=n?n.displayName||n.name:"")?Ee(d):""}function Ye(n,a){switch(n.tag){case 26:case 27:case 5:return Ee(n.type);case 16:return Ee("Lazy");case 13:return n.child!==a&&a!==null?Ee("Suspense Fallback"):Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 15:return Le(n.type,!1);case 11:return Le(n.type.render,!1);case 1:return Le(n.type,!0);case 31:return Ee("Activity");default:return""}}function qe(n){try{var a="",d=null;do a+=Ye(n,d),d=n,n=n.return;while(n);return a}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var dt=Object.prototype.hasOwnProperty,Et=l.unstable_scheduleCallback,Qe=l.unstable_cancelCallback,Xt=l.unstable_shouldYield,ft=l.unstable_requestPaint,ke=l.unstable_now,Wt=l.unstable_getCurrentPriorityLevel,Rs=l.unstable_ImmediatePriority,is=l.unstable_UserBlockingPriority,et=l.unstable_NormalPriority,It=l.unstable_LowPriority,Nt=l.unstable_IdlePriority,ks=l.log,gs=l.unstable_setDisableYieldValue,hs=null,mt=null;function as(n){if(typeof ks=="function"&&gs(n),mt&&typeof mt.setStrictMode=="function")try{mt.setStrictMode(hs,n)}catch{}}var Kt=Math.clz32?Math.clz32:wl,Zd=Math.log,Hr=Math.LN2;function wl(n){return n>>>=0,n===0?32:31-(Zd(n)/Hr|0)|0}var jn=256,ja=262144,Ds=4194304;function rs(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function dn(n,a,d){var m=n.pendingLanes;if(m===0)return 0;var b=0,v=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var P=m&134217727;return P!==0?(m=P&~v,m!==0?b=rs(m):(T&=P,T!==0?b=rs(T):d||(d=P&~n,d!==0&&(b=rs(d))))):(P=m&~v,P!==0?b=rs(P):T!==0?b=rs(T):d||(d=m&~n,d!==0&&(b=rs(d)))),b===0?0:a!==0&&a!==b&&(a&v)===0&&(v=b&-b,d=a&-a,v>=d||v===32&&(d&4194048)!==0)?a:b}function un(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function Al(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sn(){var n=Ds;return Ds<<=1,(Ds&62914560)===0&&(Ds=4194304),n}function hn(n){for(var a=[],d=0;31>d;d++)a.push(n);return a}function Vr(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ew(n,a,d,m,b,v){var T=n.pendingLanes;n.pendingLanes=d,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=d,n.entangledLanes&=d,n.errorRecoveryDisabledLanes&=d,n.shellSuspendCounter=0;var P=n.entanglements,X=n.expirationTimes,se=n.hiddenUpdates;for(d=T&~d;0<d;){var re=31-Kt(d),ce=1<<re;P[re]=0,X[re]=-1;var ne=se[re];if(ne!==null)for(se[re]=null,re=0;re<ne.length;re++){var ae=ne[re];ae!==null&&(ae.lane&=-536870913)}d&=~ce}m!==0&&Xm(n,m,0),v!==0&&b===0&&n.tag!==0&&(n.suspendedLanes|=v&~(T&~a))}function Xm(n,a,d){n.pendingLanes|=a,n.suspendedLanes&=~a;var m=31-Kt(a);n.entangledLanes|=a,n.entanglements[m]=n.entanglements[m]|1073741824|d&261930}function Wm(n,a){var d=n.entangledLanes|=a;for(n=n.entanglements;d;){var m=31-Kt(d),b=1<<m;b&a|n[m]&a&&(n[m]|=a),d&=~b}}function Km(n,a){var d=a&-a;return d=(d&42)!==0?1:Jd(d),(d&(n.suspendedLanes|a))!==0?0:d}function Jd(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function eu(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Qm(){var n=_.p;return n!==0?n:(n=window.event,n===void 0?32:Bx(n.type))}function Zm(n,a){var d=_.p;try{return _.p=n,a()}finally{_.p=d}}var hi=Math.random().toString(36).slice(2),Qt="__reactFiber$"+hi,xs="__reactProps$"+hi,Sa="__reactContainer$"+hi,tu="__reactEvents$"+hi,Cw="__reactListeners$"+hi,Tw="__reactHandles$"+hi,Jm="__reactResources$"+hi,qr="__reactMarker$"+hi;function su(n){delete n[Qt],delete n[xs],delete n[tu],delete n[Cw],delete n[Tw]}function _a(n){var a=n[Qt];if(a)return a;for(var d=n.parentNode;d;){if(a=d[Sa]||d[Qt]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(n=vx(n);n!==null;){if(d=n[Qt])return d;n=vx(n)}return a}n=d,d=n.parentNode}return null}function Ea(n){if(n=n[Qt]||n[Sa]){var a=n.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return n}return null}function Gr(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(s(33))}function Ca(n){var a=n[Jm];return a||(a=n[Jm]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function zt(n){n[qr]=!0}var ep=new Set,tp={};function Hi(n,a){Ta(n,a),Ta(n+"Capture",a)}function Ta(n,a){for(tp[n]=a,n=0;n<a.length;n++)ep.add(a[n])}var Rw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sp={},np={};function kw(n){return dt.call(np,n)?!0:dt.call(sp,n)?!1:Rw.test(n)?np[n]=!0:(sp[n]=!0,!1)}function Nl(n,a,d){if(kw(a))if(d===null)n.removeAttribute(a);else{switch(typeof d){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var m=a.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+d)}}function jl(n,a,d){if(d===null)n.removeAttribute(a);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+d)}}function Hn(n,a,d,m){if(m===null)n.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(d);return}n.setAttributeNS(a,d,""+m)}}function Xs(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ip(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Dw(n,a,d){var m=Object.getOwnPropertyDescriptor(n.constructor.prototype,a);if(!n.hasOwnProperty(a)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,v=m.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return b.call(this)},set:function(T){d=""+T,v.call(this,T)}}),Object.defineProperty(n,a,{enumerable:m.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function nu(n){if(!n._valueTracker){var a=ip(n)?"checked":"value";n._valueTracker=Dw(n,a,""+n[a])}}function ap(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var d=a.getValue(),m="";return n&&(m=ip(n)?n.checked?"true":"false":n.value),n=m,n!==d?(a.setValue(n),!0):!1}function Sl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Mw=/[\n"\\]/g;function Ws(n){return n.replace(Mw,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function iu(n,a,d,m,b,v,T,P){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),a!=null?T==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+Xs(a)):n.value!==""+Xs(a)&&(n.value=""+Xs(a)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),a!=null?au(n,T,Xs(a)):d!=null?au(n,T,Xs(d)):m!=null&&n.removeAttribute("value"),b==null&&v!=null&&(n.defaultChecked=!!v),b!=null&&(n.checked=b&&typeof b!="function"&&typeof b!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?n.name=""+Xs(P):n.removeAttribute("name")}function rp(n,a,d,m,b,v,T,P){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.type=v),a!=null||d!=null){if(!(v!=="submit"&&v!=="reset"||a!=null)){nu(n);return}d=d!=null?""+Xs(d):"",a=a!=null?""+Xs(a):d,P||a===n.value||(n.value=a),n.defaultValue=a}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,n.checked=P?n.checked:!!m,n.defaultChecked=!!m,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T),nu(n)}function au(n,a,d){a==="number"&&Sl(n.ownerDocument)===n||n.defaultValue===""+d||(n.defaultValue=""+d)}function Ra(n,a,d,m){if(n=n.options,a){a={};for(var b=0;b<d.length;b++)a["$"+d[b]]=!0;for(d=0;d<n.length;d++)b=a.hasOwnProperty("$"+n[d].value),n[d].selected!==b&&(n[d].selected=b),b&&m&&(n[d].defaultSelected=!0)}else{for(d=""+Xs(d),a=null,b=0;b<n.length;b++){if(n[b].value===d){n[b].selected=!0,m&&(n[b].defaultSelected=!0);return}a!==null||n[b].disabled||(a=n[b])}a!==null&&(a.selected=!0)}}function op(n,a,d){if(a!=null&&(a=""+Xs(a),a!==n.value&&(n.value=a),d==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=d!=null?""+Xs(d):""}function lp(n,a,d,m){if(a==null){if(m!=null){if(d!=null)throw Error(s(92));if($(m)){if(1<m.length)throw Error(s(93));m=m[0]}d=m}d==null&&(d=""),a=d}d=Xs(a),n.defaultValue=d,m=n.textContent,m===d&&m!==""&&m!==null&&(n.value=m),nu(n)}function ka(n,a){if(a){var d=n.firstChild;if(d&&d===n.lastChild&&d.nodeType===3){d.nodeValue=a;return}}n.textContent=a}var Lw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cp(n,a,d){var m=a.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":m?n.setProperty(a,d):typeof d!="number"||d===0||Lw.has(a)?a==="float"?n.cssFloat=d:n[a]=(""+d).trim():n[a]=d+"px"}function dp(n,a,d){if(a!=null&&typeof a!="object")throw Error(s(62));if(n=n.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||a!=null&&a.hasOwnProperty(m)||(m.indexOf("--")===0?n.setProperty(m,""):m==="float"?n.cssFloat="":n[m]="");for(var b in a)m=a[b],a.hasOwnProperty(b)&&d[b]!==m&&cp(n,b,m)}else for(var v in a)a.hasOwnProperty(v)&&cp(n,v,a[v])}function ru(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ow=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _l(n){return Bw.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Vn(){}var ou=null;function lu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Da=null,Ma=null;function up(n){var a=Ea(n);if(a&&(n=a.stateNode)){var d=n[xs]||null;e:switch(n=a.stateNode,a.type){case"input":if(iu(n,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),a=d.name,d.type==="radio"&&a!=null){for(d=n;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Ws(""+a)+'"][type="radio"]'),a=0;a<d.length;a++){var m=d[a];if(m!==n&&m.form===n.form){var b=m[xs]||null;if(!b)throw Error(s(90));iu(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(a=0;a<d.length;a++)m=d[a],m.form===n.form&&ap(m)}break e;case"textarea":op(n,d.value,d.defaultValue);break e;case"select":a=d.value,a!=null&&Ra(n,!!d.multiple,a,!1)}}}var cu=!1;function hp(n,a,d){if(cu)return n(a,d);cu=!0;try{var m=n(a);return m}finally{if(cu=!1,(Da!==null||Ma!==null)&&(fc(),Da&&(a=Da,n=Ma,Ma=Da=null,up(a),n)))for(a=0;a<n.length;a++)up(n[a])}}function $r(n,a){var d=n.stateNode;if(d===null)return null;var m=d[xs]||null;if(m===null)return null;d=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(n=n.type,m=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!m;break e;default:n=!1}if(n)return null;if(d&&typeof d!="function")throw Error(s(231,a,typeof d));return d}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),du=!1;if(qn)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){du=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{du=!1}var fi=null,uu=null,El=null;function fp(){if(El)return El;var n,a=uu,d=a.length,m,b="value"in fi?fi.value:fi.textContent,v=b.length;for(n=0;n<d&&a[n]===b[n];n++);var T=d-n;for(m=1;m<=T&&a[d-m]===b[v-m];m++);return El=b.slice(n,1<m?1-m:void 0)}function Cl(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Tl(){return!0}function mp(){return!1}function bs(n){function a(d,m,b,v,T){this._reactName=d,this._targetInst=b,this.type=m,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(d=n[P],this[P]=d?d(v):v[P]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Tl:mp,this.isPropagationStopped=mp,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Tl)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Tl)},persist:function(){},isPersistent:Tl}),a}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rl=bs(Vi),Xr=g({},Vi,{view:0,detail:0}),Pw=bs(Xr),hu,fu,Wr,kl=g({},Xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Wr&&(Wr&&n.type==="mousemove"?(hu=n.screenX-Wr.screenX,fu=n.screenY-Wr.screenY):fu=hu=0,Wr=n),hu)},movementY:function(n){return"movementY"in n?n.movementY:fu}}),pp=bs(kl),Fw=g({},kl,{dataTransfer:0}),Uw=bs(Fw),Iw=g({},Xr,{relatedTarget:0}),mu=bs(Iw),zw=g({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),Hw=bs(zw),Vw=g({},Vi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),qw=bs(Vw),Gw=g({},Vi,{data:0}),gp=bs(Gw),$w={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ww(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=Xw[n])?!!a[n]:!1}function pu(){return Ww}var Kw=g({},Xr,{key:function(n){if(n.key){var a=$w[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=Cl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Yw[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pu,charCode:function(n){return n.type==="keypress"?Cl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Cl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Qw=bs(Kw),Zw=g({},kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xp=bs(Zw),Jw=g({},Xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pu}),e1=bs(Jw),t1=g({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),s1=bs(t1),n1=g({},kl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),i1=bs(n1),a1=g({},Vi,{newState:0,oldState:0}),r1=bs(a1),o1=[9,13,27,32],gu=qn&&"CompositionEvent"in window,Kr=null;qn&&"documentMode"in document&&(Kr=document.documentMode);var l1=qn&&"TextEvent"in window&&!Kr,bp=qn&&(!gu||Kr&&8<Kr&&11>=Kr),yp=" ",vp=!1;function wp(n,a){switch(n){case"keyup":return o1.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ap(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var La=!1;function c1(n,a){switch(n){case"compositionend":return Ap(a);case"keypress":return a.which!==32?null:(vp=!0,yp);case"textInput":return n=a.data,n===yp&&vp?null:n;default:return null}}function d1(n,a){if(La)return n==="compositionend"||!gu&&wp(n,a)?(n=fp(),El=uu=fi=null,La=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return bp&&a.locale!=="ko"?null:a.data;default:return null}}var u1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Np(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!u1[n.type]:a==="textarea"}function jp(n,a,d,m){Da?Ma?Ma.push(m):Ma=[m]:Da=m,a=vc(a,"onChange"),0<a.length&&(d=new Rl("onChange","change",null,d,m),n.push({event:d,listeners:a}))}var Qr=null,Zr=null;function h1(n){rx(n,0)}function Dl(n){var a=Gr(n);if(ap(a))return n}function Sp(n,a){if(n==="change")return a}var _p=!1;if(qn){var xu;if(qn){var bu="oninput"in document;if(!bu){var Ep=document.createElement("div");Ep.setAttribute("oninput","return;"),bu=typeof Ep.oninput=="function"}xu=bu}else xu=!1;_p=xu&&(!document.documentMode||9<document.documentMode)}function Cp(){Qr&&(Qr.detachEvent("onpropertychange",Tp),Zr=Qr=null)}function Tp(n){if(n.propertyName==="value"&&Dl(Zr)){var a=[];jp(a,Zr,n,lu(n)),hp(h1,a)}}function f1(n,a,d){n==="focusin"?(Cp(),Qr=a,Zr=d,Qr.attachEvent("onpropertychange",Tp)):n==="focusout"&&Cp()}function m1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Dl(Zr)}function p1(n,a){if(n==="click")return Dl(a)}function g1(n,a){if(n==="input"||n==="change")return Dl(a)}function x1(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var Ms=typeof Object.is=="function"?Object.is:x1;function Jr(n,a){if(Ms(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var d=Object.keys(n),m=Object.keys(a);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var b=d[m];if(!dt.call(a,b)||!Ms(n[b],a[b]))return!1}return!0}function Rp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function kp(n,a){var d=Rp(n);n=0;for(var m;d;){if(d.nodeType===3){if(m=n+d.textContent.length,n<=a&&m>=a)return{node:d,offset:a-n};n=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Rp(d)}}function Dp(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?Dp(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function Mp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=Sl(n.document);a instanceof n.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)n=a.contentWindow;else break;a=Sl(n.document)}return a}function yu(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var b1=qn&&"documentMode"in document&&11>=document.documentMode,Oa=null,vu=null,eo=null,wu=!1;function Lp(n,a,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;wu||Oa==null||Oa!==Sl(m)||(m=Oa,"selectionStart"in m&&yu(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),eo&&Jr(eo,m)||(eo=m,m=vc(vu,"onSelect"),0<m.length&&(a=new Rl("onSelect","select",null,a,d),n.push({event:a,listeners:m}),a.target=Oa)))}function qi(n,a){var d={};return d[n.toLowerCase()]=a.toLowerCase(),d["Webkit"+n]="webkit"+a,d["Moz"+n]="moz"+a,d}var Ba={animationend:qi("Animation","AnimationEnd"),animationiteration:qi("Animation","AnimationIteration"),animationstart:qi("Animation","AnimationStart"),transitionrun:qi("Transition","TransitionRun"),transitionstart:qi("Transition","TransitionStart"),transitioncancel:qi("Transition","TransitionCancel"),transitionend:qi("Transition","TransitionEnd")},Au={},Op={};qn&&(Op=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function Gi(n){if(Au[n])return Au[n];if(!Ba[n])return n;var a=Ba[n],d;for(d in a)if(a.hasOwnProperty(d)&&d in Op)return Au[n]=a[d];return n}var Bp=Gi("animationend"),Pp=Gi("animationiteration"),Fp=Gi("animationstart"),y1=Gi("transitionrun"),v1=Gi("transitionstart"),w1=Gi("transitioncancel"),Up=Gi("transitionend"),Ip=new Map,Nu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nu.push("scrollEnd");function fn(n,a){Ip.set(n,a),Hi(a,[n])}var Ml=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Ks=[],Pa=0,ju=0;function Ll(){for(var n=Pa,a=ju=Pa=0;a<n;){var d=Ks[a];Ks[a++]=null;var m=Ks[a];Ks[a++]=null;var b=Ks[a];Ks[a++]=null;var v=Ks[a];if(Ks[a++]=null,m!==null&&b!==null){var T=m.pending;T===null?b.next=b:(b.next=T.next,T.next=b),m.pending=b}v!==0&&zp(d,b,v)}}function Ol(n,a,d,m){Ks[Pa++]=n,Ks[Pa++]=a,Ks[Pa++]=d,Ks[Pa++]=m,ju|=m,n.lanes|=m,n=n.alternate,n!==null&&(n.lanes|=m)}function Su(n,a,d,m){return Ol(n,a,d,m),Bl(n)}function $i(n,a){return Ol(n,null,null,a),Bl(n)}function zp(n,a,d){n.lanes|=d;var m=n.alternate;m!==null&&(m.lanes|=d);for(var b=!1,v=n.return;v!==null;)v.childLanes|=d,m=v.alternate,m!==null&&(m.childLanes|=d),v.tag===22&&(n=v.stateNode,n===null||n._visibility&1||(b=!0)),n=v,v=v.return;return n.tag===3?(v=n.stateNode,b&&a!==null&&(b=31-Kt(d),n=v.hiddenUpdates,m=n[b],m===null?n[b]=[a]:m.push(a),a.lane=d|536870912),v):null}function Bl(n){if(50<No)throw No=0,Lh=null,Error(s(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var Fa={};function A1(n,a,d,m){this.tag=n,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(n,a,d,m){return new A1(n,a,d,m)}function _u(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Gn(n,a){var d=n.alternate;return d===null?(d=Ls(n.tag,a,n.key,n.mode),d.elementType=n.elementType,d.type=n.type,d.stateNode=n.stateNode,d.alternate=n,n.alternate=d):(d.pendingProps=a,d.type=n.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=n.flags&65011712,d.childLanes=n.childLanes,d.lanes=n.lanes,d.child=n.child,d.memoizedProps=n.memoizedProps,d.memoizedState=n.memoizedState,d.updateQueue=n.updateQueue,a=n.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=n.sibling,d.index=n.index,d.ref=n.ref,d.refCleanup=n.refCleanup,d}function Hp(n,a){n.flags&=65011714;var d=n.alternate;return d===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=d.childLanes,n.lanes=d.lanes,n.child=d.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=d.memoizedProps,n.memoizedState=d.memoizedState,n.updateQueue=d.updateQueue,n.type=d.type,a=d.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function Pl(n,a,d,m,b,v){var T=0;if(m=n,typeof n=="function")_u(n)&&(T=1);else if(typeof n=="string")T=EA(n,d,Q.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case E:return n=Ls(31,d,a,b),n.elementType=E,n.lanes=v,n;case w:return Yi(d.children,b,v,a);case j:T=8,b|=24;break;case N:return n=Ls(12,d,a,b|2),n.elementType=N,n.lanes=v,n;case U:return n=Ls(13,d,a,b),n.elementType=U,n.lanes=v,n;case C:return n=Ls(19,d,a,b),n.elementType=C,n.lanes=v,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case L:T=10;break e;case D:T=9;break e;case k:T=11;break e;case B:T=14;break e;case R:T=16,m=null;break e}T=29,d=Error(s(130,n===null?"null":typeof n,"")),m=null}return a=Ls(T,d,a,b),a.elementType=n,a.type=m,a.lanes=v,a}function Yi(n,a,d,m){return n=Ls(7,n,m,a),n.lanes=d,n}function Eu(n,a,d){return n=Ls(6,n,null,a),n.lanes=d,n}function Vp(n){var a=Ls(18,null,null,0);return a.stateNode=n,a}function Cu(n,a,d){return a=Ls(4,n.children!==null?n.children:[],n.key,a),a.lanes=d,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var qp=new WeakMap;function Qs(n,a){if(typeof n=="object"&&n!==null){var d=qp.get(n);return d!==void 0?d:(a={value:n,source:a,stack:qe(a)},qp.set(n,a),a)}return{value:n,source:a,stack:qe(a)}}var Ua=[],Ia=0,Fl=null,to=0,Zs=[],Js=0,mi=null,_n=1,En="";function $n(n,a){Ua[Ia++]=to,Ua[Ia++]=Fl,Fl=n,to=a}function Gp(n,a,d){Zs[Js++]=_n,Zs[Js++]=En,Zs[Js++]=mi,mi=n;var m=_n;n=En;var b=32-Kt(m)-1;m&=~(1<<b),d+=1;var v=32-Kt(a)+b;if(30<v){var T=b-b%5;v=(m&(1<<T)-1).toString(32),m>>=T,b-=T,_n=1<<32-Kt(a)+b|d<<b|m,En=v+n}else _n=1<<v|d<<b|m,En=n}function Tu(n){n.return!==null&&($n(n,1),Gp(n,1,0))}function Ru(n){for(;n===Fl;)Fl=Ua[--Ia],Ua[Ia]=null,to=Ua[--Ia],Ua[Ia]=null;for(;n===mi;)mi=Zs[--Js],Zs[Js]=null,En=Zs[--Js],Zs[Js]=null,_n=Zs[--Js],Zs[Js]=null}function $p(n,a){Zs[Js++]=_n,Zs[Js++]=En,Zs[Js++]=mi,_n=a.id,En=a.overflow,mi=n}var Zt=null,ut=null,ze=!1,pi=null,en=!1,ku=Error(s(519));function gi(n){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw so(Qs(a,n)),ku}function Yp(n){var a=n.stateNode,d=n.type,m=n.memoizedProps;switch(a[Qt]=n,a[xs]=m,d){case"dialog":Be("cancel",a),Be("close",a);break;case"iframe":case"object":case"embed":Be("load",a);break;case"video":case"audio":for(d=0;d<So.length;d++)Be(So[d],a);break;case"source":Be("error",a);break;case"img":case"image":case"link":Be("error",a),Be("load",a);break;case"details":Be("toggle",a);break;case"input":Be("invalid",a),rp(a,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Be("invalid",a);break;case"textarea":Be("invalid",a),lp(a,m.value,m.defaultValue,m.children)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||a.textContent===""+d||m.suppressHydrationWarning===!0||dx(a.textContent,d)?(m.popover!=null&&(Be("beforetoggle",a),Be("toggle",a)),m.onScroll!=null&&Be("scroll",a),m.onScrollEnd!=null&&Be("scrollend",a),m.onClick!=null&&(a.onclick=Vn),a=!0):a=!1,a||gi(n,!0)}function Xp(n){for(Zt=n.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:en=!1;return;case 27:case 3:en=!0;return;default:Zt=Zt.return}}function za(n){if(n!==Zt)return!1;if(!ze)return Xp(n),ze=!0,!1;var a=n.tag,d;if((d=a!==3&&a!==27)&&((d=a===5)&&(d=n.type,d=!(d!=="form"&&d!=="button")||Wh(n.type,n.memoizedProps)),d=!d),d&&ut&&gi(n),Xp(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));ut=yx(n)}else if(a===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));ut=yx(n)}else a===27?(a=ut,Ri(n.type)?(n=ef,ef=null,ut=n):ut=a):ut=Zt?sn(n.stateNode.nextSibling):null;return!0}function Xi(){ut=Zt=null,ze=!1}function Du(){var n=pi;return n!==null&&(As===null?As=n:As.push.apply(As,n),pi=null),n}function so(n){pi===null?pi=[n]:pi.push(n)}var Mu=F(null),Wi=null,Yn=null;function xi(n,a,d){Z(Mu,a._currentValue),a._currentValue=d}function Xn(n){n._currentValue=Mu.current,G(Mu)}function Lu(n,a,d){for(;n!==null;){var m=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),n===d)break;n=n.return}}function Ou(n,a,d,m){var b=n.child;for(b!==null&&(b.return=n);b!==null;){var v=b.dependencies;if(v!==null){var T=b.child;v=v.firstContext;e:for(;v!==null;){var P=v;v=b;for(var X=0;X<a.length;X++)if(P.context===a[X]){v.lanes|=d,P=v.alternate,P!==null&&(P.lanes|=d),Lu(v.return,d,n),m||(T=null);break e}v=P.next}}else if(b.tag===18){if(T=b.return,T===null)throw Error(s(341));T.lanes|=d,v=T.alternate,v!==null&&(v.lanes|=d),Lu(T,d,n),T=null}else T=b.child;if(T!==null)T.return=b;else for(T=b;T!==null;){if(T===n){T=null;break}if(b=T.sibling,b!==null){b.return=T.return,T=b;break}T=T.return}b=T}}function Ha(n,a,d,m){n=null;for(var b=a,v=!1;b!==null;){if(!v){if((b.flags&524288)!==0)v=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var T=b.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var P=b.type;Ms(b.pendingProps.value,T.value)||(n!==null?n.push(P):n=[P])}}else if(b===ue.current){if(T=b.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(n!==null?n.push(Ro):n=[Ro])}b=b.return}n!==null&&Ou(a,n,d,m),a.flags|=262144}function Ul(n){for(n=n.firstContext;n!==null;){if(!Ms(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ki(n){Wi=n,Yn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Jt(n){return Wp(Wi,n)}function Il(n,a){return Wi===null&&Ki(n),Wp(n,a)}function Wp(n,a){var d=a._currentValue;if(a={context:a,memoizedValue:d,next:null},Yn===null){if(n===null)throw Error(s(308));Yn=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else Yn=Yn.next=a;return d}var N1=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(d,m){n.push(m)}};this.abort=function(){a.aborted=!0,n.forEach(function(d){return d()})}},j1=l.unstable_scheduleCallback,S1=l.unstable_NormalPriority,Mt={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bu(){return{controller:new N1,data:new Map,refCount:0}}function no(n){n.refCount--,n.refCount===0&&j1(S1,function(){n.controller.abort()})}var io=null,Pu=0,Va=0,qa=null;function _1(n,a){if(io===null){var d=io=[];Pu=0,Va=Ih(),qa={status:"pending",value:void 0,then:function(m){d.push(m)}}}return Pu++,a.then(Kp,Kp),a}function Kp(){if(--Pu===0&&io!==null){qa!==null&&(qa.status="fulfilled");var n=io;io=null,Va=0,qa=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function E1(n,a){var d=[],m={status:"pending",value:null,reason:null,then:function(b){d.push(b)}};return n.then(function(){m.status="fulfilled",m.value=a;for(var b=0;b<d.length;b++)(0,d[b])(a)},function(b){for(m.status="rejected",m.reason=b,b=0;b<d.length;b++)(0,d[b])(void 0)}),m}var Qp=S.S;S.S=function(n,a){L0=ke(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&_1(n,a),Qp!==null&&Qp(n,a)};var Qi=F(null);function Fu(){var n=Qi.current;return n!==null?n:ot.pooledCache}function zl(n,a){a===null?Z(Qi,Qi.current):Z(Qi,a.pool)}function Zp(){var n=Fu();return n===null?null:{parent:Mt._currentValue,pool:n}}var Ga=Error(s(460)),Uu=Error(s(474)),Hl=Error(s(542)),Vl={then:function(){}};function Jp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function eg(n,a,d){switch(d=n[d],d===void 0?n.push(a):d!==a&&(a.then(Vn,Vn),a=d),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,sg(n),n;default:if(typeof a.status=="string")a.then(Vn,Vn);else{if(n=ot,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=a,n.status="pending",n.then(function(m){if(a.status==="pending"){var b=a;b.status="fulfilled",b.value=m}},function(m){if(a.status==="pending"){var b=a;b.status="rejected",b.reason=m}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,sg(n),n}throw Ji=a,Ga}}function Zi(n){try{var a=n._init;return a(n._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(Ji=d,Ga):d}}var Ji=null;function tg(){if(Ji===null)throw Error(s(459));var n=Ji;return Ji=null,n}function sg(n){if(n===Ga||n===Hl)throw Error(s(483))}var $a=null,ao=0;function ql(n){var a=ao;return ao+=1,$a===null&&($a=[]),eg($a,n,a)}function ro(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function Gl(n,a){throw a.$$typeof===x?Error(s(525)):(n=Object.prototype.toString.call(a),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function ng(n){function a(J,W){if(n){var te=J.deletions;te===null?(J.deletions=[W],J.flags|=16):te.push(W)}}function d(J,W){if(!n)return null;for(;W!==null;)a(J,W),W=W.sibling;return null}function m(J){for(var W=new Map;J!==null;)J.key!==null?W.set(J.key,J):W.set(J.index,J),J=J.sibling;return W}function b(J,W){return J=Gn(J,W),J.index=0,J.sibling=null,J}function v(J,W,te){return J.index=te,n?(te=J.alternate,te!==null?(te=te.index,te<W?(J.flags|=67108866,W):te):(J.flags|=67108866,W)):(J.flags|=1048576,W)}function T(J){return n&&J.alternate===null&&(J.flags|=67108866),J}function P(J,W,te,oe){return W===null||W.tag!==6?(W=Eu(te,J.mode,oe),W.return=J,W):(W=b(W,te),W.return=J,W)}function X(J,W,te,oe){var be=te.type;return be===w?re(J,W,te.props.children,oe,te.key):W!==null&&(W.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===R&&Zi(be)===W.type)?(W=b(W,te.props),ro(W,te),W.return=J,W):(W=Pl(te.type,te.key,te.props,null,J.mode,oe),ro(W,te),W.return=J,W)}function se(J,W,te,oe){return W===null||W.tag!==4||W.stateNode.containerInfo!==te.containerInfo||W.stateNode.implementation!==te.implementation?(W=Cu(te,J.mode,oe),W.return=J,W):(W=b(W,te.children||[]),W.return=J,W)}function re(J,W,te,oe,be){return W===null||W.tag!==7?(W=Yi(te,J.mode,oe,be),W.return=J,W):(W=b(W,te),W.return=J,W)}function ce(J,W,te){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Eu(""+W,J.mode,te),W.return=J,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case y:return te=Pl(W.type,W.key,W.props,null,J.mode,te),ro(te,W),te.return=J,te;case A:return W=Cu(W,J.mode,te),W.return=J,W;case R:return W=Zi(W),ce(J,W,te)}if($(W)||V(W))return W=Yi(W,J.mode,te,null),W.return=J,W;if(typeof W.then=="function")return ce(J,ql(W),te);if(W.$$typeof===L)return ce(J,Il(J,W),te);Gl(J,W)}return null}function ne(J,W,te,oe){var be=W!==null?W.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return be!==null?null:P(J,W,""+te,oe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case y:return te.key===be?X(J,W,te,oe):null;case A:return te.key===be?se(J,W,te,oe):null;case R:return te=Zi(te),ne(J,W,te,oe)}if($(te)||V(te))return be!==null?null:re(J,W,te,oe,null);if(typeof te.then=="function")return ne(J,W,ql(te),oe);if(te.$$typeof===L)return ne(J,W,Il(J,te),oe);Gl(J,te)}return null}function ae(J,W,te,oe,be){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return J=J.get(te)||null,P(W,J,""+oe,be);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:return J=J.get(oe.key===null?te:oe.key)||null,X(W,J,oe,be);case A:return J=J.get(oe.key===null?te:oe.key)||null,se(W,J,oe,be);case R:return oe=Zi(oe),ae(J,W,te,oe,be)}if($(oe)||V(oe))return J=J.get(te)||null,re(W,J,oe,be,null);if(typeof oe.then=="function")return ae(J,W,te,ql(oe),be);if(oe.$$typeof===L)return ae(J,W,te,Il(W,oe),be);Gl(W,oe)}return null}function pe(J,W,te,oe){for(var be=null,Xe=null,ge=W,De=W=0,Ue=null;ge!==null&&De<te.length;De++){ge.index>De?(Ue=ge,ge=null):Ue=ge.sibling;var We=ne(J,ge,te[De],oe);if(We===null){ge===null&&(ge=Ue);break}n&&ge&&We.alternate===null&&a(J,ge),W=v(We,W,De),Xe===null?be=We:Xe.sibling=We,Xe=We,ge=Ue}if(De===te.length)return d(J,ge),ze&&$n(J,De),be;if(ge===null){for(;De<te.length;De++)ge=ce(J,te[De],oe),ge!==null&&(W=v(ge,W,De),Xe===null?be=ge:Xe.sibling=ge,Xe=ge);return ze&&$n(J,De),be}for(ge=m(ge);De<te.length;De++)Ue=ae(ge,J,De,te[De],oe),Ue!==null&&(n&&Ue.alternate!==null&&ge.delete(Ue.key===null?De:Ue.key),W=v(Ue,W,De),Xe===null?be=Ue:Xe.sibling=Ue,Xe=Ue);return n&&ge.forEach(function(Oi){return a(J,Oi)}),ze&&$n(J,De),be}function we(J,W,te,oe){if(te==null)throw Error(s(151));for(var be=null,Xe=null,ge=W,De=W=0,Ue=null,We=te.next();ge!==null&&!We.done;De++,We=te.next()){ge.index>De?(Ue=ge,ge=null):Ue=ge.sibling;var Oi=ne(J,ge,We.value,oe);if(Oi===null){ge===null&&(ge=Ue);break}n&&ge&&Oi.alternate===null&&a(J,ge),W=v(Oi,W,De),Xe===null?be=Oi:Xe.sibling=Oi,Xe=Oi,ge=Ue}if(We.done)return d(J,ge),ze&&$n(J,De),be;if(ge===null){for(;!We.done;De++,We=te.next())We=ce(J,We.value,oe),We!==null&&(W=v(We,W,De),Xe===null?be=We:Xe.sibling=We,Xe=We);return ze&&$n(J,De),be}for(ge=m(ge);!We.done;De++,We=te.next())We=ae(ge,J,De,We.value,oe),We!==null&&(n&&We.alternate!==null&&ge.delete(We.key===null?De:We.key),W=v(We,W,De),Xe===null?be=We:Xe.sibling=We,Xe=We);return n&&ge.forEach(function(FA){return a(J,FA)}),ze&&$n(J,De),be}function nt(J,W,te,oe){if(typeof te=="object"&&te!==null&&te.type===w&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case y:e:{for(var be=te.key;W!==null;){if(W.key===be){if(be=te.type,be===w){if(W.tag===7){d(J,W.sibling),oe=b(W,te.props.children),oe.return=J,J=oe;break e}}else if(W.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===R&&Zi(be)===W.type){d(J,W.sibling),oe=b(W,te.props),ro(oe,te),oe.return=J,J=oe;break e}d(J,W);break}else a(J,W);W=W.sibling}te.type===w?(oe=Yi(te.props.children,J.mode,oe,te.key),oe.return=J,J=oe):(oe=Pl(te.type,te.key,te.props,null,J.mode,oe),ro(oe,te),oe.return=J,J=oe)}return T(J);case A:e:{for(be=te.key;W!==null;){if(W.key===be)if(W.tag===4&&W.stateNode.containerInfo===te.containerInfo&&W.stateNode.implementation===te.implementation){d(J,W.sibling),oe=b(W,te.children||[]),oe.return=J,J=oe;break e}else{d(J,W);break}else a(J,W);W=W.sibling}oe=Cu(te,J.mode,oe),oe.return=J,J=oe}return T(J);case R:return te=Zi(te),nt(J,W,te,oe)}if($(te))return pe(J,W,te,oe);if(V(te)){if(be=V(te),typeof be!="function")throw Error(s(150));return te=be.call(te),we(J,W,te,oe)}if(typeof te.then=="function")return nt(J,W,ql(te),oe);if(te.$$typeof===L)return nt(J,W,Il(J,te),oe);Gl(J,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,W!==null&&W.tag===6?(d(J,W.sibling),oe=b(W,te),oe.return=J,J=oe):(d(J,W),oe=Eu(te,J.mode,oe),oe.return=J,J=oe),T(J)):d(J,W)}return function(J,W,te,oe){try{ao=0;var be=nt(J,W,te,oe);return $a=null,be}catch(ge){if(ge===Ga||ge===Hl)throw ge;var Xe=Ls(29,ge,null,J.mode);return Xe.lanes=oe,Xe.return=J,Xe}}}var ea=ng(!0),ig=ng(!1),bi=!1;function Iu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zu(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function yi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function vi(n,a,d){var m=n.updateQueue;if(m===null)return null;if(m=m.shared,(Ke&2)!==0){var b=m.pending;return b===null?a.next=a:(a.next=b.next,b.next=a),m.pending=a,a=Bl(n),zp(n,null,d),a}return Ol(n,m,a,d),Bl(n)}function oo(n,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194048)!==0)){var m=a.lanes;m&=n.pendingLanes,d|=m,a.lanes=d,Wm(n,d)}}function Hu(n,a){var d=n.updateQueue,m=n.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var b=null,v=null;if(d=d.firstBaseUpdate,d!==null){do{var T={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};v===null?b=v=T:v=v.next=T,d=d.next}while(d!==null);v===null?b=v=a:v=v.next=a}else b=v=a;d={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:v,shared:m.shared,callbacks:m.callbacks},n.updateQueue=d;return}n=d.lastBaseUpdate,n===null?d.firstBaseUpdate=a:n.next=a,d.lastBaseUpdate=a}var Vu=!1;function lo(){if(Vu){var n=qa;if(n!==null)throw n}}function co(n,a,d,m){Vu=!1;var b=n.updateQueue;bi=!1;var v=b.firstBaseUpdate,T=b.lastBaseUpdate,P=b.shared.pending;if(P!==null){b.shared.pending=null;var X=P,se=X.next;X.next=null,T===null?v=se:T.next=se,T=X;var re=n.alternate;re!==null&&(re=re.updateQueue,P=re.lastBaseUpdate,P!==T&&(P===null?re.firstBaseUpdate=se:P.next=se,re.lastBaseUpdate=X))}if(v!==null){var ce=b.baseState;T=0,re=se=X=null,P=v;do{var ne=P.lane&-536870913,ae=ne!==P.lane;if(ae?(Fe&ne)===ne:(m&ne)===ne){ne!==0&&ne===Va&&(Vu=!0),re!==null&&(re=re.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var pe=n,we=P;ne=a;var nt=d;switch(we.tag){case 1:if(pe=we.payload,typeof pe=="function"){ce=pe.call(nt,ce,ne);break e}ce=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=we.payload,ne=typeof pe=="function"?pe.call(nt,ce,ne):pe,ne==null)break e;ce=g({},ce,ne);break e;case 2:bi=!0}}ne=P.callback,ne!==null&&(n.flags|=64,ae&&(n.flags|=8192),ae=b.callbacks,ae===null?b.callbacks=[ne]:ae.push(ne))}else ae={lane:ne,tag:P.tag,payload:P.payload,callback:P.callback,next:null},re===null?(se=re=ae,X=ce):re=re.next=ae,T|=ne;if(P=P.next,P===null){if(P=b.shared.pending,P===null)break;ae=P,P=ae.next,ae.next=null,b.lastBaseUpdate=ae,b.shared.pending=null}}while(!0);re===null&&(X=ce),b.baseState=X,b.firstBaseUpdate=se,b.lastBaseUpdate=re,v===null&&(b.shared.lanes=0),Si|=T,n.lanes=T,n.memoizedState=ce}}function ag(n,a){if(typeof n!="function")throw Error(s(191,n));n.call(a)}function rg(n,a){var d=n.callbacks;if(d!==null)for(n.callbacks=null,n=0;n<d.length;n++)ag(d[n],a)}var Ya=F(null),$l=F(0);function og(n,a){n=ni,Z($l,n),Z(Ya,a),ni=n|a.baseLanes}function qu(){Z($l,ni),Z(Ya,Ya.current)}function Gu(){ni=$l.current,G(Ya),G($l)}var Os=F(null),tn=null;function wi(n){var a=n.alternate;Z(Ct,Ct.current&1),Z(Os,n),tn===null&&(a===null||Ya.current!==null||a.memoizedState!==null)&&(tn=n)}function $u(n){Z(Ct,Ct.current),Z(Os,n),tn===null&&(tn=n)}function lg(n){n.tag===22?(Z(Ct,Ct.current),Z(Os,n),tn===null&&(tn=n)):Ai()}function Ai(){Z(Ct,Ct.current),Z(Os,Os.current)}function Bs(n){G(Os),tn===n&&(tn=null),G(Ct)}var Ct=F(0);function Yl(n){for(var a=n;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||Zh(d)||Jh(d)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Wn=0,Te=null,tt=null,Lt=null,Xl=!1,Xa=!1,ta=!1,Wl=0,uo=0,Wa=null,C1=0;function jt(){throw Error(s(321))}function Yu(n,a){if(a===null)return!1;for(var d=0;d<a.length&&d<n.length;d++)if(!Ms(n[d],a[d]))return!1;return!0}function Xu(n,a,d,m,b,v){return Wn=v,Te=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,S.H=n===null||n.memoizedState===null?Gg:ch,ta=!1,v=d(m,b),ta=!1,Xa&&(v=dg(a,d,m,b)),cg(n),v}function cg(n){S.H=mo;var a=tt!==null&&tt.next!==null;if(Wn=0,Lt=tt=Te=null,Xl=!1,uo=0,Wa=null,a)throw Error(s(300));n===null||Ot||(n=n.dependencies,n!==null&&Ul(n)&&(Ot=!0))}function dg(n,a,d,m){Te=n;var b=0;do{if(Xa&&(Wa=null),uo=0,Xa=!1,25<=b)throw Error(s(301));if(b+=1,Lt=tt=null,n.updateQueue!=null){var v=n.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}S.H=$g,v=a(d,m)}while(Xa);return v}function T1(){var n=S.H,a=n.useState()[0];return a=typeof a.then=="function"?ho(a):a,n=n.useState()[0],(tt!==null?tt.memoizedState:null)!==n&&(Te.flags|=1024),a}function Wu(){var n=Wl!==0;return Wl=0,n}function Ku(n,a,d){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~d}function Qu(n){if(Xl){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Xl=!1}Wn=0,Lt=tt=Te=null,Xa=!1,uo=Wl=0,Wa=null}function fs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?Te.memoizedState=Lt=n:Lt=Lt.next=n,Lt}function Tt(){if(tt===null){var n=Te.alternate;n=n!==null?n.memoizedState:null}else n=tt.next;var a=Lt===null?Te.memoizedState:Lt.next;if(a!==null)Lt=a,tt=n;else{if(n===null)throw Te.alternate===null?Error(s(467)):Error(s(310));tt=n,n={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Lt===null?Te.memoizedState=Lt=n:Lt=Lt.next=n}return Lt}function Kl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ho(n){var a=uo;return uo+=1,Wa===null&&(Wa=[]),n=eg(Wa,n,a),a=Te,(Lt===null?a.memoizedState:Lt.next)===null&&(a=a.alternate,S.H=a===null||a.memoizedState===null?Gg:ch),n}function Ql(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ho(n);if(n.$$typeof===L)return Jt(n)}throw Error(s(438,String(n)))}function Zu(n){var a=null,d=Te.updateQueue;if(d!==null&&(a=d.memoCache),a==null){var m=Te.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(a={data:m.data.map(function(b){return b.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),d===null&&(d=Kl(),Te.updateQueue=d),d.memoCache=a,d=a.data[a.index],d===void 0)for(d=a.data[a.index]=Array(n),m=0;m<n;m++)d[m]=O;return a.index++,d}function Kn(n,a){return typeof a=="function"?a(n):a}function Zl(n){var a=Tt();return Ju(a,tt,n)}function Ju(n,a,d){var m=n.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=d;var b=n.baseQueue,v=m.pending;if(v!==null){if(b!==null){var T=b.next;b.next=v.next,v.next=T}a.baseQueue=b=v,m.pending=null}if(v=n.baseState,b===null)n.memoizedState=v;else{a=b.next;var P=T=null,X=null,se=a,re=!1;do{var ce=se.lane&-536870913;if(ce!==se.lane?(Fe&ce)===ce:(Wn&ce)===ce){var ne=se.revertLane;if(ne===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),ce===Va&&(re=!0);else if((Wn&ne)===ne){se=se.next,ne===Va&&(re=!0);continue}else ce={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},X===null?(P=X=ce,T=v):X=X.next=ce,Te.lanes|=ne,Si|=ne;ce=se.action,ta&&d(v,ce),v=se.hasEagerState?se.eagerState:d(v,ce)}else ne={lane:ce,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},X===null?(P=X=ne,T=v):X=X.next=ne,Te.lanes|=ce,Si|=ce;se=se.next}while(se!==null&&se!==a);if(X===null?T=v:X.next=P,!Ms(v,n.memoizedState)&&(Ot=!0,re&&(d=qa,d!==null)))throw d;n.memoizedState=v,n.baseState=T,n.baseQueue=X,m.lastRenderedState=v}return b===null&&(m.lanes=0),[n.memoizedState,m.dispatch]}function eh(n){var a=Tt(),d=a.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=n;var m=d.dispatch,b=d.pending,v=a.memoizedState;if(b!==null){d.pending=null;var T=b=b.next;do v=n(v,T.action),T=T.next;while(T!==b);Ms(v,a.memoizedState)||(Ot=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),d.lastRenderedState=v}return[v,m]}function ug(n,a,d){var m=Te,b=Tt(),v=ze;if(v){if(d===void 0)throw Error(s(407));d=d()}else d=a();var T=!Ms((tt||b).memoizedState,d);if(T&&(b.memoizedState=d,Ot=!0),b=b.queue,nh(mg.bind(null,m,b,n),[n]),b.getSnapshot!==a||T||Lt!==null&&Lt.memoizedState.tag&1){if(m.flags|=2048,Ka(9,{destroy:void 0},fg.bind(null,m,b,d,a),null),ot===null)throw Error(s(349));v||(Wn&127)!==0||hg(m,a,d)}return d}function hg(n,a,d){n.flags|=16384,n={getSnapshot:a,value:d},a=Te.updateQueue,a===null?(a=Kl(),Te.updateQueue=a,a.stores=[n]):(d=a.stores,d===null?a.stores=[n]:d.push(n))}function fg(n,a,d,m){a.value=d,a.getSnapshot=m,pg(a)&&gg(n)}function mg(n,a,d){return d(function(){pg(a)&&gg(n)})}function pg(n){var a=n.getSnapshot;n=n.value;try{var d=a();return!Ms(n,d)}catch{return!0}}function gg(n){var a=$i(n,2);a!==null&&Ns(a,n,2)}function th(n){var a=fs();if(typeof n=="function"){var d=n;if(n=d(),ta){as(!0);try{d()}finally{as(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:n},a}function xg(n,a,d,m){return n.baseState=d,Ju(n,tt,typeof m=="function"?m:Kn)}function R1(n,a,d,m,b){if(tc(n))throw Error(s(485));if(n=a.action,n!==null){var v={payload:b,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){v.listeners.push(T)}};S.T!==null?d(!0):v.isTransition=!1,m(v),d=a.pending,d===null?(v.next=a.pending=v,bg(a,v)):(v.next=d.next,a.pending=d.next=v)}}function bg(n,a){var d=a.action,m=a.payload,b=n.state;if(a.isTransition){var v=S.T,T={};S.T=T;try{var P=d(b,m),X=S.S;X!==null&&X(T,P),yg(n,a,P)}catch(se){sh(n,a,se)}finally{v!==null&&T.types!==null&&(v.types=T.types),S.T=v}}else try{v=d(b,m),yg(n,a,v)}catch(se){sh(n,a,se)}}function yg(n,a,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){vg(n,a,m)},function(m){return sh(n,a,m)}):vg(n,a,d)}function vg(n,a,d){a.status="fulfilled",a.value=d,wg(a),n.state=d,a=n.pending,a!==null&&(d=a.next,d===a?n.pending=null:(d=d.next,a.next=d,bg(n,d)))}function sh(n,a,d){var m=n.pending;if(n.pending=null,m!==null){m=m.next;do a.status="rejected",a.reason=d,wg(a),a=a.next;while(a!==m)}n.action=null}function wg(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function Ag(n,a){return a}function Ng(n,a){if(ze){var d=ot.formState;if(d!==null){e:{var m=Te;if(ze){if(ut){t:{for(var b=ut,v=en;b.nodeType!==8;){if(!v){b=null;break t}if(b=sn(b.nextSibling),b===null){b=null;break t}}v=b.data,b=v==="F!"||v==="F"?b:null}if(b){ut=sn(b.nextSibling),m=b.data==="F!";break e}}gi(m)}m=!1}m&&(a=d[0])}}return d=fs(),d.memoizedState=d.baseState=a,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ag,lastRenderedState:a},d.queue=m,d=Hg.bind(null,Te,m),m.dispatch=d,m=th(!1),v=lh.bind(null,Te,!1,m.queue),m=fs(),b={state:a,dispatch:null,action:n,pending:null},m.queue=b,d=R1.bind(null,Te,b,v,d),b.dispatch=d,m.memoizedState=n,[a,d,!1]}function jg(n){var a=Tt();return Sg(a,tt,n)}function Sg(n,a,d){if(a=Ju(n,a,Ag)[0],n=Zl(Kn)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var m=ho(a)}catch(T){throw T===Ga?Hl:T}else m=a;a=Tt();var b=a.queue,v=b.dispatch;return d!==a.memoizedState&&(Te.flags|=2048,Ka(9,{destroy:void 0},k1.bind(null,b,d),null)),[m,v,n]}function k1(n,a){n.action=a}function _g(n){var a=Tt(),d=tt;if(d!==null)return Sg(a,d,n);Tt(),a=a.memoizedState,d=Tt();var m=d.queue.dispatch;return d.memoizedState=n,[a,m,!1]}function Ka(n,a,d,m){return n={tag:n,create:d,deps:m,inst:a,next:null},a=Te.updateQueue,a===null&&(a=Kl(),Te.updateQueue=a),d=a.lastEffect,d===null?a.lastEffect=n.next=n:(m=d.next,d.next=n,n.next=m,a.lastEffect=n),n}function Eg(){return Tt().memoizedState}function Jl(n,a,d,m){var b=fs();Te.flags|=n,b.memoizedState=Ka(1|a,{destroy:void 0},d,m===void 0?null:m)}function ec(n,a,d,m){var b=Tt();m=m===void 0?null:m;var v=b.memoizedState.inst;tt!==null&&m!==null&&Yu(m,tt.memoizedState.deps)?b.memoizedState=Ka(a,v,d,m):(Te.flags|=n,b.memoizedState=Ka(1|a,v,d,m))}function Cg(n,a){Jl(8390656,8,n,a)}function nh(n,a){ec(2048,8,n,a)}function D1(n){Te.flags|=4;var a=Te.updateQueue;if(a===null)a=Kl(),Te.updateQueue=a,a.events=[n];else{var d=a.events;d===null?a.events=[n]:d.push(n)}}function Tg(n){var a=Tt().memoizedState;return D1({ref:a,nextImpl:n}),function(){if((Ke&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Rg(n,a){return ec(4,2,n,a)}function kg(n,a){return ec(4,4,n,a)}function Dg(n,a){if(typeof a=="function"){n=n();var d=a(n);return function(){typeof d=="function"?d():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function Mg(n,a,d){d=d!=null?d.concat([n]):null,ec(4,4,Dg.bind(null,a,n),d)}function ih(){}function Lg(n,a){var d=Tt();a=a===void 0?null:a;var m=d.memoizedState;return a!==null&&Yu(a,m[1])?m[0]:(d.memoizedState=[n,a],n)}function Og(n,a){var d=Tt();a=a===void 0?null:a;var m=d.memoizedState;if(a!==null&&Yu(a,m[1]))return m[0];if(m=n(),ta){as(!0);try{n()}finally{as(!1)}}return d.memoizedState=[m,a],m}function ah(n,a,d){return d===void 0||(Wn&1073741824)!==0&&(Fe&261930)===0?n.memoizedState=a:(n.memoizedState=d,n=B0(),Te.lanes|=n,Si|=n,d)}function Bg(n,a,d,m){return Ms(d,a)?d:Ya.current!==null?(n=ah(n,d,m),Ms(n,a)||(Ot=!0),n):(Wn&42)===0||(Wn&1073741824)!==0&&(Fe&261930)===0?(Ot=!0,n.memoizedState=d):(n=B0(),Te.lanes|=n,Si|=n,a)}function Pg(n,a,d,m,b){var v=_.p;_.p=v!==0&&8>v?v:8;var T=S.T,P={};S.T=P,lh(n,!1,a,d);try{var X=b(),se=S.S;if(se!==null&&se(P,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var re=E1(X,m);fo(n,a,re,Us(n))}else fo(n,a,m,Us(n))}catch(ce){fo(n,a,{then:function(){},status:"rejected",reason:ce},Us())}finally{_.p=v,T!==null&&P.types!==null&&(T.types=P.types),S.T=T}}function M1(){}function rh(n,a,d,m){if(n.tag!==5)throw Error(s(476));var b=Fg(n).queue;Pg(n,b,a,q,d===null?M1:function(){return Ug(n),d(m)})}function Fg(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:q},next:null};var d={};return a.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:d},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function Ug(n){var a=Fg(n);a.next===null&&(a=n.alternate.memoizedState),fo(n,a.next.queue,{},Us())}function oh(){return Jt(Ro)}function Ig(){return Tt().memoizedState}function zg(){return Tt().memoizedState}function L1(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var d=Us();n=yi(d);var m=vi(a,n,d);m!==null&&(Ns(m,a,d),oo(m,a,d)),a={cache:Bu()},n.payload=a;return}a=a.return}}function O1(n,a,d){var m=Us();d={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},tc(n)?Vg(a,d):(d=Su(n,a,d,m),d!==null&&(Ns(d,n,m),qg(d,a,m)))}function Hg(n,a,d){var m=Us();fo(n,a,d,m)}function fo(n,a,d,m){var b={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(tc(n))Vg(a,b);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var T=a.lastRenderedState,P=v(T,d);if(b.hasEagerState=!0,b.eagerState=P,Ms(P,T))return Ol(n,a,b,0),ot===null&&Ll(),!1}catch{}if(d=Su(n,a,b,m),d!==null)return Ns(d,n,m),qg(d,a,m),!0}return!1}function lh(n,a,d,m){if(m={lane:2,revertLane:Ih(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},tc(n)){if(a)throw Error(s(479))}else a=Su(n,d,m,2),a!==null&&Ns(a,n,2)}function tc(n){var a=n.alternate;return n===Te||a!==null&&a===Te}function Vg(n,a){Xa=Xl=!0;var d=n.pending;d===null?a.next=a:(a.next=d.next,d.next=a),n.pending=a}function qg(n,a,d){if((d&4194048)!==0){var m=a.lanes;m&=n.pendingLanes,d|=m,a.lanes=d,Wm(n,d)}}var mo={readContext:Jt,use:Ql,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt,useHostTransitionStatus:jt,useFormState:jt,useActionState:jt,useOptimistic:jt,useMemoCache:jt,useCacheRefresh:jt};mo.useEffectEvent=jt;var Gg={readContext:Jt,use:Ql,useCallback:function(n,a){return fs().memoizedState=[n,a===void 0?null:a],n},useContext:Jt,useEffect:Cg,useImperativeHandle:function(n,a,d){d=d!=null?d.concat([n]):null,Jl(4194308,4,Dg.bind(null,a,n),d)},useLayoutEffect:function(n,a){return Jl(4194308,4,n,a)},useInsertionEffect:function(n,a){Jl(4,2,n,a)},useMemo:function(n,a){var d=fs();a=a===void 0?null:a;var m=n();if(ta){as(!0);try{n()}finally{as(!1)}}return d.memoizedState=[m,a],m},useReducer:function(n,a,d){var m=fs();if(d!==void 0){var b=d(a);if(ta){as(!0);try{d(a)}finally{as(!1)}}}else b=a;return m.memoizedState=m.baseState=b,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:b},m.queue=n,n=n.dispatch=O1.bind(null,Te,n),[m.memoizedState,n]},useRef:function(n){var a=fs();return n={current:n},a.memoizedState=n},useState:function(n){n=th(n);var a=n.queue,d=Hg.bind(null,Te,a);return a.dispatch=d,[n.memoizedState,d]},useDebugValue:ih,useDeferredValue:function(n,a){var d=fs();return ah(d,n,a)},useTransition:function(){var n=th(!1);return n=Pg.bind(null,Te,n.queue,!0,!1),fs().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,d){var m=Te,b=fs();if(ze){if(d===void 0)throw Error(s(407));d=d()}else{if(d=a(),ot===null)throw Error(s(349));(Fe&127)!==0||hg(m,a,d)}b.memoizedState=d;var v={value:d,getSnapshot:a};return b.queue=v,Cg(mg.bind(null,m,v,n),[n]),m.flags|=2048,Ka(9,{destroy:void 0},fg.bind(null,m,v,d,a),null),d},useId:function(){var n=fs(),a=ot.identifierPrefix;if(ze){var d=En,m=_n;d=(m&~(1<<32-Kt(m)-1)).toString(32)+d,a="_"+a+"R_"+d,d=Wl++,0<d&&(a+="H"+d.toString(32)),a+="_"}else d=C1++,a="_"+a+"r_"+d.toString(32)+"_";return n.memoizedState=a},useHostTransitionStatus:oh,useFormState:Ng,useActionState:Ng,useOptimistic:function(n){var a=fs();a.memoizedState=a.baseState=n;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=d,a=lh.bind(null,Te,!0,d),d.dispatch=a,[n,a]},useMemoCache:Zu,useCacheRefresh:function(){return fs().memoizedState=L1.bind(null,Te)},useEffectEvent:function(n){var a=fs(),d={impl:n};return a.memoizedState=d,function(){if((Ke&2)!==0)throw Error(s(440));return d.impl.apply(void 0,arguments)}}},ch={readContext:Jt,use:Ql,useCallback:Lg,useContext:Jt,useEffect:nh,useImperativeHandle:Mg,useInsertionEffect:Rg,useLayoutEffect:kg,useMemo:Og,useReducer:Zl,useRef:Eg,useState:function(){return Zl(Kn)},useDebugValue:ih,useDeferredValue:function(n,a){var d=Tt();return Bg(d,tt.memoizedState,n,a)},useTransition:function(){var n=Zl(Kn)[0],a=Tt().memoizedState;return[typeof n=="boolean"?n:ho(n),a]},useSyncExternalStore:ug,useId:Ig,useHostTransitionStatus:oh,useFormState:jg,useActionState:jg,useOptimistic:function(n,a){var d=Tt();return xg(d,tt,n,a)},useMemoCache:Zu,useCacheRefresh:zg};ch.useEffectEvent=Tg;var $g={readContext:Jt,use:Ql,useCallback:Lg,useContext:Jt,useEffect:nh,useImperativeHandle:Mg,useInsertionEffect:Rg,useLayoutEffect:kg,useMemo:Og,useReducer:eh,useRef:Eg,useState:function(){return eh(Kn)},useDebugValue:ih,useDeferredValue:function(n,a){var d=Tt();return tt===null?ah(d,n,a):Bg(d,tt.memoizedState,n,a)},useTransition:function(){var n=eh(Kn)[0],a=Tt().memoizedState;return[typeof n=="boolean"?n:ho(n),a]},useSyncExternalStore:ug,useId:Ig,useHostTransitionStatus:oh,useFormState:_g,useActionState:_g,useOptimistic:function(n,a){var d=Tt();return tt!==null?xg(d,tt,n,a):(d.baseState=n,[n,d.queue.dispatch])},useMemoCache:Zu,useCacheRefresh:zg};$g.useEffectEvent=Tg;function dh(n,a,d,m){a=n.memoizedState,d=d(m,a),d=d==null?a:g({},a,d),n.memoizedState=d,n.lanes===0&&(n.updateQueue.baseState=d)}var uh={enqueueSetState:function(n,a,d){n=n._reactInternals;var m=Us(),b=yi(m);b.payload=a,d!=null&&(b.callback=d),a=vi(n,b,m),a!==null&&(Ns(a,n,m),oo(a,n,m))},enqueueReplaceState:function(n,a,d){n=n._reactInternals;var m=Us(),b=yi(m);b.tag=1,b.payload=a,d!=null&&(b.callback=d),a=vi(n,b,m),a!==null&&(Ns(a,n,m),oo(a,n,m))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var d=Us(),m=yi(d);m.tag=2,a!=null&&(m.callback=a),a=vi(n,m,d),a!==null&&(Ns(a,n,d),oo(a,n,d))}};function Yg(n,a,d,m,b,v,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(m,v,T):a.prototype&&a.prototype.isPureReactComponent?!Jr(d,m)||!Jr(b,v):!0}function Xg(n,a,d,m){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,m),a.state!==n&&uh.enqueueReplaceState(a,a.state,null)}function sa(n,a){var d=a;if("ref"in a){d={};for(var m in a)m!=="ref"&&(d[m]=a[m])}if(n=n.defaultProps){d===a&&(d=g({},d));for(var b in n)d[b]===void 0&&(d[b]=n[b])}return d}function Wg(n){Ml(n)}function Kg(n){console.error(n)}function Qg(n){Ml(n)}function sc(n,a){try{var d=n.onUncaughtError;d(a.value,{componentStack:a.stack})}catch(m){setTimeout(function(){throw m})}}function Zg(n,a,d){try{var m=n.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function hh(n,a,d){return d=yi(d),d.tag=3,d.payload={element:null},d.callback=function(){sc(n,a)},d}function Jg(n){return n=yi(n),n.tag=3,n}function e0(n,a,d,m){var b=d.type.getDerivedStateFromError;if(typeof b=="function"){var v=m.value;n.payload=function(){return b(v)},n.callback=function(){Zg(a,d,m)}}var T=d.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){Zg(a,d,m),typeof b!="function"&&(_i===null?_i=new Set([this]):_i.add(this));var P=m.stack;this.componentDidCatch(m.value,{componentStack:P!==null?P:""})})}function B1(n,a,d,m,b){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(a=d.alternate,a!==null&&Ha(a,d,b,!0),d=Os.current,d!==null){switch(d.tag){case 31:case 13:return tn===null?mc():d.alternate===null&&St===0&&(St=3),d.flags&=-257,d.flags|=65536,d.lanes=b,m===Vl?d.flags|=16384:(a=d.updateQueue,a===null?d.updateQueue=new Set([m]):a.add(m),Ph(n,m,b)),!1;case 22:return d.flags|=65536,m===Vl?d.flags|=16384:(a=d.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=a):(d=a.retryQueue,d===null?a.retryQueue=new Set([m]):d.add(m)),Ph(n,m,b)),!1}throw Error(s(435,d.tag))}return Ph(n,m,b),mc(),!1}if(ze)return a=Os.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=b,m!==ku&&(n=Error(s(422),{cause:m}),so(Qs(n,d)))):(m!==ku&&(a=Error(s(423),{cause:m}),so(Qs(a,d))),n=n.current.alternate,n.flags|=65536,b&=-b,n.lanes|=b,m=Qs(m,d),b=hh(n.stateNode,m,b),Hu(n,b),St!==4&&(St=2)),!1;var v=Error(s(520),{cause:m});if(v=Qs(v,d),Ao===null?Ao=[v]:Ao.push(v),St!==4&&(St=2),a===null)return!0;m=Qs(m,d),d=a;do{switch(d.tag){case 3:return d.flags|=65536,n=b&-b,d.lanes|=n,n=hh(d.stateNode,m,n),Hu(d,n),!1;case 1:if(a=d.type,v=d.stateNode,(d.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(_i===null||!_i.has(v))))return d.flags|=65536,b&=-b,d.lanes|=b,b=Jg(b),e0(b,n,d,m),Hu(d,b),!1}d=d.return}while(d!==null);return!1}var fh=Error(s(461)),Ot=!1;function es(n,a,d,m){a.child=n===null?ig(a,null,d,m):ea(a,n.child,d,m)}function t0(n,a,d,m,b){d=d.render;var v=a.ref;if("ref"in m){var T={};for(var P in m)P!=="ref"&&(T[P]=m[P])}else T=m;return Ki(a),m=Xu(n,a,d,T,v,b),P=Wu(),n!==null&&!Ot?(Ku(n,a,b),Qn(n,a,b)):(ze&&P&&Tu(a),a.flags|=1,es(n,a,m,b),a.child)}function s0(n,a,d,m,b){if(n===null){var v=d.type;return typeof v=="function"&&!_u(v)&&v.defaultProps===void 0&&d.compare===null?(a.tag=15,a.type=v,n0(n,a,v,m,b)):(n=Pl(d.type,null,m,a,a.mode,b),n.ref=a.ref,n.return=a,a.child=n)}if(v=n.child,!wh(n,b)){var T=v.memoizedProps;if(d=d.compare,d=d!==null?d:Jr,d(T,m)&&n.ref===a.ref)return Qn(n,a,b)}return a.flags|=1,n=Gn(v,m),n.ref=a.ref,n.return=a,a.child=n}function n0(n,a,d,m,b){if(n!==null){var v=n.memoizedProps;if(Jr(v,m)&&n.ref===a.ref)if(Ot=!1,a.pendingProps=m=v,wh(n,b))(n.flags&131072)!==0&&(Ot=!0);else return a.lanes=n.lanes,Qn(n,a,b)}return mh(n,a,d,m,b)}function i0(n,a,d,m){var b=m.children,v=n!==null?n.memoizedState:null;if(n===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((a.flags&128)!==0){if(v=v!==null?v.baseLanes|d:d,n!==null){for(m=a.child=n.child,b=0;m!==null;)b=b|m.lanes|m.childLanes,m=m.sibling;m=b&~v}else m=0,a.child=null;return a0(n,a,v,d,m)}if((d&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&zl(a,v!==null?v.cachePool:null),v!==null?og(a,v):qu(),lg(a);else return m=a.lanes=536870912,a0(n,a,v!==null?v.baseLanes|d:d,d,m)}else v!==null?(zl(a,v.cachePool),og(a,v),Ai(),a.memoizedState=null):(n!==null&&zl(a,null),qu(),Ai());return es(n,a,b,d),a.child}function po(n,a){return n!==null&&n.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function a0(n,a,d,m,b){var v=Fu();return v=v===null?null:{parent:Mt._currentValue,pool:v},a.memoizedState={baseLanes:d,cachePool:v},n!==null&&zl(a,null),qu(),lg(a),n!==null&&Ha(n,a,m,!0),a.childLanes=b,null}function nc(n,a){return a=ac({mode:a.mode,children:a.children},n.mode),a.ref=n.ref,n.child=a,a.return=n,a}function r0(n,a,d){return ea(a,n.child,null,d),n=nc(a,a.pendingProps),n.flags|=2,Bs(a),a.memoizedState=null,n}function P1(n,a,d){var m=a.pendingProps,b=(a.flags&128)!==0;if(a.flags&=-129,n===null){if(ze){if(m.mode==="hidden")return n=nc(a,m),a.lanes=536870912,po(null,n);if($u(a),(n=ut)?(n=bx(n,en),n=n!==null&&n.data==="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:mi!==null?{id:_n,overflow:En}:null,retryLane:536870912,hydrationErrors:null},d=Vp(n),d.return=a,a.child=d,Zt=a,ut=null)):n=null,n===null)throw gi(a);return a.lanes=536870912,null}return nc(a,m)}var v=n.memoizedState;if(v!==null){var T=v.dehydrated;if($u(a),b)if(a.flags&256)a.flags&=-257,a=r0(n,a,d);else if(a.memoizedState!==null)a.child=n.child,a.flags|=128,a=null;else throw Error(s(558));else if(Ot||Ha(n,a,d,!1),b=(d&n.childLanes)!==0,Ot||b){if(m=ot,m!==null&&(T=Km(m,d),T!==0&&T!==v.retryLane))throw v.retryLane=T,$i(n,T),Ns(m,n,T),fh;mc(),a=r0(n,a,d)}else n=v.treeContext,ut=sn(T.nextSibling),Zt=a,ze=!0,pi=null,en=!1,n!==null&&$p(a,n),a=nc(a,m),a.flags|=4096;return a}return n=Gn(n.child,{mode:m.mode,children:m.children}),n.ref=a.ref,a.child=n,n.return=a,n}function ic(n,a){var d=a.ref;if(d===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(s(284));(n===null||n.ref!==d)&&(a.flags|=4194816)}}function mh(n,a,d,m,b){return Ki(a),d=Xu(n,a,d,m,void 0,b),m=Wu(),n!==null&&!Ot?(Ku(n,a,b),Qn(n,a,b)):(ze&&m&&Tu(a),a.flags|=1,es(n,a,d,b),a.child)}function o0(n,a,d,m,b,v){return Ki(a),a.updateQueue=null,d=dg(a,m,d,b),cg(n),m=Wu(),n!==null&&!Ot?(Ku(n,a,v),Qn(n,a,v)):(ze&&m&&Tu(a),a.flags|=1,es(n,a,d,v),a.child)}function l0(n,a,d,m,b){if(Ki(a),a.stateNode===null){var v=Fa,T=d.contextType;typeof T=="object"&&T!==null&&(v=Jt(T)),v=new d(m,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=uh,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=m,v.state=a.memoizedState,v.refs={},Iu(a),T=d.contextType,v.context=typeof T=="object"&&T!==null?Jt(T):Fa,v.state=a.memoizedState,T=d.getDerivedStateFromProps,typeof T=="function"&&(dh(a,d,T,m),v.state=a.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(T=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),T!==v.state&&uh.enqueueReplaceState(v,v.state,null),co(a,m,v,b),lo(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),m=!0}else if(n===null){v=a.stateNode;var P=a.memoizedProps,X=sa(d,P);v.props=X;var se=v.context,re=d.contextType;T=Fa,typeof re=="object"&&re!==null&&(T=Jt(re));var ce=d.getDerivedStateFromProps;re=typeof ce=="function"||typeof v.getSnapshotBeforeUpdate=="function",P=a.pendingProps!==P,re||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(P||se!==T)&&Xg(a,v,m,T),bi=!1;var ne=a.memoizedState;v.state=ne,co(a,m,v,b),lo(),se=a.memoizedState,P||ne!==se||bi?(typeof ce=="function"&&(dh(a,d,ce,m),se=a.memoizedState),(X=bi||Yg(a,d,X,m,ne,se,T))?(re||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=se),v.props=m,v.state=se,v.context=T,m=X):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{v=a.stateNode,zu(n,a),T=a.memoizedProps,re=sa(d,T),v.props=re,ce=a.pendingProps,ne=v.context,se=d.contextType,X=Fa,typeof se=="object"&&se!==null&&(X=Jt(se)),P=d.getDerivedStateFromProps,(se=typeof P=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==ce||ne!==X)&&Xg(a,v,m,X),bi=!1,ne=a.memoizedState,v.state=ne,co(a,m,v,b),lo();var ae=a.memoizedState;T!==ce||ne!==ae||bi||n!==null&&n.dependencies!==null&&Ul(n.dependencies)?(typeof P=="function"&&(dh(a,d,P,m),ae=a.memoizedState),(re=bi||Yg(a,d,re,m,ne,ae,X)||n!==null&&n.dependencies!==null&&Ul(n.dependencies))?(se||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(m,ae,X),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(m,ae,X)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||T===n.memoizedProps&&ne===n.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&ne===n.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=ae),v.props=m,v.state=ae,v.context=X,m=re):(typeof v.componentDidUpdate!="function"||T===n.memoizedProps&&ne===n.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&ne===n.memoizedState||(a.flags|=1024),m=!1)}return v=m,ic(n,a),m=(a.flags&128)!==0,v||m?(v=a.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,n!==null&&m?(a.child=ea(a,n.child,null,b),a.child=ea(a,null,d,b)):es(n,a,d,b),a.memoizedState=v.state,n=a.child):n=Qn(n,a,b),n}function c0(n,a,d,m){return Xi(),a.flags|=256,es(n,a,d,m),a.child}var ph={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gh(n){return{baseLanes:n,cachePool:Zp()}}function xh(n,a,d){return n=n!==null?n.childLanes&~d:0,a&&(n|=Fs),n}function d0(n,a,d){var m=a.pendingProps,b=!1,v=(a.flags&128)!==0,T;if((T=v)||(T=n!==null&&n.memoizedState===null?!1:(Ct.current&2)!==0),T&&(b=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,n===null){if(ze){if(b?wi(a):Ai(),(n=ut)?(n=bx(n,en),n=n!==null&&n.data!=="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:mi!==null?{id:_n,overflow:En}:null,retryLane:536870912,hydrationErrors:null},d=Vp(n),d.return=a,a.child=d,Zt=a,ut=null)):n=null,n===null)throw gi(a);return Jh(n)?a.lanes=32:a.lanes=536870912,null}var P=m.children;return m=m.fallback,b?(Ai(),b=a.mode,P=ac({mode:"hidden",children:P},b),m=Yi(m,b,d,null),P.return=a,m.return=a,P.sibling=m,a.child=P,m=a.child,m.memoizedState=gh(d),m.childLanes=xh(n,T,d),a.memoizedState=ph,po(null,m)):(wi(a),bh(a,P))}var X=n.memoizedState;if(X!==null&&(P=X.dehydrated,P!==null)){if(v)a.flags&256?(wi(a),a.flags&=-257,a=yh(n,a,d)):a.memoizedState!==null?(Ai(),a.child=n.child,a.flags|=128,a=null):(Ai(),P=m.fallback,b=a.mode,m=ac({mode:"visible",children:m.children},b),P=Yi(P,b,d,null),P.flags|=2,m.return=a,P.return=a,m.sibling=P,a.child=m,ea(a,n.child,null,d),m=a.child,m.memoizedState=gh(d),m.childLanes=xh(n,T,d),a.memoizedState=ph,a=po(null,m));else if(wi(a),Jh(P)){if(T=P.nextSibling&&P.nextSibling.dataset,T)var se=T.dgst;T=se,m=Error(s(419)),m.stack="",m.digest=T,so({value:m,source:null,stack:null}),a=yh(n,a,d)}else if(Ot||Ha(n,a,d,!1),T=(d&n.childLanes)!==0,Ot||T){if(T=ot,T!==null&&(m=Km(T,d),m!==0&&m!==X.retryLane))throw X.retryLane=m,$i(n,m),Ns(T,n,m),fh;Zh(P)||mc(),a=yh(n,a,d)}else Zh(P)?(a.flags|=192,a.child=n.child,a=null):(n=X.treeContext,ut=sn(P.nextSibling),Zt=a,ze=!0,pi=null,en=!1,n!==null&&$p(a,n),a=bh(a,m.children),a.flags|=4096);return a}return b?(Ai(),P=m.fallback,b=a.mode,X=n.child,se=X.sibling,m=Gn(X,{mode:"hidden",children:m.children}),m.subtreeFlags=X.subtreeFlags&65011712,se!==null?P=Gn(se,P):(P=Yi(P,b,d,null),P.flags|=2),P.return=a,m.return=a,m.sibling=P,a.child=m,po(null,m),m=a.child,P=n.child.memoizedState,P===null?P=gh(d):(b=P.cachePool,b!==null?(X=Mt._currentValue,b=b.parent!==X?{parent:X,pool:X}:b):b=Zp(),P={baseLanes:P.baseLanes|d,cachePool:b}),m.memoizedState=P,m.childLanes=xh(n,T,d),a.memoizedState=ph,po(n.child,m)):(wi(a),d=n.child,n=d.sibling,d=Gn(d,{mode:"visible",children:m.children}),d.return=a,d.sibling=null,n!==null&&(T=a.deletions,T===null?(a.deletions=[n],a.flags|=16):T.push(n)),a.child=d,a.memoizedState=null,d)}function bh(n,a){return a=ac({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function ac(n,a){return n=Ls(22,n,null,a),n.lanes=0,n}function yh(n,a,d){return ea(a,n.child,null,d),n=bh(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function u0(n,a,d){n.lanes|=a;var m=n.alternate;m!==null&&(m.lanes|=a),Lu(n.return,a,d)}function vh(n,a,d,m,b,v){var T=n.memoizedState;T===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:b,treeForkCount:v}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=d,T.tailMode=b,T.treeForkCount=v)}function h0(n,a,d){var m=a.pendingProps,b=m.revealOrder,v=m.tail;m=m.children;var T=Ct.current,P=(T&2)!==0;if(P?(T=T&1|2,a.flags|=128):T&=1,Z(Ct,T),es(n,a,m,d),m=ze?to:0,!P&&n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&u0(n,d,a);else if(n.tag===19)u0(n,d,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(b){case"forwards":for(d=a.child,b=null;d!==null;)n=d.alternate,n!==null&&Yl(n)===null&&(b=d),d=d.sibling;d=b,d===null?(b=a.child,a.child=null):(b=d.sibling,d.sibling=null),vh(a,!1,b,d,v,m);break;case"backwards":case"unstable_legacy-backwards":for(d=null,b=a.child,a.child=null;b!==null;){if(n=b.alternate,n!==null&&Yl(n)===null){a.child=b;break}n=b.sibling,b.sibling=d,d=b,b=n}vh(a,!0,d,null,v,m);break;case"together":vh(a,!1,null,null,void 0,m);break;default:a.memoizedState=null}return a.child}function Qn(n,a,d){if(n!==null&&(a.dependencies=n.dependencies),Si|=a.lanes,(d&a.childLanes)===0)if(n!==null){if(Ha(n,a,d,!1),(d&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(s(153));if(a.child!==null){for(n=a.child,d=Gn(n,n.pendingProps),a.child=d,d.return=a;n.sibling!==null;)n=n.sibling,d=d.sibling=Gn(n,n.pendingProps),d.return=a;d.sibling=null}return a.child}function wh(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&Ul(n)))}function F1(n,a,d){switch(a.tag){case 3:ve(a,a.stateNode.containerInfo),xi(a,Mt,n.memoizedState.cache),Xi();break;case 27:case 5:xe(a);break;case 4:ve(a,a.stateNode.containerInfo);break;case 10:xi(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,$u(a),null;break;case 13:var m=a.memoizedState;if(m!==null)return m.dehydrated!==null?(wi(a),a.flags|=128,null):(d&a.child.childLanes)!==0?d0(n,a,d):(wi(a),n=Qn(n,a,d),n!==null?n.sibling:null);wi(a);break;case 19:var b=(n.flags&128)!==0;if(m=(d&a.childLanes)!==0,m||(Ha(n,a,d,!1),m=(d&a.childLanes)!==0),b){if(m)return h0(n,a,d);a.flags|=128}if(b=a.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Z(Ct,Ct.current),m)break;return null;case 22:return a.lanes=0,i0(n,a,d,a.pendingProps);case 24:xi(a,Mt,n.memoizedState.cache)}return Qn(n,a,d)}function f0(n,a,d){if(n!==null)if(n.memoizedProps!==a.pendingProps)Ot=!0;else{if(!wh(n,d)&&(a.flags&128)===0)return Ot=!1,F1(n,a,d);Ot=(n.flags&131072)!==0}else Ot=!1,ze&&(a.flags&1048576)!==0&&Gp(a,to,a.index);switch(a.lanes=0,a.tag){case 16:e:{var m=a.pendingProps;if(n=Zi(a.elementType),a.type=n,typeof n=="function")_u(n)?(m=sa(n,m),a.tag=1,a=l0(null,a,n,m,d)):(a.tag=0,a=mh(null,a,n,m,d));else{if(n!=null){var b=n.$$typeof;if(b===k){a.tag=11,a=t0(null,a,n,m,d);break e}else if(b===B){a.tag=14,a=s0(null,a,n,m,d);break e}}throw a=H(n)||n,Error(s(306,a,""))}}return a;case 0:return mh(n,a,a.type,a.pendingProps,d);case 1:return m=a.type,b=sa(m,a.pendingProps),l0(n,a,m,b,d);case 3:e:{if(ve(a,a.stateNode.containerInfo),n===null)throw Error(s(387));m=a.pendingProps;var v=a.memoizedState;b=v.element,zu(n,a),co(a,m,null,d);var T=a.memoizedState;if(m=T.cache,xi(a,Mt,m),m!==v.cache&&Ou(a,[Mt],d,!0),lo(),m=T.element,v.isDehydrated)if(v={element:m,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=c0(n,a,m,d);break e}else if(m!==b){b=Qs(Error(s(424)),a),so(b),a=c0(n,a,m,d);break e}else for(n=a.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,ut=sn(n.firstChild),Zt=a,ze=!0,pi=null,en=!0,d=ig(a,null,m,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Xi(),m===b){a=Qn(n,a,d);break e}es(n,a,m,d)}a=a.child}return a;case 26:return ic(n,a),n===null?(d=jx(a.type,null,a.pendingProps,null))?a.memoizedState=d:ze||(d=a.type,n=a.pendingProps,m=wc(de.current).createElement(d),m[Qt]=a,m[xs]=n,ts(m,d,n),zt(m),a.stateNode=m):a.memoizedState=jx(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return xe(a),n===null&&ze&&(m=a.stateNode=wx(a.type,a.pendingProps,de.current),Zt=a,en=!0,b=ut,Ri(a.type)?(ef=b,ut=sn(m.firstChild)):ut=b),es(n,a,a.pendingProps.children,d),ic(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&ze&&((b=m=ut)&&(m=mA(m,a.type,a.pendingProps,en),m!==null?(a.stateNode=m,Zt=a,ut=sn(m.firstChild),en=!1,b=!0):b=!1),b||gi(a)),xe(a),b=a.type,v=a.pendingProps,T=n!==null?n.memoizedProps:null,m=v.children,Wh(b,v)?m=null:T!==null&&Wh(b,T)&&(a.flags|=32),a.memoizedState!==null&&(b=Xu(n,a,T1,null,null,d),Ro._currentValue=b),ic(n,a),es(n,a,m,d),a.child;case 6:return n===null&&ze&&((n=d=ut)&&(d=pA(d,a.pendingProps,en),d!==null?(a.stateNode=d,Zt=a,ut=null,n=!0):n=!1),n||gi(a)),null;case 13:return d0(n,a,d);case 4:return ve(a,a.stateNode.containerInfo),m=a.pendingProps,n===null?a.child=ea(a,null,m,d):es(n,a,m,d),a.child;case 11:return t0(n,a,a.type,a.pendingProps,d);case 7:return es(n,a,a.pendingProps,d),a.child;case 8:return es(n,a,a.pendingProps.children,d),a.child;case 12:return es(n,a,a.pendingProps.children,d),a.child;case 10:return m=a.pendingProps,xi(a,a.type,m.value),es(n,a,m.children,d),a.child;case 9:return b=a.type._context,m=a.pendingProps.children,Ki(a),b=Jt(b),m=m(b),a.flags|=1,es(n,a,m,d),a.child;case 14:return s0(n,a,a.type,a.pendingProps,d);case 15:return n0(n,a,a.type,a.pendingProps,d);case 19:return h0(n,a,d);case 31:return P1(n,a,d);case 22:return i0(n,a,d,a.pendingProps);case 24:return Ki(a),m=Jt(Mt),n===null?(b=Fu(),b===null&&(b=ot,v=Bu(),b.pooledCache=v,v.refCount++,v!==null&&(b.pooledCacheLanes|=d),b=v),a.memoizedState={parent:m,cache:b},Iu(a),xi(a,Mt,b)):((n.lanes&d)!==0&&(zu(n,a),co(a,null,null,d),lo()),b=n.memoizedState,v=a.memoizedState,b.parent!==m?(b={parent:m,cache:m},a.memoizedState=b,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=b),xi(a,Mt,m)):(m=v.cache,xi(a,Mt,m),m!==b.cache&&Ou(a,[Mt],d,!0))),es(n,a,a.pendingProps.children,d),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Zn(n){n.flags|=4}function Ah(n,a,d,m,b){if((a=(n.mode&32)!==0)&&(a=!1),a){if(n.flags|=16777216,(b&335544128)===b)if(n.stateNode.complete)n.flags|=8192;else if(I0())n.flags|=8192;else throw Ji=Vl,Uu}else n.flags&=-16777217}function m0(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Tx(a))if(I0())n.flags|=8192;else throw Ji=Vl,Uu}function rc(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?Sn():536870912,n.lanes|=a,er|=a)}function go(n,a){if(!ze)switch(n.tailMode){case"hidden":a=n.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?n.tail=null:d.sibling=null;break;case"collapsed":d=n.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:m.sibling=null}}function ht(n){var a=n.alternate!==null&&n.alternate.child===n.child,d=0,m=0;if(a)for(var b=n.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=n,b=b.sibling;else for(b=n.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=n,b=b.sibling;return n.subtreeFlags|=m,n.childLanes=d,a}function U1(n,a,d){var m=a.pendingProps;switch(Ru(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(a),null;case 1:return ht(a),null;case 3:return d=a.stateNode,m=null,n!==null&&(m=n.memoizedState.cache),a.memoizedState.cache!==m&&(a.flags|=2048),Xn(Mt),he(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(za(a)?Zn(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Du())),ht(a),null;case 26:var b=a.type,v=a.memoizedState;return n===null?(Zn(a),v!==null?(ht(a),m0(a,v)):(ht(a),Ah(a,b,null,m,d))):v?v!==n.memoizedState?(Zn(a),ht(a),m0(a,v)):(ht(a),a.flags&=-16777217):(n=n.memoizedProps,n!==m&&Zn(a),ht(a),Ah(a,b,n,m,d)),null;case 27:if(Pe(a),d=de.current,b=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==m&&Zn(a);else{if(!m){if(a.stateNode===null)throw Error(s(166));return ht(a),null}n=Q.current,za(a)?Yp(a):(n=wx(b,m,d),a.stateNode=n,Zn(a))}return ht(a),null;case 5:if(Pe(a),b=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==m&&Zn(a);else{if(!m){if(a.stateNode===null)throw Error(s(166));return ht(a),null}if(v=Q.current,za(a))Yp(a);else{var T=wc(de.current);switch(v){case 1:v=T.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:v=T.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":v=T.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":v=T.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":v=T.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof m.is=="string"?T.createElement("select",{is:m.is}):T.createElement("select"),m.multiple?v.multiple=!0:m.size&&(v.size=m.size);break;default:v=typeof m.is=="string"?T.createElement(b,{is:m.is}):T.createElement(b)}}v[Qt]=a,v[xs]=m;e:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)v.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break e;for(;T.sibling===null;){if(T.return===null||T.return===a)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=v;e:switch(ts(v,b,m),b){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Zn(a)}}return ht(a),Ah(a,a.type,n===null?null:n.memoizedProps,a.pendingProps,d),null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==m&&Zn(a);else{if(typeof m!="string"&&a.stateNode===null)throw Error(s(166));if(n=de.current,za(a)){if(n=a.stateNode,d=a.memoizedProps,m=null,b=Zt,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}n[Qt]=a,n=!!(n.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||dx(n.nodeValue,d)),n||gi(a,!0)}else n=wc(n).createTextNode(m),n[Qt]=a,a.stateNode=n}return ht(a),null;case 31:if(d=a.memoizedState,n===null||n.memoizedState!==null){if(m=za(a),d!==null){if(n===null){if(!m)throw Error(s(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Qt]=a}else Xi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ht(a),n=!1}else d=Du(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),n=!0;if(!n)return a.flags&256?(Bs(a),a):(Bs(a),null);if((a.flags&128)!==0)throw Error(s(558))}return ht(a),null;case 13:if(m=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(b=za(a),m!==null&&m.dehydrated!==null){if(n===null){if(!b)throw Error(s(318));if(b=a.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(s(317));b[Qt]=a}else Xi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ht(a),b=!1}else b=Du(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=b),b=!0;if(!b)return a.flags&256?(Bs(a),a):(Bs(a),null)}return Bs(a),(a.flags&128)!==0?(a.lanes=d,a):(d=m!==null,n=n!==null&&n.memoizedState!==null,d&&(m=a.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool),v=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(v=m.memoizedState.cachePool.pool),v!==b&&(m.flags|=2048)),d!==n&&d&&(a.child.flags|=8192),rc(a,a.updateQueue),ht(a),null);case 4:return he(),n===null&&qh(a.stateNode.containerInfo),ht(a),null;case 10:return Xn(a.type),ht(a),null;case 19:if(G(Ct),m=a.memoizedState,m===null)return ht(a),null;if(b=(a.flags&128)!==0,v=m.rendering,v===null)if(b)go(m,!1);else{if(St!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(v=Yl(n),v!==null){for(a.flags|=128,go(m,!1),n=v.updateQueue,a.updateQueue=n,rc(a,n),a.subtreeFlags=0,n=d,d=a.child;d!==null;)Hp(d,n),d=d.sibling;return Z(Ct,Ct.current&1|2),ze&&$n(a,m.treeForkCount),a.child}n=n.sibling}m.tail!==null&&ke()>uc&&(a.flags|=128,b=!0,go(m,!1),a.lanes=4194304)}else{if(!b)if(n=Yl(v),n!==null){if(a.flags|=128,b=!0,n=n.updateQueue,a.updateQueue=n,rc(a,n),go(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!ze)return ht(a),null}else 2*ke()-m.renderingStartTime>uc&&d!==536870912&&(a.flags|=128,b=!0,go(m,!1),a.lanes=4194304);m.isBackwards?(v.sibling=a.child,a.child=v):(n=m.last,n!==null?n.sibling=v:a.child=v,m.last=v)}return m.tail!==null?(n=m.tail,m.rendering=n,m.tail=n.sibling,m.renderingStartTime=ke(),n.sibling=null,d=Ct.current,Z(Ct,b?d&1|2:d&1),ze&&$n(a,m.treeForkCount),n):(ht(a),null);case 22:case 23:return Bs(a),Gu(),m=a.memoizedState!==null,n!==null?n.memoizedState!==null!==m&&(a.flags|=8192):m&&(a.flags|=8192),m?(d&536870912)!==0&&(a.flags&128)===0&&(ht(a),a.subtreeFlags&6&&(a.flags|=8192)):ht(a),d=a.updateQueue,d!==null&&rc(a,d.retryQueue),d=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),m=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(m=a.memoizedState.cachePool.pool),m!==d&&(a.flags|=2048),n!==null&&G(Qi),null;case 24:return d=null,n!==null&&(d=n.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Xn(Mt),ht(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function I1(n,a){switch(Ru(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return Xn(Mt),he(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return Pe(a),null;case 31:if(a.memoizedState!==null){if(Bs(a),a.alternate===null)throw Error(s(340));Xi()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 13:if(Bs(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Xi()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return G(Ct),null;case 4:return he(),null;case 10:return Xn(a.type),null;case 22:case 23:return Bs(a),Gu(),n!==null&&G(Qi),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return Xn(Mt),null;case 25:return null;default:return null}}function p0(n,a){switch(Ru(a),a.tag){case 3:Xn(Mt),he();break;case 26:case 27:case 5:Pe(a);break;case 4:he();break;case 31:a.memoizedState!==null&&Bs(a);break;case 13:Bs(a);break;case 19:G(Ct);break;case 10:Xn(a.type);break;case 22:case 23:Bs(a),Gu(),n!==null&&G(Qi);break;case 24:Xn(Mt)}}function xo(n,a){try{var d=a.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var b=m.next;d=b;do{if((d.tag&n)===n){m=void 0;var v=d.create,T=d.inst;m=v(),T.destroy=m}d=d.next}while(d!==b)}}catch(P){Je(a,a.return,P)}}function Ni(n,a,d){try{var m=a.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var v=b.next;m=v;do{if((m.tag&n)===n){var T=m.inst,P=T.destroy;if(P!==void 0){T.destroy=void 0,b=a;var X=d,se=P;try{se()}catch(re){Je(b,X,re)}}}m=m.next}while(m!==v)}}catch(re){Je(a,a.return,re)}}function g0(n){var a=n.updateQueue;if(a!==null){var d=n.stateNode;try{rg(a,d)}catch(m){Je(n,n.return,m)}}}function x0(n,a,d){d.props=sa(n.type,n.memoizedProps),d.state=n.memoizedState;try{d.componentWillUnmount()}catch(m){Je(n,a,m)}}function bo(n,a){try{var d=n.ref;if(d!==null){switch(n.tag){case 26:case 27:case 5:var m=n.stateNode;break;case 30:m=n.stateNode;break;default:m=n.stateNode}typeof d=="function"?n.refCleanup=d(m):d.current=m}}catch(b){Je(n,a,b)}}function Cn(n,a){var d=n.ref,m=n.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(b){Je(n,a,b)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(b){Je(n,a,b)}else d.current=null}function b0(n){var a=n.type,d=n.memoizedProps,m=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(b){Je(n,n.return,b)}}function Nh(n,a,d){try{var m=n.stateNode;lA(m,n.type,d,a),m[xs]=a}catch(b){Je(n,n.return,b)}}function y0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ri(n.type)||n.tag===4}function jh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||y0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ri(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Sh(n,a,d){var m=n.tag;if(m===5||m===6)n=n.stateNode,a?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(n,a):(a=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,a.appendChild(n),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Vn));else if(m!==4&&(m===27&&Ri(n.type)&&(d=n.stateNode,a=null),n=n.child,n!==null))for(Sh(n,a,d),n=n.sibling;n!==null;)Sh(n,a,d),n=n.sibling}function oc(n,a,d){var m=n.tag;if(m===5||m===6)n=n.stateNode,a?d.insertBefore(n,a):d.appendChild(n);else if(m!==4&&(m===27&&Ri(n.type)&&(d=n.stateNode),n=n.child,n!==null))for(oc(n,a,d),n=n.sibling;n!==null;)oc(n,a,d),n=n.sibling}function v0(n){var a=n.stateNode,d=n.memoizedProps;try{for(var m=n.type,b=a.attributes;b.length;)a.removeAttributeNode(b[0]);ts(a,m,d),a[Qt]=n,a[xs]=d}catch(v){Je(n,n.return,v)}}var Jn=!1,Bt=!1,_h=!1,w0=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function z1(n,a){if(n=n.containerInfo,Yh=Cc,n=Mp(n),yu(n)){if("selectionStart"in n)var d={start:n.selectionStart,end:n.selectionEnd};else e:{d=(d=n.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var b=m.anchorOffset,v=m.focusNode;m=m.focusOffset;try{d.nodeType,v.nodeType}catch{d=null;break e}var T=0,P=-1,X=-1,se=0,re=0,ce=n,ne=null;t:for(;;){for(var ae;ce!==d||b!==0&&ce.nodeType!==3||(P=T+b),ce!==v||m!==0&&ce.nodeType!==3||(X=T+m),ce.nodeType===3&&(T+=ce.nodeValue.length),(ae=ce.firstChild)!==null;)ne=ce,ce=ae;for(;;){if(ce===n)break t;if(ne===d&&++se===b&&(P=T),ne===v&&++re===m&&(X=T),(ae=ce.nextSibling)!==null)break;ce=ne,ne=ce.parentNode}ce=ae}d=P===-1||X===-1?null:{start:P,end:X}}else d=null}d=d||{start:0,end:0}}else d=null;for(Xh={focusedElem:n,selectionRange:d},Cc=!1,Ht=a;Ht!==null;)if(a=Ht,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,Ht=n;else for(;Ht!==null;){switch(a=Ht,v=a.alternate,n=a.flags,a.tag){case 0:if((n&4)!==0&&(n=a.updateQueue,n=n!==null?n.events:null,n!==null))for(d=0;d<n.length;d++)b=n[d],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&v!==null){n=void 0,d=a,b=v.memoizedProps,v=v.memoizedState,m=d.stateNode;try{var pe=sa(d.type,b);n=m.getSnapshotBeforeUpdate(pe,v),m.__reactInternalSnapshotBeforeUpdate=n}catch(we){Je(d,d.return,we)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,d=n.nodeType,d===9)Qh(n);else if(d===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Qh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=a.sibling,n!==null){n.return=a.return,Ht=n;break}Ht=a.return}}function A0(n,a,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:ti(n,d),m&4&&xo(5,d);break;case 1:if(ti(n,d),m&4)if(n=d.stateNode,a===null)try{n.componentDidMount()}catch(T){Je(d,d.return,T)}else{var b=sa(d.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(b,a,n.__reactInternalSnapshotBeforeUpdate)}catch(T){Je(d,d.return,T)}}m&64&&g0(d),m&512&&bo(d,d.return);break;case 3:if(ti(n,d),m&64&&(n=d.updateQueue,n!==null)){if(a=null,d.child!==null)switch(d.child.tag){case 27:case 5:a=d.child.stateNode;break;case 1:a=d.child.stateNode}try{rg(n,a)}catch(T){Je(d,d.return,T)}}break;case 27:a===null&&m&4&&v0(d);case 26:case 5:ti(n,d),a===null&&m&4&&b0(d),m&512&&bo(d,d.return);break;case 12:ti(n,d);break;case 31:ti(n,d),m&4&&S0(n,d);break;case 13:ti(n,d),m&4&&_0(n,d),m&64&&(n=d.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(d=K1.bind(null,d),gA(n,d))));break;case 22:if(m=d.memoizedState!==null||Jn,!m){a=a!==null&&a.memoizedState!==null||Bt,b=Jn;var v=Bt;Jn=m,(Bt=a)&&!v?si(n,d,(d.subtreeFlags&8772)!==0):ti(n,d),Jn=b,Bt=v}break;case 30:break;default:ti(n,d)}}function N0(n){var a=n.alternate;a!==null&&(n.alternate=null,N0(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&su(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var pt=null,ys=!1;function ei(n,a,d){for(d=d.child;d!==null;)j0(n,a,d),d=d.sibling}function j0(n,a,d){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(hs,d)}catch{}switch(d.tag){case 26:Bt||Cn(d,a),ei(n,a,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Bt||Cn(d,a);var m=pt,b=ys;Ri(d.type)&&(pt=d.stateNode,ys=!1),ei(n,a,d),Eo(d.stateNode),pt=m,ys=b;break;case 5:Bt||Cn(d,a);case 6:if(m=pt,b=ys,pt=null,ei(n,a,d),pt=m,ys=b,pt!==null)if(ys)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(d.stateNode)}catch(v){Je(d,a,v)}else try{pt.removeChild(d.stateNode)}catch(v){Je(d,a,v)}break;case 18:pt!==null&&(ys?(n=pt,gx(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,d.stateNode),lr(n)):gx(pt,d.stateNode));break;case 4:m=pt,b=ys,pt=d.stateNode.containerInfo,ys=!0,ei(n,a,d),pt=m,ys=b;break;case 0:case 11:case 14:case 15:Ni(2,d,a),Bt||Ni(4,d,a),ei(n,a,d);break;case 1:Bt||(Cn(d,a),m=d.stateNode,typeof m.componentWillUnmount=="function"&&x0(d,a,m)),ei(n,a,d);break;case 21:ei(n,a,d);break;case 22:Bt=(m=Bt)||d.memoizedState!==null,ei(n,a,d),Bt=m;break;default:ei(n,a,d)}}function S0(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{lr(n)}catch(d){Je(a,a.return,d)}}}function _0(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{lr(n)}catch(d){Je(a,a.return,d)}}function H1(n){switch(n.tag){case 31:case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new w0),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new w0),a;default:throw Error(s(435,n.tag))}}function lc(n,a){var d=H1(n);a.forEach(function(m){if(!d.has(m)){d.add(m);var b=Q1.bind(null,n,m);m.then(b,b)}})}function vs(n,a){var d=a.deletions;if(d!==null)for(var m=0;m<d.length;m++){var b=d[m],v=n,T=a,P=T;e:for(;P!==null;){switch(P.tag){case 27:if(Ri(P.type)){pt=P.stateNode,ys=!1;break e}break;case 5:pt=P.stateNode,ys=!1;break e;case 3:case 4:pt=P.stateNode.containerInfo,ys=!0;break e}P=P.return}if(pt===null)throw Error(s(160));j0(v,T,b),pt=null,ys=!1,v=b.alternate,v!==null&&(v.return=null),b.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)E0(a,n),a=a.sibling}var mn=null;function E0(n,a){var d=n.alternate,m=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:vs(a,n),ws(n),m&4&&(Ni(3,n,n.return),xo(3,n),Ni(5,n,n.return));break;case 1:vs(a,n),ws(n),m&512&&(Bt||d===null||Cn(d,d.return)),m&64&&Jn&&(n=n.updateQueue,n!==null&&(m=n.callbacks,m!==null&&(d=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var b=mn;if(vs(a,n),ws(n),m&512&&(Bt||d===null||Cn(d,d.return)),m&4){var v=d!==null?d.memoizedState:null;if(m=n.memoizedState,d===null)if(m===null)if(n.stateNode===null){e:{m=n.type,d=n.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":v=b.getElementsByTagName("title")[0],(!v||v[qr]||v[Qt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=b.createElement(m),b.head.insertBefore(v,b.querySelector("head > title"))),ts(v,m,d),v[Qt]=n,zt(v),m=v;break e;case"link":var T=Ex("link","href",b).get(m+(d.href||""));if(T){for(var P=0;P<T.length;P++)if(v=T[P],v.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&v.getAttribute("rel")===(d.rel==null?null:d.rel)&&v.getAttribute("title")===(d.title==null?null:d.title)&&v.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){T.splice(P,1);break t}}v=b.createElement(m),ts(v,m,d),b.head.appendChild(v);break;case"meta":if(T=Ex("meta","content",b).get(m+(d.content||""))){for(P=0;P<T.length;P++)if(v=T[P],v.getAttribute("content")===(d.content==null?null:""+d.content)&&v.getAttribute("name")===(d.name==null?null:d.name)&&v.getAttribute("property")===(d.property==null?null:d.property)&&v.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&v.getAttribute("charset")===(d.charSet==null?null:d.charSet)){T.splice(P,1);break t}}v=b.createElement(m),ts(v,m,d),b.head.appendChild(v);break;default:throw Error(s(468,m))}v[Qt]=n,zt(v),m=v}n.stateNode=m}else Cx(b,n.type,n.stateNode);else n.stateNode=_x(b,m,n.memoizedProps);else v!==m?(v===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):v.count--,m===null?Cx(b,n.type,n.stateNode):_x(b,m,n.memoizedProps)):m===null&&n.stateNode!==null&&Nh(n,n.memoizedProps,d.memoizedProps)}break;case 27:vs(a,n),ws(n),m&512&&(Bt||d===null||Cn(d,d.return)),d!==null&&m&4&&Nh(n,n.memoizedProps,d.memoizedProps);break;case 5:if(vs(a,n),ws(n),m&512&&(Bt||d===null||Cn(d,d.return)),n.flags&32){b=n.stateNode;try{ka(b,"")}catch(pe){Je(n,n.return,pe)}}m&4&&n.stateNode!=null&&(b=n.memoizedProps,Nh(n,b,d!==null?d.memoizedProps:b)),m&1024&&(_h=!0);break;case 6:if(vs(a,n),ws(n),m&4){if(n.stateNode===null)throw Error(s(162));m=n.memoizedProps,d=n.stateNode;try{d.nodeValue=m}catch(pe){Je(n,n.return,pe)}}break;case 3:if(jc=null,b=mn,mn=Ac(a.containerInfo),vs(a,n),mn=b,ws(n),m&4&&d!==null&&d.memoizedState.isDehydrated)try{lr(a.containerInfo)}catch(pe){Je(n,n.return,pe)}_h&&(_h=!1,C0(n));break;case 4:m=mn,mn=Ac(n.stateNode.containerInfo),vs(a,n),ws(n),mn=m;break;case 12:vs(a,n),ws(n);break;case 31:vs(a,n),ws(n),m&4&&(m=n.updateQueue,m!==null&&(n.updateQueue=null,lc(n,m)));break;case 13:vs(a,n),ws(n),n.child.flags&8192&&n.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(dc=ke()),m&4&&(m=n.updateQueue,m!==null&&(n.updateQueue=null,lc(n,m)));break;case 22:b=n.memoizedState!==null;var X=d!==null&&d.memoizedState!==null,se=Jn,re=Bt;if(Jn=se||b,Bt=re||X,vs(a,n),Bt=re,Jn=se,ws(n),m&8192)e:for(a=n.stateNode,a._visibility=b?a._visibility&-2:a._visibility|1,b&&(d===null||X||Jn||Bt||na(n)),d=null,a=n;;){if(a.tag===5||a.tag===26){if(d===null){X=d=a;try{if(v=X.stateNode,b)T=v.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{P=X.stateNode;var ce=X.memoizedProps.style,ne=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;P.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(pe){Je(X,X.return,pe)}}}else if(a.tag===6){if(d===null){X=a;try{X.stateNode.nodeValue=b?"":X.memoizedProps}catch(pe){Je(X,X.return,pe)}}}else if(a.tag===18){if(d===null){X=a;try{var ae=X.stateNode;b?xx(ae,!0):xx(X.stateNode,!1)}catch(pe){Je(X,X.return,pe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;d===a&&(d=null),a=a.return}d===a&&(d=null),a.sibling.return=a.return,a=a.sibling}m&4&&(m=n.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,lc(n,d))));break;case 19:vs(a,n),ws(n),m&4&&(m=n.updateQueue,m!==null&&(n.updateQueue=null,lc(n,m)));break;case 30:break;case 21:break;default:vs(a,n),ws(n)}}function ws(n){var a=n.flags;if(a&2){try{for(var d,m=n.return;m!==null;){if(y0(m)){d=m;break}m=m.return}if(d==null)throw Error(s(160));switch(d.tag){case 27:var b=d.stateNode,v=jh(n);oc(n,v,b);break;case 5:var T=d.stateNode;d.flags&32&&(ka(T,""),d.flags&=-33);var P=jh(n);oc(n,P,T);break;case 3:case 4:var X=d.stateNode.containerInfo,se=jh(n);Sh(n,se,X);break;default:throw Error(s(161))}}catch(re){Je(n,n.return,re)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function C0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;C0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function ti(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)A0(n,a.alternate,a),a=a.sibling}function na(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:Ni(4,a,a.return),na(a);break;case 1:Cn(a,a.return);var d=a.stateNode;typeof d.componentWillUnmount=="function"&&x0(a,a.return,d),na(a);break;case 27:Eo(a.stateNode);case 26:case 5:Cn(a,a.return),na(a);break;case 22:a.memoizedState===null&&na(a);break;case 30:na(a);break;default:na(a)}n=n.sibling}}function si(n,a,d){for(d=d&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var m=a.alternate,b=n,v=a,T=v.flags;switch(v.tag){case 0:case 11:case 15:si(b,v,d),xo(4,v);break;case 1:if(si(b,v,d),m=v,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(se){Je(m,m.return,se)}if(m=v,b=m.updateQueue,b!==null){var P=m.stateNode;try{var X=b.shared.hiddenCallbacks;if(X!==null)for(b.shared.hiddenCallbacks=null,b=0;b<X.length;b++)ag(X[b],P)}catch(se){Je(m,m.return,se)}}d&&T&64&&g0(v),bo(v,v.return);break;case 27:v0(v);case 26:case 5:si(b,v,d),d&&m===null&&T&4&&b0(v),bo(v,v.return);break;case 12:si(b,v,d);break;case 31:si(b,v,d),d&&T&4&&S0(b,v);break;case 13:si(b,v,d),d&&T&4&&_0(b,v);break;case 22:v.memoizedState===null&&si(b,v,d),bo(v,v.return);break;case 30:break;default:si(b,v,d)}a=a.sibling}}function Eh(n,a){var d=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==d&&(n!=null&&n.refCount++,d!=null&&no(d))}function Ch(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&no(n))}function pn(n,a,d,m){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)T0(n,a,d,m),a=a.sibling}function T0(n,a,d,m){var b=a.flags;switch(a.tag){case 0:case 11:case 15:pn(n,a,d,m),b&2048&&xo(9,a);break;case 1:pn(n,a,d,m);break;case 3:pn(n,a,d,m),b&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&no(n)));break;case 12:if(b&2048){pn(n,a,d,m),n=a.stateNode;try{var v=a.memoizedProps,T=v.id,P=v.onPostCommit;typeof P=="function"&&P(T,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(X){Je(a,a.return,X)}}else pn(n,a,d,m);break;case 31:pn(n,a,d,m);break;case 13:pn(n,a,d,m);break;case 23:break;case 22:v=a.stateNode,T=a.alternate,a.memoizedState!==null?v._visibility&2?pn(n,a,d,m):yo(n,a):v._visibility&2?pn(n,a,d,m):(v._visibility|=2,Qa(n,a,d,m,(a.subtreeFlags&10256)!==0||!1)),b&2048&&Eh(T,a);break;case 24:pn(n,a,d,m),b&2048&&Ch(a.alternate,a);break;default:pn(n,a,d,m)}}function Qa(n,a,d,m,b){for(b=b&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var v=n,T=a,P=d,X=m,se=T.flags;switch(T.tag){case 0:case 11:case 15:Qa(v,T,P,X,b),xo(8,T);break;case 23:break;case 22:var re=T.stateNode;T.memoizedState!==null?re._visibility&2?Qa(v,T,P,X,b):yo(v,T):(re._visibility|=2,Qa(v,T,P,X,b)),b&&se&2048&&Eh(T.alternate,T);break;case 24:Qa(v,T,P,X,b),b&&se&2048&&Ch(T.alternate,T);break;default:Qa(v,T,P,X,b)}a=a.sibling}}function yo(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var d=n,m=a,b=m.flags;switch(m.tag){case 22:yo(d,m),b&2048&&Eh(m.alternate,m);break;case 24:yo(d,m),b&2048&&Ch(m.alternate,m);break;default:yo(d,m)}a=a.sibling}}var vo=8192;function Za(n,a,d){if(n.subtreeFlags&vo)for(n=n.child;n!==null;)R0(n,a,d),n=n.sibling}function R0(n,a,d){switch(n.tag){case 26:Za(n,a,d),n.flags&vo&&n.memoizedState!==null&&CA(d,mn,n.memoizedState,n.memoizedProps);break;case 5:Za(n,a,d);break;case 3:case 4:var m=mn;mn=Ac(n.stateNode.containerInfo),Za(n,a,d),mn=m;break;case 22:n.memoizedState===null&&(m=n.alternate,m!==null&&m.memoizedState!==null?(m=vo,vo=16777216,Za(n,a,d),vo=m):Za(n,a,d));break;default:Za(n,a,d)}}function k0(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function wo(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var d=0;d<a.length;d++){var m=a[d];Ht=m,M0(m,n)}k0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)D0(n),n=n.sibling}function D0(n){switch(n.tag){case 0:case 11:case 15:wo(n),n.flags&2048&&Ni(9,n,n.return);break;case 3:wo(n);break;case 12:wo(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,cc(n)):wo(n);break;default:wo(n)}}function cc(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var d=0;d<a.length;d++){var m=a[d];Ht=m,M0(m,n)}k0(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:Ni(8,a,a.return),cc(a);break;case 22:d=a.stateNode,d._visibility&2&&(d._visibility&=-3,cc(a));break;default:cc(a)}n=n.sibling}}function M0(n,a){for(;Ht!==null;){var d=Ht;switch(d.tag){case 0:case 11:case 15:Ni(8,d,a);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:no(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,Ht=m;else e:for(d=n;Ht!==null;){m=Ht;var b=m.sibling,v=m.return;if(N0(m),m===d){Ht=null;break e}if(b!==null){b.return=v,Ht=b;break e}Ht=v}}}var V1={getCacheForType:function(n){var a=Jt(Mt),d=a.data.get(n);return d===void 0&&(d=n(),a.data.set(n,d)),d},cacheSignal:function(){return Jt(Mt).controller.signal}},q1=typeof WeakMap=="function"?WeakMap:Map,Ke=0,ot=null,Oe=null,Fe=0,Ze=0,Ps=null,ji=!1,Ja=!1,Th=!1,ni=0,St=0,Si=0,ia=0,Rh=0,Fs=0,er=0,Ao=null,As=null,kh=!1,dc=0,L0=0,uc=1/0,hc=null,_i=null,Ut=0,Ei=null,tr=null,ii=0,Dh=0,Mh=null,O0=null,No=0,Lh=null;function Us(){return(Ke&2)!==0&&Fe!==0?Fe&-Fe:S.T!==null?Ih():Qm()}function B0(){if(Fs===0)if((Fe&536870912)===0||ze){var n=ja;ja<<=1,(ja&3932160)===0&&(ja=262144),Fs=n}else Fs=536870912;return n=Os.current,n!==null&&(n.flags|=32),Fs}function Ns(n,a,d){(n===ot&&(Ze===2||Ze===9)||n.cancelPendingCommit!==null)&&(sr(n,0),Ci(n,Fe,Fs,!1)),Vr(n,d),((Ke&2)===0||n!==ot)&&(n===ot&&((Ke&2)===0&&(ia|=d),St===4&&Ci(n,Fe,Fs,!1)),Tn(n))}function P0(n,a,d){if((Ke&6)!==0)throw Error(s(327));var m=!d&&(a&127)===0&&(a&n.expiredLanes)===0||un(n,a),b=m?Y1(n,a):Bh(n,a,!0),v=m;do{if(b===0){Ja&&!m&&Ci(n,a,0,!1);break}else{if(d=n.current.alternate,v&&!G1(d)){b=Bh(n,a,!1),v=!1;continue}if(b===2){if(v=a,n.errorRecoveryDisabledLanes&v)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var P=n;b=Ao;var X=P.current.memoizedState.isDehydrated;if(X&&(sr(P,T).flags|=256),T=Bh(P,T,!1),T!==2){if(Th&&!X){P.errorRecoveryDisabledLanes|=v,ia|=v,b=4;break e}v=As,As=b,v!==null&&(As===null?As=v:As.push.apply(As,v))}b=T}if(v=!1,b!==2)continue}}if(b===1){sr(n,0),Ci(n,a,0,!0);break}e:{switch(m=n,v=b,v){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Ci(m,a,Fs,!ji);break e;case 2:As=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(b=dc+300-ke(),10<b)){if(Ci(m,a,Fs,!ji),dn(m,0,!0)!==0)break e;ii=a,m.timeoutHandle=mx(F0.bind(null,m,d,As,hc,kh,a,Fs,ia,er,ji,v,"Throttled",-0,0),b);break e}F0(m,d,As,hc,kh,a,Fs,ia,er,ji,v,null,-0,0)}}break}while(!0);Tn(n)}function F0(n,a,d,m,b,v,T,P,X,se,re,ce,ne,ae){if(n.timeoutHandle=-1,ce=a.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vn},R0(a,v,ce);var pe=(v&62914560)===v?dc-ke():(v&4194048)===v?L0-ke():0;if(pe=TA(ce,pe),pe!==null){ii=v,n.cancelPendingCommit=pe($0.bind(null,n,a,v,d,m,b,T,P,X,re,ce,null,ne,ae)),Ci(n,v,T,!se);return}}$0(n,a,v,d,m,b,T,P,X)}function G1(n){for(var a=n;;){var d=a.tag;if((d===0||d===11||d===15)&&a.flags&16384&&(d=a.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var b=d[m],v=b.getSnapshot;b=b.value;try{if(!Ms(v(),b))return!1}catch{return!1}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ci(n,a,d,m){a&=~Rh,a&=~ia,n.suspendedLanes|=a,n.pingedLanes&=~a,m&&(n.warmLanes|=a),m=n.expirationTimes;for(var b=a;0<b;){var v=31-Kt(b),T=1<<v;m[v]=-1,b&=~T}d!==0&&Xm(n,d,a)}function fc(){return(Ke&6)===0?(jo(0),!1):!0}function Oh(){if(Oe!==null){if(Ze===0)var n=Oe.return;else n=Oe,Yn=Wi=null,Qu(n),$a=null,ao=0,n=Oe;for(;n!==null;)p0(n.alternate,n),n=n.return;Oe=null}}function sr(n,a){var d=n.timeoutHandle;d!==-1&&(n.timeoutHandle=-1,uA(d)),d=n.cancelPendingCommit,d!==null&&(n.cancelPendingCommit=null,d()),ii=0,Oh(),ot=n,Oe=d=Gn(n.current,null),Fe=a,Ze=0,Ps=null,ji=!1,Ja=un(n,a),Th=!1,er=Fs=Rh=ia=Si=St=0,As=Ao=null,kh=!1,(a&8)!==0&&(a|=a&32);var m=n.entangledLanes;if(m!==0)for(n=n.entanglements,m&=a;0<m;){var b=31-Kt(m),v=1<<b;a|=n[b],m&=~v}return ni=a,Ll(),d}function U0(n,a){Te=null,S.H=mo,a===Ga||a===Hl?(a=tg(),Ze=3):a===Uu?(a=tg(),Ze=4):Ze=a===fh?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ps=a,Oe===null&&(St=1,sc(n,Qs(a,n.current)))}function I0(){var n=Os.current;return n===null?!0:(Fe&4194048)===Fe?tn===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?n===tn:!1}function z0(){var n=S.H;return S.H=mo,n===null?mo:n}function H0(){var n=S.A;return S.A=V1,n}function mc(){St=4,ji||(Fe&4194048)!==Fe&&Os.current!==null||(Ja=!0),(Si&134217727)===0&&(ia&134217727)===0||ot===null||Ci(ot,Fe,Fs,!1)}function Bh(n,a,d){var m=Ke;Ke|=2;var b=z0(),v=H0();(ot!==n||Fe!==a)&&(hc=null,sr(n,a)),a=!1;var T=St;e:do try{if(Ze!==0&&Oe!==null){var P=Oe,X=Ps;switch(Ze){case 8:Oh(),T=6;break e;case 3:case 2:case 9:case 6:Os.current===null&&(a=!0);var se=Ze;if(Ze=0,Ps=null,nr(n,P,X,se),d&&Ja){T=0;break e}break;default:se=Ze,Ze=0,Ps=null,nr(n,P,X,se)}}$1(),T=St;break}catch(re){U0(n,re)}while(!0);return a&&n.shellSuspendCounter++,Yn=Wi=null,Ke=m,S.H=b,S.A=v,Oe===null&&(ot=null,Fe=0,Ll()),T}function $1(){for(;Oe!==null;)V0(Oe)}function Y1(n,a){var d=Ke;Ke|=2;var m=z0(),b=H0();ot!==n||Fe!==a?(hc=null,uc=ke()+500,sr(n,a)):Ja=un(n,a);e:do try{if(Ze!==0&&Oe!==null){a=Oe;var v=Ps;t:switch(Ze){case 1:Ze=0,Ps=null,nr(n,a,v,1);break;case 2:case 9:if(Jp(v)){Ze=0,Ps=null,q0(a);break}a=function(){Ze!==2&&Ze!==9||ot!==n||(Ze=7),Tn(n)},v.then(a,a);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Jp(v)?(Ze=0,Ps=null,q0(a)):(Ze=0,Ps=null,nr(n,a,v,7));break;case 5:var T=null;switch(Oe.tag){case 26:T=Oe.memoizedState;case 5:case 27:var P=Oe;if(T?Tx(T):P.stateNode.complete){Ze=0,Ps=null;var X=P.sibling;if(X!==null)Oe=X;else{var se=P.return;se!==null?(Oe=se,pc(se)):Oe=null}break t}}Ze=0,Ps=null,nr(n,a,v,5);break;case 6:Ze=0,Ps=null,nr(n,a,v,6);break;case 8:Oh(),St=6;break e;default:throw Error(s(462))}}X1();break}catch(re){U0(n,re)}while(!0);return Yn=Wi=null,S.H=m,S.A=b,Ke=d,Oe!==null?0:(ot=null,Fe=0,Ll(),St)}function X1(){for(;Oe!==null&&!Xt();)V0(Oe)}function V0(n){var a=f0(n.alternate,n,ni);n.memoizedProps=n.pendingProps,a===null?pc(n):Oe=a}function q0(n){var a=n,d=a.alternate;switch(a.tag){case 15:case 0:a=o0(d,a,a.pendingProps,a.type,void 0,Fe);break;case 11:a=o0(d,a,a.pendingProps,a.type.render,a.ref,Fe);break;case 5:Qu(a);default:p0(d,a),a=Oe=Hp(a,ni),a=f0(d,a,ni)}n.memoizedProps=n.pendingProps,a===null?pc(n):Oe=a}function nr(n,a,d,m){Yn=Wi=null,Qu(a),$a=null,ao=0;var b=a.return;try{if(B1(n,b,a,d,Fe)){St=1,sc(n,Qs(d,n.current)),Oe=null;return}}catch(v){if(b!==null)throw Oe=b,v;St=1,sc(n,Qs(d,n.current)),Oe=null;return}a.flags&32768?(ze||m===1?n=!0:Ja||(Fe&536870912)!==0?n=!1:(ji=n=!0,(m===2||m===9||m===3||m===6)&&(m=Os.current,m!==null&&m.tag===13&&(m.flags|=16384))),G0(a,n)):pc(a)}function pc(n){var a=n;do{if((a.flags&32768)!==0){G0(a,ji);return}n=a.return;var d=U1(a.alternate,a,ni);if(d!==null){Oe=d;return}if(a=a.sibling,a!==null){Oe=a;return}Oe=a=n}while(a!==null);St===0&&(St=5)}function G0(n,a){do{var d=I1(n.alternate,n);if(d!==null){d.flags&=32767,Oe=d;return}if(d=n.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!a&&(n=n.sibling,n!==null)){Oe=n;return}Oe=n=d}while(n!==null);St=6,Oe=null}function $0(n,a,d,m,b,v,T,P,X){n.cancelPendingCommit=null;do gc();while(Ut!==0);if((Ke&6)!==0)throw Error(s(327));if(a!==null){if(a===n.current)throw Error(s(177));if(v=a.lanes|a.childLanes,v|=ju,Ew(n,d,v,T,P,X),n===ot&&(Oe=ot=null,Fe=0),tr=a,Ei=n,ii=d,Dh=v,Mh=b,O0=m,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Z1(et,function(){return Q0(),null})):(n.callbackNode=null,n.callbackPriority=0),m=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||m){m=S.T,S.T=null,b=_.p,_.p=2,T=Ke,Ke|=4;try{z1(n,a,d)}finally{Ke=T,_.p=b,S.T=m}}Ut=1,Y0(),X0(),W0()}}function Y0(){if(Ut===1){Ut=0;var n=Ei,a=tr,d=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||d){d=S.T,S.T=null;var m=_.p;_.p=2;var b=Ke;Ke|=4;try{E0(a,n);var v=Xh,T=Mp(n.containerInfo),P=v.focusedElem,X=v.selectionRange;if(T!==P&&P&&P.ownerDocument&&Dp(P.ownerDocument.documentElement,P)){if(X!==null&&yu(P)){var se=X.start,re=X.end;if(re===void 0&&(re=se),"selectionStart"in P)P.selectionStart=se,P.selectionEnd=Math.min(re,P.value.length);else{var ce=P.ownerDocument||document,ne=ce&&ce.defaultView||window;if(ne.getSelection){var ae=ne.getSelection(),pe=P.textContent.length,we=Math.min(X.start,pe),nt=X.end===void 0?we:Math.min(X.end,pe);!ae.extend&&we>nt&&(T=nt,nt=we,we=T);var J=kp(P,we),W=kp(P,nt);if(J&&W&&(ae.rangeCount!==1||ae.anchorNode!==J.node||ae.anchorOffset!==J.offset||ae.focusNode!==W.node||ae.focusOffset!==W.offset)){var te=ce.createRange();te.setStart(J.node,J.offset),ae.removeAllRanges(),we>nt?(ae.addRange(te),ae.extend(W.node,W.offset)):(te.setEnd(W.node,W.offset),ae.addRange(te))}}}}for(ce=[],ae=P;ae=ae.parentNode;)ae.nodeType===1&&ce.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<ce.length;P++){var oe=ce[P];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Cc=!!Yh,Xh=Yh=null}finally{Ke=b,_.p=m,S.T=d}}n.current=a,Ut=2}}function X0(){if(Ut===2){Ut=0;var n=Ei,a=tr,d=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||d){d=S.T,S.T=null;var m=_.p;_.p=2;var b=Ke;Ke|=4;try{A0(n,a.alternate,a)}finally{Ke=b,_.p=m,S.T=d}}Ut=3}}function W0(){if(Ut===4||Ut===3){Ut=0,ft();var n=Ei,a=tr,d=ii,m=O0;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ut=5:(Ut=0,tr=Ei=null,K0(n,n.pendingLanes));var b=n.pendingLanes;if(b===0&&(_i=null),eu(d),a=a.stateNode,mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(hs,a,void 0,(a.current.flags&128)===128)}catch{}if(m!==null){a=S.T,b=_.p,_.p=2,S.T=null;try{for(var v=n.onRecoverableError,T=0;T<m.length;T++){var P=m[T];v(P.value,{componentStack:P.stack})}}finally{S.T=a,_.p=b}}(ii&3)!==0&&gc(),Tn(n),b=n.pendingLanes,(d&261930)!==0&&(b&42)!==0?n===Lh?No++:(No=0,Lh=n):No=0,jo(0)}}function K0(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,no(a)))}function gc(){return Y0(),X0(),W0(),Q0()}function Q0(){if(Ut!==5)return!1;var n=Ei,a=Dh;Dh=0;var d=eu(ii),m=S.T,b=_.p;try{_.p=32>d?32:d,S.T=null,d=Mh,Mh=null;var v=Ei,T=ii;if(Ut=0,tr=Ei=null,ii=0,(Ke&6)!==0)throw Error(s(331));var P=Ke;if(Ke|=4,D0(v.current),T0(v,v.current,T,d),Ke=P,jo(0,!1),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(hs,v)}catch{}return!0}finally{_.p=b,S.T=m,K0(n,a)}}function Z0(n,a,d){a=Qs(d,a),a=hh(n.stateNode,a,2),n=vi(n,a,2),n!==null&&(Vr(n,2),Tn(n))}function Je(n,a,d){if(n.tag===3)Z0(n,n,d);else for(;a!==null;){if(a.tag===3){Z0(a,n,d);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(_i===null||!_i.has(m))){n=Qs(d,n),d=Jg(2),m=vi(a,d,2),m!==null&&(e0(d,m,a,n),Vr(m,2),Tn(m));break}}a=a.return}}function Ph(n,a,d){var m=n.pingCache;if(m===null){m=n.pingCache=new q1;var b=new Set;m.set(a,b)}else b=m.get(a),b===void 0&&(b=new Set,m.set(a,b));b.has(d)||(Th=!0,b.add(d),n=W1.bind(null,n,a,d),a.then(n,n))}function W1(n,a,d){var m=n.pingCache;m!==null&&m.delete(a),n.pingedLanes|=n.suspendedLanes&d,n.warmLanes&=~d,ot===n&&(Fe&d)===d&&(St===4||St===3&&(Fe&62914560)===Fe&&300>ke()-dc?(Ke&2)===0&&sr(n,0):Rh|=d,er===Fe&&(er=0)),Tn(n)}function J0(n,a){a===0&&(a=Sn()),n=$i(n,a),n!==null&&(Vr(n,a),Tn(n))}function K1(n){var a=n.memoizedState,d=0;a!==null&&(d=a.retryLane),J0(n,d)}function Q1(n,a){var d=0;switch(n.tag){case 31:case 13:var m=n.stateNode,b=n.memoizedState;b!==null&&(d=b.retryLane);break;case 19:m=n.stateNode;break;case 22:m=n.stateNode._retryCache;break;default:throw Error(s(314))}m!==null&&m.delete(a),J0(n,d)}function Z1(n,a){return Et(n,a)}var xc=null,ir=null,Fh=!1,bc=!1,Uh=!1,Ti=0;function Tn(n){n!==ir&&n.next===null&&(ir===null?xc=ir=n:ir=ir.next=n),bc=!0,Fh||(Fh=!0,eA())}function jo(n,a){if(!Uh&&bc){Uh=!0;do for(var d=!1,m=xc;m!==null;){if(n!==0){var b=m.pendingLanes;if(b===0)var v=0;else{var T=m.suspendedLanes,P=m.pingedLanes;v=(1<<31-Kt(42|n)+1)-1,v&=b&~(T&~P),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(d=!0,nx(m,v))}else v=Fe,v=dn(m,m===ot?v:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(v&3)===0||un(m,v)||(d=!0,nx(m,v));m=m.next}while(d);Uh=!1}}function J1(){ex()}function ex(){bc=Fh=!1;var n=0;Ti!==0&&dA()&&(n=Ti);for(var a=ke(),d=null,m=xc;m!==null;){var b=m.next,v=tx(m,a);v===0?(m.next=null,d===null?xc=b:d.next=b,b===null&&(ir=d)):(d=m,(n!==0||(v&3)!==0)&&(bc=!0)),m=b}Ut!==0&&Ut!==5||jo(n),Ti!==0&&(Ti=0)}function tx(n,a){for(var d=n.suspendedLanes,m=n.pingedLanes,b=n.expirationTimes,v=n.pendingLanes&-62914561;0<v;){var T=31-Kt(v),P=1<<T,X=b[T];X===-1?((P&d)===0||(P&m)!==0)&&(b[T]=Al(P,a)):X<=a&&(n.expiredLanes|=P),v&=~P}if(a=ot,d=Fe,d=dn(n,n===a?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),m=n.callbackNode,d===0||n===a&&(Ze===2||Ze===9)||n.cancelPendingCommit!==null)return m!==null&&m!==null&&Qe(m),n.callbackNode=null,n.callbackPriority=0;if((d&3)===0||un(n,d)){if(a=d&-d,a===n.callbackPriority)return a;switch(m!==null&&Qe(m),eu(d)){case 2:case 8:d=is;break;case 32:d=et;break;case 268435456:d=Nt;break;default:d=et}return m=sx.bind(null,n),d=Et(d,m),n.callbackPriority=a,n.callbackNode=d,a}return m!==null&&m!==null&&Qe(m),n.callbackPriority=2,n.callbackNode=null,2}function sx(n,a){if(Ut!==0&&Ut!==5)return n.callbackNode=null,n.callbackPriority=0,null;var d=n.callbackNode;if(gc()&&n.callbackNode!==d)return null;var m=Fe;return m=dn(n,n===ot?m:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),m===0?null:(P0(n,m,a),tx(n,ke()),n.callbackNode!=null&&n.callbackNode===d?sx.bind(null,n):null)}function nx(n,a){if(gc())return null;P0(n,a,!0)}function eA(){hA(function(){(Ke&6)!==0?Et(Rs,J1):ex()})}function Ih(){if(Ti===0){var n=Va;n===0&&(n=jn,jn<<=1,(jn&261888)===0&&(jn=256)),Ti=n}return Ti}function ix(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:_l(""+n)}function ax(n,a){var d=a.ownerDocument.createElement("input");return d.name=a.name,d.value=a.value,n.id&&d.setAttribute("form",n.id),a.parentNode.insertBefore(d,a),n=new FormData(n),d.parentNode.removeChild(d),n}function tA(n,a,d,m,b){if(a==="submit"&&d&&d.stateNode===b){var v=ix((b[xs]||null).action),T=m.submitter;T&&(a=(a=T[xs]||null)?ix(a.formAction):T.getAttribute("formAction"),a!==null&&(v=a,T=null));var P=new Rl("action","action",null,m,b);n.push({event:P,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Ti!==0){var X=T?ax(b,T):new FormData(b);rh(d,{pending:!0,data:X,method:b.method,action:v},null,X)}}else typeof v=="function"&&(P.preventDefault(),X=T?ax(b,T):new FormData(b),rh(d,{pending:!0,data:X,method:b.method,action:v},v,X))},currentTarget:b}]})}}for(var zh=0;zh<Nu.length;zh++){var Hh=Nu[zh],sA=Hh.toLowerCase(),nA=Hh[0].toUpperCase()+Hh.slice(1);fn(sA,"on"+nA)}fn(Bp,"onAnimationEnd"),fn(Pp,"onAnimationIteration"),fn(Fp,"onAnimationStart"),fn("dblclick","onDoubleClick"),fn("focusin","onFocus"),fn("focusout","onBlur"),fn(y1,"onTransitionRun"),fn(v1,"onTransitionStart"),fn(w1,"onTransitionCancel"),fn(Up,"onTransitionEnd"),Ta("onMouseEnter",["mouseout","mouseover"]),Ta("onMouseLeave",["mouseout","mouseover"]),Ta("onPointerEnter",["pointerout","pointerover"]),Ta("onPointerLeave",["pointerout","pointerover"]),Hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var So="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(So));function rx(n,a){a=(a&4)!==0;for(var d=0;d<n.length;d++){var m=n[d],b=m.event;m=m.listeners;e:{var v=void 0;if(a)for(var T=m.length-1;0<=T;T--){var P=m[T],X=P.instance,se=P.currentTarget;if(P=P.listener,X!==v&&b.isPropagationStopped())break e;v=P,b.currentTarget=se;try{v(b)}catch(re){Ml(re)}b.currentTarget=null,v=X}else for(T=0;T<m.length;T++){if(P=m[T],X=P.instance,se=P.currentTarget,P=P.listener,X!==v&&b.isPropagationStopped())break e;v=P,b.currentTarget=se;try{v(b)}catch(re){Ml(re)}b.currentTarget=null,v=X}}}}function Be(n,a){var d=a[tu];d===void 0&&(d=a[tu]=new Set);var m=n+"__bubble";d.has(m)||(ox(a,n,2,!1),d.add(m))}function Vh(n,a,d){var m=0;a&&(m|=4),ox(d,n,m,a)}var yc="_reactListening"+Math.random().toString(36).slice(2);function qh(n){if(!n[yc]){n[yc]=!0,ep.forEach(function(d){d!=="selectionchange"&&(iA.has(d)||Vh(d,!1,n),Vh(d,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[yc]||(a[yc]=!0,Vh("selectionchange",!1,a))}}function ox(n,a,d,m){switch(Bx(a)){case 2:var b=DA;break;case 8:b=MA;break;default:b=rf}d=b.bind(null,a,d,n),b=void 0,!du||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(b=!0),m?b!==void 0?n.addEventListener(a,d,{capture:!0,passive:b}):n.addEventListener(a,d,!0):b!==void 0?n.addEventListener(a,d,{passive:b}):n.addEventListener(a,d,!1)}function Gh(n,a,d,m,b){var v=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var T=m.tag;if(T===3||T===4){var P=m.stateNode.containerInfo;if(P===b)break;if(T===4)for(T=m.return;T!==null;){var X=T.tag;if((X===3||X===4)&&T.stateNode.containerInfo===b)return;T=T.return}for(;P!==null;){if(T=_a(P),T===null)return;if(X=T.tag,X===5||X===6||X===26||X===27){m=v=T;continue e}P=P.parentNode}}m=m.return}hp(function(){var se=v,re=lu(d),ce=[];e:{var ne=Ip.get(n);if(ne!==void 0){var ae=Rl,pe=n;switch(n){case"keypress":if(Cl(d)===0)break e;case"keydown":case"keyup":ae=Qw;break;case"focusin":pe="focus",ae=mu;break;case"focusout":pe="blur",ae=mu;break;case"beforeblur":case"afterblur":ae=mu;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=pp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Uw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=e1;break;case Bp:case Pp:case Fp:ae=Hw;break;case Up:ae=s1;break;case"scroll":case"scrollend":ae=Pw;break;case"wheel":ae=i1;break;case"copy":case"cut":case"paste":ae=qw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=xp;break;case"toggle":case"beforetoggle":ae=r1}var we=(a&4)!==0,nt=!we&&(n==="scroll"||n==="scrollend"),J=we?ne!==null?ne+"Capture":null:ne;we=[];for(var W=se,te;W!==null;){var oe=W;if(te=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||te===null||J===null||(oe=$r(W,J),oe!=null&&we.push(_o(W,oe,te))),nt)break;W=W.return}0<we.length&&(ne=new ae(ne,pe,null,d,re),ce.push({event:ne,listeners:we}))}}if((a&7)===0){e:{if(ne=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",ne&&d!==ou&&(pe=d.relatedTarget||d.fromElement)&&(_a(pe)||pe[Sa]))break e;if((ae||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,ae?(pe=d.relatedTarget||d.toElement,ae=se,pe=pe?_a(pe):null,pe!==null&&(nt=r(pe),we=pe.tag,pe!==nt||we!==5&&we!==27&&we!==6)&&(pe=null)):(ae=null,pe=se),ae!==pe)){if(we=pp,oe="onMouseLeave",J="onMouseEnter",W="mouse",(n==="pointerout"||n==="pointerover")&&(we=xp,oe="onPointerLeave",J="onPointerEnter",W="pointer"),nt=ae==null?ne:Gr(ae),te=pe==null?ne:Gr(pe),ne=new we(oe,W+"leave",ae,d,re),ne.target=nt,ne.relatedTarget=te,oe=null,_a(re)===se&&(we=new we(J,W+"enter",pe,d,re),we.target=te,we.relatedTarget=nt,oe=we),nt=oe,ae&&pe)t:{for(we=aA,J=ae,W=pe,te=0,oe=J;oe;oe=we(oe))te++;oe=0;for(var be=W;be;be=we(be))oe++;for(;0<te-oe;)J=we(J),te--;for(;0<oe-te;)W=we(W),oe--;for(;te--;){if(J===W||W!==null&&J===W.alternate){we=J;break t}J=we(J),W=we(W)}we=null}else we=null;ae!==null&&lx(ce,ne,ae,we,!1),pe!==null&&nt!==null&&lx(ce,nt,pe,we,!0)}}e:{if(ne=se?Gr(se):window,ae=ne.nodeName&&ne.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ne.type==="file")var Xe=Sp;else if(Np(ne))if(_p)Xe=g1;else{Xe=m1;var ge=f1}else ae=ne.nodeName,!ae||ae.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?se&&ru(se.elementType)&&(Xe=Sp):Xe=p1;if(Xe&&(Xe=Xe(n,se))){jp(ce,Xe,d,re);break e}ge&&ge(n,ne,se),n==="focusout"&&se&&ne.type==="number"&&se.memoizedProps.value!=null&&au(ne,"number",ne.value)}switch(ge=se?Gr(se):window,n){case"focusin":(Np(ge)||ge.contentEditable==="true")&&(Oa=ge,vu=se,eo=null);break;case"focusout":eo=vu=Oa=null;break;case"mousedown":wu=!0;break;case"contextmenu":case"mouseup":case"dragend":wu=!1,Lp(ce,d,re);break;case"selectionchange":if(b1)break;case"keydown":case"keyup":Lp(ce,d,re)}var De;if(gu)e:{switch(n){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else La?wp(n,d)&&(Ue="onCompositionEnd"):n==="keydown"&&d.keyCode===229&&(Ue="onCompositionStart");Ue&&(bp&&d.locale!=="ko"&&(La||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&La&&(De=fp()):(fi=re,uu="value"in fi?fi.value:fi.textContent,La=!0)),ge=vc(se,Ue),0<ge.length&&(Ue=new gp(Ue,n,null,d,re),ce.push({event:Ue,listeners:ge}),De?Ue.data=De:(De=Ap(d),De!==null&&(Ue.data=De)))),(De=l1?c1(n,d):d1(n,d))&&(Ue=vc(se,"onBeforeInput"),0<Ue.length&&(ge=new gp("onBeforeInput","beforeinput",null,d,re),ce.push({event:ge,listeners:Ue}),ge.data=De)),tA(ce,n,se,d,re)}rx(ce,a)})}function _o(n,a,d){return{instance:n,listener:a,currentTarget:d}}function vc(n,a){for(var d=a+"Capture",m=[];n!==null;){var b=n,v=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||v===null||(b=$r(n,d),b!=null&&m.unshift(_o(n,b,v)),b=$r(n,a),b!=null&&m.push(_o(n,b,v))),n.tag===3)return m;n=n.return}return[]}function aA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function lx(n,a,d,m,b){for(var v=a._reactName,T=[];d!==null&&d!==m;){var P=d,X=P.alternate,se=P.stateNode;if(P=P.tag,X!==null&&X===m)break;P!==5&&P!==26&&P!==27||se===null||(X=se,b?(se=$r(d,v),se!=null&&T.unshift(_o(d,se,X))):b||(se=$r(d,v),se!=null&&T.push(_o(d,se,X)))),d=d.return}T.length!==0&&n.push({event:a,listeners:T})}var rA=/\r\n?/g,oA=/\u0000|\uFFFD/g;function cx(n){return(typeof n=="string"?n:""+n).replace(rA,`
`).replace(oA,"")}function dx(n,a){return a=cx(a),cx(n)===a}function st(n,a,d,m,b,v){switch(d){case"children":typeof m=="string"?a==="body"||a==="textarea"&&m===""||ka(n,m):(typeof m=="number"||typeof m=="bigint")&&a!=="body"&&ka(n,""+m);break;case"className":jl(n,"class",m);break;case"tabIndex":jl(n,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":jl(n,d,m);break;case"style":dp(n,m,v);break;case"data":if(a!=="object"){jl(n,"data",m);break}case"src":case"href":if(m===""&&(a!=="a"||d!=="href")){n.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){n.removeAttribute(d);break}m=_l(""+m),n.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){n.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(d==="formAction"?(a!=="input"&&st(n,a,"name",b.name,b,null),st(n,a,"formEncType",b.formEncType,b,null),st(n,a,"formMethod",b.formMethod,b,null),st(n,a,"formTarget",b.formTarget,b,null)):(st(n,a,"encType",b.encType,b,null),st(n,a,"method",b.method,b,null),st(n,a,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){n.removeAttribute(d);break}m=_l(""+m),n.setAttribute(d,m);break;case"onClick":m!=null&&(n.onclick=Vn);break;case"onScroll":m!=null&&Be("scroll",n);break;case"onScrollEnd":m!=null&&Be("scrollend",n);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(d=m.__html,d!=null){if(b.children!=null)throw Error(s(60));n.innerHTML=d}}break;case"multiple":n.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":n.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){n.removeAttribute("xlink:href");break}d=_l(""+m),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?n.setAttribute(d,""+m):n.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?n.setAttribute(d,""):n.removeAttribute(d);break;case"capture":case"download":m===!0?n.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?n.setAttribute(d,m):n.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?n.setAttribute(d,m):n.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?n.removeAttribute(d):n.setAttribute(d,m);break;case"popover":Be("beforetoggle",n),Be("toggle",n),Nl(n,"popover",m);break;case"xlinkActuate":Hn(n,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Hn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Hn(n,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Hn(n,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Hn(n,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Hn(n,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Nl(n,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Ow.get(d)||d,Nl(n,d,m))}}function $h(n,a,d,m,b,v){switch(d){case"style":dp(n,m,v);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(d=m.__html,d!=null){if(b.children!=null)throw Error(s(60));n.innerHTML=d}}break;case"children":typeof m=="string"?ka(n,m):(typeof m=="number"||typeof m=="bigint")&&ka(n,""+m);break;case"onScroll":m!=null&&Be("scroll",n);break;case"onScrollEnd":m!=null&&Be("scrollend",n);break;case"onClick":m!=null&&(n.onclick=Vn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tp.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(b=d.endsWith("Capture"),a=d.slice(2,b?d.length-7:void 0),v=n[xs]||null,v=v!=null?v[d]:null,typeof v=="function"&&n.removeEventListener(a,v,b),typeof m=="function")){typeof v!="function"&&v!==null&&(d in n?n[d]=null:n.hasAttribute(d)&&n.removeAttribute(d)),n.addEventListener(a,m,b);break e}d in n?n[d]=m:m===!0?n.setAttribute(d,""):Nl(n,d,m)}}}function ts(n,a,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",n),Be("load",n);var m=!1,b=!1,v;for(v in d)if(d.hasOwnProperty(v)){var T=d[v];if(T!=null)switch(v){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:st(n,a,v,T,d,null)}}b&&st(n,a,"srcSet",d.srcSet,d,null),m&&st(n,a,"src",d.src,d,null);return;case"input":Be("invalid",n);var P=v=T=b=null,X=null,se=null;for(m in d)if(d.hasOwnProperty(m)){var re=d[m];if(re!=null)switch(m){case"name":b=re;break;case"type":T=re;break;case"checked":X=re;break;case"defaultChecked":se=re;break;case"value":v=re;break;case"defaultValue":P=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,a));break;default:st(n,a,m,re,d,null)}}rp(n,v,P,X,se,T,b,!1);return;case"select":Be("invalid",n),m=T=v=null;for(b in d)if(d.hasOwnProperty(b)&&(P=d[b],P!=null))switch(b){case"value":v=P;break;case"defaultValue":T=P;break;case"multiple":m=P;default:st(n,a,b,P,d,null)}a=v,d=T,n.multiple=!!m,a!=null?Ra(n,!!m,a,!1):d!=null&&Ra(n,!!m,d,!0);return;case"textarea":Be("invalid",n),v=b=m=null;for(T in d)if(d.hasOwnProperty(T)&&(P=d[T],P!=null))switch(T){case"value":m=P;break;case"defaultValue":b=P;break;case"children":v=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(91));break;default:st(n,a,T,P,d,null)}lp(n,m,b,v);return;case"option":for(X in d)d.hasOwnProperty(X)&&(m=d[X],m!=null)&&(X==="selected"?n.selected=m&&typeof m!="function"&&typeof m!="symbol":st(n,a,X,m,d,null));return;case"dialog":Be("beforetoggle",n),Be("toggle",n),Be("cancel",n),Be("close",n);break;case"iframe":case"object":Be("load",n);break;case"video":case"audio":for(m=0;m<So.length;m++)Be(So[m],n);break;case"image":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"embed":case"source":case"link":Be("error",n),Be("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in d)if(d.hasOwnProperty(se)&&(m=d[se],m!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:st(n,a,se,m,d,null)}return;default:if(ru(a)){for(re in d)d.hasOwnProperty(re)&&(m=d[re],m!==void 0&&$h(n,a,re,m,d,void 0));return}}for(P in d)d.hasOwnProperty(P)&&(m=d[P],m!=null&&st(n,a,P,m,d,null))}function lA(n,a,d,m){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,v=null,T=null,P=null,X=null,se=null,re=null;for(ae in d){var ce=d[ae];if(d.hasOwnProperty(ae)&&ce!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":X=ce;default:m.hasOwnProperty(ae)||st(n,a,ae,null,m,ce)}}for(var ne in m){var ae=m[ne];if(ce=d[ne],m.hasOwnProperty(ne)&&(ae!=null||ce!=null))switch(ne){case"type":v=ae;break;case"name":b=ae;break;case"checked":se=ae;break;case"defaultChecked":re=ae;break;case"value":T=ae;break;case"defaultValue":P=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,a));break;default:ae!==ce&&st(n,a,ne,ae,m,ce)}}iu(n,T,P,X,se,re,v,b);return;case"select":ae=T=P=ne=null;for(v in d)if(X=d[v],d.hasOwnProperty(v)&&X!=null)switch(v){case"value":break;case"multiple":ae=X;default:m.hasOwnProperty(v)||st(n,a,v,null,m,X)}for(b in m)if(v=m[b],X=d[b],m.hasOwnProperty(b)&&(v!=null||X!=null))switch(b){case"value":ne=v;break;case"defaultValue":P=v;break;case"multiple":T=v;default:v!==X&&st(n,a,b,v,m,X)}a=P,d=T,m=ae,ne!=null?Ra(n,!!d,ne,!1):!!m!=!!d&&(a!=null?Ra(n,!!d,a,!0):Ra(n,!!d,d?[]:"",!1));return;case"textarea":ae=ne=null;for(P in d)if(b=d[P],d.hasOwnProperty(P)&&b!=null&&!m.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:st(n,a,P,null,m,b)}for(T in m)if(b=m[T],v=d[T],m.hasOwnProperty(T)&&(b!=null||v!=null))switch(T){case"value":ne=b;break;case"defaultValue":ae=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:b!==v&&st(n,a,T,b,m,v)}op(n,ne,ae);return;case"option":for(var pe in d)ne=d[pe],d.hasOwnProperty(pe)&&ne!=null&&!m.hasOwnProperty(pe)&&(pe==="selected"?n.selected=!1:st(n,a,pe,null,m,ne));for(X in m)ne=m[X],ae=d[X],m.hasOwnProperty(X)&&ne!==ae&&(ne!=null||ae!=null)&&(X==="selected"?n.selected=ne&&typeof ne!="function"&&typeof ne!="symbol":st(n,a,X,ne,m,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in d)ne=d[we],d.hasOwnProperty(we)&&ne!=null&&!m.hasOwnProperty(we)&&st(n,a,we,null,m,ne);for(se in m)if(ne=m[se],ae=d[se],m.hasOwnProperty(se)&&ne!==ae&&(ne!=null||ae!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,a));break;default:st(n,a,se,ne,m,ae)}return;default:if(ru(a)){for(var nt in d)ne=d[nt],d.hasOwnProperty(nt)&&ne!==void 0&&!m.hasOwnProperty(nt)&&$h(n,a,nt,void 0,m,ne);for(re in m)ne=m[re],ae=d[re],!m.hasOwnProperty(re)||ne===ae||ne===void 0&&ae===void 0||$h(n,a,re,ne,m,ae);return}}for(var J in d)ne=d[J],d.hasOwnProperty(J)&&ne!=null&&!m.hasOwnProperty(J)&&st(n,a,J,null,m,ne);for(ce in m)ne=m[ce],ae=d[ce],!m.hasOwnProperty(ce)||ne===ae||ne==null&&ae==null||st(n,a,ce,ne,m,ae)}function ux(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,a=0,d=performance.getEntriesByType("resource"),m=0;m<d.length;m++){var b=d[m],v=b.transferSize,T=b.initiatorType,P=b.duration;if(v&&P&&ux(T)){for(T=0,P=b.responseEnd,m+=1;m<d.length;m++){var X=d[m],se=X.startTime;if(se>P)break;var re=X.transferSize,ce=X.initiatorType;re&&ux(ce)&&(X=X.responseEnd,T+=re*(X<P?1:(P-se)/(X-se)))}if(--m,a+=8*(v+T)/(b.duration/1e3),n++,10<n)break}}if(0<n)return a/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Yh=null,Xh=null;function wc(n){return n.nodeType===9?n:n.ownerDocument}function hx(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fx(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function Wh(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Kh=null;function dA(){var n=window.event;return n&&n.type==="popstate"?n===Kh?!1:(Kh=n,!0):(Kh=null,!1)}var mx=typeof setTimeout=="function"?setTimeout:void 0,uA=typeof clearTimeout=="function"?clearTimeout:void 0,px=typeof Promise=="function"?Promise:void 0,hA=typeof queueMicrotask=="function"?queueMicrotask:typeof px<"u"?function(n){return px.resolve(null).then(n).catch(fA)}:mx;function fA(n){setTimeout(function(){throw n})}function Ri(n){return n==="head"}function gx(n,a){var d=a,m=0;do{var b=d.nextSibling;if(n.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"||d==="/&"){if(m===0){n.removeChild(b),lr(a);return}m--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")m++;else if(d==="html")Eo(n.ownerDocument.documentElement);else if(d==="head"){d=n.ownerDocument.head,Eo(d);for(var v=d.firstChild;v;){var T=v.nextSibling,P=v.nodeName;v[qr]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&v.rel.toLowerCase()==="stylesheet"||d.removeChild(v),v=T}}else d==="body"&&Eo(n.ownerDocument.body);d=b}while(d);lr(a)}function xx(n,a){var d=n;n=0;do{var m=d.nextSibling;if(d.nodeType===1?a?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(a?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),m&&m.nodeType===8)if(d=m.data,d==="/$"){if(n===0)break;n--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||n++;d=m}while(d)}function Qh(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var d=a;switch(a=a.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Qh(d),su(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}n.removeChild(d)}}function mA(n,a,d,m){for(;n.nodeType===1;){var b=d;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!m&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(m){if(!n[qr])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(v=n.getAttribute("rel"),v==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(v!==b.rel||n.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||n.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||n.getAttribute("title")!==(b.title==null?null:b.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(v=n.getAttribute("src"),(v!==(b.src==null?null:b.src)||n.getAttribute("type")!==(b.type==null?null:b.type)||n.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&v&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var v=b.name==null?null:""+b.name;if(b.type==="hidden"&&n.getAttribute("name")===v)return n}else return n;if(n=sn(n.nextSibling),n===null)break}return null}function pA(n,a,d){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!d||(n=sn(n.nextSibling),n===null))return null;return n}function bx(n,a){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=sn(n.nextSibling),n===null))return null;return n}function Zh(n){return n.data==="$?"||n.data==="$~"}function Jh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function gA(n,a){var d=n.ownerDocument;if(n.data==="$~")n._reactRetry=a;else if(n.data!=="$?"||d.readyState!=="loading")a();else{var m=function(){a(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),n._reactRetry=m}}function sn(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return n}var ef=null;function yx(n){n=n.nextSibling;for(var a=0;n;){if(n.nodeType===8){var d=n.data;if(d==="/$"||d==="/&"){if(a===0)return sn(n.nextSibling);a--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||a++}n=n.nextSibling}return null}function vx(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var d=n.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(a===0)return n;a--}else d!=="/$"&&d!=="/&"||a++}n=n.previousSibling}return null}function wx(n,a,d){switch(a=wc(d),n){case"html":if(n=a.documentElement,!n)throw Error(s(452));return n;case"head":if(n=a.head,!n)throw Error(s(453));return n;case"body":if(n=a.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Eo(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);su(n)}var nn=new Map,Ax=new Set;function Ac(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ai=_.d;_.d={f:xA,r:bA,D:yA,C:vA,L:wA,m:AA,X:jA,S:NA,M:SA};function xA(){var n=ai.f(),a=fc();return n||a}function bA(n){var a=Ea(n);a!==null&&a.tag===5&&a.type==="form"?Ug(a):ai.r(n)}var ar=typeof document>"u"?null:document;function Nx(n,a,d){var m=ar;if(m&&typeof a=="string"&&a){var b=Ws(a);b='link[rel="'+n+'"][href="'+b+'"]',typeof d=="string"&&(b+='[crossorigin="'+d+'"]'),Ax.has(b)||(Ax.add(b),n={rel:n,crossOrigin:d,href:a},m.querySelector(b)===null&&(a=m.createElement("link"),ts(a,"link",n),zt(a),m.head.appendChild(a)))}}function yA(n){ai.D(n),Nx("dns-prefetch",n,null)}function vA(n,a){ai.C(n,a),Nx("preconnect",n,a)}function wA(n,a,d){ai.L(n,a,d);var m=ar;if(m&&n&&a){var b='link[rel="preload"][as="'+Ws(a)+'"]';a==="image"&&d&&d.imageSrcSet?(b+='[imagesrcset="'+Ws(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(b+='[imagesizes="'+Ws(d.imageSizes)+'"]')):b+='[href="'+Ws(n)+'"]';var v=b;switch(a){case"style":v=rr(n);break;case"script":v=or(n)}nn.has(v)||(n=g({rel:"preload",href:a==="image"&&d&&d.imageSrcSet?void 0:n,as:a},d),nn.set(v,n),m.querySelector(b)!==null||a==="style"&&m.querySelector(Co(v))||a==="script"&&m.querySelector(To(v))||(a=m.createElement("link"),ts(a,"link",n),zt(a),m.head.appendChild(a)))}}function AA(n,a){ai.m(n,a);var d=ar;if(d&&n){var m=a&&typeof a.as=="string"?a.as:"script",b='link[rel="modulepreload"][as="'+Ws(m)+'"][href="'+Ws(n)+'"]',v=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=or(n)}if(!nn.has(v)&&(n=g({rel:"modulepreload",href:n},a),nn.set(v,n),d.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(To(v)))return}m=d.createElement("link"),ts(m,"link",n),zt(m),d.head.appendChild(m)}}}function NA(n,a,d){ai.S(n,a,d);var m=ar;if(m&&n){var b=Ca(m).hoistableStyles,v=rr(n);a=a||"default";var T=b.get(v);if(!T){var P={loading:0,preload:null};if(T=m.querySelector(Co(v)))P.loading=5;else{n=g({rel:"stylesheet",href:n,"data-precedence":a},d),(d=nn.get(v))&&tf(n,d);var X=T=m.createElement("link");zt(X),ts(X,"link",n),X._p=new Promise(function(se,re){X.onload=se,X.onerror=re}),X.addEventListener("load",function(){P.loading|=1}),X.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Nc(T,a,m)}T={type:"stylesheet",instance:T,count:1,state:P},b.set(v,T)}}}function jA(n,a){ai.X(n,a);var d=ar;if(d&&n){var m=Ca(d).hoistableScripts,b=or(n),v=m.get(b);v||(v=d.querySelector(To(b)),v||(n=g({src:n,async:!0},a),(a=nn.get(b))&&sf(n,a),v=d.createElement("script"),zt(v),ts(v,"link",n),d.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},m.set(b,v))}}function SA(n,a){ai.M(n,a);var d=ar;if(d&&n){var m=Ca(d).hoistableScripts,b=or(n),v=m.get(b);v||(v=d.querySelector(To(b)),v||(n=g({src:n,async:!0,type:"module"},a),(a=nn.get(b))&&sf(n,a),v=d.createElement("script"),zt(v),ts(v,"link",n),d.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},m.set(b,v))}}function jx(n,a,d,m){var b=(b=de.current)?Ac(b):null;if(!b)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(a=rr(d.href),d=Ca(b).hoistableStyles,m=d.get(a),m||(m={type:"style",instance:null,count:0,state:null},d.set(a,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){n=rr(d.href);var v=Ca(b).hoistableStyles,T=v.get(n);if(T||(b=b.ownerDocument||b,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(n,T),(v=b.querySelector(Co(n)))&&!v._p&&(T.instance=v,T.state.loading=5),nn.has(n)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},nn.set(n,d),v||_A(b,n,d,T.state))),a&&m===null)throw Error(s(528,""));return T}if(a&&m!==null)throw Error(s(529,""));return null;case"script":return a=d.async,d=d.src,typeof d=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=or(d),d=Ca(b).hoistableScripts,m=d.get(a),m||(m={type:"script",instance:null,count:0,state:null},d.set(a,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function rr(n){return'href="'+Ws(n)+'"'}function Co(n){return'link[rel="stylesheet"]['+n+"]"}function Sx(n){return g({},n,{"data-precedence":n.precedence,precedence:null})}function _A(n,a,d,m){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?m.loading=1:(a=n.createElement("link"),m.preload=a,a.addEventListener("load",function(){return m.loading|=1}),a.addEventListener("error",function(){return m.loading|=2}),ts(a,"link",d),zt(a),n.head.appendChild(a))}function or(n){return'[src="'+Ws(n)+'"]'}function To(n){return"script[async]"+n}function _x(n,a,d){if(a.count++,a.instance===null)switch(a.type){case"style":var m=n.querySelector('style[data-href~="'+Ws(d.href)+'"]');if(m)return a.instance=m,zt(m),m;var b=g({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(n.ownerDocument||n).createElement("style"),zt(m),ts(m,"style",b),Nc(m,d.precedence,n),a.instance=m;case"stylesheet":b=rr(d.href);var v=n.querySelector(Co(b));if(v)return a.state.loading|=4,a.instance=v,zt(v),v;m=Sx(d),(b=nn.get(b))&&tf(m,b),v=(n.ownerDocument||n).createElement("link"),zt(v);var T=v;return T._p=new Promise(function(P,X){T.onload=P,T.onerror=X}),ts(v,"link",m),a.state.loading|=4,Nc(v,d.precedence,n),a.instance=v;case"script":return v=or(d.src),(b=n.querySelector(To(v)))?(a.instance=b,zt(b),b):(m=d,(b=nn.get(v))&&(m=g({},d),sf(m,b)),n=n.ownerDocument||n,b=n.createElement("script"),zt(b),ts(b,"link",m),n.head.appendChild(b),a.instance=b);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(m=a.instance,a.state.loading|=4,Nc(m,d.precedence,n));return a.instance}function Nc(n,a,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,v=b,T=0;T<m.length;T++){var P=m[T];if(P.dataset.precedence===a)v=P;else if(v!==b)break}v?v.parentNode.insertBefore(n,v.nextSibling):(a=d.nodeType===9?d.head:d,a.insertBefore(n,a.firstChild))}function tf(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function sf(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var jc=null;function Ex(n,a,d){if(jc===null){var m=new Map,b=jc=new Map;b.set(d,m)}else b=jc,m=b.get(d),m||(m=new Map,b.set(d,m));if(m.has(n))return m;for(m.set(n,null),d=d.getElementsByTagName(n),b=0;b<d.length;b++){var v=d[b];if(!(v[qr]||v[Qt]||n==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var T=v.getAttribute(a)||"";T=n+T;var P=m.get(T);P?P.push(v):m.set(T,[v])}}return m}function Cx(n,a,d){n=n.ownerDocument||n,n.head.insertBefore(d,a==="title"?n.querySelector("head > title"):null)}function EA(n,a,d){if(d===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(n=a.disabled,typeof a.precedence=="string"&&n==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Tx(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function CA(n,a,d,m){if(d.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var b=rr(m.href),v=a.querySelector(Co(b));if(v){a=v._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(n.count++,n=Sc.bind(n),a.then(n,n)),d.state.loading|=4,d.instance=v,zt(v);return}v=a.ownerDocument||a,m=Sx(m),(b=nn.get(b))&&tf(m,b),v=v.createElement("link"),zt(v);var T=v;T._p=new Promise(function(P,X){T.onload=P,T.onerror=X}),ts(v,"link",m),d.instance=v}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(d,a),(a=d.state.preload)&&(d.state.loading&3)===0&&(n.count++,d=Sc.bind(n),a.addEventListener("load",d),a.addEventListener("error",d))}}var nf=0;function TA(n,a){return n.stylesheets&&n.count===0&&Ec(n,n.stylesheets),0<n.count||0<n.imgCount?function(d){var m=setTimeout(function(){if(n.stylesheets&&Ec(n,n.stylesheets),n.unsuspend){var v=n.unsuspend;n.unsuspend=null,v()}},6e4+a);0<n.imgBytes&&nf===0&&(nf=62500*cA());var b=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Ec(n,n.stylesheets),n.unsuspend)){var v=n.unsuspend;n.unsuspend=null,v()}},(n.imgBytes>nf?50:800)+a);return n.unsuspend=d,function(){n.unsuspend=null,clearTimeout(m),clearTimeout(b)}}:null}function Sc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ec(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var _c=null;function Ec(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,_c=new Map,a.forEach(RA,n),_c=null,Sc.call(n))}function RA(n,a){if(!(a.state.loading&4)){var d=_c.get(n);if(d)var m=d.get(null);else{d=new Map,_c.set(n,d);for(var b=n.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<b.length;v++){var T=b[v];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(d.set(T.dataset.precedence,T),m=T)}m&&d.set(null,m)}b=a.instance,T=b.getAttribute("data-precedence"),v=d.get(T)||m,v===m&&d.set(null,b),d.set(T,b),this.count++,m=Sc.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),v?v.parentNode.insertBefore(b,v.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(b,n.firstChild)),a.state.loading|=4}}var Ro={$$typeof:L,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function kA(n,a,d,m,b,v,T,P,X){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hn(0),this.hiddenUpdates=hn(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=v,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function Rx(n,a,d,m,b,v,T,P,X,se,re,ce){return n=new kA(n,a,d,T,X,se,re,ce,P),a=1,v===!0&&(a|=24),v=Ls(3,null,null,a),n.current=v,v.stateNode=n,a=Bu(),a.refCount++,n.pooledCache=a,a.refCount++,v.memoizedState={element:m,isDehydrated:d,cache:a},Iu(v),n}function kx(n){return n?(n=Fa,n):Fa}function Dx(n,a,d,m,b,v){b=kx(b),m.context===null?m.context=b:m.pendingContext=b,m=yi(a),m.payload={element:d},v=v===void 0?null:v,v!==null&&(m.callback=v),d=vi(n,m,a),d!==null&&(Ns(d,n,a),oo(d,n,a))}function Mx(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var d=n.retryLane;n.retryLane=d!==0&&d<a?d:a}}function af(n,a){Mx(n,a),(n=n.alternate)&&Mx(n,a)}function Lx(n){if(n.tag===13||n.tag===31){var a=$i(n,67108864);a!==null&&Ns(a,n,67108864),af(n,67108864)}}function Ox(n){if(n.tag===13||n.tag===31){var a=Us();a=Jd(a);var d=$i(n,a);d!==null&&Ns(d,n,a),af(n,a)}}var Cc=!0;function DA(n,a,d,m){var b=S.T;S.T=null;var v=_.p;try{_.p=2,rf(n,a,d,m)}finally{_.p=v,S.T=b}}function MA(n,a,d,m){var b=S.T;S.T=null;var v=_.p;try{_.p=8,rf(n,a,d,m)}finally{_.p=v,S.T=b}}function rf(n,a,d,m){if(Cc){var b=of(m);if(b===null)Gh(n,a,m,Tc,d),Px(n,m);else if(OA(b,n,a,d,m))m.stopPropagation();else if(Px(n,m),a&4&&-1<LA.indexOf(n)){for(;b!==null;){var v=Ea(b);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var T=rs(v.pendingLanes);if(T!==0){var P=v;for(P.pendingLanes|=2,P.entangledLanes|=2;T;){var X=1<<31-Kt(T);P.entanglements[1]|=X,T&=~X}Tn(v),(Ke&6)===0&&(uc=ke()+500,jo(0))}}break;case 31:case 13:P=$i(v,2),P!==null&&Ns(P,v,2),fc(),af(v,2)}if(v=of(m),v===null&&Gh(n,a,m,Tc,d),v===b)break;b=v}b!==null&&m.stopPropagation()}else Gh(n,a,m,null,d)}}function of(n){return n=lu(n),lf(n)}var Tc=null;function lf(n){if(Tc=null,n=_a(n),n!==null){var a=r(n);if(a===null)n=null;else{var d=a.tag;if(d===13){if(n=c(a),n!==null)return n;n=null}else if(d===31){if(n=u(a),n!==null)return n;n=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return Tc=n,null}function Bx(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wt()){case Rs:return 2;case is:return 8;case et:case It:return 32;case Nt:return 268435456;default:return 32}default:return 32}}var cf=!1,ki=null,Di=null,Mi=null,ko=new Map,Do=new Map,Li=[],LA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Px(n,a){switch(n){case"focusin":case"focusout":ki=null;break;case"dragenter":case"dragleave":Di=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":ko.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Do.delete(a.pointerId)}}function Mo(n,a,d,m,b,v){return n===null||n.nativeEvent!==v?(n={blockedOn:a,domEventName:d,eventSystemFlags:m,nativeEvent:v,targetContainers:[b]},a!==null&&(a=Ea(a),a!==null&&Lx(a)),n):(n.eventSystemFlags|=m,a=n.targetContainers,b!==null&&a.indexOf(b)===-1&&a.push(b),n)}function OA(n,a,d,m,b){switch(a){case"focusin":return ki=Mo(ki,n,a,d,m,b),!0;case"dragenter":return Di=Mo(Di,n,a,d,m,b),!0;case"mouseover":return Mi=Mo(Mi,n,a,d,m,b),!0;case"pointerover":var v=b.pointerId;return ko.set(v,Mo(ko.get(v)||null,n,a,d,m,b)),!0;case"gotpointercapture":return v=b.pointerId,Do.set(v,Mo(Do.get(v)||null,n,a,d,m,b)),!0}return!1}function Fx(n){var a=_a(n.target);if(a!==null){var d=r(a);if(d!==null){if(a=d.tag,a===13){if(a=c(d),a!==null){n.blockedOn=a,Zm(n.priority,function(){Ox(d)});return}}else if(a===31){if(a=u(d),a!==null){n.blockedOn=a,Zm(n.priority,function(){Ox(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){n.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Rc(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var d=of(n.nativeEvent);if(d===null){d=n.nativeEvent;var m=new d.constructor(d.type,d);ou=m,d.target.dispatchEvent(m),ou=null}else return a=Ea(d),a!==null&&Lx(a),n.blockedOn=d,!1;a.shift()}return!0}function Ux(n,a,d){Rc(n)&&d.delete(a)}function BA(){cf=!1,ki!==null&&Rc(ki)&&(ki=null),Di!==null&&Rc(Di)&&(Di=null),Mi!==null&&Rc(Mi)&&(Mi=null),ko.forEach(Ux),Do.forEach(Ux)}function kc(n,a){n.blockedOn===a&&(n.blockedOn=null,cf||(cf=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,BA)))}var Dc=null;function Ix(n){Dc!==n&&(Dc=n,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Dc===n&&(Dc=null);for(var a=0;a<n.length;a+=3){var d=n[a],m=n[a+1],b=n[a+2];if(typeof m!="function"){if(lf(m||d)===null)continue;break}var v=Ea(d);v!==null&&(n.splice(a,3),a-=3,rh(v,{pending:!0,data:b,method:d.method,action:m},m,b))}}))}function lr(n){function a(X){return kc(X,n)}ki!==null&&kc(ki,n),Di!==null&&kc(Di,n),Mi!==null&&kc(Mi,n),ko.forEach(a),Do.forEach(a);for(var d=0;d<Li.length;d++){var m=Li[d];m.blockedOn===n&&(m.blockedOn=null)}for(;0<Li.length&&(d=Li[0],d.blockedOn===null);)Fx(d),d.blockedOn===null&&Li.shift();if(d=(n.ownerDocument||n).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var b=d[m],v=d[m+1],T=b[xs]||null;if(typeof v=="function")T||Ix(d);else if(T){var P=null;if(v&&v.hasAttribute("formAction")){if(b=v,T=v[xs]||null)P=T.formAction;else if(lf(b)!==null)continue}else P=T.action;typeof P=="function"?d[m+1]=P:(d.splice(m,3),m-=3),Ix(d)}}}function zx(){function n(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(T){return b=T})},focusReset:"manual",scroll:"manual"})}function a(){b!==null&&(b(),b=null),m||setTimeout(d,20)}function d(){if(!m&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,b=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(d,100),function(){m=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),b!==null&&(b(),b=null)}}}function df(n){this._internalRoot=n}Mc.prototype.render=df.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(s(409));var d=a.current,m=Us();Dx(d,m,n,a,null,null)},Mc.prototype.unmount=df.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;Dx(n.current,2,null,n,null,null),fc(),a[Sa]=null}};function Mc(n){this._internalRoot=n}Mc.prototype.unstable_scheduleHydration=function(n){if(n){var a=Qm();n={blockedOn:null,target:n,priority:a};for(var d=0;d<Li.length&&a!==0&&a<Li[d].priority;d++);Li.splice(d,0,n),d===0&&Fx(n)}};var Hx=e.version;if(Hx!=="19.2.3")throw Error(s(527,Hx,"19.2.3"));_.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(a),n=n!==null?f(n):null,n=n===null?null:n.stateNode,n};var PA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:S,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lc.isDisabled&&Lc.supportsFiber)try{hs=Lc.inject(PA),mt=Lc}catch{}}return Oo.createRoot=function(n,a){if(!i(n))throw Error(s(299));var d=!1,m="",b=Wg,v=Kg,T=Qg;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(b=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=Rx(n,1,!1,null,null,d,m,null,b,v,T,zx),n[Sa]=a.current,qh(n),new df(a)},Oo.hydrateRoot=function(n,a,d){if(!i(n))throw Error(s(299));var m=!1,b="",v=Wg,T=Kg,P=Qg,X=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(v=d.onUncaughtError),d.onCaughtError!==void 0&&(T=d.onCaughtError),d.onRecoverableError!==void 0&&(P=d.onRecoverableError),d.formState!==void 0&&(X=d.formState)),a=Rx(n,1,!0,a,d??null,m,b,X,v,T,P,zx),a.context=kx(null),d=a.current,m=Us(),m=Jd(m),b=yi(m),b.callback=null,vi(d,b,m),d=m,a.current.lanes=d,Vr(a,d),Tn(a),n[Sa]=a.current,qh(n),new Mc(a)},Oo.version="19.2.3",Oo}var eb;function YA(){if(eb)return mf.exports;eb=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(e){console.error(e)}}return l(),mf.exports=$A(),mf.exports}var XA=YA();var tb="popstate";function WA(l={}){function e(s,i){let{pathname:r,search:c,hash:u}=s.location;return Ff("",{pathname:r,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(s,i){return typeof i=="string"?i:Ko(i)}return QA(e,t,null,l)}function yt(l,e){if(l===!1||l===null||typeof l>"u")throw new Error(e)}function cn(l,e){if(!l){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KA(){return Math.random().toString(36).substring(2,10)}function sb(l,e){return{usr:l.state,key:l.key,idx:e}}function Ff(l,e,t=null,s){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof e=="string"?kr(e):e,state:t,key:e&&e.key||s||KA()}}function Ko({pathname:l="/",search:e="",hash:t=""}){return e&&e!=="?"&&(l+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(l+=t.charAt(0)==="#"?t:"#"+t),l}function kr(l){let e={};if(l){let t=l.indexOf("#");t>=0&&(e.hash=l.substring(t),l=l.substring(0,t));let s=l.indexOf("?");s>=0&&(e.search=l.substring(s),l=l.substring(0,s)),l&&(e.pathname=l)}return e}function QA(l,e,t,s={}){let{window:i=document.defaultView,v5Compat:r=!1}=s,c=i.history,u="POP",h=null,p=f();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function f(){return(c.state||{idx:null}).idx}function g(){u="POP";let j=f(),N=j==null?null:j-p;p=j,h&&h({action:u,location:w.location,delta:N})}function x(j,N){u="PUSH";let D=Ff(w.location,j,N);p=f()+1;let L=sb(D,p),k=w.createHref(D);try{c.pushState(L,"",k)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(k)}r&&h&&h({action:u,location:w.location,delta:1})}function y(j,N){u="REPLACE";let D=Ff(w.location,j,N);p=f();let L=sb(D,p),k=w.createHref(D);c.replaceState(L,"",k),r&&h&&h({action:u,location:w.location,delta:0})}function A(j){return ZA(j)}let w={get action(){return u},get location(){return l(i,c)},listen(j){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(tb,g),h=j,()=>{i.removeEventListener(tb,g),h=null}},createHref(j){return e(i,j)},createURL:A,encodeLocation(j){let N=A(j);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:x,replace:y,go(j){return c.go(j)}};return w}function ZA(l,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),yt(t,"No window.location.(origin|href) available to create URL");let s=typeof l=="string"?l:Ko(l);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function py(l,e,t="/"){return JA(l,e,t,!1)}function JA(l,e,t,s){let i=typeof e=="string"?kr(e):e,r=ci(i.pathname||"/",t);if(r==null)return null;let c=gy(l);eN(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let p=uN(r);u=cN(c[h],p,s)}return u}function gy(l,e=[],t=[],s="",i=!1){let r=(c,u,h=i,p)=>{let f={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(s)&&h)return;yt(f.relativePath.startsWith(s),`Absolute route path "${f.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(s.length)}let g=li([s,f.relativePath]),x=t.concat(f);c.children&&c.children.length>0&&(yt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),gy(c.children,e,x,g,h)),!(c.path==null&&!c.index)&&e.push({path:g,score:oN(g,c.index),routesMeta:x})};return l.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))r(c,u);else for(let h of xy(c.path))r(c,u,!0,h)}),e}function xy(l){let e=l.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),r=t.replace(/\?$/,"");if(s.length===0)return i?[r,""]:[r];let c=xy(s.join("/")),u=[];return u.push(...c.map(h=>h===""?r:[r,h].join("/"))),i&&u.push(...c),u.map(h=>l.startsWith("/")&&h===""?"/":h)}function eN(l){l.sort((e,t)=>e.score!==t.score?t.score-e.score:lN(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var tN=/^:[\w-]+$/,sN=3,nN=2,iN=1,aN=10,rN=-2,nb=l=>l==="*";function oN(l,e){let t=l.split("/"),s=t.length;return t.some(nb)&&(s+=rN),e&&(s+=nN),t.filter(i=>!nb(i)).reduce((i,r)=>i+(tN.test(r)?sN:r===""?iN:aN),s)}function lN(l,e){return l.length===e.length&&l.slice(0,-1).every((s,i)=>s===e[i])?l[l.length-1]-e[e.length-1]:0}function cN(l,e,t=!1){let{routesMeta:s}=l,i={},r="/",c=[];for(let u=0;u<s.length;++u){let h=s[u],p=u===s.length-1,f=r==="/"?e:e.slice(r.length)||"/",g=xd({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},f),x=h.route;if(!g&&p&&t&&!s[s.length-1].route.index&&(g=xd({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},f)),!g)return null;Object.assign(i,g.params),c.push({params:i,pathname:li([r,g.pathname]),pathnameBase:pN(li([r,g.pathnameBase])),route:x}),g.pathnameBase!=="/"&&(r=li([r,g.pathnameBase]))}return c}function xd(l,e){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[t,s]=dN(l.path,l.caseSensitive,l.end),i=e.match(t);if(!i)return null;let r=i[0],c=r.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:s.reduce((p,{paramName:f,isOptional:g},x)=>{if(f==="*"){let A=u[x]||"";c=r.slice(0,r.length-A.length).replace(/(.)\/+$/,"$1")}const y=u[x];return g&&!y?p[f]=void 0:p[f]=(y||"").replace(/%2F/g,"/"),p},{}),pathname:r,pathnameBase:c,pattern:l}}function dN(l,e=!1,t=!0){cn(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let s=[],i="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(s.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(s.push({paramName:"*"}),i+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":l!==""&&l!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function uN(l){try{return l.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cn(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),l}}function ci(l,e){if(e==="/")return l;if(!l.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=l.charAt(t);return s&&s!=="/"?null:l.slice(t)||"/"}var by=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hN=l=>by.test(l);function fN(l,e="/"){let{pathname:t,search:s="",hash:i=""}=typeof l=="string"?kr(l):l,r;if(t)if(hN(t))r=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),cn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?r=ib(t.substring(1),"/"):r=ib(t,e)}else r=e;return{pathname:r,search:gN(s),hash:xN(i)}}function ib(l,e){let t=e.replace(/\/+$/,"").split("/");return l.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function bf(l,e,t,s){return`Cannot include a '${l}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mN(l){return l.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cm(l){let e=mN(l);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function dm(l,e,t,s=!1){let i;typeof l=="string"?i=kr(l):(i={...l},yt(!i.pathname||!i.pathname.includes("?"),bf("?","pathname","search",i)),yt(!i.pathname||!i.pathname.includes("#"),bf("#","pathname","hash",i)),yt(!i.search||!i.search.includes("#"),bf("#","search","hash",i)));let r=l===""||i.pathname==="",c=r?"/":i.pathname,u;if(c==null)u=t;else{let g=e.length-1;if(!s&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),g-=1;i.pathname=x.join("/")}u=g>=0?e[g]:"/"}let h=fN(i,u),p=c&&c!=="/"&&c.endsWith("/"),f=(r||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||f)&&(h.pathname+="/"),h}var li=l=>l.join("/").replace(/\/\/+/g,"/"),pN=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),gN=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,xN=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l,bN=class{constructor(l,e,t,s=!1){this.status=l,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function yN(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}function vN(l){return l.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var yy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function vy(l,e){let t=l;if(typeof t!="string"||!by.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,i=!1;if(yy)try{let r=new URL(window.location.href),c=t.startsWith("//")?new URL(r.protocol+t):new URL(t),u=ci(c.pathname,e);c.origin===r.origin&&u!=null?t=u+c.search+c.hash:i=!0}catch{cn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var wy=["POST","PUT","PATCH","DELETE"];new Set(wy);var wN=["GET",...wy];new Set(wN);var Dr=M.createContext(null);Dr.displayName="DataRouter";var Td=M.createContext(null);Td.displayName="DataRouterState";var AN=M.createContext(!1),Ay=M.createContext({isTransitioning:!1});Ay.displayName="ViewTransition";var NN=M.createContext(new Map);NN.displayName="Fetchers";var jN=M.createContext(null);jN.displayName="Await";var qs=M.createContext(null);qs.displayName="Navigation";var il=M.createContext(null);il.displayName="Location";var wn=M.createContext({outlet:null,matches:[],isDataRoute:!1});wn.displayName="Route";var um=M.createContext(null);um.displayName="RouteError";var Ny="REACT_ROUTER_ERROR",SN="REDIRECT",_N="ROUTE_ERROR_RESPONSE";function EN(l){if(l.startsWith(`${Ny}:${SN}:{`))try{let e=JSON.parse(l.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function CN(l){if(l.startsWith(`${Ny}:${_N}:{`))try{let e=JSON.parse(l.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new bN(e.status,e.statusText,e.data)}catch{}}function TN(l,{relative:e}={}){yt(Mr(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=M.useContext(qs),{hash:i,pathname:r,search:c}=rl(l,{relative:e}),u=r;return t!=="/"&&(u=r==="/"?t:li([t,r])),s.createHref({pathname:u,search:c,hash:i})}function Mr(){return M.useContext(il)!=null}function An(){return yt(Mr(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(il).location}var jy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Sy(l){M.useContext(qs).static||M.useLayoutEffect(l)}function al(){let{isDataRoute:l}=M.useContext(wn);return l?HN():RN()}function RN(){yt(Mr(),"useNavigate() may be used only in the context of a <Router> component.");let l=M.useContext(Dr),{basename:e,navigator:t}=M.useContext(qs),{matches:s}=M.useContext(wn),{pathname:i}=An(),r=JSON.stringify(cm(s)),c=M.useRef(!1);return Sy(()=>{c.current=!0}),M.useCallback((h,p={})=>{if(cn(c.current,jy),!c.current)return;if(typeof h=="number"){t.go(h);return}let f=dm(h,JSON.parse(r),i,p.relative==="path");l==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:li([e,f.pathname])),(p.replace?t.replace:t.push)(f,p.state,p)},[e,t,r,i,l])}M.createContext(null);function Lr(){let{matches:l}=M.useContext(wn),e=l[l.length-1];return e?e.params:{}}function rl(l,{relative:e}={}){let{matches:t}=M.useContext(wn),{pathname:s}=An(),i=JSON.stringify(cm(t));return M.useMemo(()=>dm(l,JSON.parse(i),s,e==="path"),[l,i,s,e])}function kN(l,e){return _y(l,e)}function _y(l,e,t,s,i){yt(Mr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=M.useContext(qs),{matches:c}=M.useContext(wn),u=c[c.length-1],h=u?u.params:{},p=u?u.pathname:"/",f=u?u.pathnameBase:"/",g=u&&u.route;{let D=g&&g.path||"";Cy(p,!g||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let x=An(),y;if(e){let D=typeof e=="string"?kr(e):e;yt(f==="/"||D.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${D.pathname}" was given in the \`location\` prop.`),y=D}else y=x;let A=y.pathname||"/",w=A;if(f!=="/"){let D=f.replace(/^\//,"").split("/");w="/"+A.replace(/^\//,"").split("/").slice(D.length).join("/")}let j=py(l,{pathname:w});cn(g||j!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),cn(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=BN(j&&j.map(D=>Object.assign({},D,{params:Object.assign({},h,D.params),pathname:li([f,r.encodeLocation?r.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?f:li([f,r.encodeLocation?r.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),c,t,s,i);return e&&N?M.createElement(il.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},N):N}function DN(){let l=zN(),e=yN(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),t=l instanceof Error?l.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},r={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",l),c=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:r},"ErrorBoundary")," or"," ",M.createElement("code",{style:r},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:i},t):null,c)}var MN=M.createElement(DN,null),Ey=class extends M.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,e){return e.location!==l.location||e.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:e.error,location:e.location,revalidation:l.revalidation||e.revalidation}}componentDidCatch(l,e){this.props.onError?this.props.onError(l,e):console.error("React Router caught the following error during render",l)}render(){let l=this.state.error;if(this.context&&typeof l=="object"&&l&&"digest"in l&&typeof l.digest=="string"){const t=CN(l.digest);t&&(l=t)}let e=l!==void 0?M.createElement(wn.Provider,{value:this.props.routeContext},M.createElement(um.Provider,{value:l,children:this.props.component})):this.props.children;return this.context?M.createElement(LN,{error:l},e):e}};Ey.contextType=AN;var yf=new WeakMap;function LN({children:l,error:e}){let{basename:t}=M.useContext(qs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=EN(e.digest);if(s){let i=yf.get(e);if(i)throw i;let r=vy(s.location,t);if(yy&&!yf.get(e))if(r.isExternal||s.reloadDocument)window.location.href=r.absoluteURL||r.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(r.to,{replace:s.replace}));throw yf.set(e,c),c}return M.createElement("meta",{httpEquiv:"refresh",content:`0;url=${r.absoluteURL||r.to}`})}}return l}function ON({routeContext:l,match:e,children:t}){let s=M.useContext(Dr);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(wn.Provider,{value:l},t)}function BN(l,e=[],t=null,s=null,i=null){if(l==null){if(!t)return null;if(t.errors)l=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)l=t.matches;else return null}let r=l,c=t?.errors;if(c!=null){let f=r.findIndex(g=>g.route.id&&c?.[g.route.id]!==void 0);yt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),r=r.slice(0,Math.min(r.length,f+1))}let u=!1,h=-1;if(t)for(let f=0;f<r.length;f++){let g=r[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=f),g.route.id){let{loaderData:x,errors:y}=t,A=g.route.loader&&!x.hasOwnProperty(g.route.id)&&(!y||y[g.route.id]===void 0);if(g.route.lazy||A){u=!0,h>=0?r=r.slice(0,h+1):r=[r[0]];break}}}let p=t&&s?(f,g)=>{s(f,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:vN(t.matches),errorInfo:g})}:void 0;return r.reduceRight((f,g,x)=>{let y,A=!1,w=null,j=null;t&&(y=c&&g.route.id?c[g.route.id]:void 0,w=g.route.errorElement||MN,u&&(h<0&&x===0?(Cy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,j=null):h===x&&(A=!0,j=g.route.hydrateFallbackElement||null)));let N=e.concat(r.slice(0,x+1)),D=()=>{let L;return y?L=w:A?L=j:g.route.Component?L=M.createElement(g.route.Component,null):g.route.element?L=g.route.element:L=f,M.createElement(ON,{match:g,routeContext:{outlet:f,matches:N,isDataRoute:t!=null},children:L})};return t&&(g.route.ErrorBoundary||g.route.errorElement||x===0)?M.createElement(Ey,{location:t.location,revalidation:t.revalidation,component:w,error:y,children:D(),routeContext:{outlet:null,matches:N,isDataRoute:!0},onError:p}):D()},null)}function hm(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PN(l){let e=M.useContext(Dr);return yt(e,hm(l)),e}function FN(l){let e=M.useContext(Td);return yt(e,hm(l)),e}function UN(l){let e=M.useContext(wn);return yt(e,hm(l)),e}function fm(l){let e=UN(l),t=e.matches[e.matches.length-1];return yt(t.route.id,`${l} can only be used on routes that contain a unique "id"`),t.route.id}function IN(){return fm("useRouteId")}function zN(){let l=M.useContext(um),e=FN("useRouteError"),t=fm("useRouteError");return l!==void 0?l:e.errors?.[t]}function HN(){let{router:l}=PN("useNavigate"),e=fm("useNavigate"),t=M.useRef(!1);return Sy(()=>{t.current=!0}),M.useCallback(async(i,r={})=>{cn(t.current,jy),t.current&&(typeof i=="number"?await l.navigate(i):await l.navigate(i,{fromRouteId:e,...r}))},[l,e])}var ab={};function Cy(l,e,t){!e&&!ab[l]&&(ab[l]=!0,cn(!1,t))}M.memo(VN);function VN({routes:l,future:e,state:t,onError:s}){return _y(l,void 0,t,s,e)}function Ty({to:l,replace:e,state:t,relative:s}){yt(Mr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=M.useContext(qs);cn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=M.useContext(wn),{pathname:c}=An(),u=al(),h=dm(l,cm(r),c,s==="path"),p=JSON.stringify(h);return M.useEffect(()=>{u(JSON.parse(p),{replace:e,state:t,relative:s})},[u,p,s,e,t]),null}function Ge(l){yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qN({basename:l="/",children:e=null,location:t,navigationType:s="POP",navigator:i,static:r=!1,unstable_useTransitions:c}){yt(!Mr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=l.replace(/^\/*/,"/"),h=M.useMemo(()=>({basename:u,navigator:i,static:r,unstable_useTransitions:c,future:{}}),[u,i,r,c]);typeof t=="string"&&(t=kr(t));let{pathname:p="/",search:f="",hash:g="",state:x=null,key:y="default"}=t,A=M.useMemo(()=>{let w=ci(p,u);return w==null?null:{location:{pathname:w,search:f,hash:g,state:x,key:y},navigationType:s}},[u,p,f,g,x,y,s]);return cn(A!=null,`<Router basename="${u}"> is not able to match the URL "${p}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:M.createElement(qs.Provider,{value:h},M.createElement(il.Provider,{children:e,value:A}))}function GN({children:l,location:e}){return kN(Uf(l),e)}function Uf(l,e=[]){let t=[];return M.Children.forEach(l,(s,i)=>{if(!M.isValidElement(s))return;let r=[...e,i];if(s.type===M.Fragment){t.push.apply(t,Uf(s.props.children,r));return}yt(s.type===Ge,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||r.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Uf(s.props.children,r)),t.push(c)}),t}var id="get",ad="application/x-www-form-urlencoded";function Rd(l){return typeof HTMLElement<"u"&&l instanceof HTMLElement}function $N(l){return Rd(l)&&l.tagName.toLowerCase()==="button"}function YN(l){return Rd(l)&&l.tagName.toLowerCase()==="form"}function XN(l){return Rd(l)&&l.tagName.toLowerCase()==="input"}function WN(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function KN(l,e){return l.button===0&&(!e||e==="_self")&&!WN(l)}var Oc=null;function QN(){if(Oc===null)try{new FormData(document.createElement("form"),0),Oc=!1}catch{Oc=!0}return Oc}var ZN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vf(l){return l!=null&&!ZN.has(l)?(cn(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ad}"`),null):l}function JN(l,e){let t,s,i,r,c;if(YN(l)){let u=l.getAttribute("action");s=u?ci(u,e):null,t=l.getAttribute("method")||id,i=vf(l.getAttribute("enctype"))||ad,r=new FormData(l)}else if($N(l)||XN(l)&&(l.type==="submit"||l.type==="image")){let u=l.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=l.getAttribute("formaction")||u.getAttribute("action");if(s=h?ci(h,e):null,t=l.getAttribute("formmethod")||u.getAttribute("method")||id,i=vf(l.getAttribute("formenctype"))||vf(u.getAttribute("enctype"))||ad,r=new FormData(u,l),!QN()){let{name:p,type:f,value:g}=l;if(f==="image"){let x=p?`${p}.`:"";r.append(`${x}x`,"0"),r.append(`${x}y`,"0")}else p&&r.append(p,g)}}else{if(Rd(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=id,s=null,i=ad,c=l}return r&&i==="text/plain"&&(c=r,r=void 0),{action:s,method:t.toLowerCase(),encType:i,formData:r,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function mm(l,e){if(l===!1||l===null||typeof l>"u")throw new Error(e)}function e2(l,e,t){let s=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&ci(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function t2(l,e){if(l.id in e)return e[l.id];try{let t=await import(l.module);return e[l.id]=t,t}catch(t){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function s2(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function n2(l,e,t){let s=await Promise.all(l.map(async i=>{let r=e.routes[i.route.id];if(r){let c=await t2(r,t);return c.links?c.links():[]}return[]}));return o2(s.flat(1).filter(s2).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function rb(l,e,t,s,i,r){let c=(h,p)=>t[p]?h.route.id!==t[p].route.id:!0,u=(h,p)=>t[p].pathname!==h.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==h.params["*"];return r==="assets"?e.filter((h,p)=>c(h,p)||u(h,p)):r==="data"?e.filter((h,p)=>{let f=s.routes[h.route.id];if(!f||!f.hasLoader)return!1;if(c(h,p)||u(h,p))return!0;if(h.route.shouldRevalidate){let g=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function i2(l,e,{includeHydrateFallback:t}={}){return a2(l.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1))}function a2(l){return[...new Set(l)]}function r2(l){let e={},t=Object.keys(l).sort();for(let s of t)e[s]=l[s];return e}function o2(l,e){let t=new Set;return new Set(e),l.reduce((s,i)=>{let r=JSON.stringify(r2(i));return t.has(r)||(t.add(r),s.push({key:r,link:i})),s},[])}function Ry(){let l=M.useContext(Dr);return mm(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function l2(){let l=M.useContext(Td);return mm(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var pm=M.createContext(void 0);pm.displayName="FrameworkContext";function ky(){let l=M.useContext(pm);return mm(l,"You must render this element inside a <HydratedRouter> element"),l}function c2(l,e){let t=M.useContext(pm),[s,i]=M.useState(!1),[r,c]=M.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:p,onMouseLeave:f,onTouchStart:g}=e,x=M.useRef(null);M.useEffect(()=>{if(l==="render"&&c(!0),l==="viewport"){let w=N=>{N.forEach(D=>{c(D.isIntersecting)})},j=new IntersectionObserver(w,{threshold:.5});return x.current&&j.observe(x.current),()=>{j.disconnect()}}},[l]),M.useEffect(()=>{if(s){let w=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(w)}}},[s]);let y=()=>{i(!0)},A=()=>{i(!1),c(!1)};return t?l!=="intent"?[r,x,{}]:[r,x,{onFocus:Bo(u,y),onBlur:Bo(h,A),onMouseEnter:Bo(p,y),onMouseLeave:Bo(f,A),onTouchStart:Bo(g,y)}]:[!1,x,{}]}function Bo(l,e){return t=>{l&&l(t),t.defaultPrevented||e(t)}}function d2({page:l,...e}){let{router:t}=Ry(),s=M.useMemo(()=>py(t.routes,l,t.basename),[t.routes,l,t.basename]);return s?M.createElement(h2,{page:l,matches:s,...e}):null}function u2(l){let{manifest:e,routeModules:t}=ky(),[s,i]=M.useState([]);return M.useEffect(()=>{let r=!1;return n2(l,e,t).then(c=>{r||i(c)}),()=>{r=!0}},[l,e,t]),s}function h2({page:l,matches:e,...t}){let s=An(),{manifest:i,routeModules:r}=ky(),{basename:c}=Ry(),{loaderData:u,matches:h}=l2(),p=M.useMemo(()=>rb(l,e,h,i,s,"data"),[l,e,h,i,s]),f=M.useMemo(()=>rb(l,e,h,i,s,"assets"),[l,e,h,i,s]),g=M.useMemo(()=>{if(l===s.pathname+s.search+s.hash)return[];let A=new Set,w=!1;if(e.forEach(N=>{let D=i.routes[N.route.id];!D||!D.hasLoader||(!p.some(L=>L.route.id===N.route.id)&&N.route.id in u&&r[N.route.id]?.shouldRevalidate||D.hasClientLoader?w=!0:A.add(N.route.id))}),A.size===0)return[];let j=e2(l,c,"data");return w&&A.size>0&&j.searchParams.set("_routes",e.filter(N=>A.has(N.route.id)).map(N=>N.route.id).join(",")),[j.pathname+j.search]},[c,u,s,i,p,e,l,r]),x=M.useMemo(()=>i2(f,i),[f,i]),y=u2(f);return M.createElement(M.Fragment,null,g.map(A=>M.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),x.map(A=>M.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),y.map(({key:A,link:w})=>M.createElement("link",{key:A,nonce:t.nonce,...w})))}function f2(...l){return e=>{l.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var m2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{m2&&(window.__reactRouterVersion="7.11.0")}catch{}function p2({basename:l,children:e,unstable_useTransitions:t,window:s}){let i=M.useRef();i.current==null&&(i.current=WA({window:s,v5Compat:!0}));let r=i.current,[c,u]=M.useState({action:r.action,location:r.location}),h=M.useCallback(p=>{t===!1?u(p):M.startTransition(()=>u(p))},[t]);return M.useLayoutEffect(()=>r.listen(h),[r,h]),M.createElement(qN,{basename:l,children:e,location:c.location,navigationType:c.action,navigator:r,unstable_useTransitions:t})}var Dy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rt=M.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:i,reloadDocument:r,replace:c,state:u,target:h,to:p,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:x,...y},A){let{basename:w,unstable_useTransitions:j}=M.useContext(qs),N=typeof p=="string"&&Dy.test(p),D=vy(p,w);p=D.to;let L=TN(p,{relative:i}),[k,U,C]=c2(s,y),B=y2(p,{replace:c,state:u,target:h,preventScrollReset:f,relative:i,viewTransition:g,unstable_defaultShouldRevalidate:x,unstable_useTransitions:j});function R(O){e&&e(O),O.defaultPrevented||B(O)}let E=M.createElement("a",{...y,...C,href:D.absoluteURL||L,onClick:D.isExternal||r?e:R,ref:f2(A,U),target:h,"data-discover":!N&&t==="render"?"true":void 0});return k&&!N?M.createElement(M.Fragment,null,E,M.createElement(d2,{page:L})):E});rt.displayName="Link";var g2=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:i=!1,style:r,to:c,viewTransition:u,children:h,...p},f){let g=rl(c,{relative:p.relative}),x=An(),y=M.useContext(Td),{navigator:A,basename:w}=M.useContext(qs),j=y!=null&&j2(g)&&u===!0,N=A.encodeLocation?A.encodeLocation(g).pathname:g.pathname,D=x.pathname,L=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(D=D.toLowerCase(),L=L?L.toLowerCase():null,N=N.toLowerCase()),L&&w&&(L=ci(L,w)||L);const k=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let U=D===N||!i&&D.startsWith(N)&&D.charAt(k)==="/",C=L!=null&&(L===N||!i&&L.startsWith(N)&&L.charAt(N.length)==="/"),B={isActive:U,isPending:C,isTransitioning:j},R=U?e:void 0,E;typeof s=="function"?E=s(B):E=[s,U?"active":null,C?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let O=typeof r=="function"?r(B):r;return M.createElement(rt,{...p,"aria-current":R,className:E,ref:f,style:O,to:c,viewTransition:u},typeof h=="function"?h(B):h)});g2.displayName="NavLink";var x2=M.forwardRef(({discover:l="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:i,state:r,method:c=id,action:u,onSubmit:h,relative:p,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:x,...y},A)=>{let{unstable_useTransitions:w}=M.useContext(qs),j=A2(),N=N2(u,{relative:p}),D=c.toLowerCase()==="get"?"get":"post",L=typeof u=="string"&&Dy.test(u),k=U=>{if(h&&h(U),U.defaultPrevented)return;U.preventDefault();let C=U.nativeEvent.submitter,B=C?.getAttribute("formmethod")||c,R=()=>j(C||U.currentTarget,{fetcherKey:e,method:B,navigate:t,replace:i,state:r,relative:p,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:x});w&&t!==!1?M.startTransition(()=>R()):R()};return M.createElement("form",{ref:A,method:D,action:N,onSubmit:s?h:k,...y,"data-discover":!L&&l==="render"?"true":void 0})});x2.displayName="Form";function b2(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function My(l){let e=M.useContext(Dr);return yt(e,b2(l)),e}function y2(l,{target:e,replace:t,state:s,preventScrollReset:i,relative:r,viewTransition:c,unstable_defaultShouldRevalidate:u,unstable_useTransitions:h}={}){let p=al(),f=An(),g=rl(l,{relative:r});return M.useCallback(x=>{if(KN(x,e)){x.preventDefault();let y=t!==void 0?t:Ko(f)===Ko(g),A=()=>p(l,{replace:y,state:s,preventScrollReset:i,relative:r,viewTransition:c,unstable_defaultShouldRevalidate:u});h?M.startTransition(()=>A()):A()}},[f,p,g,t,s,e,l,i,r,c,u,h])}var v2=0,w2=()=>`__${String(++v2)}__`;function A2(){let{router:l}=My("useSubmit"),{basename:e}=M.useContext(qs),t=IN(),s=l.fetch,i=l.navigate;return M.useCallback(async(r,c={})=>{let{action:u,method:h,encType:p,formData:f,body:g}=JN(r,e);if(c.navigate===!1){let x=c.fetcherKey||w2();await s(x,t,c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:f,body:g,formMethod:c.method||h,formEncType:c.encType||p,flushSync:c.flushSync})}else await i(c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:f,body:g,formMethod:c.method||h,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[s,i,e,t])}function N2(l,{relative:e}={}){let{basename:t}=M.useContext(qs),s=M.useContext(wn);yt(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),r={...rl(l||".",{relative:e})},c=An();if(l==null){r.search=c.search;let u=new URLSearchParams(r.search),h=u.getAll("index");if(h.some(f=>f==="")){u.delete("index"),h.filter(g=>g).forEach(g=>u.append("index",g));let f=u.toString();r.search=f?`?${f}`:""}}return(!l||l===".")&&i.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(r.pathname=r.pathname==="/"?t:li([t,r.pathname])),Ko(r)}function j2(l,{relative:e}={}){let t=M.useContext(Ay);yt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=My("useViewTransitionState"),i=rl(l,{relative:e});if(!t.isTransitioning)return!1;let r=ci(t.currentLocation.pathname,s)||t.currentLocation.pathname,c=ci(t.nextLocation.pathname,s)||t.nextLocation.pathname;return xd(i.pathname,c)!=null||xd(i.pathname,r)!=null}function Ly(l,e){return function(){return l.apply(e,arguments)}}const{toString:S2}=Object.prototype,{getPrototypeOf:gm}=Object,{iterator:kd,toStringTag:Oy}=Symbol,Dd=(l=>e=>{const t=S2.call(e);return l[t]||(l[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Nn=l=>(l=l.toLowerCase(),e=>Dd(e)===l),Md=l=>e=>typeof e===l,{isArray:Or}=Array,Er=Md("undefined");function ol(l){return l!==null&&!Er(l)&&l.constructor!==null&&!Er(l.constructor)&&Cs(l.constructor.isBuffer)&&l.constructor.isBuffer(l)}const By=Nn("ArrayBuffer");function _2(l){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(l):e=l&&l.buffer&&By(l.buffer),e}const E2=Md("string"),Cs=Md("function"),Py=Md("number"),ll=l=>l!==null&&typeof l=="object",C2=l=>l===!0||l===!1,rd=l=>{if(Dd(l)!=="object")return!1;const e=gm(l);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Oy in l)&&!(kd in l)},T2=l=>{if(!ll(l)||ol(l))return!1;try{return Object.keys(l).length===0&&Object.getPrototypeOf(l)===Object.prototype}catch{return!1}},R2=Nn("Date"),k2=Nn("File"),D2=Nn("Blob"),M2=Nn("FileList"),L2=l=>ll(l)&&Cs(l.pipe),O2=l=>{let e;return l&&(typeof FormData=="function"&&l instanceof FormData||Cs(l.append)&&((e=Dd(l))==="formdata"||e==="object"&&Cs(l.toString)&&l.toString()==="[object FormData]"))},B2=Nn("URLSearchParams"),[P2,F2,U2,I2]=["ReadableStream","Request","Response","Headers"].map(Nn),z2=l=>l.trim?l.trim():l.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function cl(l,e,{allOwnKeys:t=!1}={}){if(l===null||typeof l>"u")return;let s,i;if(typeof l!="object"&&(l=[l]),Or(l))for(s=0,i=l.length;s<i;s++)e.call(null,l[s],s,l);else{if(ol(l))return;const r=t?Object.getOwnPropertyNames(l):Object.keys(l),c=r.length;let u;for(s=0;s<c;s++)u=r[s],e.call(null,l[u],u,l)}}function Fy(l,e){if(ol(l))return null;e=e.toLowerCase();const t=Object.keys(l);let s=t.length,i;for(;s-- >0;)if(i=t[s],e===i.toLowerCase())return i;return null}const la=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Uy=l=>!Er(l)&&l!==la;function If(){const{caseless:l,skipUndefined:e}=Uy(this)&&this||{},t={},s=(i,r)=>{const c=l&&Fy(t,r)||r;rd(t[c])&&rd(i)?t[c]=If(t[c],i):rd(i)?t[c]=If({},i):Or(i)?t[c]=i.slice():(!e||!Er(i))&&(t[c]=i)};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&cl(arguments[i],s);return t}const H2=(l,e,t,{allOwnKeys:s}={})=>(cl(e,(i,r)=>{t&&Cs(i)?l[r]=Ly(i,t):l[r]=i},{allOwnKeys:s}),l),V2=l=>(l.charCodeAt(0)===65279&&(l=l.slice(1)),l),q2=(l,e,t,s)=>{l.prototype=Object.create(e.prototype,s),l.prototype.constructor=l,Object.defineProperty(l,"super",{value:e.prototype}),t&&Object.assign(l.prototype,t)},G2=(l,e,t,s)=>{let i,r,c;const u={};if(e=e||{},l==null)return e;do{for(i=Object.getOwnPropertyNames(l),r=i.length;r-- >0;)c=i[r],(!s||s(c,l,e))&&!u[c]&&(e[c]=l[c],u[c]=!0);l=t!==!1&&gm(l)}while(l&&(!t||t(l,e))&&l!==Object.prototype);return e},$2=(l,e,t)=>{l=String(l),(t===void 0||t>l.length)&&(t=l.length),t-=e.length;const s=l.indexOf(e,t);return s!==-1&&s===t},Y2=l=>{if(!l)return null;if(Or(l))return l;let e=l.length;if(!Py(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=l[e];return t},X2=(l=>e=>l&&e instanceof l)(typeof Uint8Array<"u"&&gm(Uint8Array)),W2=(l,e)=>{const s=(l&&l[kd]).call(l);let i;for(;(i=s.next())&&!i.done;){const r=i.value;e.call(l,r[0],r[1])}},K2=(l,e)=>{let t;const s=[];for(;(t=l.exec(e))!==null;)s.push(t);return s},Q2=Nn("HTMLFormElement"),Z2=l=>l.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,i){return s.toUpperCase()+i}),ob=(({hasOwnProperty:l})=>(e,t)=>l.call(e,t))(Object.prototype),J2=Nn("RegExp"),Iy=(l,e)=>{const t=Object.getOwnPropertyDescriptors(l),s={};cl(t,(i,r)=>{let c;(c=e(i,r,l))!==!1&&(s[r]=c||i)}),Object.defineProperties(l,s)},ej=l=>{Iy(l,(e,t)=>{if(Cs(l)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=l[t];if(Cs(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},tj=(l,e)=>{const t={},s=i=>{i.forEach(r=>{t[r]=!0})};return Or(l)?s(l):s(String(l).split(e)),t},sj=()=>{},nj=(l,e)=>l!=null&&Number.isFinite(l=+l)?l:e;function ij(l){return!!(l&&Cs(l.append)&&l[Oy]==="FormData"&&l[kd])}const aj=l=>{const e=new Array(10),t=(s,i)=>{if(ll(s)){if(e.indexOf(s)>=0)return;if(ol(s))return s;if(!("toJSON"in s)){e[i]=s;const r=Or(s)?[]:{};return cl(s,(c,u)=>{const h=t(c,i+1);!Er(h)&&(r[u]=h)}),e[i]=void 0,r}}return s};return t(l,0)},rj=Nn("AsyncFunction"),oj=l=>l&&(ll(l)||Cs(l))&&Cs(l.then)&&Cs(l.catch),zy=((l,e)=>l?setImmediate:e?((t,s)=>(la.addEventListener("message",({source:i,data:r})=>{i===la&&r===t&&s.length&&s.shift()()},!1),i=>{s.push(i),la.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Cs(la.postMessage)),lj=typeof queueMicrotask<"u"?queueMicrotask.bind(la):typeof process<"u"&&process.nextTick||zy,cj=l=>l!=null&&Cs(l[kd]),ie={isArray:Or,isArrayBuffer:By,isBuffer:ol,isFormData:O2,isArrayBufferView:_2,isString:E2,isNumber:Py,isBoolean:C2,isObject:ll,isPlainObject:rd,isEmptyObject:T2,isReadableStream:P2,isRequest:F2,isResponse:U2,isHeaders:I2,isUndefined:Er,isDate:R2,isFile:k2,isBlob:D2,isRegExp:J2,isFunction:Cs,isStream:L2,isURLSearchParams:B2,isTypedArray:X2,isFileList:M2,forEach:cl,merge:If,extend:H2,trim:z2,stripBOM:V2,inherits:q2,toFlatObject:G2,kindOf:Dd,kindOfTest:Nn,endsWith:$2,toArray:Y2,forEachEntry:W2,matchAll:K2,isHTMLForm:Q2,hasOwnProperty:ob,hasOwnProp:ob,reduceDescriptors:Iy,freezeMethods:ej,toObjectSet:tj,toCamelCase:Z2,noop:sj,toFiniteNumber:nj,findKey:Fy,global:la,isContextDefined:Uy,isSpecCompliantForm:ij,toJSONObject:aj,isAsyncFn:rj,isThenable:oj,setImmediate:zy,asap:lj,isIterable:cj};function Re(l,e,t,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=l,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}ie.inherits(Re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ie.toJSONObject(this.config),code:this.code,status:this.status}}});const Hy=Re.prototype,Vy={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(l=>{Vy[l]={value:l}});Object.defineProperties(Re,Vy);Object.defineProperty(Hy,"isAxiosError",{value:!0});Re.from=(l,e,t,s,i,r)=>{const c=Object.create(Hy);ie.toFlatObject(l,c,function(f){return f!==Error.prototype},p=>p!=="isAxiosError");const u=l&&l.message?l.message:"Error",h=e==null&&l?l.code:e;return Re.call(c,u,h,t,s,i),l&&c.cause==null&&Object.defineProperty(c,"cause",{value:l,configurable:!0}),c.name=l&&l.name||"Error",r&&Object.assign(c,r),c};const dj=null;function zf(l){return ie.isPlainObject(l)||ie.isArray(l)}function qy(l){return ie.endsWith(l,"[]")?l.slice(0,-2):l}function lb(l,e,t){return l?l.concat(e).map(function(i,r){return i=qy(i),!t&&r?"["+i+"]":i}).join(t?".":""):e}function uj(l){return ie.isArray(l)&&!l.some(zf)}const hj=ie.toFlatObject(ie,{},null,function(e){return/^is[A-Z]/.test(e)});function Ld(l,e,t){if(!ie.isObject(l))throw new TypeError("target must be an object");e=e||new FormData,t=ie.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,j){return!ie.isUndefined(j[w])});const s=t.metaTokens,i=t.visitor||f,r=t.dots,c=t.indexes,h=(t.Blob||typeof Blob<"u"&&Blob)&&ie.isSpecCompliantForm(e);if(!ie.isFunction(i))throw new TypeError("visitor must be a function");function p(A){if(A===null)return"";if(ie.isDate(A))return A.toISOString();if(ie.isBoolean(A))return A.toString();if(!h&&ie.isBlob(A))throw new Re("Blob is not supported. Use a Buffer instead.");return ie.isArrayBuffer(A)||ie.isTypedArray(A)?h&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function f(A,w,j){let N=A;if(A&&!j&&typeof A=="object"){if(ie.endsWith(w,"{}"))w=s?w:w.slice(0,-2),A=JSON.stringify(A);else if(ie.isArray(A)&&uj(A)||(ie.isFileList(A)||ie.endsWith(w,"[]"))&&(N=ie.toArray(A)))return w=qy(w),N.forEach(function(L,k){!(ie.isUndefined(L)||L===null)&&e.append(c===!0?lb([w],k,r):c===null?w:w+"[]",p(L))}),!1}return zf(A)?!0:(e.append(lb(j,w,r),p(A)),!1)}const g=[],x=Object.assign(hj,{defaultVisitor:f,convertValue:p,isVisitable:zf});function y(A,w){if(!ie.isUndefined(A)){if(g.indexOf(A)!==-1)throw Error("Circular reference detected in "+w.join("."));g.push(A),ie.forEach(A,function(N,D){(!(ie.isUndefined(N)||N===null)&&i.call(e,N,ie.isString(D)?D.trim():D,w,x))===!0&&y(N,w?w.concat(D):[D])}),g.pop()}}if(!ie.isObject(l))throw new TypeError("data must be an object");return y(l),e}function cb(l){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(l).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function xm(l,e){this._pairs=[],l&&Ld(l,this,e)}const Gy=xm.prototype;Gy.append=function(e,t){this._pairs.push([e,t])};Gy.toString=function(e){const t=e?function(s){return e.call(this,s,cb)}:cb;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function fj(l){return encodeURIComponent(l).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function $y(l,e,t){if(!e)return l;const s=t&&t.encode||fj;ie.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let r;if(i?r=i(e,t):r=ie.isURLSearchParams(e)?e.toString():new xm(e,t).toString(s),r){const c=l.indexOf("#");c!==-1&&(l=l.slice(0,c)),l+=(l.indexOf("?")===-1?"?":"&")+r}return l}class db{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ie.forEach(this.handlers,function(s){s!==null&&e(s)})}}const Yy={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mj=typeof URLSearchParams<"u"?URLSearchParams:xm,pj=typeof FormData<"u"?FormData:null,gj=typeof Blob<"u"?Blob:null,xj={isBrowser:!0,classes:{URLSearchParams:mj,FormData:pj,Blob:gj},protocols:["http","https","file","blob","url","data"]},bm=typeof window<"u"&&typeof document<"u",Hf=typeof navigator=="object"&&navigator||void 0,bj=bm&&(!Hf||["ReactNative","NativeScript","NS"].indexOf(Hf.product)<0),yj=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",vj=bm&&window.location.href||"http://localhost",wj=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bm,hasStandardBrowserEnv:bj,hasStandardBrowserWebWorkerEnv:yj,navigator:Hf,origin:vj},Symbol.toStringTag,{value:"Module"})),ds={...wj,...xj};function Aj(l,e){return Ld(l,new ds.classes.URLSearchParams,{visitor:function(t,s,i,r){return ds.isNode&&ie.isBuffer(t)?(this.append(s,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...e})}function Nj(l){return ie.matchAll(/\w+|\[(\w*)]/g,l).map(e=>e[0]==="[]"?"":e[1]||e[0])}function jj(l){const e={},t=Object.keys(l);let s;const i=t.length;let r;for(s=0;s<i;s++)r=t[s],e[r]=l[r];return e}function Xy(l){function e(t,s,i,r){let c=t[r++];if(c==="__proto__")return!0;const u=Number.isFinite(+c),h=r>=t.length;return c=!c&&ie.isArray(i)?i.length:c,h?(ie.hasOwnProp(i,c)?i[c]=[i[c],s]:i[c]=s,!u):((!i[c]||!ie.isObject(i[c]))&&(i[c]=[]),e(t,s,i[c],r)&&ie.isArray(i[c])&&(i[c]=jj(i[c])),!u)}if(ie.isFormData(l)&&ie.isFunction(l.entries)){const t={};return ie.forEachEntry(l,(s,i)=>{e(Nj(s),i,t,0)}),t}return null}function Sj(l,e,t){if(ie.isString(l))try{return(e||JSON.parse)(l),ie.trim(l)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(l)}const dl={transitional:Yy,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",i=s.indexOf("application/json")>-1,r=ie.isObject(e);if(r&&ie.isHTMLForm(e)&&(e=new FormData(e)),ie.isFormData(e))return i?JSON.stringify(Xy(e)):e;if(ie.isArrayBuffer(e)||ie.isBuffer(e)||ie.isStream(e)||ie.isFile(e)||ie.isBlob(e)||ie.isReadableStream(e))return e;if(ie.isArrayBufferView(e))return e.buffer;if(ie.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Aj(e,this.formSerializer).toString();if((u=ie.isFileList(e))||s.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Ld(u?{"files[]":e}:e,h&&new h,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),Sj(e)):e}],transformResponse:[function(e){const t=this.transitional||dl.transitional,s=t&&t.forcedJSONParsing,i=this.responseType==="json";if(ie.isResponse(e)||ie.isReadableStream(e))return e;if(e&&ie.isString(e)&&(s&&!this.responseType||i)){const c=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(u){if(c)throw u.name==="SyntaxError"?Re.from(u,Re.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ds.classes.FormData,Blob:ds.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ie.forEach(["delete","get","head","post","put","patch"],l=>{dl.headers[l]={}});const _j=ie.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ej=l=>{const e={};let t,s,i;return l&&l.split(`
`).forEach(function(c){i=c.indexOf(":"),t=c.substring(0,i).trim().toLowerCase(),s=c.substring(i+1).trim(),!(!t||e[t]&&_j[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},ub=Symbol("internals");function Po(l){return l&&String(l).trim().toLowerCase()}function od(l){return l===!1||l==null?l:ie.isArray(l)?l.map(od):String(l)}function Cj(l){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(l);)e[s[1]]=s[2];return e}const Tj=l=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(l.trim());function wf(l,e,t,s,i){if(ie.isFunction(s))return s.call(this,e,t);if(i&&(e=t),!!ie.isString(e)){if(ie.isString(s))return e.indexOf(s)!==-1;if(ie.isRegExp(s))return s.test(e)}}function Rj(l){return l.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function kj(l,e){const t=ie.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(l,s+t,{value:function(i,r,c){return this[s].call(this,e,i,r,c)},configurable:!0})})}let Ts=class{constructor(e){e&&this.set(e)}set(e,t,s){const i=this;function r(u,h,p){const f=Po(h);if(!f)throw new Error("header name must be a non-empty string");const g=ie.findKey(i,f);(!g||i[g]===void 0||p===!0||p===void 0&&i[g]!==!1)&&(i[g||h]=od(u))}const c=(u,h)=>ie.forEach(u,(p,f)=>r(p,f,h));if(ie.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(ie.isString(e)&&(e=e.trim())&&!Tj(e))c(Ej(e),t);else if(ie.isObject(e)&&ie.isIterable(e)){let u={},h,p;for(const f of e){if(!ie.isArray(f))throw TypeError("Object iterator must return a key-value pair");u[p=f[0]]=(h=u[p])?ie.isArray(h)?[...h,f[1]]:[h,f[1]]:f[1]}c(u,t)}else e!=null&&r(t,e,s);return this}get(e,t){if(e=Po(e),e){const s=ie.findKey(this,e);if(s){const i=this[s];if(!t)return i;if(t===!0)return Cj(i);if(ie.isFunction(t))return t.call(this,i,s);if(ie.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Po(e),e){const s=ie.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||wf(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let i=!1;function r(c){if(c=Po(c),c){const u=ie.findKey(s,c);u&&(!t||wf(s,s[u],u,t))&&(delete s[u],i=!0)}}return ie.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let s=t.length,i=!1;for(;s--;){const r=t[s];(!e||wf(this,this[r],r,e,!0))&&(delete this[r],i=!0)}return i}normalize(e){const t=this,s={};return ie.forEach(this,(i,r)=>{const c=ie.findKey(s,r);if(c){t[c]=od(i),delete t[r];return}const u=e?Rj(r):String(r).trim();u!==r&&delete t[r],t[u]=od(i),s[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ie.forEach(this,(s,i)=>{s!=null&&s!==!1&&(t[i]=e&&ie.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(i=>s.set(i)),s}static accessor(e){const s=(this[ub]=this[ub]={accessors:{}}).accessors,i=this.prototype;function r(c){const u=Po(c);s[u]||(kj(i,c),s[u]=!0)}return ie.isArray(e)?e.forEach(r):r(e),this}};Ts.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ie.reduceDescriptors(Ts.prototype,({value:l},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>l,set(s){this[t]=s}}});ie.freezeMethods(Ts);function Af(l,e){const t=this||dl,s=e||t,i=Ts.from(s.headers);let r=s.data;return ie.forEach(l,function(u){r=u.call(t,r,i.normalize(),e?e.status:void 0)}),i.normalize(),r}function Wy(l){return!!(l&&l.__CANCEL__)}function Br(l,e,t){Re.call(this,l??"canceled",Re.ERR_CANCELED,e,t),this.name="CanceledError"}ie.inherits(Br,Re,{__CANCEL__:!0});function Ky(l,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?l(t):e(new Re("Request failed with status code "+t.status,[Re.ERR_BAD_REQUEST,Re.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Dj(l){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(l);return e&&e[1]||""}function Mj(l,e){l=l||10;const t=new Array(l),s=new Array(l);let i=0,r=0,c;return e=e!==void 0?e:1e3,function(h){const p=Date.now(),f=s[r];c||(c=p),t[i]=h,s[i]=p;let g=r,x=0;for(;g!==i;)x+=t[g++],g=g%l;if(i=(i+1)%l,i===r&&(r=(r+1)%l),p-c<e)return;const y=f&&p-f;return y?Math.round(x*1e3/y):void 0}}function Lj(l,e){let t=0,s=1e3/e,i,r;const c=(p,f=Date.now())=>{t=f,i=null,r&&(clearTimeout(r),r=null),l(...p)};return[(...p)=>{const f=Date.now(),g=f-t;g>=s?c(p,f):(i=p,r||(r=setTimeout(()=>{r=null,c(i)},s-g)))},()=>i&&c(i)]}const bd=(l,e,t=3)=>{let s=0;const i=Mj(50,250);return Lj(r=>{const c=r.loaded,u=r.lengthComputable?r.total:void 0,h=c-s,p=i(h),f=c<=u;s=c;const g={loaded:c,total:u,progress:u?c/u:void 0,bytes:h,rate:p||void 0,estimated:p&&u&&f?(u-c)/p:void 0,event:r,lengthComputable:u!=null,[e?"download":"upload"]:!0};l(g)},t)},hb=(l,e)=>{const t=l!=null;return[s=>e[0]({lengthComputable:t,total:l,loaded:s}),e[1]]},fb=l=>(...e)=>ie.asap(()=>l(...e)),Oj=ds.hasStandardBrowserEnv?((l,e)=>t=>(t=new URL(t,ds.origin),l.protocol===t.protocol&&l.host===t.host&&(e||l.port===t.port)))(new URL(ds.origin),ds.navigator&&/(msie|trident)/i.test(ds.navigator.userAgent)):()=>!0,Bj=ds.hasStandardBrowserEnv?{write(l,e,t,s,i,r,c){if(typeof document>"u")return;const u=[`${l}=${encodeURIComponent(e)}`];ie.isNumber(t)&&u.push(`expires=${new Date(t).toUTCString()}`),ie.isString(s)&&u.push(`path=${s}`),ie.isString(i)&&u.push(`domain=${i}`),r===!0&&u.push("secure"),ie.isString(c)&&u.push(`SameSite=${c}`),document.cookie=u.join("; ")},read(l){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+l+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(l){this.write(l,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Pj(l){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(l)}function Fj(l,e){return e?l.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):l}function Qy(l,e,t){let s=!Pj(e);return l&&(s||t==!1)?Fj(l,e):e}const mb=l=>l instanceof Ts?{...l}:l;function xa(l,e){e=e||{};const t={};function s(p,f,g,x){return ie.isPlainObject(p)&&ie.isPlainObject(f)?ie.merge.call({caseless:x},p,f):ie.isPlainObject(f)?ie.merge({},f):ie.isArray(f)?f.slice():f}function i(p,f,g,x){if(ie.isUndefined(f)){if(!ie.isUndefined(p))return s(void 0,p,g,x)}else return s(p,f,g,x)}function r(p,f){if(!ie.isUndefined(f))return s(void 0,f)}function c(p,f){if(ie.isUndefined(f)){if(!ie.isUndefined(p))return s(void 0,p)}else return s(void 0,f)}function u(p,f,g){if(g in e)return s(p,f);if(g in l)return s(void 0,p)}const h={url:r,method:r,data:r,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(p,f,g)=>i(mb(p),mb(f),g,!0)};return ie.forEach(Object.keys({...l,...e}),function(f){const g=h[f]||i,x=g(l[f],e[f],f);ie.isUndefined(x)&&g!==u||(t[f]=x)}),t}const Zy=l=>{const e=xa({},l);let{data:t,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:r,headers:c,auth:u}=e;if(e.headers=c=Ts.from(c),e.url=$y(Qy(e.baseURL,e.url,e.allowAbsoluteUrls),l.params,l.paramsSerializer),u&&c.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),ie.isFormData(t)){if(ds.hasStandardBrowserEnv||ds.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(ie.isFunction(t.getHeaders)){const h=t.getHeaders(),p=["content-type","content-length"];Object.entries(h).forEach(([f,g])=>{p.includes(f.toLowerCase())&&c.set(f,g)})}}if(ds.hasStandardBrowserEnv&&(s&&ie.isFunction(s)&&(s=s(e)),s||s!==!1&&Oj(e.url))){const h=i&&r&&Bj.read(r);h&&c.set(i,h)}return e},Uj=typeof XMLHttpRequest<"u",Ij=Uj&&function(l){return new Promise(function(t,s){const i=Zy(l);let r=i.data;const c=Ts.from(i.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:p}=i,f,g,x,y,A;function w(){y&&y(),A&&A(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let j=new XMLHttpRequest;j.open(i.method.toUpperCase(),i.url,!0),j.timeout=i.timeout;function N(){if(!j)return;const L=Ts.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),U={data:!u||u==="text"||u==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:L,config:l,request:j};Ky(function(B){t(B),w()},function(B){s(B),w()},U),j=null}"onloadend"in j?j.onloadend=N:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(N)},j.onabort=function(){j&&(s(new Re("Request aborted",Re.ECONNABORTED,l,j)),j=null)},j.onerror=function(k){const U=k&&k.message?k.message:"Network Error",C=new Re(U,Re.ERR_NETWORK,l,j);C.event=k||null,s(C),j=null},j.ontimeout=function(){let k=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const U=i.transitional||Yy;i.timeoutErrorMessage&&(k=i.timeoutErrorMessage),s(new Re(k,U.clarifyTimeoutError?Re.ETIMEDOUT:Re.ECONNABORTED,l,j)),j=null},r===void 0&&c.setContentType(null),"setRequestHeader"in j&&ie.forEach(c.toJSON(),function(k,U){j.setRequestHeader(U,k)}),ie.isUndefined(i.withCredentials)||(j.withCredentials=!!i.withCredentials),u&&u!=="json"&&(j.responseType=i.responseType),p&&([x,A]=bd(p,!0),j.addEventListener("progress",x)),h&&j.upload&&([g,y]=bd(h),j.upload.addEventListener("progress",g),j.upload.addEventListener("loadend",y)),(i.cancelToken||i.signal)&&(f=L=>{j&&(s(!L||L.type?new Br(null,l,j):L),j.abort(),j=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const D=Dj(i.url);if(D&&ds.protocols.indexOf(D)===-1){s(new Re("Unsupported protocol "+D+":",Re.ERR_BAD_REQUEST,l));return}j.send(r||null)})},zj=(l,e)=>{const{length:t}=l=l?l.filter(Boolean):[];if(e||t){let s=new AbortController,i;const r=function(p){if(!i){i=!0,u();const f=p instanceof Error?p:this.reason;s.abort(f instanceof Re?f:new Br(f instanceof Error?f.message:f))}};let c=e&&setTimeout(()=>{c=null,r(new Re(`timeout ${e} of ms exceeded`,Re.ETIMEDOUT))},e);const u=()=>{l&&(c&&clearTimeout(c),c=null,l.forEach(p=>{p.unsubscribe?p.unsubscribe(r):p.removeEventListener("abort",r)}),l=null)};l.forEach(p=>p.addEventListener("abort",r));const{signal:h}=s;return h.unsubscribe=()=>ie.asap(u),h}},Hj=function*(l,e){let t=l.byteLength;if(t<e){yield l;return}let s=0,i;for(;s<t;)i=s+e,yield l.slice(s,i),s=i},Vj=async function*(l,e){for await(const t of qj(l))yield*Hj(t,e)},qj=async function*(l){if(l[Symbol.asyncIterator]){yield*l;return}const e=l.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},pb=(l,e,t,s)=>{const i=Vj(l,e);let r=0,c,u=h=>{c||(c=!0,s&&s(h))};return new ReadableStream({async pull(h){try{const{done:p,value:f}=await i.next();if(p){u(),h.close();return}let g=f.byteLength;if(t){let x=r+=g;t(x)}h.enqueue(new Uint8Array(f))}catch(p){throw u(p),p}},cancel(h){return u(h),i.return()}},{highWaterMark:2})},gb=64*1024,{isFunction:Bc}=ie,Gj=(({Request:l,Response:e})=>({Request:l,Response:e}))(ie.global),{ReadableStream:xb,TextEncoder:bb}=ie.global,yb=(l,...e)=>{try{return!!l(...e)}catch{return!1}},$j=l=>{l=ie.merge.call({skipUndefined:!0},Gj,l);const{fetch:e,Request:t,Response:s}=l,i=e?Bc(e):typeof fetch=="function",r=Bc(t),c=Bc(s);if(!i)return!1;const u=i&&Bc(xb),h=i&&(typeof bb=="function"?(A=>w=>A.encode(w))(new bb):async A=>new Uint8Array(await new t(A).arrayBuffer())),p=r&&u&&yb(()=>{let A=!1;const w=new t(ds.origin,{body:new xb,method:"POST",get duplex(){return A=!0,"half"}}).headers.has("Content-Type");return A&&!w}),f=c&&u&&yb(()=>ie.isReadableStream(new s("").body)),g={stream:f&&(A=>A.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(A=>{!g[A]&&(g[A]=(w,j)=>{let N=w&&w[A];if(N)return N.call(w);throw new Re(`Response type '${A}' is not supported`,Re.ERR_NOT_SUPPORT,j)})});const x=async A=>{if(A==null)return 0;if(ie.isBlob(A))return A.size;if(ie.isSpecCompliantForm(A))return(await new t(ds.origin,{method:"POST",body:A}).arrayBuffer()).byteLength;if(ie.isArrayBufferView(A)||ie.isArrayBuffer(A))return A.byteLength;if(ie.isURLSearchParams(A)&&(A=A+""),ie.isString(A))return(await h(A)).byteLength},y=async(A,w)=>{const j=ie.toFiniteNumber(A.getContentLength());return j??x(w)};return async A=>{let{url:w,method:j,data:N,signal:D,cancelToken:L,timeout:k,onDownloadProgress:U,onUploadProgress:C,responseType:B,headers:R,withCredentials:E="same-origin",fetchOptions:O}=Zy(A),I=e||fetch;B=B?(B+"").toLowerCase():"text";let V=zj([D,L&&L.toAbortSignal()],k),z=null;const H=V&&V.unsubscribe&&(()=>{V.unsubscribe()});let $;try{if(C&&p&&j!=="get"&&j!=="head"&&($=await y(R,N))!==0){let F=new t(w,{method:"POST",body:N,duplex:"half"}),G;if(ie.isFormData(N)&&(G=F.headers.get("content-type"))&&R.setContentType(G),F.body){const[Z,Q]=hb($,bd(fb(C)));N=pb(F.body,gb,Z,Q)}}ie.isString(E)||(E=E?"include":"omit");const S=r&&"credentials"in t.prototype,_={...O,signal:V,method:j.toUpperCase(),headers:R.normalize().toJSON(),body:N,duplex:"half",credentials:S?E:void 0};z=r&&new t(w,_);let q=await(r?I(z,O):I(w,_));const Y=f&&(B==="stream"||B==="response");if(f&&(U||Y&&H)){const F={};["status","statusText","headers"].forEach(K=>{F[K]=q[K]});const G=ie.toFiniteNumber(q.headers.get("content-length")),[Z,Q]=U&&hb(G,bd(fb(U),!0))||[];q=new s(pb(q.body,gb,Z,()=>{Q&&Q(),H&&H()}),F)}B=B||"text";let ee=await g[ie.findKey(g,B)||"text"](q,A);return!Y&&H&&H(),await new Promise((F,G)=>{Ky(F,G,{data:ee,headers:Ts.from(q.headers),status:q.status,statusText:q.statusText,config:A,request:z})})}catch(S){throw H&&H(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new Re("Network Error",Re.ERR_NETWORK,A,z),{cause:S.cause||S}):Re.from(S,S&&S.code,A,z)}}},Yj=new Map,Jy=l=>{let e=l&&l.env||{};const{fetch:t,Request:s,Response:i}=e,r=[s,i,t];let c=r.length,u=c,h,p,f=Yj;for(;u--;)h=r[u],p=f.get(h),p===void 0&&f.set(h,p=u?new Map:$j(e)),f=p;return p};Jy();const ym={http:dj,xhr:Ij,fetch:{get:Jy}};ie.forEach(ym,(l,e)=>{if(l){try{Object.defineProperty(l,"name",{value:e})}catch{}Object.defineProperty(l,"adapterName",{value:e})}});const vb=l=>`- ${l}`,Xj=l=>ie.isFunction(l)||l===null||l===!1;function Wj(l,e){l=ie.isArray(l)?l:[l];const{length:t}=l;let s,i;const r={};for(let c=0;c<t;c++){s=l[c];let u;if(i=s,!Xj(s)&&(i=ym[(u=String(s)).toLowerCase()],i===void 0))throw new Re(`Unknown adapter '${u}'`);if(i&&(ie.isFunction(i)||(i=i.get(e))))break;r[u||"#"+c]=i}if(!i){const c=Object.entries(r).map(([h,p])=>`adapter ${h} `+(p===!1?"is not supported by the environment":"is not available in the build"));let u=t?c.length>1?`since :
`+c.map(vb).join(`
`):" "+vb(c[0]):"as no adapter specified";throw new Re("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i}const ev={getAdapter:Wj,adapters:ym};function Nf(l){if(l.cancelToken&&l.cancelToken.throwIfRequested(),l.signal&&l.signal.aborted)throw new Br(null,l)}function wb(l){return Nf(l),l.headers=Ts.from(l.headers),l.data=Af.call(l,l.transformRequest),["post","put","patch"].indexOf(l.method)!==-1&&l.headers.setContentType("application/x-www-form-urlencoded",!1),ev.getAdapter(l.adapter||dl.adapter,l)(l).then(function(s){return Nf(l),s.data=Af.call(l,l.transformResponse,s),s.headers=Ts.from(s.headers),s},function(s){return Wy(s)||(Nf(l),s&&s.response&&(s.response.data=Af.call(l,l.transformResponse,s.response),s.response.headers=Ts.from(s.response.headers))),Promise.reject(s)})}const tv="1.13.2",Od={};["object","boolean","number","function","string","symbol"].forEach((l,e)=>{Od[l]=function(s){return typeof s===l||"a"+(e<1?"n ":" ")+l}});const Ab={};Od.transitional=function(e,t,s){function i(r,c){return"[Axios v"+tv+"] Transitional option '"+r+"'"+c+(s?". "+s:"")}return(r,c,u)=>{if(e===!1)throw new Re(i(c," has been removed"+(t?" in "+t:"")),Re.ERR_DEPRECATED);return t&&!Ab[c]&&(Ab[c]=!0,console.warn(i(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,c,u):!0}};Od.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function Kj(l,e,t){if(typeof l!="object")throw new Re("options must be an object",Re.ERR_BAD_OPTION_VALUE);const s=Object.keys(l);let i=s.length;for(;i-- >0;){const r=s[i],c=e[r];if(c){const u=l[r],h=u===void 0||c(u,r,l);if(h!==!0)throw new Re("option "+r+" must be "+h,Re.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Re("Unknown option "+r,Re.ERR_BAD_OPTION)}}const ld={assertOptions:Kj,validators:Od},Dn=ld.validators;let ga=class{constructor(e){this.defaults=e||{},this.interceptors={request:new db,response:new db}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=xa(this.defaults,t);const{transitional:s,paramsSerializer:i,headers:r}=t;s!==void 0&&ld.assertOptions(s,{silentJSONParsing:Dn.transitional(Dn.boolean),forcedJSONParsing:Dn.transitional(Dn.boolean),clarifyTimeoutError:Dn.transitional(Dn.boolean)},!1),i!=null&&(ie.isFunction(i)?t.paramsSerializer={serialize:i}:ld.assertOptions(i,{encode:Dn.function,serialize:Dn.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ld.assertOptions(t,{baseUrl:Dn.spelling("baseURL"),withXsrfToken:Dn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=r&&ie.merge(r.common,r[t.method]);r&&ie.forEach(["delete","get","head","post","put","patch","common"],A=>{delete r[A]}),t.headers=Ts.concat(c,r);const u=[];let h=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(t)===!1||(h=h&&w.synchronous,u.unshift(w.fulfilled,w.rejected))});const p=[];this.interceptors.response.forEach(function(w){p.push(w.fulfilled,w.rejected)});let f,g=0,x;if(!h){const A=[wb.bind(this),void 0];for(A.unshift(...u),A.push(...p),x=A.length,f=Promise.resolve(t);g<x;)f=f.then(A[g++],A[g++]);return f}x=u.length;let y=t;for(;g<x;){const A=u[g++],w=u[g++];try{y=A(y)}catch(j){w.call(this,j);break}}try{f=wb.call(this,y)}catch(A){return Promise.reject(A)}for(g=0,x=p.length;g<x;)f=f.then(p[g++],p[g++]);return f}getUri(e){e=xa(this.defaults,e);const t=Qy(e.baseURL,e.url,e.allowAbsoluteUrls);return $y(t,e.params,e.paramsSerializer)}};ie.forEach(["delete","get","head","options"],function(e){ga.prototype[e]=function(t,s){return this.request(xa(s||{},{method:e,url:t,data:(s||{}).data}))}});ie.forEach(["post","put","patch"],function(e){function t(s){return function(r,c,u){return this.request(xa(u||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:c}))}}ga.prototype[e]=t(),ga.prototype[e+"Form"]=t(!0)});let Qj=class sv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const c=new Promise(u=>{s.subscribe(u),r=u}).then(i);return c.cancel=function(){s.unsubscribe(r)},c},e(function(r,c,u){s.reason||(s.reason=new Br(r,c,u),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new sv(function(i){e=i}),cancel:e}}};function Zj(l){return function(t){return l.apply(null,t)}}function Jj(l){return ie.isObject(l)&&l.isAxiosError===!0}const Vf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Vf).forEach(([l,e])=>{Vf[e]=l});function nv(l){const e=new ga(l),t=Ly(ga.prototype.request,e);return ie.extend(t,ga.prototype,e,{allOwnKeys:!0}),ie.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return nv(xa(l,i))},t}const Dt=nv(dl);Dt.Axios=ga;Dt.CanceledError=Br;Dt.CancelToken=Qj;Dt.isCancel=Wy;Dt.VERSION=tv;Dt.toFormData=Ld;Dt.AxiosError=Re;Dt.Cancel=Dt.CanceledError;Dt.all=function(e){return Promise.all(e)};Dt.spread=Zj;Dt.isAxiosError=Jj;Dt.mergeConfig=xa;Dt.AxiosHeaders=Ts;Dt.formToJSON=l=>Xy(ie.isHTMLForm(l)?new FormData(l):l);Dt.getAdapter=ev.getAdapter;Dt.HttpStatusCode=Vf;Dt.default=Dt;const{Axios:kT,AxiosError:DT,CanceledError:MT,isCancel:LT,CancelToken:OT,VERSION:BT,all:PT,Cancel:FT,isAxiosError:UT,spread:IT,toFormData:zT,AxiosHeaders:HT,HttpStatusCode:VT,formToJSON:qT,getAdapter:GT,mergeConfig:$T}=Dt,eS="https://spiderman77.site/api",le=Dt.create({baseURL:eS,headers:{Accept:"application/json"},timeout:3e5,maxContentLength:100*1024*1024,maxBodyLength:100*1024*1024});le.interceptors.request.use(l=>{if(l.url&&l.url.includes("/admin/")&&!l.url.includes("/admin/login")){const e=localStorage.getItem("admin_token");e&&(l.headers.Authorization=`Bearer ${e}`)}return l.data instanceof FormData||(l.headers["Content-Type"]="application/json"),l},l=>Promise.reject(l));le.interceptors.response.use(l=>l,l=>(l.response?.status===401&&(localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user"),window.location.href="/admin/login"),Promise.reject(l)));const pr={login:async l=>{const e=await le.post("/admin/login",l);return e.data.token&&(localStorage.setItem("admin_token",e.data.token),localStorage.setItem("admin_user",JSON.stringify(e.data.user))),e.data},logout:()=>{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user")},getCurrentUser:()=>{const l=localStorage.getItem("admin_user");return l?JSON.parse(l):null},isAuthenticated:()=>!!localStorage.getItem("admin_token"),checkAdmin:async()=>(await le.get("/admin/check")).data,getProfile:async()=>(await le.get("/admin/profile")).data,updateProfile:async l=>{const e=await le.put("/admin/profile",l);return e.data.user&&localStorage.setItem("admin_user",JSON.stringify(e.data.user)),e.data},changePassword:async l=>(await le.post("/admin/change-password",l)).data},iv=M.createContext(null),tS=({children:l})=>{const[e,t]=M.useState(null),[s,i]=M.useState(!0);M.useEffect(()=>{const p=pr.getCurrentUser();p&&pr.isAuthenticated()&&t(p),i(!1)},[]);const h={user:e,login:async p=>{try{const f=await pr.login(p);return t(f.user),f}catch(f){throw f}},logout:()=>{pr.logout(),t(null)},setUser:p=>{t(p),p&&localStorage.setItem("admin_user",JSON.stringify(p))},isAuthenticated:!!e,loading:s};return o.jsx(iv.Provider,{value:h,children:l})},Bd=()=>{const l=M.useContext(iv);if(!l)throw new Error("useAuth must be used within AuthProvider");return l},zn=Object.create(null);zn.open="0";zn.close="1";zn.ping="2";zn.pong="3";zn.message="4";zn.upgrade="5";zn.noop="6";const cd=Object.create(null);Object.keys(zn).forEach(l=>{cd[zn[l]]=l});const qf={type:"error",data:"parser error"},av=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",rv=typeof ArrayBuffer=="function",ov=l=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(l):l&&l.buffer instanceof ArrayBuffer,vm=({type:l,data:e},t,s)=>av&&e instanceof Blob?t?s(e):Nb(e,s):rv&&(e instanceof ArrayBuffer||ov(e))?t?s(e):Nb(new Blob([e]),s):s(zn[l]+(e||"")),Nb=(l,e)=>{const t=new FileReader;return t.onload=function(){const s=t.result.split(",")[1];e("b"+(s||""))},t.readAsDataURL(l)};function jb(l){return l instanceof Uint8Array?l:l instanceof ArrayBuffer?new Uint8Array(l):new Uint8Array(l.buffer,l.byteOffset,l.byteLength)}let jf;function sS(l,e){if(av&&l.data instanceof Blob)return l.data.arrayBuffer().then(jb).then(e);if(rv&&(l.data instanceof ArrayBuffer||ov(l.data)))return e(jb(l.data));vm(l,!1,t=>{jf||(jf=new TextEncoder),e(jf.encode(t))})}const Sb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let l=0;l<Sb.length;l++)Vo[Sb.charCodeAt(l)]=l;const nS=l=>{let e=l.length*.75,t=l.length,s,i=0,r,c,u,h;l[l.length-1]==="="&&(e--,l[l.length-2]==="="&&e--);const p=new ArrayBuffer(e),f=new Uint8Array(p);for(s=0;s<t;s+=4)r=Vo[l.charCodeAt(s)],c=Vo[l.charCodeAt(s+1)],u=Vo[l.charCodeAt(s+2)],h=Vo[l.charCodeAt(s+3)],f[i++]=r<<2|c>>4,f[i++]=(c&15)<<4|u>>2,f[i++]=(u&3)<<6|h&63;return p},iS=typeof ArrayBuffer=="function",wm=(l,e)=>{if(typeof l!="string")return{type:"message",data:lv(l,e)};const t=l.charAt(0);return t==="b"?{type:"message",data:aS(l.substring(1),e)}:cd[t]?l.length>1?{type:cd[t],data:l.substring(1)}:{type:cd[t]}:qf},aS=(l,e)=>{if(iS){const t=nS(l);return lv(t,e)}else return{base64:!0,data:l}},lv=(l,e)=>e==="blob"?l instanceof Blob?l:new Blob([l]):l instanceof ArrayBuffer?l:l.buffer,cv="",rS=(l,e)=>{const t=l.length,s=new Array(t);let i=0;l.forEach((r,c)=>{vm(r,!1,u=>{s[c]=u,++i===t&&e(s.join(cv))})})},oS=(l,e)=>{const t=l.split(cv),s=[];for(let i=0;i<t.length;i++){const r=wm(t[i],e);if(s.push(r),r.type==="error")break}return s};function lS(){return new TransformStream({transform(l,e){sS(l,t=>{const s=t.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,s)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(s))}l.data&&typeof l.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(t)})}})}let Sf;function Pc(l){return l.reduce((e,t)=>e+t.length,0)}function Fc(l,e){if(l[0].length===e)return l.shift();const t=new Uint8Array(e);let s=0;for(let i=0;i<e;i++)t[i]=l[0][s++],s===l[0].length&&(l.shift(),s=0);return l.length&&s<l[0].length&&(l[0]=l[0].slice(s)),t}function cS(l,e){Sf||(Sf=new TextDecoder);const t=[];let s=0,i=-1,r=!1;return new TransformStream({transform(c,u){for(t.push(c);;){if(s===0){if(Pc(t)<1)break;const h=Fc(t,1);r=(h[0]&128)===128,i=h[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(Pc(t)<2)break;const h=Fc(t,2);i=new DataView(h.buffer,h.byteOffset,h.length).getUint16(0),s=3}else if(s===2){if(Pc(t)<8)break;const h=Fc(t,8),p=new DataView(h.buffer,h.byteOffset,h.length),f=p.getUint32(0);if(f>Math.pow(2,21)-1){u.enqueue(qf);break}i=f*Math.pow(2,32)+p.getUint32(4),s=3}else{if(Pc(t)<i)break;const h=Fc(t,i);u.enqueue(wm(r?h:Sf.decode(h),e)),s=0}if(i===0||i>l){u.enqueue(qf);break}}}})}const dv=4;function Ft(l){if(l)return dS(l)}function dS(l){for(var e in Ft.prototype)l[e]=Ft.prototype[e];return l}Ft.prototype.on=Ft.prototype.addEventListener=function(l,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+l]=this._callbacks["$"+l]||[]).push(e),this};Ft.prototype.once=function(l,e){function t(){this.off(l,t),e.apply(this,arguments)}return t.fn=e,this.on(l,t),this};Ft.prototype.off=Ft.prototype.removeListener=Ft.prototype.removeAllListeners=Ft.prototype.removeEventListener=function(l,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+l];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+l],this;for(var s,i=0;i<t.length;i++)if(s=t[i],s===e||s.fn===e){t.splice(i,1);break}return t.length===0&&delete this._callbacks["$"+l],this};Ft.prototype.emit=function(l){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+l],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(t){t=t.slice(0);for(var s=0,i=t.length;s<i;++s)t[s].apply(this,e)}return this};Ft.prototype.emitReserved=Ft.prototype.emit;Ft.prototype.listeners=function(l){return this._callbacks=this._callbacks||{},this._callbacks["$"+l]||[]};Ft.prototype.hasListeners=function(l){return!!this.listeners(l).length};const Pd=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),ln=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),uS="arraybuffer";function uv(l,...e){return e.reduce((t,s)=>(l.hasOwnProperty(s)&&(t[s]=l[s]),t),{})}const hS=ln.setTimeout,fS=ln.clearTimeout;function Fd(l,e){e.useNativeTimers?(l.setTimeoutFn=hS.bind(ln),l.clearTimeoutFn=fS.bind(ln)):(l.setTimeoutFn=ln.setTimeout.bind(ln),l.clearTimeoutFn=ln.clearTimeout.bind(ln))}const mS=1.33;function pS(l){return typeof l=="string"?gS(l):Math.ceil((l.byteLength||l.size)*mS)}function gS(l){let e=0,t=0;for(let s=0,i=l.length;s<i;s++)e=l.charCodeAt(s),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(s++,t+=4);return t}function hv(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function xS(l){let e="";for(let t in l)l.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(l[t]));return e}function bS(l){let e={},t=l.split("&");for(let s=0,i=t.length;s<i;s++){let r=t[s].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}class yS extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class Am extends Ft{constructor(e){super(),this.writable=!1,Fd(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new yS(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=wm(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=xS(e);return t.length?"?"+t:""}}class vS extends Am{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||t()})),this.writable||(s++,this.once("drain",function(){--s||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};oS(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,rS(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=hv()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let fv=!1;try{fv=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const wS=fv;function AS(){}class NS extends vS{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let s=location.port;s||(s=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,s)=>{this.onError("xhr poll error",t,s)}),this.pollXhr=e}}class In extends Ft{constructor(e,t,s){super(),this.createRequest=e,Fd(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const t=uv(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=In.requestsCount++,In.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=AS,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete In.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}In.requestsCount=0;In.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",_b);else if(typeof addEventListener=="function"){const l="onpagehide"in ln?"pagehide":"unload";addEventListener(l,_b,!1)}}function _b(){for(let l in In.requests)In.requests.hasOwnProperty(l)&&In.requests[l].abort()}const jS=(function(){const l=mv({xdomain:!1});return l&&l.responseType!==null})();class SS extends NS{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=jS&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new In(mv,this.uri(),e)}}function mv(l){const e=l.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||wS))return new XMLHttpRequest}catch{}if(!e)try{return new ln[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const pv=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class _S extends Am{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,s=pv?{}:uv(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],i=t===e.length-1;vm(s,this.supportsBinary,r=>{try{this.doWrite(s,r)}catch{}i&&Pd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=hv()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const _f=ln.WebSocket||ln.MozWebSocket;class ES extends _S{createSocket(e,t,s){return pv?new _f(e,t,s):t?new _f(e,t):new _f(e)}doWrite(e,t){this.ws.send(t)}}class CS extends Am{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=cS(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),i=lS();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const r=()=>{s.read().then(({done:u,value:h})=>{u||(this.onPacket(h),r())}).catch(u=>{})};r();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],i=t===e.length-1;this._writer.write(s).then(()=>{i&&Pd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const TS={websocket:ES,webtransport:CS,polling:SS},RS=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,kS=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Gf(l){if(l.length>8e3)throw"URI too long";const e=l,t=l.indexOf("["),s=l.indexOf("]");t!=-1&&s!=-1&&(l=l.substring(0,t)+l.substring(t,s).replace(/:/g,";")+l.substring(s,l.length));let i=RS.exec(l||""),r={},c=14;for(;c--;)r[kS[c]]=i[c]||"";return t!=-1&&s!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=DS(r,r.path),r.queryKey=MS(r,r.query),r}function DS(l,e){const t=/\/{2,9}/g,s=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function MS(l,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,r){i&&(t[i]=r)}),t}const $f=typeof addEventListener=="function"&&typeof removeEventListener=="function",dd=[];$f&&addEventListener("offline",()=>{dd.forEach(l=>l())},!1);class Ui extends Ft{constructor(e,t){if(super(),this.binaryType=uS,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const s=Gf(e);t.hostname=s.host,t.secure=s.protocol==="https"||s.protocol==="wss",t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=Gf(t.host).host);Fd(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=bS(this.opts.query)),$f&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},dd.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=dv,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Ui.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",Ui.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(t+=pS(i)),s>0&&t>this._maxPayload)return this.writeBuffer.slice(0,s);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Pd(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,i){if(typeof t=="function"&&(i=t,t=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const r={type:e,data:t,options:s};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(Ui.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),$f&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=dd.indexOf(this._offlineEventListener);s!==-1&&dd.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Ui.protocol=dv;class LS extends Ui{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;Ui.priorWebsocketSuccess=!1;const i=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",g=>{if(!s)if(g.type==="pong"&&g.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Ui.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(f(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const x=new Error("probe error");x.transport=t.name,this.emitReserved("upgradeError",x)}}))};function r(){s||(s=!0,f(),t.close(),t=null)}const c=g=>{const x=new Error("probe error: "+g);x.transport=t.name,r(),this.emitReserved("upgradeError",x)};function u(){c("transport closed")}function h(){c("socket closed")}function p(g){t&&g.name!==t.name&&r()}const f=()=>{t.removeListener("open",i),t.removeListener("error",c),t.removeListener("close",u),this.off("close",h),this.off("upgrading",p)};t.once("open",i),t.once("error",c),t.once("close",u),this.once("close",h),this.once("upgrading",p),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}let OS=class extends LS{constructor(e,t={}){const s=typeof e=="object"?e:t;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>TS[i]).filter(i=>!!i)),super(e,s)}};function BS(l,e="",t){let s=l;t=t||typeof location<"u"&&location,l==null&&(l=t.protocol+"//"+t.host),typeof l=="string"&&(l.charAt(0)==="/"&&(l.charAt(1)==="/"?l=t.protocol+l:l=t.host+l),/^(https?|wss?):\/\//.test(l)||(typeof t<"u"?l=t.protocol+"//"+l:l="https://"+l),s=Gf(l)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const r=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+r+":"+s.port+e,s.href=s.protocol+"://"+r+(t&&t.port===s.port?"":":"+s.port),s}const PS=typeof ArrayBuffer=="function",FS=l=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(l):l.buffer instanceof ArrayBuffer,gv=Object.prototype.toString,US=typeof Blob=="function"||typeof Blob<"u"&&gv.call(Blob)==="[object BlobConstructor]",IS=typeof File=="function"||typeof File<"u"&&gv.call(File)==="[object FileConstructor]";function Nm(l){return PS&&(l instanceof ArrayBuffer||FS(l))||US&&l instanceof Blob||IS&&l instanceof File}function ud(l,e){if(!l||typeof l!="object")return!1;if(Array.isArray(l)){for(let t=0,s=l.length;t<s;t++)if(ud(l[t]))return!0;return!1}if(Nm(l))return!0;if(l.toJSON&&typeof l.toJSON=="function"&&arguments.length===1)return ud(l.toJSON(),!0);for(const t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&ud(l[t]))return!0;return!1}function zS(l){const e=[],t=l.data,s=l;return s.data=Yf(t,e),s.attachments=e.length,{packet:s,buffers:e}}function Yf(l,e){if(!l)return l;if(Nm(l)){const t={_placeholder:!0,num:e.length};return e.push(l),t}else if(Array.isArray(l)){const t=new Array(l.length);for(let s=0;s<l.length;s++)t[s]=Yf(l[s],e);return t}else if(typeof l=="object"&&!(l instanceof Date)){const t={};for(const s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=Yf(l[s],e));return t}return l}function HS(l,e){return l.data=Xf(l.data,e),delete l.attachments,l}function Xf(l,e){if(!l)return l;if(l&&l._placeholder===!0){if(typeof l.num=="number"&&l.num>=0&&l.num<e.length)return e[l.num];throw new Error("illegal attachments")}else if(Array.isArray(l))for(let t=0;t<l.length;t++)l[t]=Xf(l[t],e);else if(typeof l=="object")for(const t in l)Object.prototype.hasOwnProperty.call(l,t)&&(l[t]=Xf(l[t],e));return l}const VS=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],qS=5;var He;(function(l){l[l.CONNECT=0]="CONNECT",l[l.DISCONNECT=1]="DISCONNECT",l[l.EVENT=2]="EVENT",l[l.ACK=3]="ACK",l[l.CONNECT_ERROR=4]="CONNECT_ERROR",l[l.BINARY_EVENT=5]="BINARY_EVENT",l[l.BINARY_ACK=6]="BINARY_ACK"})(He||(He={}));class GS{constructor(e){this.replacer=e}encode(e){return(e.type===He.EVENT||e.type===He.ACK)&&ud(e)?this.encodeAsBinary({type:e.type===He.EVENT?He.BINARY_EVENT:He.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===He.BINARY_EVENT||e.type===He.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=zS(e),s=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(s),i}}function Eb(l){return Object.prototype.toString.call(l)==="[object Object]"}class jm extends Ft{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===He.BINARY_EVENT;s||t.type===He.BINARY_ACK?(t.type=s?He.EVENT:He.ACK,this.reconstructor=new $S(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Nm(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(He[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===He.BINARY_EVENT||s.type===He.BINARY_ACK){const r=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const c=e.substring(r,t);if(c!=Number(c)||e.charAt(t)!=="-")throw new Error("Illegal attachments");s.attachments=Number(c)}if(e.charAt(t+1)==="/"){const r=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););s.nsp=e.substring(r,t)}else s.nsp="/";const i=e.charAt(t+1);if(i!==""&&Number(i)==i){const r=t+1;for(;++t;){const c=e.charAt(t);if(c==null||Number(c)!=c){--t;break}if(t===e.length)break}s.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(jm.isPayloadValid(s.type,r))s.data=r;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case He.CONNECT:return Eb(t);case He.DISCONNECT:return t===void 0;case He.CONNECT_ERROR:return typeof t=="string"||Eb(t);case He.EVENT:case He.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&VS.indexOf(t[0])===-1);case He.ACK:case He.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class $S{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=HS(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const YS=Object.freeze(Object.defineProperty({__proto__:null,Decoder:jm,Encoder:GS,get PacketType(){return He},protocol:qS},Symbol.toStringTag,{value:"Module"}));function yn(l,e,t){return l.on(e,t),function(){l.off(e,t)}}const XS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class xv extends Ft{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[yn(e,"open",this.onopen.bind(this)),yn(e,"packet",this.onpacket.bind(this)),yn(e,"error",this.onerror.bind(this)),yn(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var s,i,r;if(XS.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const c={type:He.EVENT,data:t};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const f=this.ids++,g=t.pop();this._registerAckCallback(f,g),c.id=f}const u=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,h=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!u||(h?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(e,t){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[e]=t;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let u=0;u<this.sendBuffer.length;u++)this.sendBuffer[u].id===e&&this.sendBuffer.splice(u,1);t.call(this,new Error("operation has timed out"))},i),c=(...u)=>{this.io.clearTimeoutFn(r),t.apply(this,u)};c.withError=!0,this.acks[e]=c}emitWithAck(e,...t){return new Promise((s,i)=>{const r=(c,u)=>c?i(c):s(u);r.withError=!0,t.push(r),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...r)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(i)):(this._queue.shift(),t&&t(null,...r)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:He.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case He.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case He.EVENT:case He.BINARY_EVENT:this.onevent(e);break;case He.ACK:case He.BINARY_ACK:this.onack(e);break;case He.DISCONNECT:this.ondisconnect();break;case He.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(...i){s||(s=!0,t.packet({type:He.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:He.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function Pr(l){l=l||{},this.ms=l.min||100,this.max=l.max||1e4,this.factor=l.factor||2,this.jitter=l.jitter>0&&l.jitter<=1?l.jitter:0,this.attempts=0}Pr.prototype.duration=function(){var l=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*l);l=(Math.floor(e*10)&1)==0?l-t:l+t}return Math.min(l,this.max)|0};Pr.prototype.reset=function(){this.attempts=0};Pr.prototype.setMin=function(l){this.ms=l};Pr.prototype.setMax=function(l){this.max=l};Pr.prototype.setJitter=function(l){this.jitter=l};class Wf extends Ft{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Fd(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((s=t.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Pr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||YS;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new OS(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=yn(t,"open",function(){s.onopen(),e&&e()}),r=u=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",u),e?e(u):this.maybeReconnectOnOpen()},c=yn(t,"error",r);if(this._timeout!==!1){const u=this._timeout,h=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),t.close()},u);this.opts.autoUnref&&h.unref(),this.subs.push(()=>{this.clearTimeoutFn(h)})}return this.subs.push(i),this.subs.push(c),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(yn(e,"ping",this.onping.bind(this)),yn(e,"data",this.ondata.bind(this)),yn(e,"error",this.onerror.bind(this)),yn(e,"close",this.onclose.bind(this)),yn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Pd(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new xv(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t)if(this.nsps[s].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Fo={};function hd(l,e){typeof l=="object"&&(e=l,l=void 0),e=e||{};const t=BS(l,e.path||"/socket.io"),s=t.source,i=t.id,r=t.path,c=Fo[i]&&r in Fo[i].nsps,u=e.forceNew||e["force new connection"]||e.multiplex===!1||c;let h;return u?h=new Wf(s,e):(Fo[i]||(Fo[i]=new Wf(s,e)),h=Fo[i]),t.query&&!e.query&&(e.query=t.queryKey),h.socket(t.path,e)}Object.assign(hd,{Manager:Wf,Socket:xv,io:hd,connect:hd});class WS{constructor(){this.socket=null,this.isConnected=!1,this.listeners=[],this.userId=null}connect(e="public"){if(this.socket&&this.isConnected)return;this.socket&&!this.isConnected&&(this.socket.removeAllListeners(),this.socket.disconnect(),this.socket=null),(!e||e==="public")&&(e=this.getOrCreatePublicUserId()),this.userId=e;const t="https://maxwin688.site";this.socket=hd(t,{transports:["polling","websocket"],reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:1/0,timeout:2e4,forceNew:!0}),this.socket.on("connect",()=>{console.log(" Connected to notification server"),this.isConnected=!0,this.socket.emit("register",e)}),this.socket.on("disconnect",s=>{console.log(" Disconnected from notification server:",s),this.isConnected=!1,s==="io server disconnect"&&this.socket.connect()}),this.socket.on("receive_noti",s=>{console.log(" Received notification:",s),(s.to_user_id==="public"||s.to_user_id===e||s.to_user_id==="all")&&this.listeners.forEach(i=>{typeof i=="function"&&i(s)})}),this.socket.on("connect_error",s=>{console.error("Connection error:",s),this.isConnected=!1}),this.socket.on("reconnect",s=>{console.log(" Reconnected to notification server after",s,"attempts"),this.isConnected=!0,this.userId&&this.socket.emit("register",this.userId)}),this.socket.on("reconnect_attempt",s=>{console.log(" Reconnection attempt",s)}),this.socket.on("reconnect_error",s=>{console.error(" Reconnection error:",s)}),this.socket.on("reconnect_failed",()=>{console.error(" Reconnection failed after all attempts")})}getOrCreatePublicUserId(){let e=sessionStorage.getItem("public_user_id");return e||(e="public_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),sessionStorage.setItem("public_user_id",e)),e}disconnect(){this.socket&&(this.socket.removeAllListeners(),this.socket.disconnect(),this.socket=null,this.isConnected=!1)}onNotification(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}}const Cb=new WS,bv=M.createContext(),KS=()=>{const l=M.useContext(bv);if(!l)throw new Error("useNotification must be used within NotificationProvider");return l},QS=({children:l})=>{const[e,t]=M.useState([]),[s,i]=M.useState(0),r=al();M.useEffect(()=>{Cb.connect("public");const x=Cb.onNotification(y=>{const A={id:Date.now(),title:y.title,body:y.body,route:y.notification_data?.route,type:y.notification_data?.type,data:y.notification_data,timestamp:new Date,read:!1};t(w=>[A,...w]),i(w=>w+1),c()});return()=>{x()}},[]);const c=()=>{try{const x=new Audio("/sounds/noti.wav");x.volume=.5,x.play().catch(y=>{console.error("Error playing notification sound:",y)})}catch(x){console.error("Error loading notification sound:",x)}},u=M.useCallback(x=>{t(y=>y.map(A=>A.id===x?{...A,read:!0}:A)),i(y=>Math.max(0,y-1))},[]),h=M.useCallback(()=>{t(x=>x.map(y=>({...y,read:!0}))),i(0)},[]),p=M.useCallback(x=>{u(x.id),x.route&&r(x.route)},[r,u]),f=M.useCallback(()=>{t([]),i(0)},[]),g={notifications:e,unreadCount:s,markAsRead:u,markAllAsRead:h,handleNotificationClick:p,clearNotifications:f};return o.jsx(bv.Provider,{value:g,children:l})},Vt=({children:l})=>{const{isAuthenticated:e,loading:t}=Bd();return t?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):e?l:o.jsx(Ty,{to:"/admin/login",replace:!0})},qt=({children:l})=>{const[e,t]=M.useState(!0),s=An(),i=al(),{user:r,logout:c}=Bd(),u=()=>{c(),i("/admin/login")},h=[{path:"/admin/dashboard",label:"Dashboard",icon:""},{path:"/admin/banners",label:"Banners",icon:""},{path:"/admin/banner-texts",label:"Banner Texts",icon:""},{path:"/admin/posts",label:"Posts",icon:""},{path:"/admin/categories",label:"Categories",icon:""},{path:"/admin/dhammas",label:"Dhamma Talks",icon:""},{path:"/admin/donations",label:"Donations",icon:""},{path:"/admin/biographies",label:"Biographies",icon:""},{path:"/admin/monasteries",label:"Monasteries",icon:""},{path:"/admin/monastery-building-donations",label:"Building Donations",icon:""},{path:"/admin/contacts",label:"Contacts",icon:""},{path:"/admin/academic-years",label:"Academic Years",icon:""},{path:"/admin/subjects",label:"Subjects",icon:""},{path:"/admin/classes",label:"Classes",icon:""},{path:"/admin/lessons",label:"Lessons",icon:""},{path:"/admin/video-lessons",label:"Video Lessons",icon:""},{path:"/admin/questions",label:"Questions",icon:""},{path:"/admin/profile",label:"Profile",icon:""}],p=f=>s.pathname===f;return o.jsxs("div",{className:"flex h-screen bg-gray-100",children:[o.jsxs("aside",{className:`bg-gradient-to-b from-amber-800 to-amber-900 text-white transition-all duration-300 ${e?"w-64":"w-20"} flex flex-col shadow-lg`,children:[o.jsx("div",{className:"p-4 border-b border-amber-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[e&&o.jsx("h1",{className:"text-xl font-bold",children:"Dhamma Center"}),o.jsx("button",{onClick:()=>t(!e),className:"p-2 hover:bg-amber-700 rounded-lg transition",children:e?"":""})]})}),o.jsx("nav",{className:"flex-1 overflow-y-auto p-4",children:o.jsx("ul",{className:"space-y-2",children:h.map(f=>o.jsx("li",{children:o.jsxs(rt,{to:f.path,className:`flex items-center gap-3 p-3 rounded-lg transition-all ${p(f.path)?"bg-amber-700 shadow-lg":"hover:bg-amber-700/50"}`,children:[o.jsx("span",{className:"text-xl",children:f.icon}),e&&o.jsx("span",{className:"font-medium",children:f.label})]})},f.path))})}),e&&o.jsxs("div",{className:"p-4 border-t border-amber-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"w-10 h-10 bg-amber-700 rounded-full flex items-center justify-center font-bold",children:r?.name?.charAt(0)||"A"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-semibold truncate",children:r?.name||"Admin"}),o.jsx("p",{className:"text-xs text-amber-200 truncate",children:r?.user_name||""})]})]}),o.jsx(rt,{to:"/admin/profile",className:"block w-full mb-2 bg-amber-700 hover:bg-amber-600 py-2 rounded-lg font-medium transition text-center",children:"Profile"}),o.jsx("button",{onClick:u,className:"w-full bg-red-600 hover:bg-red-700 py-2 rounded-lg font-medium transition",children:"Logout"})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[o.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 px-6 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:h.find(f=>p(f.path))?.label||"Admin Panel"}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("span",{className:"text-sm text-gray-600",children:["Welcome, ",r?.name||"Admin"]}),o.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors duration-200 font-medium",title:"Logout",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-1.293-1.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),o.jsx("span",{children:"Logout"})]})]})]})}),o.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:l})]})]})},ZS=()=>{const[l,e]=M.useState({user_name:"",password:""}),[t,s]=M.useState(""),[i,r]=M.useState(!1),{login:c,isAuthenticated:u}=Bd(),h=al();M.useEffect(()=>{u&&h("/admin/dashboard",{replace:!0})},[u,h]);const p=async f=>{f.preventDefault(),s(""),r(!0);try{await c(l),h("/admin/dashboard")}catch(g){s(g.response?.data?.message||"Login failed. Please check your credentials.")}finally{r(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-amber-50 to-orange-50",children:o.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-amber-800 mb-2",children:"Admin Login"}),o.jsx("p",{className:"text-gray-600",children:"E-Learning Buddhist Center ()"})]}),t&&o.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:t}),o.jsxs("form",{onSubmit:p,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"user_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),o.jsx("input",{id:"user_name",type:"text",required:!0,value:l.user_name,onChange:f=>e({...l,user_name:f.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter your username"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),o.jsx("input",{id:"password",type:"password",required:!0,value:l.password,onChange:f=>e({...l,password:f.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter your password"})]}),o.jsx("button",{type:"submit",disabled:i,className:"w-full bg-amber-600 text-white py-3 rounded-lg font-semibold hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 transition disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Logging in...":"Login"})]})]})})},qo={getAll:()=>le.get("/admin/posts"),getById:l=>le.get(`/admin/posts/${l}`),create:l=>le.post("/admin/posts",l),update:(l,e)=>e instanceof FormData?(e.append("_method","PUT"),le.post(`/admin/posts/${l}`,e)):le.put(`/admin/posts/${l}`,e),delete:l=>le.delete(`/admin/posts/${l}`)},gr={getAll:()=>le.get("/admin/categories"),getById:l=>le.get(`/admin/categories/${l}`),create:l=>le.post("/admin/categories",l),update:(l,e)=>le.put(`/admin/categories/${l}`,e),delete:l=>le.delete(`/admin/categories/${l}`)},ra={getAll:()=>le.get("/admin/donations"),getById:l=>le.get(`/admin/donations/${l}`),create:l=>le.post("/admin/donations",l),update:(l,e)=>le.put(`/admin/donations/${l}`,e),delete:l=>le.delete(`/admin/donations/${l}`),approve:l=>le.post(`/admin/donations/${l}/approve`),reject:l=>le.post(`/admin/donations/${l}/reject`)},fd={getAll:()=>le.get("/admin/contacts"),getById:l=>le.get(`/admin/contacts/${l}`),update:(l,e)=>le.put(`/admin/contacts/${l}`,e),delete:l=>le.delete(`/admin/contacts/${l}`),markAsRead:l=>le.post(`/admin/contacts/${l}/read`)},JS=()=>{const[l,e]=M.useState({posts:0,categories:0,donations:0,contacts:0}),[t,s]=M.useState(!0);M.useEffect(()=>{(async()=>{try{const[c,u,h,p]=await Promise.all([qo.getAll().catch(()=>({data:{data:[]}})),gr.getAll().catch(()=>({data:{data:[]}})),ra.getAll().catch(()=>({data:{data:[]}})),fd.getAll().catch(()=>({data:{data:[]}}))]);e({posts:c.data?.data?.length||0,categories:u.data?.data?.length||0,donations:h.data?.data?.length||0,contacts:p.data?.data?.length||0})}catch(c){console.error("Error fetching stats:",c)}finally{s(!1)}})()},[]);const i=[{label:"Total Posts",value:l.posts,icon:"",color:"bg-blue-500"},{label:"Categories",value:l.categories,icon:"",color:"bg-green-500"},{label:"Donations",value:l.donations,icon:"",color:"bg-yellow-500"},{label:"Contacts",value:l.contacts,icon:"",color:"bg-purple-500"}];return t?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Dashboard"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:i.map((r,c)=>o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm font-medium mb-1",children:r.label}),o.jsx("p",{className:"text-3xl font-bold text-gray-800",children:r.value})]}),o.jsx("div",{className:`${r.color} w-16 h-16 rounded-full flex items-center justify-center text-3xl`,children:r.icon})]})},c))}),o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Quick Actions"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("button",{className:"p-4 bg-blue-50 hover:bg-blue-100 rounded-lg text-left transition",children:[o.jsx("h3",{className:"font-semibold text-blue-800",children:"Create New Post"}),o.jsx("p",{className:"text-sm text-blue-600",children:"Add a new blog post"})]}),o.jsxs("button",{className:"p-4 bg-green-50 hover:bg-green-100 rounded-lg text-left transition",children:[o.jsx("h3",{className:"font-semibold text-green-800",children:"Manage Donations"}),o.jsx("p",{className:"text-sm text-green-600",children:"View and approve donations"})]}),o.jsxs("button",{className:"p-4 bg-purple-50 hover:bg-purple-100 rounded-lg text-left transition",children:[o.jsx("h3",{className:"font-semibold text-purple-800",children:"View Contacts"}),o.jsx("p",{className:"text-sm text-purple-600",children:"Check new messages"})]})]})]})]})},Ud=({value:l,onChange:e,placeholder:t="Enter content..."})=>{const s=M.useRef(null),[i,r]=M.useState(!1);M.useEffect(()=>{s.current&&l!==s.current.innerHTML&&(s.current.innerHTML=l||"")},[l]);const c=f=>{const g=f.target.innerHTML;e(g)},u=(f,g=null)=>{document.execCommand(f,!1,g),s.current?.focus();const x=s.current?.innerHTML||"";e(x)},h=()=>{const f=document.createElement("input");f.setAttribute("type","file"),f.setAttribute("accept","image/*"),f.click(),f.onchange=async g=>{const x=g.target.files?.[0];if(x){const y=new FileReader;y.onload=A=>{const w=document.createElement("img");w.src=A.target.result,w.style.maxWidth="100%",w.style.height="auto",u("insertHTML",w.outerHTML)},y.readAsDataURL(x)}}},p=({onClick:f,children:g,title:x,active:y=!1})=>o.jsx("button",{type:"button",onClick:f,title:x,className:`p-2 rounded hover:bg-gray-200 transition ${y?"bg-amber-200":""}`,children:g});return o.jsxs("div",{className:"rich-text-editor border border-gray-300 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-amber-500",children:[o.jsxs("div",{className:"bg-gray-50 border-b border-gray-300 p-2 flex flex-wrap gap-1",children:[o.jsxs("div",{className:"flex gap-1 border-r border-gray-300 pr-2 mr-2",children:[o.jsx(p,{onClick:()=>u("bold"),title:"Bold",children:o.jsx("strong",{children:"B"})}),o.jsx(p,{onClick:()=>u("italic"),title:"Italic",children:o.jsx("em",{children:"I"})}),o.jsx(p,{onClick:()=>u("underline"),title:"Underline",children:o.jsx("u",{children:"U"})}),o.jsx(p,{onClick:()=>u("strikeThrough"),title:"Strikethrough",children:o.jsx("s",{children:"S"})})]}),o.jsxs("div",{className:"flex gap-1 border-r border-gray-300 pr-2 mr-2",children:[o.jsx(p,{onClick:()=>u("formatBlock","<h1>"),title:"Heading 1",children:"H1"}),o.jsx(p,{onClick:()=>u("formatBlock","<h2>"),title:"Heading 2",children:"H2"}),o.jsx(p,{onClick:()=>u("formatBlock","<h3>"),title:"Heading 3",children:"H3"}),o.jsx(p,{onClick:()=>u("formatBlock","<p>"),title:"Paragraph",children:"P"})]}),o.jsxs("div",{className:"flex gap-1 border-r border-gray-300 pr-2 mr-2",children:[o.jsx(p,{onClick:()=>u("justifyLeft"),title:"Align Left",children:""}),o.jsx(p,{onClick:()=>u("justifyCenter"),title:"Align Center",children:""}),o.jsx(p,{onClick:()=>u("justifyRight"),title:"Align Right",children:""}),o.jsx(p,{onClick:()=>u("justifyFull"),title:"Justify",children:""})]}),o.jsxs("div",{className:"flex gap-1 border-r border-gray-300 pr-2 mr-2",children:[o.jsx(p,{onClick:()=>u("insertUnorderedList"),title:"Bullet List",children:""}),o.jsx(p,{onClick:()=>u("insertOrderedList"),title:"Numbered List",children:"1."}),o.jsx(p,{onClick:()=>u("outdent"),title:"Decrease Indent",children:""}),o.jsx(p,{onClick:()=>u("indent"),title:"Increase Indent",children:""})]}),o.jsxs("div",{className:"flex gap-1 border-r border-gray-300 pr-2 mr-2",children:[o.jsx(p,{onClick:()=>u("createLink",prompt("Enter URL:")),title:"Insert Link",children:""}),o.jsx(p,{onClick:h,title:"Insert Image",children:""})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx(p,{onClick:()=>u("foreColor",prompt("Enter color (e.g., #000000):")),title:"Text Color",children:"A"}),o.jsx(p,{onClick:()=>u("removeFormat"),title:"Remove Formatting",children:""})]})]}),o.jsx("div",{ref:s,contentEditable:!0,onInput:c,onFocus:()=>r(!0),onBlur:()=>r(!1),className:"min-h-[300px] p-4 outline-none",style:{fontFamily:"Helvetica, Arial, sans-serif",fontSize:"16px",lineHeight:"1.6"},"data-placeholder":!l&&!i?t:"",suppressContentEditableWarning:!0}),o.jsx("style",{children:`
        .rich-text-editor [contenteditable][data-placeholder]:empty:before {
          content: attr(data-placeholder);
          color: #9ca3af;
          pointer-events: none;
        }
        .rich-text-editor [contenteditable] img {
          max-width: 100%;
          height: auto;
          margin: 10px 0;
        }
        .rich-text-editor [contenteditable] a {
          color: #3b82f6;
          text-decoration: underline;
        }
        .rich-text-editor [contenteditable]:focus {
          outline: none;
        }
      `})]})};var e_=Object.defineProperty,t_=(l,e,t)=>e in l?e_(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,bt=(l,e,t)=>t_(l,typeof e!="symbol"?e+"":e,t);const yd={x:0,y:0,width:0,height:0,unit:"px"},cr=(l,e,t)=>Math.min(Math.max(l,e),t),s_=(...l)=>l.filter(e=>e&&typeof e=="string").join(" "),Tb=(l,e)=>l===e||l.width===e.width&&l.height===e.height&&l.x===e.x&&l.y===e.y&&l.unit===e.unit;function dr(l,e,t){return l.unit==="%"?{...yd,...l,unit:"%"}:{unit:"%",x:l.x?l.x/e*100:0,y:l.y?l.y/t*100:0,width:l.width?l.width/e*100:0,height:l.height?l.height/t*100:0}}function Bi(l,e,t){return l.unit?l.unit==="px"?{...yd,...l,unit:"px"}:{unit:"px",x:l.x?l.x*e/100:0,y:l.y?l.y*t/100:0,width:l.width?l.width*e/100:0,height:l.height?l.height*t/100:0}:{...yd,...l,unit:"px"}}function Rb(l,e,t,s,i,r=0,c=0,u=s,h=i){const p={...l};let f=Math.min(r,s),g=Math.min(c,i),x=Math.min(u,s),y=Math.min(h,i);e&&(e>1?(f=c?c*e:f,g=f/e,x=u*e):(g=r?r/e:g,f=g*e,y=h/e)),p.y<0&&(p.height=Math.max(p.height+p.y,g),p.y=0),p.x<0&&(p.width=Math.max(p.width+p.x,f),p.x=0);const A=s-(p.x+p.width);A<0&&(p.x=Math.min(p.x,s-f),p.width+=A);const w=i-(p.y+p.height);if(w<0&&(p.y=Math.min(p.y,i-g),p.height+=w),p.width<f&&((t==="sw"||t=="nw")&&(p.x-=f-p.width),p.width=f),p.height<g&&((t==="nw"||t=="ne")&&(p.y-=g-p.height),p.height=g),p.width>x&&((t==="sw"||t=="nw")&&(p.x-=x-p.width),p.width=x),p.height>y&&((t==="nw"||t=="ne")&&(p.y-=y-p.height),p.height=y),e){const j=p.width/p.height;if(j<e){const N=Math.max(p.width/e,g);(t==="nw"||t=="ne")&&(p.y-=N-p.height),p.height=N}else if(j>e){const N=Math.max(p.height*e,f);(t==="sw"||t=="nw")&&(p.x-=N-p.width),p.width=N}}return p}function n_(l,e,t,s){const i={...l};return e==="ArrowLeft"?s==="nw"?(i.x-=t,i.y-=t,i.width+=t,i.height+=t):s==="w"?(i.x-=t,i.width+=t):s==="sw"?(i.x-=t,i.width+=t,i.height+=t):s==="ne"?(i.y+=t,i.width-=t,i.height-=t):s==="e"?i.width-=t:s==="se"&&(i.width-=t,i.height-=t):e==="ArrowRight"&&(s==="nw"?(i.x+=t,i.y+=t,i.width-=t,i.height-=t):s==="w"?(i.x+=t,i.width-=t):s==="sw"?(i.x+=t,i.width-=t,i.height-=t):s==="ne"?(i.y-=t,i.width+=t,i.height+=t):s==="e"?i.width+=t:s==="se"&&(i.width+=t,i.height+=t)),e==="ArrowUp"?s==="nw"?(i.x-=t,i.y-=t,i.width+=t,i.height+=t):s==="n"?(i.y-=t,i.height+=t):s==="ne"?(i.y-=t,i.width+=t,i.height+=t):s==="sw"?(i.x+=t,i.width-=t,i.height-=t):s==="s"?i.height-=t:s==="se"&&(i.width-=t,i.height-=t):e==="ArrowDown"&&(s==="nw"?(i.x+=t,i.y+=t,i.width-=t,i.height-=t):s==="n"?(i.y+=t,i.height-=t):s==="ne"?(i.y+=t,i.width-=t,i.height-=t):s==="sw"?(i.x-=t,i.width+=t,i.height+=t):s==="s"?i.height+=t:s==="se"&&(i.width+=t,i.height+=t)),i}const ur={capture:!0,passive:!1};let i_=0;const Pi=class gn extends M.PureComponent{constructor(){super(...arguments),bt(this,"docMoveBound",!1),bt(this,"mouseDownOnCrop",!1),bt(this,"dragStarted",!1),bt(this,"evData",{startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0}),bt(this,"componentRef",M.createRef()),bt(this,"mediaRef",M.createRef()),bt(this,"resizeObserver"),bt(this,"initChangeCalled",!1),bt(this,"instanceId",`rc-${i_++}`),bt(this,"state",{cropIsActive:!1,newCropIsBeingDrawn:!1}),bt(this,"onCropPointerDown",e=>{const{crop:t,disabled:s}=this.props,i=this.getBox();if(!t)return;const r=Bi(t,i.width,i.height);if(s)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const c=e.target.dataset.ord,u=!!c;let h=e.clientX,p=e.clientY,f=r.x,g=r.y;if(c){const x=e.clientX-i.x,y=e.clientY-i.y;let A=0,w=0;c==="ne"||c=="e"?(A=x-(r.x+r.width),w=y-r.y,f=r.x,g=r.y+r.height):c==="se"||c==="s"?(A=x-(r.x+r.width),w=y-(r.y+r.height),f=r.x,g=r.y):c==="sw"||c=="w"?(A=x-r.x,w=y-(r.y+r.height),f=r.x+r.width,g=r.y):(c==="nw"||c=="n")&&(A=x-r.x,w=y-r.y,f=r.x+r.width,g=r.y+r.height),h=f+i.x+A,p=g+i.y+w}this.evData={startClientX:h,startClientY:p,startCropX:f,startCropY:g,clientX:e.clientX,clientY:e.clientY,isResize:u,ord:c},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),bt(this,"onComponentPointerDown",e=>{const{crop:t,disabled:s,locked:i,keepSelection:r,onChange:c}=this.props,u=this.getBox();if(s||i||r&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const h=e.clientX-u.x,p=e.clientY-u.y,f={unit:"px",x:h,y:p,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:h,startCropY:p,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,c(Bi(f,u.width,u.height),dr(f,u.width,u.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}),bt(this,"onDocPointerMove",e=>{const{crop:t,disabled:s,onChange:i,onDragStart:r}=this.props,c=this.getBox();if(s||!t||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,r&&r(e));const{evData:u}=this;u.clientX=e.clientX,u.clientY=e.clientY;let h;u.isResize?h=this.resizeCrop():h=this.dragCrop(),Tb(t,h)||i(Bi(h,c.width,c.height),dr(h,c.width,c.height))}),bt(this,"onComponentKeyDown",e=>{const{crop:t,disabled:s,onChange:i,onComplete:r}=this.props;if(s)return;const c=e.key;let u=!1;if(!t)return;const h=this.getBox(),p=this.makePixelCrop(h),f=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?gn.nudgeStepLarge:e.shiftKey?gn.nudgeStepMedium:gn.nudgeStep;if(c==="ArrowLeft"?(p.x-=f,u=!0):c==="ArrowRight"?(p.x+=f,u=!0):c==="ArrowUp"?(p.y-=f,u=!0):c==="ArrowDown"&&(p.y+=f,u=!0),u){e.cancelable&&e.preventDefault(),p.x=cr(p.x,0,h.width-p.width),p.y=cr(p.y,0,h.height-p.height);const g=Bi(p,h.width,h.height),x=dr(p,h.width,h.height);i(g,x),r&&r(g,x)}}),bt(this,"onHandlerKeyDown",(e,t)=>{const{aspect:s=0,crop:i,disabled:r,minWidth:c=0,minHeight:u=0,maxWidth:h,maxHeight:p,onChange:f,onComplete:g}=this.props,x=this.getBox();if(r||!i)return;if(e.key==="ArrowUp"||e.key==="ArrowDown"||e.key==="ArrowLeft"||e.key==="ArrowRight")e.stopPropagation(),e.preventDefault();else return;const y=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?gn.nudgeStepLarge:e.shiftKey?gn.nudgeStepMedium:gn.nudgeStep,A=Bi(i,x.width,x.height),w=n_(A,e.key,y,t),j=Rb(w,s,t,x.width,x.height,c,u,h,p);if(!Tb(i,j)){const N=dr(j,x.width,x.height);f(j,N),g&&g(j,N)}}),bt(this,"onDocPointerDone",e=>{const{crop:t,disabled:s,onComplete:i,onDragEnd:r}=this.props,c=this.getBox();this.unbindDocMove(),!(s||!t)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,r&&r(e),i&&i(Bi(t,c.width,c.height),dr(t,c.width,c.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))}),bt(this,"onDragFocus",()=>{var e;(e=this.componentRef.current)==null||e.scrollTo(0,0)})}get document(){return document}getBox(){const e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};const{x:t,y:s,width:i,height:r}=e.getBoundingClientRect();return{x:t,y:s,width:i,height:r}}componentDidUpdate(e){const{crop:t,onComplete:s}=this.props;if(s&&!e.crop&&t){const{width:i,height:r}=this.getBox();i&&r&&s(Bi(t,i,r),dr(t,i,r))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,ur),this.document.addEventListener("pointerup",this.onDocPointerDone,ur),this.document.addEventListener("pointercancel",this.onDocPointerDone,ur),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,ur),this.document.removeEventListener("pointerup",this.onDocPointerDone,ur),this.document.removeEventListener("pointercancel",this.onDocPointerDone,ur),this.docMoveBound=!1)}getCropStyle(){const{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){const{evData:e}=this,t=this.getBox(),s=this.makePixelCrop(t),i=e.clientX-e.startClientX,r=e.clientY-e.startClientY;return s.x=cr(e.startCropX+i,0,t.width-s.width),s.y=cr(e.startCropY+r,0,t.height-s.height),s}getPointRegion(e,t,s,i){const{evData:r}=this,c=r.clientX-e.x,u=r.clientY-e.y;let h;i&&t?h=t==="nw"||t==="n"||t==="ne":h=u<r.startCropY;let p;return s&&t?p=t==="nw"||t==="w"||t==="sw":p=c<r.startCropX,p?h?"nw":"sw":h?"ne":"se"}resolveMinDimensions(e,t,s=0,i=0){const r=Math.min(s,e.width),c=Math.min(i,e.height);return!t||!r&&!c?[r,c]:t>1?r?[r,r/t]:[c*t,c]:c?[c*t,c]:[r,r/t]}resizeCrop(){const{evData:e}=this,{aspect:t=0,maxWidth:s,maxHeight:i}=this.props,r=this.getBox(),[c,u]=this.resolveMinDimensions(r,t,this.props.minWidth,this.props.minHeight);let h=this.makePixelCrop(r);const p=this.getPointRegion(r,e.ord,c,u),f=e.ord||p;let g=e.clientX-e.startClientX,x=e.clientY-e.startClientY;(c&&f==="nw"||f==="w"||f==="sw")&&(g=Math.min(g,-c)),(u&&f==="nw"||f==="n"||f==="ne")&&(x=Math.min(x,-u));const y={unit:"px",x:0,y:0,width:0,height:0};p==="ne"?(y.x=e.startCropX,y.width=g,t?(y.height=y.width/t,y.y=e.startCropY-y.height):(y.height=Math.abs(x),y.y=e.startCropY-y.height)):p==="se"?(y.x=e.startCropX,y.y=e.startCropY,y.width=g,t?y.height=y.width/t:y.height=x):p==="sw"?(y.x=e.startCropX+g,y.y=e.startCropY,y.width=Math.abs(g),t?y.height=y.width/t:y.height=x):p==="nw"&&(y.x=e.startCropX+g,y.width=Math.abs(g),t?(y.height=y.width/t,y.y=e.startCropY-y.height):(y.height=Math.abs(x),y.y=e.startCropY+x));const A=Rb(y,t,p,r.width,r.height,c,u,s,i);return t||gn.xyOrds.indexOf(f)>-1?h=A:gn.xOrds.indexOf(f)>-1?(h.x=A.x,h.width=A.width):gn.yOrds.indexOf(f)>-1&&(h.y=A.y,h.height=A.height),h.x=cr(h.x,0,r.width-h.width),h.y=cr(h.y,0,r.height-h.height),h}renderCropSelection(){const{ariaLabels:e=gn.defaultProps.ariaLabels,disabled:t,locked:s,renderSelectionAddon:i,ruleOfThirds:r,crop:c}=this.props,u=this.getCropStyle();if(c)return it.createElement("div",{style:u,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":e.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!t&&!s&&it.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},it.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),it.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),it.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),it.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),it.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":e.nwDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"nw"),role:"button"}),it.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":e.nDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"n"),role:"button"}),it.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":e.neDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"ne"),role:"button"}),it.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":e.eDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"e"),role:"button"}),it.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":e.seDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"se"),role:"button"}),it.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":e.sDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"s"),role:"button"}),it.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":e.swDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"sw"),role:"button"}),it.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":e.wDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"w"),role:"button"})),i&&it.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:h=>h.stopPropagation()},i(this.state)),r&&it.createElement(it.Fragment,null,it.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),it.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(e){const t={...yd,...this.props.crop||{}};return Bi(t,e.width,e.height)}render(){const{aspect:e,children:t,circularCrop:s,className:i,crop:r,disabled:c,locked:u,style:h,ruleOfThirds:p}=this.props,{cropIsActive:f,newCropIsBeingDrawn:g}=this.state,x=r?this.renderCropSelection():null,y=s_("ReactCrop",i,f&&"ReactCrop--active",c&&"ReactCrop--disabled",u&&"ReactCrop--locked",g&&"ReactCrop--new-crop",r&&e&&"ReactCrop--fixed-aspect",r&&s&&"ReactCrop--circular-crop",r&&p&&"ReactCrop--rule-of-thirds",!this.dragStarted&&r&&!r.width&&!r.height&&"ReactCrop--invisible-crop",s&&"ReactCrop--no-animate");return it.createElement("div",{ref:this.componentRef,className:y,style:h},it.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},t),r?it.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},it.createElement("defs",null,it.createElement("mask",{id:`hole-${this.instanceId}`},it.createElement("rect",{width:"100%",height:"100%",fill:"white"}),s?it.createElement("ellipse",{cx:`${r.x+r.width/2}${r.unit}`,cy:`${r.y+r.height/2}${r.unit}`,rx:`${r.width/2}${r.unit}`,ry:`${r.height/2}${r.unit}`,fill:"black"}):it.createElement("rect",{x:`${r.x}${r.unit}`,y:`${r.y}${r.unit}`,width:`${r.width}${r.unit}`,height:`${r.height}${r.unit}`,fill:"black"}))),it.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,x)}};bt(Pi,"xOrds",["e","w"]),bt(Pi,"yOrds",["n","s"]),bt(Pi,"xyOrds",["nw","ne","se","sw"]),bt(Pi,"nudgeStep",1),bt(Pi,"nudgeStepMedium",10),bt(Pi,"nudgeStepLarge",100),bt(Pi,"defaultProps",{ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}});let a_=Pi;function r_(l,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(s){if(s!=="default"&&!(s in l)){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(l,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}}))})),Object.freeze(l)}function yv(l,e){return new Promise((function(t,s){let i;return o_(l).then((function(r){try{return i=r,t(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(c){return s(c)}}),s)}))}const o_=l=>new Promise(((e,t)=>{const s=new FileReader;s.addEventListener("load",(({target:{result:i}})=>{const r=new DataView(i);let c=0;if(r.getUint16(c)!==65496)return t("not a valid JPEG");for(c+=2;;){const u=r.getUint16(c);if(u===65498)break;const h=r.getUint16(c+2);if(u===65505&&r.getUint32(c+4)===1165519206){const p=c+10;let f;switch(r.getUint16(p)){case 18761:f=!0;break;case 19789:f=!1;break;default:return t("TIFF header contains invalid endian")}if(r.getUint16(p+2,f)!==42)return t("TIFF header contains invalid version");const g=r.getUint32(p+4,f),x=p+g+2+12*r.getUint16(p+g,f);for(let y=p+g+2;y<x;y+=12)if(r.getUint16(y,f)==274){if(r.getUint16(y+2,f)!==3)return t("Orientation data type is invalid");if(r.getUint32(y+4,f)!==1)return t("Orientation data count is invalid");r.setUint16(y+8,1,f);break}return e(i.slice(c,c+2+h))}c+=2+h}return e(new Blob)})),s.readAsArrayBuffer(l)}));var vd={},l_={get exports(){return vd},set exports(l){vd=l}};(function(l){var e,t,s={};l_.exports=s,s.parse=function(i,r){for(var c=s.bin.readUshort,u=s.bin.readUint,h=0,p={},f=new Uint8Array(i),g=f.length-4;u(f,g)!=101010256;)g--;h=g,h+=4;var x=c(f,h+=4);c(f,h+=2);var y=u(f,h+=2),A=u(f,h+=4);h+=4,h=A;for(var w=0;w<x;w++){u(f,h),h+=4,h+=4,h+=4,u(f,h+=4),y=u(f,h+=4);var j=u(f,h+=4),N=c(f,h+=4),D=c(f,h+2),L=c(f,h+4);h+=6;var k=u(f,h+=8);h+=4,h+=N+D+L,s._readLocal(f,k,p,y,j,r)}return p},s._readLocal=function(i,r,c,u,h,p){var f=s.bin.readUshort,g=s.bin.readUint;g(i,r),f(i,r+=4),f(i,r+=2);var x=f(i,r+=2);g(i,r+=2),g(i,r+=4),r+=4;var y=f(i,r+=8),A=f(i,r+=2);r+=2;var w=s.bin.readUTF8(i,r,y);if(r+=y,r+=A,p)c[w]={size:h,csize:u};else{var j=new Uint8Array(i.buffer,r);if(x==0)c[w]=new Uint8Array(j.buffer.slice(r,r+u));else{if(x!=8)throw"unknown compression method: "+x;var N=new Uint8Array(h);s.inflateRaw(j,N),c[w]=N}}},s.inflateRaw=function(i,r){return s.F.inflate(i,r)},s.inflate=function(i,r){return i[0],i[1],s.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),r)},s.deflate=function(i,r){r==null&&(r={level:6});var c=0,u=new Uint8Array(50+Math.floor(1.1*i.length));u[c]=120,u[c+1]=156,c+=2,c=s.F.deflateRaw(i,u,c,r.level);var h=s.adler(i,0,i.length);return u[c+0]=h>>>24&255,u[c+1]=h>>>16&255,u[c+2]=h>>>8&255,u[c+3]=h>>>0&255,new Uint8Array(u.buffer,0,c+4)},s.deflateRaw=function(i,r){r==null&&(r={level:6});var c=new Uint8Array(50+Math.floor(1.1*i.length)),u=s.F.deflateRaw(i,c,u,r.level);return new Uint8Array(c.buffer,0,u)},s.encode=function(i,r){r==null&&(r=!1);var c=0,u=s.bin.writeUint,h=s.bin.writeUshort,p={};for(var f in i){var g=!s._noNeed(f)&&!r,x=i[f],y=s.crc.crc(x,0,x.length);p[f]={cpr:g,usize:x.length,crc:y,file:g?s.deflateRaw(x):x}}for(var f in p)c+=p[f].file.length+30+46+2*s.bin.sizeUTF8(f);c+=22;var A=new Uint8Array(c),w=0,j=[];for(var f in p){var N=p[f];j.push(w),w=s._writeHeader(A,w,f,N,0)}var D=0,L=w;for(var f in p)N=p[f],j.push(w),w=s._writeHeader(A,w,f,N,1,j[D++]);var k=w-L;return u(A,w,101010256),w+=4,h(A,w+=4,D),h(A,w+=2,D),u(A,w+=2,k),u(A,w+=4,L),w+=4,w+=2,A.buffer},s._noNeed=function(i){var r=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(r)!=-1},s._writeHeader=function(i,r,c,u,h,p){var f=s.bin.writeUint,g=s.bin.writeUshort,x=u.file;return f(i,r,h==0?67324752:33639248),r+=4,h==1&&(r+=2),g(i,r,20),g(i,r+=2,0),g(i,r+=2,u.cpr?8:0),f(i,r+=2,0),f(i,r+=4,u.crc),f(i,r+=4,x.length),f(i,r+=4,u.usize),g(i,r+=4,s.bin.sizeUTF8(c)),g(i,r+=2,0),r+=2,h==1&&(r+=2,r+=2,f(i,r+=6,p),r+=4),r+=s.bin.writeUTF8(i,r,c),h==0&&(i.set(x,r),r+=x.length),r},s.crc={table:(function(){for(var i=new Uint32Array(256),r=0;r<256;r++){for(var c=r,u=0;u<8;u++)1&c?c=3988292384^c>>>1:c>>>=1;i[r]=c}return i})(),update:function(i,r,c,u){for(var h=0;h<u;h++)i=s.crc.table[255&(i^r[c+h])]^i>>>8;return i},crc:function(i,r,c){return 4294967295^s.crc.update(4294967295,i,r,c)}},s.adler=function(i,r,c){for(var u=1,h=0,p=r,f=r+c;p<f;){for(var g=Math.min(p+5552,f);p<g;)h+=u+=i[p++];u%=65521,h%=65521}return h<<16|u},s.bin={readUshort:function(i,r){return i[r]|i[r+1]<<8},writeUshort:function(i,r,c){i[r]=255&c,i[r+1]=c>>8&255},readUint:function(i,r){return 16777216*i[r+3]+(i[r+2]<<16|i[r+1]<<8|i[r])},writeUint:function(i,r,c){i[r]=255&c,i[r+1]=c>>8&255,i[r+2]=c>>16&255,i[r+3]=c>>24&255},readASCII:function(i,r,c){for(var u="",h=0;h<c;h++)u+=String.fromCharCode(i[r+h]);return u},writeASCII:function(i,r,c){for(var u=0;u<c.length;u++)i[r+u]=c.charCodeAt(u)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,r,c){for(var u,h="",p=0;p<c;p++)h+="%"+s.bin.pad(i[r+p].toString(16));try{u=decodeURIComponent(h)}catch{return s.bin.readASCII(i,r,c)}return u},writeUTF8:function(i,r,c){for(var u=c.length,h=0,p=0;p<u;p++){var f=c.charCodeAt(p);if((4294967168&f)==0)i[r+h]=f,h++;else if((4294965248&f)==0)i[r+h]=192|f>>6,i[r+h+1]=128|f>>0&63,h+=2;else if((4294901760&f)==0)i[r+h]=224|f>>12,i[r+h+1]=128|f>>6&63,i[r+h+2]=128|f>>0&63,h+=3;else{if((4292870144&f)!=0)throw"e";i[r+h]=240|f>>18,i[r+h+1]=128|f>>12&63,i[r+h+2]=128|f>>6&63,i[r+h+3]=128|f>>0&63,h+=4}}return h},sizeUTF8:function(i){for(var r=i.length,c=0,u=0;u<r;u++){var h=i.charCodeAt(u);if((4294967168&h)==0)c++;else if((4294965248&h)==0)c+=2;else if((4294901760&h)==0)c+=3;else{if((4292870144&h)!=0)throw"e";c+=4}}return c}},s.F={},s.F.deflateRaw=function(i,r,c,u){var h=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],p=s.F.U,f=s.F._goodIndex;s.F._hash;var g=s.F._putsE,x=0,y=c<<3,A=0,w=i.length;if(u==0){for(;x<w;)g(r,y,x+(I=Math.min(65535,w-x))==w?1:0),y=s.F._copyExact(i,x,I,r,y+8),x+=I;return y>>>3}var j=p.lits,N=p.strt,D=p.prev,L=0,k=0,U=0,C=0,B=0,R=0;for(w>2&&(N[R=s.F._hash(i,0)]=0),x=0;x<w;x++){if(B=R,x+1<w-2){R=s.F._hash(i,x+1);var E=x+1&32767;D[E]=N[R],N[R]=E}if(A<=x){(L>14e3||k>26697)&&w-x>100&&(A<x&&(j[L]=x-A,L+=2,A=x),y=s.F._writeBlock(x==w-1||A==w?1:0,j,L,C,i,U,x-U,r,y),L=k=C=0,U=x);var O=0;x<w-2&&(O=s.F._bestMatch(i,x,D,B,Math.min(h[2],w-x),h[3]));var I=O>>>16,V=65535&O;if(O!=0){V=65535&O;var z=f(I=O>>>16,p.of0);p.lhst[257+z]++;var H=f(V,p.df0);p.dhst[H]++,C+=p.exb[z]+p.dxb[H],j[L]=I<<23|x-A,j[L+1]=V<<16|z<<8|H,L+=2,A=x+I}else p.lhst[i[x]]++;k++}}for(U==x&&i.length!=0||(A<x&&(j[L]=x-A,L+=2,A=x),y=s.F._writeBlock(1,j,L,C,i,U,x-U,r,y),L=0,k=0,L=k=C=0,U=x);(7&y)!=0;)y++;return y>>>3},s.F._bestMatch=function(i,r,c,u,h,p){var f=32767&r,g=c[f],x=f-g+32768&32767;if(g==f||u!=s.F._hash(i,r-x))return 0;for(var y=0,A=0,w=Math.min(32767,r);x<=w&&--p!=0&&g!=f;){if(y==0||i[r+y]==i[r+y-x]){var j=s.F._howLong(i,r,x);if(j>y){if(A=x,(y=j)>=h)break;x+2<j&&(j=x+2);for(var N=0,D=0;D<j-2;D++){var L=r-x+D+32768&32767,k=L-c[L]+32768&32767;k>N&&(N=k,g=L)}}}x+=(f=g)-(g=c[f])+32768&32767}return y<<16|A},s.F._howLong=function(i,r,c){if(i[r]!=i[r-c]||i[r+1]!=i[r+1-c]||i[r+2]!=i[r+2-c])return 0;var u=r,h=Math.min(i.length,r+258);for(r+=3;r<h&&i[r]==i[r-c];)r++;return r-u},s.F._hash=function(i,r){return(i[r]<<8|i[r+1])+(i[r+2]<<4)&65535},s.saved=0,s.F._writeBlock=function(i,r,c,u,h,p,f,g,x){var y,A,w,j,N,D,L,k,U,C=s.F.U,B=s.F._putsF,R=s.F._putsE;C.lhst[256]++,A=(y=s.F.getTrees())[0],w=y[1],j=y[2],N=y[3],D=y[4],L=y[5],k=y[6],U=y[7];var E=32+((x+3&7)==0?0:8-(x+3&7))+(f<<3),O=u+s.F.contSize(C.fltree,C.lhst)+s.F.contSize(C.fdtree,C.dhst),I=u+s.F.contSize(C.ltree,C.lhst)+s.F.contSize(C.dtree,C.dhst);I+=14+3*L+s.F.contSize(C.itree,C.ihst)+(2*C.ihst[16]+3*C.ihst[17]+7*C.ihst[18]);for(var V=0;V<286;V++)C.lhst[V]=0;for(V=0;V<30;V++)C.dhst[V]=0;for(V=0;V<19;V++)C.ihst[V]=0;var z=E<O&&E<I?0:O<I?1:2;if(B(g,x,i),B(g,x+1,z),x+=3,z==0){for(;(7&x)!=0;)x++;x=s.F._copyExact(h,p,f,g,x)}else{var H,$;if(z==1&&(H=C.fltree,$=C.fdtree),z==2){s.F.makeCodes(C.ltree,A),s.F.revCodes(C.ltree,A),s.F.makeCodes(C.dtree,w),s.F.revCodes(C.dtree,w),s.F.makeCodes(C.itree,j),s.F.revCodes(C.itree,j),H=C.ltree,$=C.dtree,R(g,x,N-257),R(g,x+=5,D-1),R(g,x+=5,L-4),x+=4;for(var S=0;S<L;S++)R(g,x+3*S,C.itree[1+(C.ordr[S]<<1)]);x+=3*L,x=s.F._codeTiny(k,C.itree,g,x),x=s.F._codeTiny(U,C.itree,g,x)}for(var _=p,q=0;q<c;q+=2){for(var Y=r[q],ee=Y>>>23,F=_+(8388607&Y);_<F;)x=s.F._writeLit(h[_++],H,g,x);if(ee!=0){var G=r[q+1],Z=G>>16,Q=G>>8&255,K=255&G;R(g,x=s.F._writeLit(257+Q,H,g,x),ee-C.of0[Q]),x+=C.exb[Q],B(g,x=s.F._writeLit(K,$,g,x),Z-C.df0[K]),x+=C.dxb[K],_+=ee}}x=s.F._writeLit(256,H,g,x)}return x},s.F._copyExact=function(i,r,c,u,h){var p=h>>>3;return u[p]=c,u[p+1]=c>>>8,u[p+2]=255-u[p],u[p+3]=255-u[p+1],p+=4,u.set(new Uint8Array(i.buffer,r,c),p),h+(c+4<<3)},s.F.getTrees=function(){for(var i=s.F.U,r=s.F._hufTree(i.lhst,i.ltree,15),c=s.F._hufTree(i.dhst,i.dtree,15),u=[],h=s.F._lenCodes(i.ltree,u),p=[],f=s.F._lenCodes(i.dtree,p),g=0;g<u.length;g+=2)i.ihst[u[g]]++;for(g=0;g<p.length;g+=2)i.ihst[p[g]]++;for(var x=s.F._hufTree(i.ihst,i.itree,7),y=19;y>4&&i.itree[1+(i.ordr[y-1]<<1)]==0;)y--;return[r,c,x,h,f,y,u,p]},s.F.getSecond=function(i){for(var r=[],c=0;c<i.length;c+=2)r.push(i[c+1]);return r},s.F.nonZero=function(i){for(var r="",c=0;c<i.length;c+=2)i[c+1]!=0&&(r+=(c>>1)+",");return r},s.F.contSize=function(i,r){for(var c=0,u=0;u<r.length;u++)c+=r[u]*i[1+(u<<1)];return c},s.F._codeTiny=function(i,r,c,u){for(var h=0;h<i.length;h+=2){var p=i[h],f=i[h+1];u=s.F._writeLit(p,r,c,u);var g=p==16?2:p==17?3:7;p>15&&(s.F._putsE(c,u,f,g),u+=g)}return u},s.F._lenCodes=function(i,r){for(var c=i.length;c!=2&&i[c-1]==0;)c-=2;for(var u=0;u<c;u+=2){var h=i[u+1],p=u+3<c?i[u+3]:-1,f=u+5<c?i[u+5]:-1,g=u==0?-1:i[u-1];if(h==0&&p==h&&f==h){for(var x=u+5;x+2<c&&i[x+2]==h;)x+=2;(y=Math.min(x+1-u>>>1,138))<11?r.push(17,y-3):r.push(18,y-11),u+=2*y-2}else if(h==g&&p==h&&f==h){for(x=u+5;x+2<c&&i[x+2]==h;)x+=2;var y=Math.min(x+1-u>>>1,6);r.push(16,y-3),u+=2*y-2}else r.push(h,0)}return c>>>1},s.F._hufTree=function(i,r,c){var u=[],h=i.length,p=r.length,f=0;for(f=0;f<p;f+=2)r[f]=0,r[f+1]=0;for(f=0;f<h;f++)i[f]!=0&&u.push({lit:f,f:i[f]});var g=u.length,x=u.slice(0);if(g==0)return 0;if(g==1){var y=u[0].lit;return x=y==0?1:0,r[1+(y<<1)]=1,r[1+(x<<1)]=1,1}u.sort((function(k,U){return k.f-U.f}));var A=u[0],w=u[1],j=0,N=1,D=2;for(u[0]={lit:-1,f:A.f+w.f,l:A,r:w,d:0};N!=g-1;)A=j!=N&&(D==g||u[j].f<u[D].f)?u[j++]:u[D++],w=j!=N&&(D==g||u[j].f<u[D].f)?u[j++]:u[D++],u[N++]={lit:-1,f:A.f+w.f,l:A,r:w};var L=s.F.setDepth(u[N-1],0);for(L>c&&(s.F.restrictDepth(x,c,L),L=c),f=0;f<g;f++)r[1+(x[f].lit<<1)]=x[f].d;return L},s.F.setDepth=function(i,r){return i.lit!=-1?(i.d=r,r):Math.max(s.F.setDepth(i.l,r+1),s.F.setDepth(i.r,r+1))},s.F.restrictDepth=function(i,r,c){var u=0,h=1<<c-r,p=0;for(i.sort((function(g,x){return x.d==g.d?g.f-x.f:x.d-g.d})),u=0;u<i.length&&i[u].d>r;u++){var f=i[u].d;i[u].d=r,p+=h-(1<<c-f)}for(p>>>=c-r;p>0;)(f=i[u].d)<r?(i[u].d++,p-=1<<r-f-1):u++;for(;u>=0;u--)i[u].d==r&&p<0&&(i[u].d--,p++);p!=0&&console.log("debt left")},s.F._goodIndex=function(i,r){var c=0;return r[16|c]<=i&&(c|=16),r[8|c]<=i&&(c|=8),r[4|c]<=i&&(c|=4),r[2|c]<=i&&(c|=2),r[1|c]<=i&&(c|=1),c},s.F._writeLit=function(i,r,c,u){return s.F._putsF(c,u,r[i<<1]),u+r[1+(i<<1)]},s.F.inflate=function(i,r){var c=Uint8Array;if(i[0]==3&&i[1]==0)return r||new c(0);var u=s.F,h=u._bitsF,p=u._bitsE,f=u._decodeTiny,g=u.makeCodes,x=u.codes2map,y=u._get17,A=u.U,w=r==null;w&&(r=new c(i.length>>>2<<3));for(var j,N,D=0,L=0,k=0,U=0,C=0,B=0,R=0,E=0,O=0;D==0;)if(D=h(i,O,1),L=h(i,O+1,2),O+=3,L!=0){if(w&&(r=s.F._check(r,E+(1<<17))),L==1&&(j=A.flmap,N=A.fdmap,B=511,R=31),L==2){k=p(i,O,5)+257,U=p(i,O+5,5)+1,C=p(i,O+10,4)+4,O+=14;for(var I=0;I<38;I+=2)A.itree[I]=0,A.itree[I+1]=0;var V=1;for(I=0;I<C;I++){var z=p(i,O+3*I,3);A.itree[1+(A.ordr[I]<<1)]=z,z>V&&(V=z)}O+=3*C,g(A.itree,V),x(A.itree,V,A.imap),j=A.lmap,N=A.dmap,O=f(A.imap,(1<<V)-1,k+U,i,O,A.ttree);var H=u._copyOut(A.ttree,0,k,A.ltree);B=(1<<H)-1;var $=u._copyOut(A.ttree,k,U,A.dtree);R=(1<<$)-1,g(A.ltree,H),x(A.ltree,H,j),g(A.dtree,$),x(A.dtree,$,N)}for(;;){var S=j[y(i,O)&B];O+=15&S;var _=S>>>4;if(!(_>>>8))r[E++]=_;else{if(_==256)break;var q=E+_-254;if(_>264){var Y=A.ldef[_-257];q=E+(Y>>>3)+p(i,O,7&Y),O+=7&Y}var ee=N[y(i,O)&R];O+=15&ee;var F=ee>>>4,G=A.ddef[F],Z=(G>>>4)+h(i,O,15&G);for(O+=15&G,w&&(r=s.F._check(r,E+(1<<17)));E<q;)r[E]=r[E++-Z],r[E]=r[E++-Z],r[E]=r[E++-Z],r[E]=r[E++-Z];E=q}}}else{(7&O)!=0&&(O+=8-(7&O));var Q=4+(O>>>3),K=i[Q-4]|i[Q-3]<<8;w&&(r=s.F._check(r,E+K)),r.set(new c(i.buffer,i.byteOffset+Q,K),E),O=Q+K<<3,E+=K}return r.length==E?r:r.slice(0,E)},s.F._check=function(i,r){var c=i.length;if(r<=c)return i;var u=new Uint8Array(Math.max(c<<1,r));return u.set(i,0),u},s.F._decodeTiny=function(i,r,c,u,h,p){for(var f=s.F._bitsE,g=s.F._get17,x=0;x<c;){var y=i[g(u,h)&r];h+=15&y;var A=y>>>4;if(A<=15)p[x]=A,x++;else{var w=0,j=0;A==16?(j=3+f(u,h,2),h+=2,w=p[x-1]):A==17?(j=3+f(u,h,3),h+=3):A==18&&(j=11+f(u,h,7),h+=7);for(var N=x+j;x<N;)p[x]=w,x++}}return h},s.F._copyOut=function(i,r,c,u){for(var h=0,p=0,f=u.length>>>1;p<c;){var g=i[p+r];u[p<<1]=0,u[1+(p<<1)]=g,g>h&&(h=g),p++}for(;p<f;)u[p<<1]=0,u[1+(p<<1)]=0,p++;return h},s.F.makeCodes=function(i,r){for(var c,u,h,p,f=s.F.U,g=i.length,x=f.bl_count,y=0;y<=r;y++)x[y]=0;for(y=1;y<g;y+=2)x[i[y]]++;var A=f.next_code;for(c=0,x[0]=0,u=1;u<=r;u++)c=c+x[u-1]<<1,A[u]=c;for(h=0;h<g;h+=2)(p=i[h+1])!=0&&(i[h]=A[p],A[p]++)},s.F.codes2map=function(i,r,c){for(var u=i.length,h=s.F.U.rev15,p=0;p<u;p+=2)if(i[p+1]!=0)for(var f=p>>1,g=i[p+1],x=f<<4|g,y=r-g,A=i[p]<<y,w=A+(1<<y);A!=w;)c[h[A]>>>15-r]=x,A++},s.F.revCodes=function(i,r){for(var c=s.F.U.rev15,u=15-r,h=0;h<i.length;h+=2){var p=i[h]<<r-i[h+1];i[h]=c[p]>>>u}},s.F._putsE=function(i,r,c){c<<=7&r;var u=r>>>3;i[u]|=c,i[u+1]|=c>>>8},s.F._putsF=function(i,r,c){c<<=7&r;var u=r>>>3;i[u]|=c,i[u+1]|=c>>>8,i[u+2]|=c>>>16},s.F._bitsE=function(i,r,c){return(i[r>>>3]|i[1+(r>>>3)]<<8)>>>(7&r)&(1<<c)-1},s.F._bitsF=function(i,r,c){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16)>>>(7&r)&(1<<c)-1},s.F._get17=function(i,r){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16)>>>(7&r)},s.F._get25=function(i,r){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16|i[3+(r>>>3)]<<24)>>>(7&r)},s.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var i=s.F.U,r=0;r<32768;r++){var c=r;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,i.rev15[r]=(c>>>16|c<<16)>>>17}function u(h,p,f){for(;p--!=0;)h.push(0,f)}for(r=0;r<32;r++)i.ldef[r]=i.of0[r]<<3|i.exb[r],i.ddef[r]=i.df0[r]<<4|i.dxb[r];u(i.fltree,144,8),u(i.fltree,112,9),u(i.fltree,24,7),u(i.fltree,8,8),s.F.makeCodes(i.fltree,9),s.F.codes2map(i.fltree,9,i.flmap),s.F.revCodes(i.fltree,9),u(i.fdtree,32,5),s.F.makeCodes(i.fdtree,5),s.F.codes2map(i.fdtree,5,i.fdmap),s.F.revCodes(i.fdtree,5),u(i.itree,19,0),u(i.ltree,286,0),u(i.dtree,30,0),u(i.ttree,320,0)})()})();var c_=r_({__proto__:null,default:vd},[vd]);const xn=(function(){var l={nextZero(f,g){for(;f[g]!=0;)g++;return g},readUshort:(f,g)=>f[g]<<8|f[g+1],writeUshort(f,g,x){f[g]=x>>8&255,f[g+1]=255&x},readUint:(f,g)=>16777216*f[g]+(f[g+1]<<16|f[g+2]<<8|f[g+3]),writeUint(f,g,x){f[g]=x>>24&255,f[g+1]=x>>16&255,f[g+2]=x>>8&255,f[g+3]=255&x},readASCII(f,g,x){let y="";for(let A=0;A<x;A++)y+=String.fromCharCode(f[g+A]);return y},writeASCII(f,g,x){for(let y=0;y<x.length;y++)f[g+y]=x.charCodeAt(y)},readBytes(f,g,x){const y=[];for(let A=0;A<x;A++)y.push(f[g+A]);return y},pad:f=>f.length<2?`0${f}`:f,readUTF8(f,g,x){let y,A="";for(let w=0;w<x;w++)A+=`%${l.pad(f[g+w].toString(16))}`;try{y=decodeURIComponent(A)}catch{return l.readASCII(f,g,x)}return y}};function e(f,g,x,y){const A=g*x,w=r(y),j=Math.ceil(g*w/8),N=new Uint8Array(4*A),D=new Uint32Array(N.buffer),{ctype:L}=y,{depth:k}=y,U=l.readUshort;if(L==6){const Y=A<<2;if(k==8)for(var C=0;C<Y;C+=4)N[C]=f[C],N[C+1]=f[C+1],N[C+2]=f[C+2],N[C+3]=f[C+3];if(k==16)for(C=0;C<Y;C++)N[C]=f[C<<1]}else if(L==2){const Y=y.tabs.tRNS;if(Y==null){if(k==8)for(C=0;C<A;C++){var B=3*C;D[C]=255<<24|f[B+2]<<16|f[B+1]<<8|f[B]}if(k==16)for(C=0;C<A;C++)B=6*C,D[C]=255<<24|f[B+4]<<16|f[B+2]<<8|f[B]}else{var R=Y[0];const ee=Y[1],F=Y[2];if(k==8)for(C=0;C<A;C++){var E=C<<2;B=3*C,D[C]=255<<24|f[B+2]<<16|f[B+1]<<8|f[B],f[B]==R&&f[B+1]==ee&&f[B+2]==F&&(N[E+3]=0)}if(k==16)for(C=0;C<A;C++)E=C<<2,B=6*C,D[C]=255<<24|f[B+4]<<16|f[B+2]<<8|f[B],U(f,B)==R&&U(f,B+2)==ee&&U(f,B+4)==F&&(N[E+3]=0)}}else if(L==3){const Y=y.tabs.PLTE,ee=y.tabs.tRNS,F=ee?ee.length:0;if(k==1)for(var O=0;O<x;O++){var I=O*j,V=O*g;for(C=0;C<g;C++){E=V+C<<2;var z=3*(H=f[I+(C>>3)]>>7-((7&C)<<0)&1);N[E]=Y[z],N[E+1]=Y[z+1],N[E+2]=Y[z+2],N[E+3]=H<F?ee[H]:255}}if(k==2)for(O=0;O<x;O++)for(I=O*j,V=O*g,C=0;C<g;C++)E=V+C<<2,z=3*(H=f[I+(C>>2)]>>6-((3&C)<<1)&3),N[E]=Y[z],N[E+1]=Y[z+1],N[E+2]=Y[z+2],N[E+3]=H<F?ee[H]:255;if(k==4)for(O=0;O<x;O++)for(I=O*j,V=O*g,C=0;C<g;C++)E=V+C<<2,z=3*(H=f[I+(C>>1)]>>4-((1&C)<<2)&15),N[E]=Y[z],N[E+1]=Y[z+1],N[E+2]=Y[z+2],N[E+3]=H<F?ee[H]:255;if(k==8)for(C=0;C<A;C++){var H;E=C<<2,z=3*(H=f[C]),N[E]=Y[z],N[E+1]=Y[z+1],N[E+2]=Y[z+2],N[E+3]=H<F?ee[H]:255}}else if(L==4){if(k==8)for(C=0;C<A;C++){E=C<<2;var $=f[S=C<<1];N[E]=$,N[E+1]=$,N[E+2]=$,N[E+3]=f[S+1]}if(k==16)for(C=0;C<A;C++){var S;E=C<<2,$=f[S=C<<2],N[E]=$,N[E+1]=$,N[E+2]=$,N[E+3]=f[S+2]}}else if(L==0)for(R=y.tabs.tRNS?y.tabs.tRNS:-1,O=0;O<x;O++){const Y=O*j,ee=O*g;if(k==1)for(var _=0;_<g;_++){var q=($=255*(f[Y+(_>>>3)]>>>7-(7&_)&1))==255*R?0:255;D[ee+_]=q<<24|$<<16|$<<8|$}else if(k==2)for(_=0;_<g;_++)q=($=85*(f[Y+(_>>>2)]>>>6-((3&_)<<1)&3))==85*R?0:255,D[ee+_]=q<<24|$<<16|$<<8|$;else if(k==4)for(_=0;_<g;_++)q=($=17*(f[Y+(_>>>1)]>>>4-((1&_)<<2)&15))==17*R?0:255,D[ee+_]=q<<24|$<<16|$<<8|$;else if(k==8)for(_=0;_<g;_++)q=($=f[Y+_])==R?0:255,D[ee+_]=q<<24|$<<16|$<<8|$;else if(k==16)for(_=0;_<g;_++)$=f[Y+(_<<1)],q=U(f,Y+(_<<1))==R?0:255,D[ee+_]=q<<24|$<<16|$<<8|$}return N}function t(f,g,x,y){const A=r(f),w=Math.ceil(x*A/8),j=new Uint8Array((w+1+f.interlace)*y);return g=f.tabs.CgBI?i(g,j):s(g,j),f.interlace==0?g=c(g,f,0,x,y):f.interlace==1&&(g=(function(D,L){const k=L.width,U=L.height,C=r(L),B=C>>3,R=Math.ceil(k*C/8),E=new Uint8Array(U*R);let O=0;const I=[0,0,4,0,2,0,1],V=[0,4,0,2,0,1,0],z=[8,8,8,4,4,2,2],H=[8,8,4,4,2,2,1];let $=0;for(;$<7;){const _=z[$],q=H[$];let Y=0,ee=0,F=I[$];for(;F<U;)F+=_,ee++;let G=V[$];for(;G<k;)G+=q,Y++;const Z=Math.ceil(Y*C/8);c(D,L,O,Y,ee);let Q=0,K=I[$];for(;K<U;){let de=V[$],ue=O+Q*Z<<3;for(;de<k;){var S;if(C==1&&(S=(S=D[ue>>3])>>7-(7&ue)&1,E[K*R+(de>>3)]|=S<<7-((7&de)<<0)),C==2&&(S=(S=D[ue>>3])>>6-(7&ue)&3,E[K*R+(de>>2)]|=S<<6-((3&de)<<1)),C==4&&(S=(S=D[ue>>3])>>4-(7&ue)&15,E[K*R+(de>>1)]|=S<<4-((1&de)<<2)),C>=8){const ve=K*R+de*B;for(let he=0;he<B;he++)E[ve+he]=D[(ue>>3)+he]}ue+=C,de+=q}Q++,K+=_}Y*ee!=0&&(O+=ee*(1+Z)),$+=1}return E})(g,f)),g}function s(f,g){return i(new Uint8Array(f.buffer,2,f.length-6),g)}var i=(function(){const f={H:{}};return f.H.N=function(g,x){const y=Uint8Array;let A,w,j=0,N=0,D=0,L=0,k=0,U=0,C=0,B=0,R=0;if(g[0]==3&&g[1]==0)return x||new y(0);const E=f.H,O=E.b,I=E.e,V=E.R,z=E.n,H=E.A,$=E.Z,S=E.m,_=x==null;for(_&&(x=new y(g.length>>>2<<5));j==0;)if(j=O(g,R,1),N=O(g,R+1,2),R+=3,N!=0){if(_&&(x=f.H.W(x,B+(1<<17))),N==1&&(A=S.J,w=S.h,U=511,C=31),N==2){D=I(g,R,5)+257,L=I(g,R+5,5)+1,k=I(g,R+10,4)+4,R+=14;let Y=1;for(var q=0;q<38;q+=2)S.Q[q]=0,S.Q[q+1]=0;for(q=0;q<k;q++){const G=I(g,R+3*q,3);S.Q[1+(S.X[q]<<1)]=G,G>Y&&(Y=G)}R+=3*k,z(S.Q,Y),H(S.Q,Y,S.u),A=S.w,w=S.d,R=V(S.u,(1<<Y)-1,D+L,g,R,S.v);const ee=E.V(S.v,0,D,S.C);U=(1<<ee)-1;const F=E.V(S.v,D,L,S.D);C=(1<<F)-1,z(S.C,ee),H(S.C,ee,A),z(S.D,F),H(S.D,F,w)}for(;;){const Y=A[$(g,R)&U];R+=15&Y;const ee=Y>>>4;if(!(ee>>>8))x[B++]=ee;else{if(ee==256)break;{let F=B+ee-254;if(ee>264){const de=S.q[ee-257];F=B+(de>>>3)+I(g,R,7&de),R+=7&de}const G=w[$(g,R)&C];R+=15&G;const Z=G>>>4,Q=S.c[Z],K=(Q>>>4)+O(g,R,15&Q);for(R+=15&Q;B<F;)x[B]=x[B++-K],x[B]=x[B++-K],x[B]=x[B++-K],x[B]=x[B++-K];B=F}}}}else{(7&R)!=0&&(R+=8-(7&R));const Y=4+(R>>>3),ee=g[Y-4]|g[Y-3]<<8;_&&(x=f.H.W(x,B+ee)),x.set(new y(g.buffer,g.byteOffset+Y,ee),B),R=Y+ee<<3,B+=ee}return x.length==B?x:x.slice(0,B)},f.H.W=function(g,x){const y=g.length;if(x<=y)return g;const A=new Uint8Array(y<<1);return A.set(g,0),A},f.H.R=function(g,x,y,A,w,j){const N=f.H.e,D=f.H.Z;let L=0;for(;L<y;){const k=g[D(A,w)&x];w+=15&k;const U=k>>>4;if(U<=15)j[L]=U,L++;else{let C=0,B=0;U==16?(B=3+N(A,w,2),w+=2,C=j[L-1]):U==17?(B=3+N(A,w,3),w+=3):U==18&&(B=11+N(A,w,7),w+=7);const R=L+B;for(;L<R;)j[L]=C,L++}}return w},f.H.V=function(g,x,y,A){let w=0,j=0;const N=A.length>>>1;for(;j<y;){const D=g[j+x];A[j<<1]=0,A[1+(j<<1)]=D,D>w&&(w=D),j++}for(;j<N;)A[j<<1]=0,A[1+(j<<1)]=0,j++;return w},f.H.n=function(g,x){const y=f.H.m,A=g.length;let w,j,N,D;const L=y.j;for(var k=0;k<=x;k++)L[k]=0;for(k=1;k<A;k+=2)L[g[k]]++;const U=y.K;for(w=0,L[0]=0,j=1;j<=x;j++)w=w+L[j-1]<<1,U[j]=w;for(N=0;N<A;N+=2)D=g[N+1],D!=0&&(g[N]=U[D],U[D]++)},f.H.A=function(g,x,y){const A=g.length,w=f.H.m.r;for(let j=0;j<A;j+=2)if(g[j+1]!=0){const N=j>>1,D=g[j+1],L=N<<4|D,k=x-D;let U=g[j]<<k;const C=U+(1<<k);for(;U!=C;)y[w[U]>>>15-x]=L,U++}},f.H.l=function(g,x){const y=f.H.m.r,A=15-x;for(let w=0;w<g.length;w+=2){const j=g[w]<<x-g[w+1];g[w]=y[j]>>>A}},f.H.M=function(g,x,y){y<<=7&x;const A=x>>>3;g[A]|=y,g[A+1]|=y>>>8},f.H.I=function(g,x,y){y<<=7&x;const A=x>>>3;g[A]|=y,g[A+1]|=y>>>8,g[A+2]|=y>>>16},f.H.e=function(g,x,y){return(g[x>>>3]|g[1+(x>>>3)]<<8)>>>(7&x)&(1<<y)-1},f.H.b=function(g,x,y){return(g[x>>>3]|g[1+(x>>>3)]<<8|g[2+(x>>>3)]<<16)>>>(7&x)&(1<<y)-1},f.H.Z=function(g,x){return(g[x>>>3]|g[1+(x>>>3)]<<8|g[2+(x>>>3)]<<16)>>>(7&x)},f.H.i=function(g,x){return(g[x>>>3]|g[1+(x>>>3)]<<8|g[2+(x>>>3)]<<16|g[3+(x>>>3)]<<24)>>>(7&x)},f.H.m=(function(){const g=Uint16Array,x=Uint32Array;return{K:new g(16),j:new g(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new g(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new x(32),J:new g(512),_:[],h:new g(32),$:[],w:new g(32768),C:[],v:[],d:new g(32768),D:[],u:new g(512),Q:[],r:new g(32768),s:new x(286),Y:new x(30),a:new x(19),t:new x(15e3),k:new g(65536),g:new g(32768)}})(),(function(){const g=f.H.m;for(var x=0;x<32768;x++){let A=x;A=(2863311530&A)>>>1|(1431655765&A)<<1,A=(3435973836&A)>>>2|(858993459&A)<<2,A=(4042322160&A)>>>4|(252645135&A)<<4,A=(4278255360&A)>>>8|(16711935&A)<<8,g.r[x]=(A>>>16|A<<16)>>>17}function y(A,w,j){for(;w--!=0;)A.push(0,j)}for(x=0;x<32;x++)g.q[x]=g.S[x]<<3|g.T[x],g.c[x]=g.p[x]<<4|g.z[x];y(g._,144,8),y(g._,112,9),y(g._,24,7),y(g._,8,8),f.H.n(g._,9),f.H.A(g._,9,g.J),f.H.l(g._,9),y(g.$,32,5),f.H.n(g.$,5),f.H.A(g.$,5,g.h),f.H.l(g.$,5),y(g.Q,19,0),y(g.C,286,0),y(g.D,30,0),y(g.v,320,0)})(),f.H.N})();function r(f){return[1,null,3,1,2,null,4][f.ctype]*f.depth}function c(f,g,x,y,A){let w=r(g);const j=Math.ceil(y*w/8);let N,D;w=Math.ceil(w/8);let L=f[x],k=0;if(L>1&&(f[x]=[0,0,1][L-2]),L==3)for(k=w;k<j;k++)f[k+1]=f[k+1]+(f[k+1-w]>>>1)&255;for(let U=0;U<A;U++)if(N=x+U*j,D=N+U+1,L=f[D-1],k=0,L==0)for(;k<j;k++)f[N+k]=f[D+k];else if(L==1){for(;k<w;k++)f[N+k]=f[D+k];for(;k<j;k++)f[N+k]=f[D+k]+f[N+k-w]}else if(L==2)for(;k<j;k++)f[N+k]=f[D+k]+f[N+k-j];else if(L==3){for(;k<w;k++)f[N+k]=f[D+k]+(f[N+k-j]>>>1);for(;k<j;k++)f[N+k]=f[D+k]+(f[N+k-j]+f[N+k-w]>>>1)}else{for(;k<w;k++)f[N+k]=f[D+k]+u(0,f[N+k-j],0);for(;k<j;k++)f[N+k]=f[D+k]+u(f[N+k-w],f[N+k-j],f[N+k-w-j])}return f}function u(f,g,x){const y=f+g-x,A=y-f,w=y-g,j=y-x;return A*A<=w*w&&A*A<=j*j?f:w*w<=j*j?g:x}function h(f,g,x){x.width=l.readUint(f,g),g+=4,x.height=l.readUint(f,g),g+=4,x.depth=f[g],g++,x.ctype=f[g],g++,x.compress=f[g],g++,x.filter=f[g],g++,x.interlace=f[g],g++}function p(f,g,x,y,A,w,j,N,D){const L=Math.min(g,A),k=Math.min(x,w);let U=0,C=0;for(let $=0;$<k;$++)for(let S=0;S<L;S++)if(j>=0&&N>=0?(U=$*g+S<<2,C=(N+$)*A+j+S<<2):(U=(-N+$)*g-j+S<<2,C=$*A+S<<2),D==0)y[C]=f[U],y[C+1]=f[U+1],y[C+2]=f[U+2],y[C+3]=f[U+3];else if(D==1){var B=f[U+3]*.00392156862745098,R=f[U]*B,E=f[U+1]*B,O=f[U+2]*B,I=y[C+3]*(1/255),V=y[C]*I,z=y[C+1]*I,H=y[C+2]*I;const _=1-B,q=B+I*_,Y=q==0?0:1/q;y[C+3]=255*q,y[C+0]=(R+V*_)*Y,y[C+1]=(E+z*_)*Y,y[C+2]=(O+H*_)*Y}else if(D==2)B=f[U+3],R=f[U],E=f[U+1],O=f[U+2],I=y[C+3],V=y[C],z=y[C+1],H=y[C+2],B==I&&R==V&&E==z&&O==H?(y[C]=0,y[C+1]=0,y[C+2]=0,y[C+3]=0):(y[C]=R,y[C+1]=E,y[C+2]=O,y[C+3]=B);else if(D==3){if(B=f[U+3],R=f[U],E=f[U+1],O=f[U+2],I=y[C+3],V=y[C],z=y[C+1],H=y[C+2],B==I&&R==V&&E==z&&O==H)continue;if(B<220&&I>20)return!1}return!0}return{decode:function(g){const x=new Uint8Array(g);let y=8;const A=l,w=A.readUshort,j=A.readUint,N={tabs:{},frames:[]},D=new Uint8Array(x.length);let L,k=0,U=0;const C=[137,80,78,71,13,10,26,10];for(var B=0;B<8;B++)if(x[B]!=C[B])throw"The input is not a PNG file!";for(;y<x.length;){const $=A.readUint(x,y);y+=4;const S=A.readASCII(x,y,4);if(y+=4,S=="IHDR")h(x,y,N);else if(S=="iCCP"){for(var R=y;x[R]!=0;)R++;A.readASCII(x,y,R-y),x[R+1];const _=x.slice(R+2,y+$);let q=null;try{q=s(_)}catch{q=i(_)}N.tabs[S]=q}else if(S=="CgBI")N.tabs[S]=x.slice(y,y+4);else if(S=="IDAT"){for(B=0;B<$;B++)D[k+B]=x[y+B];k+=$}else if(S=="acTL")N.tabs[S]={num_frames:j(x,y),num_plays:j(x,y+4)},L=new Uint8Array(x.length);else if(S=="fcTL"){U!=0&&((H=N.frames[N.frames.length-1]).data=t(N,L.slice(0,U),H.rect.width,H.rect.height),U=0);const _={x:j(x,y+12),y:j(x,y+16),width:j(x,y+4),height:j(x,y+8)};let q=w(x,y+22);q=w(x,y+20)/(q==0?100:q);const Y={rect:_,delay:Math.round(1e3*q),dispose:x[y+24],blend:x[y+25]};N.frames.push(Y)}else if(S=="fdAT"){for(B=0;B<$-4;B++)L[U+B]=x[y+B+4];U+=$-4}else if(S=="pHYs")N.tabs[S]=[A.readUint(x,y),A.readUint(x,y+4),x[y+8]];else if(S=="cHRM")for(N.tabs[S]=[],B=0;B<8;B++)N.tabs[S].push(A.readUint(x,y+4*B));else if(S=="tEXt"||S=="zTXt"){N.tabs[S]==null&&(N.tabs[S]={});var E=A.nextZero(x,y),O=A.readASCII(x,y,E-y),I=y+$-E-1;if(S=="tEXt")z=A.readASCII(x,E+1,I);else{var V=s(x.slice(E+2,E+2+I));z=A.readUTF8(V,0,V.length)}N.tabs[S][O]=z}else if(S=="iTXt"){N.tabs[S]==null&&(N.tabs[S]={}),E=0,R=y,E=A.nextZero(x,R),O=A.readASCII(x,R,E-R);const _=x[R=E+1];var z;x[R+1],R+=2,E=A.nextZero(x,R),A.readASCII(x,R,E-R),R=E+1,E=A.nextZero(x,R),A.readUTF8(x,R,E-R),I=$-((R=E+1)-y),_==0?z=A.readUTF8(x,R,I):(V=s(x.slice(R,R+I)),z=A.readUTF8(V,0,V.length)),N.tabs[S][O]=z}else if(S=="PLTE")N.tabs[S]=A.readBytes(x,y,$);else if(S=="hIST"){const _=N.tabs.PLTE.length/3;for(N.tabs[S]=[],B=0;B<_;B++)N.tabs[S].push(w(x,y+2*B))}else if(S=="tRNS")N.ctype==3?N.tabs[S]=A.readBytes(x,y,$):N.ctype==0?N.tabs[S]=w(x,y):N.ctype==2&&(N.tabs[S]=[w(x,y),w(x,y+2),w(x,y+4)]);else if(S=="gAMA")N.tabs[S]=A.readUint(x,y)/1e5;else if(S=="sRGB")N.tabs[S]=x[y];else if(S=="bKGD")N.ctype==0||N.ctype==4?N.tabs[S]=[w(x,y)]:N.ctype==2||N.ctype==6?N.tabs[S]=[w(x,y),w(x,y+2),w(x,y+4)]:N.ctype==3&&(N.tabs[S]=x[y]);else if(S=="IEND")break;y+=$,A.readUint(x,y),y+=4}var H;return U!=0&&((H=N.frames[N.frames.length-1]).data=t(N,L.slice(0,U),H.rect.width,H.rect.height)),N.data=t(N,D,N.width,N.height),delete N.compress,delete N.interlace,delete N.filter,N},toRGBA8:function(g){const x=g.width,y=g.height;if(g.tabs.acTL==null)return[e(g.data,x,y,g).buffer];const A=[];g.frames[0].data==null&&(g.frames[0].data=g.data);const w=x*y*4,j=new Uint8Array(w),N=new Uint8Array(w),D=new Uint8Array(w);for(let k=0;k<g.frames.length;k++){const U=g.frames[k],C=U.rect.x,B=U.rect.y,R=U.rect.width,E=U.rect.height,O=e(U.data,R,E,g);if(k!=0)for(var L=0;L<w;L++)D[L]=j[L];if(U.blend==0?p(O,R,E,j,x,y,C,B,0):U.blend==1&&p(O,R,E,j,x,y,C,B,1),A.push(j.buffer.slice(0)),U.dispose!=0){if(U.dispose==1)p(N,R,E,j,x,y,C,B,0);else if(U.dispose==2)for(L=0;L<w;L++)j[L]=D[L]}}return A},_paeth:u,_copyTile:p,_bin:l}})();(function(){const{_copyTile:l}=xn,{_bin:e}=xn,t=xn._paeth;var s={table:(function(){const R=new Uint32Array(256);for(let E=0;E<256;E++){let O=E;for(let I=0;I<8;I++)1&O?O=3988292384^O>>>1:O>>>=1;R[E]=O}return R})(),update(R,E,O,I){for(let V=0;V<I;V++)R=s.table[255&(R^E[O+V])]^R>>>8;return R},crc:(R,E,O)=>4294967295^s.update(4294967295,R,E,O)};function i(R,E,O,I){E[O]+=R[0]*I>>4,E[O+1]+=R[1]*I>>4,E[O+2]+=R[2]*I>>4,E[O+3]+=R[3]*I>>4}function r(R){return Math.max(0,Math.min(255,R))}function c(R,E){const O=R[0]-E[0],I=R[1]-E[1],V=R[2]-E[2],z=R[3]-E[3];return O*O+I*I+V*V+z*z}function u(R,E,O,I,V,z,H){H==null&&(H=1);const $=I.length,S=[];for(var _=0;_<$;_++){const K=I[_];S.push([K>>>0&255,K>>>8&255,K>>>16&255,K>>>24&255])}for(_=0;_<$;_++){let K=4294967295;for(var q=0,Y=0;Y<$;Y++){var ee=c(S[_],S[Y]);Y!=_&&ee<K&&(K=ee,q=Y)}}const F=new Uint32Array(V.buffer),G=new Int16Array(E*O*4),Z=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(_=0;_<Z.length;_++)Z[_]=255*((Z[_]+.5)/16-.5);for(let K=0;K<O;K++)for(let de=0;de<E;de++){var Q;_=4*(K*E+de),H!=2?Q=[r(R[_]+G[_]),r(R[_+1]+G[_+1]),r(R[_+2]+G[_+2]),r(R[_+3]+G[_+3])]:(ee=Z[4*(3&K)+(3&de)],Q=[r(R[_]+ee),r(R[_+1]+ee),r(R[_+2]+ee),r(R[_+3]+ee)]),q=0;let ue=16777215;for(Y=0;Y<$;Y++){const xe=c(Q,S[Y]);xe<ue&&(ue=xe,q=Y)}const ve=S[q],he=[Q[0]-ve[0],Q[1]-ve[1],Q[2]-ve[2],Q[3]-ve[3]];H==1&&(de!=E-1&&i(he,G,_+4,7),K!=O-1&&(de!=0&&i(he,G,_+4*E-4,3),i(he,G,_+4*E,5),de!=E-1&&i(he,G,_+4*E+4,1))),z[_>>2]=q,F[_>>2]=I[q]}}function h(R,E,O,I,V){V==null&&(V={});const{crc:z}=s,H=e.writeUint,$=e.writeUshort,S=e.writeASCII;let _=8;const q=R.frames.length>1;let Y,ee=!1,F=33+(q?20:0);if(V.sRGB!=null&&(F+=13),V.pHYs!=null&&(F+=21),V.iCCP!=null&&(Y=pako.deflate(V.iCCP),F+=21+Y.length+4),R.ctype==3){for(var G=R.plte.length,Z=0;Z<G;Z++)R.plte[Z]>>>24!=255&&(ee=!0);F+=8+3*G+4+(ee?8+1*G+4:0)}for(var Q=0;Q<R.frames.length;Q++)q&&(F+=38),F+=(ve=R.frames[Q]).cimg.length+12,Q!=0&&(F+=4);F+=12;const K=new Uint8Array(F),de=[137,80,78,71,13,10,26,10];for(Z=0;Z<8;Z++)K[Z]=de[Z];if(H(K,_,13),_+=4,S(K,_,"IHDR"),_+=4,H(K,_,E),_+=4,H(K,_,O),_+=4,K[_]=R.depth,_++,K[_]=R.ctype,_++,K[_]=0,_++,K[_]=0,_++,K[_]=0,_++,H(K,_,z(K,_-17,17)),_+=4,V.sRGB!=null&&(H(K,_,1),_+=4,S(K,_,"sRGB"),_+=4,K[_]=V.sRGB,_++,H(K,_,z(K,_-5,5)),_+=4),V.iCCP!=null){const he=13+Y.length;H(K,_,he),_+=4,S(K,_,"iCCP"),_+=4,S(K,_,"ICC profile"),_+=11,_+=2,K.set(Y,_),_+=Y.length,H(K,_,z(K,_-(he+4),he+4)),_+=4}if(V.pHYs!=null&&(H(K,_,9),_+=4,S(K,_,"pHYs"),_+=4,H(K,_,V.pHYs[0]),_+=4,H(K,_,V.pHYs[1]),_+=4,K[_]=V.pHYs[2],_++,H(K,_,z(K,_-13,13)),_+=4),q&&(H(K,_,8),_+=4,S(K,_,"acTL"),_+=4,H(K,_,R.frames.length),_+=4,H(K,_,V.loop!=null?V.loop:0),_+=4,H(K,_,z(K,_-12,12)),_+=4),R.ctype==3){for(H(K,_,3*(G=R.plte.length)),_+=4,S(K,_,"PLTE"),_+=4,Z=0;Z<G;Z++){const he=3*Z,xe=R.plte[Z],Pe=255&xe,$e=xe>>>8&255,Ce=xe>>>16&255;K[_+he+0]=Pe,K[_+he+1]=$e,K[_+he+2]=Ce}if(_+=3*G,H(K,_,z(K,_-3*G-4,3*G+4)),_+=4,ee){for(H(K,_,G),_+=4,S(K,_,"tRNS"),_+=4,Z=0;Z<G;Z++)K[_+Z]=R.plte[Z]>>>24&255;_+=G,H(K,_,z(K,_-G-4,G+4)),_+=4}}let ue=0;for(Q=0;Q<R.frames.length;Q++){var ve=R.frames[Q];q&&(H(K,_,26),_+=4,S(K,_,"fcTL"),_+=4,H(K,_,ue++),_+=4,H(K,_,ve.rect.width),_+=4,H(K,_,ve.rect.height),_+=4,H(K,_,ve.rect.x),_+=4,H(K,_,ve.rect.y),_+=4,$(K,_,I[Q]),_+=2,$(K,_,1e3),_+=2,K[_]=ve.dispose,_++,K[_]=ve.blend,_++,H(K,_,z(K,_-30,30)),_+=4);const he=ve.cimg;H(K,_,(G=he.length)+(Q==0?0:4)),_+=4;const xe=_;S(K,_,Q==0?"IDAT":"fdAT"),_+=4,Q!=0&&(H(K,_,ue++),_+=4),K.set(he,_),_+=G,H(K,_,z(K,xe,_-xe)),_+=4}return H(K,_,0),_+=4,S(K,_,"IEND"),_+=4,H(K,_,z(K,_-4,4)),_+=4,K.buffer}function p(R,E,O){for(let I=0;I<R.frames.length;I++){const V=R.frames[I];V.rect.width;const z=V.rect.height,H=new Uint8Array(z*V.bpl+z);V.cimg=y(V.img,z,V.bpp,V.bpl,H,E,O)}}function f(R,E,O,I,V){const z=V[0],H=V[1],$=V[2],S=V[3],_=V[4],q=V[5];let Y=6,ee=8,F=255;for(var G=0;G<R.length;G++){const Le=new Uint8Array(R[G]);for(var Z=Le.length,Q=0;Q<Z;Q+=4)F&=Le[Q+3]}const K=F!=255,de=(function(Ye,qe,dt,Et,Qe,Xt){const ft=[];for(var ke=0;ke<Ye.length;ke++){const Nt=new Uint8Array(Ye[ke]),ks=new Uint32Array(Nt.buffer);var Wt;let gs=0,hs=0,mt=qe,as=dt,Kt=Et?1:0;if(ke!=0){const Zd=Xt||Et||ke==1||ft[ke-2].dispose!=0?1:2;let Hr=0,wl=1e9;for(let jn=0;jn<Zd;jn++){var Rs=new Uint8Array(Ye[ke-1-jn]);const ja=new Uint32Array(Ye[ke-1-jn]);let Ds=qe,rs=dt,dn=-1,un=-1;for(let Sn=0;Sn<dt;Sn++)for(let hn=0;hn<qe;hn++)ks[et=Sn*qe+hn]!=ja[et]&&(hn<Ds&&(Ds=hn),hn>dn&&(dn=hn),Sn<rs&&(rs=Sn),Sn>un&&(un=Sn));dn==-1&&(Ds=rs=dn=un=0),Qe&&((1&Ds)==1&&Ds--,(1&rs)==1&&rs--);const Al=(dn-Ds+1)*(un-rs+1);Al<wl&&(wl=Al,Hr=jn,gs=Ds,hs=rs,mt=dn-Ds+1,as=un-rs+1)}Rs=new Uint8Array(Ye[ke-1-Hr]),Hr==1&&(ft[ke-1].dispose=2),Wt=new Uint8Array(mt*as*4),l(Rs,qe,dt,Wt,mt,as,-gs,-hs,0),Kt=l(Nt,qe,dt,Wt,mt,as,-gs,-hs,3)?1:0,Kt==1?x(Nt,qe,dt,Wt,{x:gs,y:hs,width:mt,height:as}):l(Nt,qe,dt,Wt,mt,as,-gs,-hs,0)}else Wt=Nt.slice(0);ft.push({rect:{x:gs,y:hs,width:mt,height:as},img:Wt,blend:Kt,dispose:0})}if(Et)for(ke=0;ke<ft.length;ke++){if((It=ft[ke]).blend==1)continue;const Nt=It.rect,ks=ft[ke-1].rect,gs=Math.min(Nt.x,ks.x),hs=Math.min(Nt.y,ks.y),mt={x:gs,y:hs,width:Math.max(Nt.x+Nt.width,ks.x+ks.width)-gs,height:Math.max(Nt.y+Nt.height,ks.y+ks.height)-hs};ft[ke-1].dispose=1,ke-1!=0&&g(Ye,qe,dt,ft,ke-1,mt,Qe),g(Ye,qe,dt,ft,ke,mt,Qe)}let is=0;if(Ye.length!=1)for(var et=0;et<ft.length;et++){var It;is+=(It=ft[et]).rect.width*It.rect.height}return ft})(R,E,O,z,H,$),ue={},ve=[],he=[];if(I!=0){const Le=[];for(Q=0;Q<de.length;Q++)Le.push(de[Q].img.buffer);const Ye=(function(Qe){let Xt=0;for(var ft=0;ft<Qe.length;ft++)Xt+=Qe[ft].byteLength;const ke=new Uint8Array(Xt);let Wt=0;for(ft=0;ft<Qe.length;ft++){const Rs=new Uint8Array(Qe[ft]),is=Rs.length;for(let et=0;et<is;et+=4){let It=Rs[et],Nt=Rs[et+1],ks=Rs[et+2];const gs=Rs[et+3];gs==0&&(It=Nt=ks=0),ke[Wt+et]=It,ke[Wt+et+1]=Nt,ke[Wt+et+2]=ks,ke[Wt+et+3]=gs}Wt+=is}return ke.buffer})(Le),qe=w(Ye,I);for(Q=0;Q<qe.plte.length;Q++)ve.push(qe.plte[Q].est.rgba);let dt=0;for(Q=0;Q<de.length;Q++){const Et=(Pe=de[Q]).img.length;var xe=new Uint8Array(qe.inds.buffer,dt>>2,Et>>2);he.push(xe);const Qe=new Uint8Array(qe.abuf,dt,Et);q&&u(Pe.img,Pe.rect.width,Pe.rect.height,ve,Qe,xe),Pe.img.set(Qe),dt+=Et}}else for(G=0;G<de.length;G++){var Pe=de[G];const Le=new Uint32Array(Pe.img.buffer);var $e=Pe.rect.width;for(Z=Le.length,xe=new Uint8Array(Z),he.push(xe),Q=0;Q<Z;Q++){const Ye=Le[Q];if(Q!=0&&Ye==Le[Q-1])xe[Q]=xe[Q-1];else if(Q>$e&&Ye==Le[Q-$e])xe[Q]=xe[Q-$e];else{let qe=ue[Ye];if(qe==null&&(ue[Ye]=qe=ve.length,ve.push(Ye),ve.length>=300))break;xe[Q]=qe}}}const Ce=ve.length;for(Ce<=256&&_==0&&(ee=Ce<=2?1:Ce<=4?2:Ce<=16?4:8,ee=Math.max(ee,S)),G=0;G<de.length;G++){(Pe=de[G]).rect.x,Pe.rect.y,$e=Pe.rect.width;const Le=Pe.rect.height;let Ye=Pe.img;new Uint32Array(Ye.buffer);let qe=4*$e,dt=4;if(Ce<=256&&_==0){qe=Math.ceil(ee*$e/8);var Ee=new Uint8Array(qe*Le);const Et=he[G];for(let Qe=0;Qe<Le;Qe++){Q=Qe*qe;const Xt=Qe*$e;if(ee==8)for(var Ne=0;Ne<$e;Ne++)Ee[Q+Ne]=Et[Xt+Ne];else if(ee==4)for(Ne=0;Ne<$e;Ne++)Ee[Q+(Ne>>1)]|=Et[Xt+Ne]<<4-4*(1&Ne);else if(ee==2)for(Ne=0;Ne<$e;Ne++)Ee[Q+(Ne>>2)]|=Et[Xt+Ne]<<6-2*(3&Ne);else if(ee==1)for(Ne=0;Ne<$e;Ne++)Ee[Q+(Ne>>3)]|=Et[Xt+Ne]<<7-1*(7&Ne)}Ye=Ee,Y=3,dt=1}else if(K==0&&de.length==1){Ee=new Uint8Array($e*Le*3);const Et=$e*Le;for(Q=0;Q<Et;Q++){const Qe=3*Q,Xt=4*Q;Ee[Qe]=Ye[Xt],Ee[Qe+1]=Ye[Xt+1],Ee[Qe+2]=Ye[Xt+2]}Ye=Ee,Y=2,dt=3,qe=3*$e}Pe.img=Ye,Pe.bpl=qe,Pe.bpp=dt}return{ctype:Y,depth:ee,plte:ve,frames:de}}function g(R,E,O,I,V,z,H){const $=Uint8Array,S=Uint32Array,_=new $(R[V-1]),q=new S(R[V-1]),Y=V+1<R.length?new $(R[V+1]):null,ee=new $(R[V]),F=new S(ee.buffer);let G=E,Z=O,Q=-1,K=-1;for(let ue=0;ue<z.height;ue++)for(let ve=0;ve<z.width;ve++){const he=z.x+ve,xe=z.y+ue,Pe=xe*E+he,$e=F[Pe];$e==0||I[V-1].dispose==0&&q[Pe]==$e&&(Y==null||Y[4*Pe+3]!=0)||(he<G&&(G=he),he>Q&&(Q=he),xe<Z&&(Z=xe),xe>K&&(K=xe))}Q==-1&&(G=Z=Q=K=0),H&&((1&G)==1&&G--,(1&Z)==1&&Z--),z={x:G,y:Z,width:Q-G+1,height:K-Z+1};const de=I[V];de.rect=z,de.blend=1,de.img=new Uint8Array(z.width*z.height*4),I[V-1].dispose==0?(l(_,E,O,de.img,z.width,z.height,-z.x,-z.y,0),x(ee,E,O,de.img,z)):l(ee,E,O,de.img,z.width,z.height,-z.x,-z.y,0)}function x(R,E,O,I,V){l(R,E,O,I,V.width,V.height,-V.x,-V.y,2)}function y(R,E,O,I,V,z,H){const $=[];let S,_=[0,1,2,3,4];z!=-1?_=[z]:(E*I>5e5||O==1)&&(_=[0]),H&&(S={level:0});const q=c_;for(var Y=0;Y<_.length;Y++){for(let G=0;G<E;G++)A(V,R,G,I,O,_[Y]);$.push(q.deflate(V,S))}let ee,F=1e9;for(Y=0;Y<$.length;Y++)$[Y].length<F&&(ee=Y,F=$[Y].length);return $[ee]}function A(R,E,O,I,V,z){const H=O*I;let $=H+O;if(R[$]=z,$++,z==0)if(I<500)for(var S=0;S<I;S++)R[$+S]=E[H+S];else R.set(new Uint8Array(E.buffer,H,I),$);else if(z==1){for(S=0;S<V;S++)R[$+S]=E[H+S];for(S=V;S<I;S++)R[$+S]=E[H+S]-E[H+S-V]+256&255}else if(O==0){for(S=0;S<V;S++)R[$+S]=E[H+S];if(z==2)for(S=V;S<I;S++)R[$+S]=E[H+S];if(z==3)for(S=V;S<I;S++)R[$+S]=E[H+S]-(E[H+S-V]>>1)+256&255;if(z==4)for(S=V;S<I;S++)R[$+S]=E[H+S]-t(E[H+S-V],0,0)+256&255}else{if(z==2)for(S=0;S<I;S++)R[$+S]=E[H+S]+256-E[H+S-I]&255;if(z==3){for(S=0;S<V;S++)R[$+S]=E[H+S]+256-(E[H+S-I]>>1)&255;for(S=V;S<I;S++)R[$+S]=E[H+S]+256-(E[H+S-I]+E[H+S-V]>>1)&255}if(z==4){for(S=0;S<V;S++)R[$+S]=E[H+S]+256-t(0,E[H+S-I],0)&255;for(S=V;S<I;S++)R[$+S]=E[H+S]+256-t(E[H+S-V],E[H+S-I],E[H+S-V-I])&255}}}function w(R,E){const O=new Uint8Array(R),I=O.slice(0),V=new Uint32Array(I.buffer),z=j(I,E),H=z[0],$=z[1],S=O.length,_=new Uint8Array(S>>2);let q;if(O.length<2e7)for(var Y=0;Y<S;Y+=4)q=N(H,ee=O[Y]*(1/255),F=O[Y+1]*(1/255),G=O[Y+2]*(1/255),Z=O[Y+3]*(1/255)),_[Y>>2]=q.ind,V[Y>>2]=q.est.rgba;else for(Y=0;Y<S;Y+=4){var ee=O[Y]*.00392156862745098,F=O[Y+1]*(1/255),G=O[Y+2]*(1/255),Z=O[Y+3]*(1/255);for(q=H;q.left;)q=D(q.est,ee,F,G,Z)<=0?q.left:q.right;_[Y>>2]=q.ind,V[Y>>2]=q.est.rgba}return{abuf:I.buffer,inds:_,plte:$}}function j(R,E,O){O==null&&(O=1e-4);const I=new Uint32Array(R.buffer),V={i0:0,i1:R.length,bst:null,est:null,tdst:0,left:null,right:null};V.bst=U(R,V.i0,V.i1),V.est=C(V.bst);const z=[V];for(;z.length<E;){let $=0,S=0;for(var H=0;H<z.length;H++)z[H].est.L>$&&($=z[H].est.L,S=H);if($<O)break;const _=z[S],q=L(R,I,_.i0,_.i1,_.est.e,_.est.eMq255);if(_.i0>=q||_.i1<=q){_.est.L=0;continue}const Y={i0:_.i0,i1:q,bst:null,est:null,tdst:0,left:null,right:null};Y.bst=U(R,Y.i0,Y.i1),Y.est=C(Y.bst);const ee={i0:q,i1:_.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ee.bst={R:[],m:[],N:_.bst.N-Y.bst.N},H=0;H<16;H++)ee.bst.R[H]=_.bst.R[H]-Y.bst.R[H];for(H=0;H<4;H++)ee.bst.m[H]=_.bst.m[H]-Y.bst.m[H];ee.est=C(ee.bst),_.left=Y,_.right=ee,z[S]=Y,z.push(ee)}for(z.sort((($,S)=>S.bst.N-$.bst.N)),H=0;H<z.length;H++)z[H].ind=H;return[V,z]}function N(R,E,O,I,V){if(R.left==null)return R.tdst=(function(Y,ee,F,G,Z){const Q=ee-Y[0],K=F-Y[1],de=G-Y[2],ue=Z-Y[3];return Q*Q+K*K+de*de+ue*ue})(R.est.q,E,O,I,V),R;const z=D(R.est,E,O,I,V);let H=R.left,$=R.right;z>0&&(H=R.right,$=R.left);const S=N(H,E,O,I,V);if(S.tdst<=z*z)return S;const _=N($,E,O,I,V);return _.tdst<S.tdst?_:S}function D(R,E,O,I,V){const{e:z}=R;return z[0]*E+z[1]*O+z[2]*I+z[3]*V-R.eMq}function L(R,E,O,I,V,z){for(I-=4;O<I;){for(;k(R,O,V)<=z;)O+=4;for(;k(R,I,V)>z;)I-=4;if(O>=I)break;const H=E[O>>2];E[O>>2]=E[I>>2],E[I>>2]=H,O+=4,I-=4}for(;k(R,O,V)>z;)O-=4;return O+4}function k(R,E,O){return R[E]*O[0]+R[E+1]*O[1]+R[E+2]*O[2]+R[E+3]*O[3]}function U(R,E,O){const I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],V=[0,0,0,0],z=O-E>>2;for(let H=E;H<O;H+=4){const $=R[H]*.00392156862745098,S=R[H+1]*(1/255),_=R[H+2]*(1/255),q=R[H+3]*(1/255);V[0]+=$,V[1]+=S,V[2]+=_,V[3]+=q,I[0]+=$*$,I[1]+=$*S,I[2]+=$*_,I[3]+=$*q,I[5]+=S*S,I[6]+=S*_,I[7]+=S*q,I[10]+=_*_,I[11]+=_*q,I[15]+=q*q}return I[4]=I[1],I[8]=I[2],I[9]=I[6],I[12]=I[3],I[13]=I[7],I[14]=I[11],{R:I,m:V,N:z}}function C(R){const{R:E}=R,{m:O}=R,{N:I}=R,V=O[0],z=O[1],H=O[2],$=O[3],S=I==0?0:1/I,_=[E[0]-V*V*S,E[1]-V*z*S,E[2]-V*H*S,E[3]-V*$*S,E[4]-z*V*S,E[5]-z*z*S,E[6]-z*H*S,E[7]-z*$*S,E[8]-H*V*S,E[9]-H*z*S,E[10]-H*H*S,E[11]-H*$*S,E[12]-$*V*S,E[13]-$*z*S,E[14]-$*H*S,E[15]-$*$*S],q=_,Y=B;let ee=[Math.random(),Math.random(),Math.random(),Math.random()],F=0,G=0;if(I!=0)for(let Q=0;Q<16&&(ee=Y.multVec(q,ee),G=Math.sqrt(Y.dot(ee,ee)),ee=Y.sml(1/G,ee),!(Q!=0&&Math.abs(G-F)<1e-9));Q++)F=G;const Z=[V*S,z*S,H*S,$*S];return{Cov:_,q:Z,e:ee,L:F,eMq255:Y.dot(Y.sml(255,Z),ee),eMq:Y.dot(ee,Z),rgba:(Math.round(255*Z[3])<<24|Math.round(255*Z[2])<<16|Math.round(255*Z[1])<<8|Math.round(255*Z[0])<<0)>>>0}}var B={multVec:(R,E)=>[R[0]*E[0]+R[1]*E[1]+R[2]*E[2]+R[3]*E[3],R[4]*E[0]+R[5]*E[1]+R[6]*E[2]+R[7]*E[3],R[8]*E[0]+R[9]*E[1]+R[10]*E[2]+R[11]*E[3],R[12]*E[0]+R[13]*E[1]+R[14]*E[2]+R[15]*E[3]],dot:(R,E)=>R[0]*E[0]+R[1]*E[1]+R[2]*E[2]+R[3]*E[3],sml:(R,E)=>[R*E[0],R*E[1],R*E[2],R*E[3]]};xn.encode=function(E,O,I,V,z,H,$){V==null&&(V=0),$==null&&($=!1);const S=f(E,O,I,V,[!1,!1,!1,0,$,!1]);return p(S,-1),h(S,O,I,z,H)},xn.encodeLL=function(E,O,I,V,z,H,$,S){const _={ctype:0+(V==1?0:2)+(z==0?0:4),depth:H,frames:[]},q=(V+z)*H,Y=q*O;for(let ee=0;ee<E.length;ee++)_.frames.push({rect:{x:0,y:0,width:O,height:I},img:new Uint8Array(E[ee]),blend:0,dispose:1,bpp:Math.ceil(q/8),bpl:Math.ceil(Y/8)});return p(_,0,!0),h(_,O,I,$,S)},xn.encode.compress=f,xn.encode.dither=u,xn.quantize=w,xn.quantize.getKDtree=j,xn.quantize.getNearest=N})();const vv={toArrayBuffer(l,e){const t=l.width,s=l.height,i=t<<2,r=l.getContext("2d").getImageData(0,0,t,s),c=new Uint32Array(r.data.buffer),u=(32*t+31)/32<<2,h=u*s,p=122+h,f=new ArrayBuffer(p),g=new DataView(f),x=1<<20;let y,A,w,j,N=x,D=0,L=0,k=0;function U(R){g.setUint16(L,R,!0),L+=2}function C(R){g.setUint32(L,R,!0),L+=4}function B(R){L+=R}U(19778),C(p),B(4),C(122),C(108),C(t),C(-s>>>0),U(1),U(32),C(3),C(h),C(2835),C(2835),B(8),C(16711680),C(65280),C(255),C(4278190080),C(1466527264),(function R(){for(;D<s&&N>0;){for(j=122+D*u,y=0;y<i;)N--,A=c[k++],w=A>>>24,g.setUint32(j+y,A<<8|w),y+=4;D++}k<c.length?(N=x,setTimeout(R,vv._dly)):e(f)})()},toBlob(l,e){this.toArrayBuffer(l,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var Es={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},d_={[Es.CHROME]:16384,[Es.FIREFOX]:11180,[Es.DESKTOP_SAFARI]:16384,[Es.IE]:8192,[Es.IOS]:4096,[Es.ETC]:8192};const Sm=typeof window<"u",wv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,wd=Sm&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),u_=(Sm||wv)&&(wd&&wd.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Av=(Sm||wv)&&(wd&&wd.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function _m(l,e,t=Date.now()){return new Promise((s=>{const i=l.split(","),r=i[0].match(/:(.*?);/)[1],c=globalThis.atob(i[1]);let u=c.length;const h=new Uint8Array(u);for(;u--;)h[u]=c.charCodeAt(u);const p=new Blob([h],{type:r});p.name=e,p.lastModified=t,s(p)}))}function Nv(l){return new Promise(((e,t)=>{const s=new Av;s.onload=()=>e(s.result),s.onerror=i=>t(i),s.readAsDataURL(l)}))}function jv(l){return new Promise(((e,t)=>{const s=new Image;s.onload=()=>e(s),s.onerror=i=>t(i),s.src=l}))}function ca(){if(ca.cachedResult!==void 0)return ca.cachedResult;let l=Es.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?l=Es.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?l=Es.IOS:/Safari/i.test(e)?l=Es.DESKTOP_SAFARI:/Firefox/i.test(e)?l=Es.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(l=Es.IE),ca.cachedResult=l,ca.cachedResult}function Sv(l,e){const t=ca(),s=d_[t];let i=l,r=e,c=i*r;const u=i>r?r/i:i/r;for(;c>s*s;){const h=(s+i)/2,p=(s+r)/2;h<p?(r=p,i=p*u):(r=h*u,i=h),c=i*r}return{width:i,height:r}}function Id(l,e){let t,s;try{if(t=new OffscreenCanvas(l,e),s=t.getContext("2d"),s===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),s=t.getContext("2d")}return t.width=l,t.height=e,[t,s]}function _v(l,e){const{width:t,height:s}=Sv(l.width,l.height),[i,r]=Id(t,s);return e&&/jpe?g/.test(e)&&(r.fillStyle="white",r.fillRect(0,0,i.width,i.height)),r.drawImage(l,0,0,i.width,i.height),i}function md(){return md.cachedResult!==void 0||(md.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),md.cachedResult}function Ad(l,e={}){return new Promise((function(t,s){let i,r;var c=function(){try{return r=_v(i,e.fileType||l.type),t([i,r])}catch(h){return s(h)}},u=function(h){try{var p=function(f){try{throw f}catch(g){return s(g)}};try{let f;return Nv(l).then((function(g){try{return f=g,jv(f).then((function(x){try{return i=x,(function(){try{return c()}catch(y){return s(y)}})()}catch(y){return p(y)}}),p)}catch(x){return p(x)}}),p)}catch(f){p(f)}}catch(f){return s(f)}};try{if(md()||[Es.DESKTOP_SAFARI,Es.MOBILE_SAFARI].includes(ca()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(l).then((function(h){try{return i=h,c()}catch{return u()}}),u)}catch{u()}}))}function Nd(l,e,t,s,i=1){return new Promise((function(r,c){let u;if(e==="image/png"){let p,f,g;return p=l.getContext("2d"),{data:f}=p.getImageData(0,0,l.width,l.height),g=xn.encode([f.buffer],l.width,l.height,4096*i),u=new Blob([g],{type:e}),u.name=t,u.lastModified=s,h.call(this)}{let p=function(){return h.call(this)};if(e==="image/bmp")return new Promise((f=>vv.toBlob(l,f))).then((function(f){try{return u=f,u.name=t,u.lastModified=s,p.call(this)}catch(g){return c(g)}}).bind(this),c);{let f=function(){return p.call(this)};if(typeof OffscreenCanvas=="function"&&l instanceof OffscreenCanvas)return l.convertToBlob({type:e,quality:i}).then((function(g){try{return u=g,u.name=t,u.lastModified=s,f.call(this)}catch(x){return c(x)}}).bind(this),c);{let g;return g=l.toDataURL(e,i),_m(g,t,s).then((function(x){try{return u=x,f.call(this)}catch(y){return c(y)}}).bind(this),c)}}}function h(){return r(u)}}))}function Fn(l){l.width=0,l.height=0}function xr(){return new Promise((function(l,e){let t,s,i,r;return xr.cachedResult!==void 0?l(xr.cachedResult):_m("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return t=c,Ad(t).then((function(u){try{return s=u[1],Nd(s,t.type,t.name,t.lastModified).then((function(h){try{return i=h,Fn(s),Ad(i).then((function(p){try{return r=p[0],xr.cachedResult=r.width===1&&r.height===2,l(xr.cachedResult)}catch(f){return e(f)}}),e)}catch(p){return e(p)}}),e)}catch(h){return e(h)}}),e)}catch(u){return e(u)}}),e)}))}function Ev(l){return new Promise(((e,t)=>{const s=new Av;s.onload=i=>{const r=new DataView(i.target.result);if(r.getUint16(0,!1)!=65496)return e(-2);const c=r.byteLength;let u=2;for(;u<c;){if(r.getUint16(u+2,!1)<=8)return e(-1);const h=r.getUint16(u,!1);if(u+=2,h==65505){if(r.getUint32(u+=2,!1)!=1165519206)return e(-1);const p=r.getUint16(u+=6,!1)==18761;u+=r.getUint32(u+4,p);const f=r.getUint16(u,p);u+=2;for(let g=0;g<f;g++)if(r.getUint16(u+12*g,p)==274)return e(r.getUint16(u+12*g+8,p))}else{if((65280&h)!=65280)break;u+=r.getUint16(u,!1)}}return e(-1)},s.onerror=i=>t(i),s.readAsArrayBuffer(l)}))}function Cv(l,e){const{width:t}=l,{height:s}=l,{maxWidthOrHeight:i}=e;let r,c=l;return isFinite(i)&&(t>i||s>i)&&([c,r]=Id(t,s),t>s?(c.width=i,c.height=s/t*i):(c.width=t/s*i,c.height=i),r.drawImage(l,0,0,c.width,c.height),Fn(l)),c}function Tv(l,e){const{width:t}=l,{height:s}=l,[i,r]=Id(t,s);switch(e>4&&e<9?(i.width=s,i.height=t):(i.width=t,i.height=s),e){case 2:r.transform(-1,0,0,1,t,0);break;case 3:r.transform(-1,0,0,-1,t,s);break;case 4:r.transform(1,0,0,-1,0,s);break;case 5:r.transform(0,1,1,0,0,0);break;case 6:r.transform(0,1,-1,0,s,0);break;case 7:r.transform(0,-1,-1,0,s,t);break;case 8:r.transform(0,-1,1,0,0,t)}return r.drawImage(l,0,0,t,s),Fn(l),i}function kb(l,e,t=0){return new Promise((function(s,i){let r,c,u,h,p,f,g,x,y,A,w,j,N,D,L,k,U,C,B,R;function E(I=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;r+=I,e.onProgress(Math.min(r,100))}function O(I){if(e.signal&&e.signal.aborted)throw e.signal.reason;r=Math.min(Math.max(I,r),100),e.onProgress(r)}return r=t,c=e.maxIteration||10,u=1024*e.maxSizeMB*1024,E(),Ad(l,e).then((function(I){try{return[,h]=I,E(),p=Cv(h,e),E(),new Promise((function(V,z){var H;if(!(H=e.exifOrientation))return Ev(l).then((function(S){try{return H=S,$.call(this)}catch(_){return z(_)}}).bind(this),z);function $(){return V(H)}return $.call(this)})).then((function(V){try{return f=V,E(),xr().then((function(z){try{return g=z?p:Tv(p,f),E(),x=e.initialQuality||1,y=e.fileType||l.type,Nd(g,y,l.name,l.lastModified,x).then((function(H){try{{let S=function(){if(c--&&(L>u||L>N)){let q,Y;return q=R?.95*B.width:B.width,Y=R?.95*B.height:B.height,[U,C]=Id(q,Y),C.drawImage(B,0,0,q,Y),x*=y==="image/png"?.85:.95,Nd(U,y,l.name,l.lastModified,x).then((function(ee){try{return k=ee,Fn(B),B=U,L=k.size,O(Math.min(99,Math.floor((D-L)/(D-u)*100))),S}catch(F){return i(F)}}),i)}return[1]},_=function(){return Fn(B),Fn(U),Fn(p),Fn(g),Fn(h),O(100),s(k)};if(A=H,E(),w=A.size>u,j=A.size>l.size,!w&&!j)return O(100),s(A);var $;return N=l.size,D=A.size,L=D,B=g,R=!e.alwaysKeepResolution&&w,($=(function(q){for(;q;){if(q.then)return void q.then($,i);try{if(q.pop){if(q.length)return q.pop()?_.call(this):q;q=S}else q=q.call(this)}catch(Y){return i(Y)}}}).bind(this))(S)}}catch(S){return i(S)}}).bind(this),i)}catch(H){return i(H)}}).bind(this),i)}catch(z){return i(z)}}).bind(this),i)}catch(V){return i(V)}}).bind(this),i)}))}const h_=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Ef;function f_(l,e){return new Promise(((t,s)=>{Ef||(Ef=(function(c){const u=[];return u.push(c),URL.createObjectURL(new Blob(u))})(h_));const i=new Worker(Ef);i.addEventListener("message",(function(c){if(e.signal&&e.signal.aborted)i.terminate();else if(c.data.progress===void 0){if(c.data.error)return s(new Error(c.data.error)),void i.terminate();t(c.data.file),i.terminate()}else e.onProgress(c.data.progress)})),i.addEventListener("error",s),e.signal&&e.signal.addEventListener("abort",(()=>{s(e.signal.reason),i.terminate()})),i.postMessage({file:l,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function ls(l,e){return new Promise((function(t,s){let i,r,c,u,h,p;if(i={...e},c=0,{onProgress:u}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,h=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=y=>{c=y,typeof u=="function"&&u(c)},!(l instanceof Blob||l instanceof u_))return s(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(l.type))return s(new Error("The file given is not an image"));if(p=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!h||typeof Worker!="function"||p)return kb(l,i).then((function(y){try{return r=y,x.call(this)}catch(A){return s(A)}}).bind(this),s);var f=(function(){try{return x.call(this)}catch(y){return s(y)}}).bind(this),g=function(y){try{return kb(l,i).then((function(A){try{return r=A,f()}catch(w){return s(w)}}),s)}catch(A){return s(A)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",f_(l,i).then((function(y){try{return r=y,f()}catch{return g()}}),g)}catch{g()}function x(){try{r.name=l.name,r.lastModified=l.lastModified}catch{}try{i.preserveExif&&l.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===l.type)&&(r=yv(l,r))}catch{}return t(r)}}))}ls.getDataUrlFromFile=Nv,ls.getFilefromDataUrl=_m,ls.loadImage=jv,ls.drawImageInCanvas=_v,ls.drawFileInCanvas=Ad,ls.canvasToFile=Nd,ls.getExifOrientation=Ev,ls.handleMaxWidthOrHeight=Cv,ls.followExifOrientation=Tv,ls.cleanupCanvasMemory=Fn,ls.isAutoOrientationInBrowser=xr,ls.approximateBelowMaximumCanvasSizeOfBrowser=Sv,ls.copyExifWithoutOrientation=yv,ls.getBrowserName=ca,ls.version="2.0.2";const Rv=({images:l,onImagesChange:e,maxImages:t=10,onUploadProgress:s,enableCrop:i=!0})=>{const[r,c]=M.useState(!1),[u,h]=M.useState(null),[p,f]=M.useState({unit:"%",x:5,y:5,width:90,height:90,aspect:16/9}),[g,x]=M.useState(null),[y,A]=M.useState({}),[w,j]=M.useState([]),N=M.useRef(null),D=M.useRef(null),L=async E=>{const O=Array.from(E.target.files);if(l.length+O.length>t){alert(`Maximum ${t} images allowed`);return}const I=[];for(const V of O){const z=URL.createObjectURL(V);I.push({file:V,preview:z,progress:0})}j([...w,...I]);for(let V=0;V<O.length;V++){const z=O[V],H=w.length+V;A(S=>({...S,[H]:{stage:"compressing",progress:0}}));const $={maxSizeMB:2,maxWidthOrHeight:1920,useWebWorker:!0,onProgress:S=>{A(_=>({..._,[H]:{stage:"compressing",progress:S}}))}};try{const S=await ls(z,$);if(i){A(q=>({...q,[H]:{stage:"ready",progress:100}}));const _=new FileReader;_.onload=q=>{f({unit:"%",x:5,y:5,width:90,height:90,aspect:16/9}),h({file:S,src:q.target.result,index:l.length+V,previewIndex:H}),c(!0)},_.readAsDataURL(S)}else{A(q=>({...q,[H]:{stage:"ready",progress:100}}));const _=[...l,S];e(_),j(q=>q.filter((Y,ee)=>ee!==H)),A(q=>{const Y={...q};return delete Y[H],Y})}}catch(S){console.error("Error compressing image:",S),alert("Error processing image"),j(_=>_.filter((q,Y)=>Y!==H)),A(_=>{const q={..._};return delete q[H],q})}}},k=(E,O)=>new Promise((I,V)=>{if(!O||!O.width||!O.height||O.width<=0||O.height<=0){V(new Error("Invalid crop dimensions"));return}if(!E.complete||E.naturalWidth===0||E.naturalHeight===0){V(new Error("Image not fully loaded"));return}const z=document.createElement("canvas"),H=E.naturalWidth/E.width,$=E.naturalHeight/E.height,S=window.devicePixelRatio||1;let _,q,Y,ee;if(O.unit==="%"?(_=O.x/100*E.width*H,q=O.y/100*E.height*$,Y=O.width/100*E.width*H,ee=O.height/100*E.height*$):(_=O.x*H,q=O.y*$,Y=O.width*H,ee=O.height*$),_=Math.round(_),q=Math.round(q),Y=Math.round(Y),ee=Math.round(ee),_<0||q<0||Y<=0||ee<=0){V(new Error("Invalid crop coordinates"));return}if(_+Y>E.naturalWidth&&(Y=E.naturalWidth-_),q+ee>E.naturalHeight&&(ee=E.naturalHeight-q),Y<=0||ee<=0){V(new Error("Crop area is outside image bounds"));return}const F=Math.max(1,Math.round(Y)),G=Math.max(1,Math.round(ee));z.width=F*S,z.height=G*S;const Z=z.getContext("2d");if(!Z){V(new Error("Could not get canvas context"));return}Z.setTransform(S,0,0,S,0,0),Z.imageSmoothingQuality="high";try{Z.drawImage(E,_,q,Y,ee,0,0,F,G),z.toBlob(Q=>{if(!Q){V(new Error("Canvas is empty - failed to create blob"));return}I(Q)},"image/jpeg",.9)}catch(Q){V(new Error(`Error drawing image: ${Q.message}`))}}),U=async()=>{if(!(!N.current||!g||!u))try{A(z=>({...z,[u.previewIndex]:{stage:"cropping",progress:50}})),N.current.complete||await new Promise(z=>{N.current.onload=z,N.current.onerror=z});const E=await k(N.current,g),O=new File([E],u.file.name,{type:"image/jpeg"}),I=URL.createObjectURL(O);j(z=>{const H=[...z];return H[u.previewIndex]&&(H[u.previewIndex]={...H[u.previewIndex],file:O,preview:I}),H});const V=[...l,O];e(V),j(z=>z.filter((H,$)=>$!==u.previewIndex)),A(z=>{const H={...z};return delete H[u.previewIndex],H}),c(!1),h(null),x(null)}catch(E){console.error("Error cropping image:",E);try{const O=u.file,I=[...l,O];e(I);const V=URL.createObjectURL(O);j(z=>{const H=[...z];return H[u.previewIndex]&&(H[u.previewIndex]={...H[u.previewIndex],file:O,preview:V}),H}),j(z=>z.filter((H,$)=>$!==u.previewIndex)),A(z=>{const H={...z};return delete H[u.previewIndex],H}),c(!1),h(null),x(null),alert("Image cropping failed. Using original image instead.")}catch(O){console.error("Error in fallback:",O),alert(`Error processing image: ${E.message}. Please try again.`),j(I=>I.filter((V,z)=>z!==u.previewIndex)),A(I=>{const V={...I};return delete V[u.previewIndex],V}),c(!1),h(null),x(null)}}},C=E=>{const O=l.filter((I,V)=>V!==E);e(O),w[E]&&URL.revokeObjectURL(w[E].preview),j(I=>I.filter((V,z)=>z!==E)),A(I=>{const V={...I};return delete V[E],V})},B=E=>{const O=l[E],I=new FileReader;I.onload=V=>{f({unit:"%",x:5,y:5,width:90,height:90,aspect:16/9}),h({file:O,src:V.target.result,index:E,previewIndex:E}),c(!0)},I.readAsDataURL(O)},R=async()=>{if(!(!N.current||!g||!u))try{const E=await k(N.current,g),O=new File([E],u.file.name,{type:"image/jpeg"}),I=URL.createObjectURL(O);j(z=>{const H=[...z];return H[u.previewIndex]&&(URL.revokeObjectURL(H[u.previewIndex].preview),H[u.previewIndex]={...H[u.previewIndex],file:O,preview:I}),H});const V=[...l];V[u.index]=O,e(V),c(!1),h(null),x(null)}catch(E){console.error("Error replacing image:",E),alert("Error replacing image")}};return o.jsxs("div",{children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("input",{ref:D,type:"file",accept:"image/*",multiple:!0,onChange:L,className:"hidden"}),o.jsxs("button",{type:"button",onClick:()=>D.current?.click(),disabled:l.length>=t,className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition",children:["+ Add Images (",l.length,"/",t,")"]})]}),(l.length>0||w.length>0)&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[l.map((E,O)=>o.jsxs("div",{className:"relative group",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:URL.createObjectURL(E),alt:`Preview ${O+1}`,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200"}),o.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity rounded-lg flex items-center justify-center gap-2",children:[i&&o.jsx("button",{type:"button",onClick:()=>B(O),className:"opacity-0 group-hover:opacity-100 bg-white text-gray-800 px-3 py-1 rounded text-sm font-medium hover:bg-gray-100 transition",children:"Edit"}),o.jsx("button",{type:"button",onClick:()=>C(O),className:"opacity-0 group-hover:opacity-100 bg-red-600 text-white px-3 py-1 rounded text-sm font-medium hover:bg-red-700 transition",children:"Remove"})]})]}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-green-500 h-1 rounded-b-lg"})]},`image-${O}`)),w.map((E,O)=>{const I=l.length+O,V=y[I],z=V&&V.stage!=="complete";return o.jsxs("div",{className:"relative group",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:E.preview,alt:`Preview ${I+1}`,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200"}),z&&o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsxs("div",{className:"text-xs mb-1",children:[V.stage==="compressing"&&"Compressing...",V.stage==="cropping"&&"Processing...",V.stage==="ready"&&"Ready"]}),o.jsx("div",{className:"w-32 bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:"bg-amber-600 h-2 rounded-full transition-all duration-300",style:{width:`${V.progress}%`}})}),o.jsxs("div",{className:"text-xs mt-1",children:[Math.round(V.progress),"%"]})]})}),!z&&o.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity rounded-lg flex items-center justify-center gap-2",children:[i&&o.jsx("button",{type:"button",onClick:()=>{const H=new FileReader;H.onload=$=>{f({unit:"%",x:5,y:5,width:90,height:90,aspect:16/9}),h({file:E.file,src:$.target.result,index:l.length,previewIndex:O}),c(!0)},H.readAsDataURL(E.file)},className:"opacity-0 group-hover:opacity-100 bg-white text-gray-800 px-3 py-1 rounded text-sm font-medium hover:bg-gray-100 transition",children:"Edit"}),o.jsx("button",{type:"button",onClick:()=>{URL.revokeObjectURL(E.preview),j(H=>H.filter(($,S)=>S!==O)),A(H=>{const $={...H};return delete $[I],$})},className:"opacity-0 group-hover:opacity-100 bg-red-600 text-white px-3 py-1 rounded text-sm font-medium hover:bg-red-700 transition",children:"Remove"})]})]}),z&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gray-300 h-1 rounded-b-lg overflow-hidden",children:o.jsx("div",{className:"bg-amber-600 h-full transition-all duration-300",style:{width:`${V.progress}%`}})}),!z&&V?.stage==="complete"&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-green-500 h-1 rounded-b-lg"})]},`preview-${O}`)})]}),r&&u&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Crop & Edit Image"}),o.jsx("div",{className:"mb-4",children:o.jsx(a_,{src:u.src,crop:p,onChange:E=>f(E),onComplete:E=>x(E),aspect:16/9,children:o.jsx("img",{ref:N,src:u.src,alt:"Crop",style:{maxWidth:"100%"},onLoad:()=>{if(N.current){const{width:E,height:O}=N.current,I=16/9;let V=90,z=V/I*(E/O);z>90&&(z=90,V=z*I*(O/E)),f({unit:"%",x:(100-V)/2,y:(100-z)/2,width:V,height:z,aspect:I})}}})})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",onClick:u.index!==void 0&&u.index<l.length?R:U,className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:u.index!==void 0&&u.index<l.length?"Replace Image":"Add Image"}),o.jsx("button",{type:"button",onClick:()=>{c(!1),h(null),x(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})})]})},m_={getViews:(l,e,t=100)=>le.get("/admin/views",{params:{viewable_type:l,viewable_id:e,limit:t}}),getStats:(l,e)=>le.get("/admin/views/stats",{params:{viewable_type:l,viewable_id:e}})},wa=({isOpen:l,onClose:e,viewableType:t,viewableId:s})=>{const[i,r]=M.useState({views:[],stats:null,loading:!1});M.useEffect(()=>{l&&t&&s&&c()},[l,t,s]);const c=async()=>{r({views:[],stats:null,loading:!0});try{const u=await m_.getViews(t,s);r({views:u.data?.data||[],stats:u.data?.stats||null,loading:!1})}catch(u){console.error("Error fetching views:",u),r({views:[],stats:null,loading:!1}),alert("Error loading view data")}};return l?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"View Statistics & IP Addresses"}),o.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.loading?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{className:"space-y-6",children:[i.stats&&o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-gray-600",children:"Total Views"}),o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.stats.total_views||0})]}),o.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-gray-600",children:"Unique IPs"}),o.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.stats.unique_ips||0})]}),o.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm text-gray-600",children:"Views (24h)"}),o.jsx("div",{className:"text-2xl font-bold text-amber-600",children:i.stats.recent_views_24h||0})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"IP Addresses"}),i.views.length===0?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"No views recorded yet"}):o.jsx("div",{className:"bg-gray-50 rounded-lg overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"IP Address"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"User Agent"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Date"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.views.map(u=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-900",children:u.ip_address}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 truncate max-w-xs",title:u.user_agent||"N/A",children:u.user_agent||"N/A"}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:u.created_at?new Date(u.created_at).toLocaleString():"N/A"})]},u.id))})]})})]})]})]})}):null},p_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState([]),[i,r]=M.useState(!0),[c,u]=M.useState(!1),[h,p]=M.useState(!1),[f,g]=M.useState(!1),[x,y]=M.useState(null),[A,w]=M.useState(null),[j,N]=M.useState(null),[D,L]=M.useState({title:"",content:"",category_id:"",images:[],status:"draft"});M.useEffect(()=>{k(),U()},[]);const k=async()=>{try{const z=await qo.getAll();e(z.data?.data||[])}catch(z){console.error("Error fetching posts:",z)}finally{r(!1)}},U=async()=>{try{const z=await gr.getAll();s(z.data?.data||[])}catch(z){console.error("Error fetching categories:",z)}},C=z=>{if(!z||z.trim()==="")return!0;const H=document.createElement("div");return H.innerHTML=z,(H.textContent||H.innerText||"").trim()===""},B=async z=>{if(z.preventDefault(),!D.title||D.title.trim()===""){alert("Error saving post: The title field is required.");return}const H=D.content||"";if(C(H)){alert("Error saving post: The content field is required.");return}try{const $=new FormData;$.append("title",D.title.trim());const S=H||"";$.append("content",S),$.append("category_id",D.category_id||""),$.append("status",D.status),D.images.forEach((_,q)=>{$.append(`images[${q}]`,_)}),A?(console.log("Updating post:",A.id),console.log("Form data:",{title:D.title,contentLength:D.content?.length,category_id:D.category_id,status:D.status,imagesCount:D.images.length}),await qo.update(A.id,$),alert("Post updated successfully!")):(await qo.create($),alert("Post created successfully!")),u(!1),V(),k()}catch($){if(console.error("Error saving post:",$),$.response?.data?.message)alert(`Error saving post: ${$.response.data.message}`);else if($.response?.data?.errors){const S=$.response.data.errors;let _=`Validation failed:
`;for(const q in S)_+=`- ${S[q].join(", ")}
`;alert(_)}else alert("Error saving post: "+($.message||"Unknown error"))}},R=z=>{y(z),p(!0)},E=z=>{N(z),g(!0)},O=z=>{w(z);const H=z.content||"";L({title:z.title||"",content:H,category_id:z.category_id?String(z.category_id):"",images:[],status:z.status||"draft"}),u(!0)},I=async z=>{if(confirm("Are you sure you want to delete this post?"))try{await qo.delete(z),k()}catch(H){console.error("Error deleting post:",H),alert("Error deleting post")}},V=()=>{L({title:"",content:"",category_id:"",images:[],status:"draft"}),w(null)};return i?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Posts"}),o.jsx("button",{onClick:()=>{V(),u(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Post"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Views"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(z=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:text-amber-600 transition",onClick:()=>R(z),title:"Click to view details",children:z.title})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"text-sm text-gray-500",children:z.category?.name||"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${z.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:z.status})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:()=>E(z),className:"text-blue-600 hover:text-blue-900 font-semibold cursor-pointer",title:"Click to view IP addresses",children:z.views_count||0})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx("button",{onClick:()=>R(z),className:"text-blue-600 hover:text-blue-900 mr-3",title:"View Details",children:"View"}),o.jsx("button",{onClick:()=>O(z),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),o.jsx("button",{onClick:()=>I(z.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},z.id))})]})}),c&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:A?"Edit Post":"Create New Post"}),o.jsxs("form",{onSubmit:B,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),o.jsx("input",{type:"text",required:!0,value:D.title,onChange:z=>L({...D,title:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),o.jsxs("select",{value:D.category_id,onChange:z=>L({...D,category_id:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",children:[o.jsx("option",{value:"",children:"Select Category (Optional)"}),t.map(z=>o.jsx("option",{value:z.id,children:z.name},z.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content *"}),o.jsx(Ud,{value:D.content,onChange:z=>L({...D,content:z}),placeholder:"Write your post content here..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Images"}),o.jsx(Rv,{images:D.images,onImagesChange:z=>L({...D,images:z}),maxImages:10,enableCrop:!1}),A&&A.image&&D.images.length===0&&o.jsxs("div",{className:"mt-2",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Current Image:"}),o.jsx("img",{src:A.image,alt:"Current",className:"h-32 w-auto rounded-lg border border-gray-300"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),o.jsxs("select",{value:D.status,onChange:z=>L({...D,status:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",children:[o.jsx("option",{value:"draft",children:"Draft"}),o.jsx("option",{value:"published",children:"Published"})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:A?"Update":"Create"}),o.jsx("button",{type:"button",onClick:()=>{u(!1),V()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),h&&x&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Post Details"}),o.jsx("button",{onClick:()=>{p(!1),y(null)},className:"text-gray-500 hover:text-gray-700",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"space-y-6",children:[x.image&&o.jsx("div",{children:o.jsx("img",{src:x.image,alt:x.title,className:"w-full h-64 object-cover rounded-lg"})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),o.jsx("div",{className:"text-lg font-semibold text-gray-900",children:x.title})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),o.jsx("div",{className:"text-gray-900",children:x.category?.name||"N/A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),o.jsx("span",{className:`inline-block px-3 py-1 text-xs rounded-full ${x.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:x.status})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created At"}),o.jsx("div",{className:"text-gray-900",children:x.created_at?new Date(x.created_at).toLocaleString():"N/A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated At"}),o.jsx("div",{className:"text-gray-900",children:x.updated_at?new Date(x.updated_at).toLocaleString():"N/A"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),o.jsx("div",{className:"prose max-w-none p-4 bg-gray-50 rounded-lg border border-gray-200",dangerouslySetInnerHTML:{__html:x.content}})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[o.jsx("button",{onClick:()=>{p(!1),O(x)},className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:"Edit Post"}),o.jsx("button",{onClick:()=>{p(!1),y(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]})]})]})}),o.jsx(wa,{isOpen:f,onClose:()=>{g(!1),N(null)},viewableType:j?"App\\Models\\Post":null,viewableId:j?.id||null})]})},g_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(!0),[i,r]=M.useState(!1),[c,u]=M.useState(null),[h,p]=M.useState({name:"",description:""});M.useEffect(()=>{f()},[]);const f=async()=>{try{const w=await gr.getAll();e(w.data?.data||[])}catch(w){console.error("Error fetching categories:",w)}finally{s(!1)}},g=async w=>{w.preventDefault();try{c?await gr.update(c.id,h):await gr.create(h),r(!1),A(),f()}catch(j){console.error("Error saving category:",j),alert("Error saving category")}},x=w=>{u(w),p({name:w.name||"",description:w.description||""}),r(!0)},y=async w=>{if(confirm("Are you sure you want to delete this category?"))try{await gr.delete(w),f()}catch(j){console.error("Error deleting category:",j),alert("Error deleting category")}},A=()=>{p({name:"",description:""}),u(null)};return t?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Categories"}),o.jsx("button",{onClick:()=>{A(),r(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Category"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(w=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.name})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-500",children:w.description||"N/A"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx("button",{onClick:()=>x(w),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),o.jsx("button",{onClick:()=>y(w.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},w.id))})]})}),i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:c?"Edit Category":"Create New Category"}),o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),o.jsx("input",{type:"text",required:!0,value:h.name,onChange:w=>p({...h,name:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{rows:4,value:h.description,onChange:w=>p({...h,description:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:c?"Update":"Create"}),o.jsx("button",{type:"button",onClick:()=>{r(!1),A()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})})]})},Uc={getAll:()=>le.get("/admin/dhammas"),getById:l=>le.get(`/admin/dhammas/${l}`),create:l=>le.post("/admin/dhammas",l),update:(l,e)=>e instanceof FormData?(e.append("_method","PUT"),le.post(`/admin/dhammas/${l}`,e)):le.put(`/admin/dhammas/${l}`,e),delete:l=>le.delete(`/admin/dhammas/${l}`)},x_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(!0),[i,r]=M.useState(!1),[c,u]=M.useState(!1),[h,p]=M.useState(!1),[f,g]=M.useState(null),[x,y]=M.useState(null),[A,w]=M.useState(null),[j,N]=M.useState({title:"",content:"",speaker:"",date:"",images:[]});M.useEffect(()=>{D()},[]);const D=async()=>{try{const E=await Uc.getAll();e(E.data?.data||[])}catch(E){console.error("Error fetching dhammas:",E)}finally{s(!1)}},L=async E=>{E.preventDefault();try{const O=new FormData;O.append("title",j.title.trim()),O.append("content",j.content||""),O.append("speaker",j.speaker.trim()),O.append("date",j.date),j.images.forEach((I,V)=>{O.append(`images[${V}]`,I)}),x?(console.log("Updating dhamma:",x.id),await Uc.update(x.id,O),alert("Dhamma talk updated successfully!")):(await Uc.create(O),alert("Dhamma talk created successfully!")),r(!1),R(),D()}catch(O){if(console.error("Error saving dhamma:",O),O.response?.data?.message)alert(`Error saving dhamma talk: ${O.response.data.message}`);else if(O.response?.data?.errors){const I=O.response.data.errors;let V=`Validation failed:
`;for(const z in I)V+=`- ${I[z].join(", ")}
`;alert(V)}else alert("Error saving dhamma talk: "+(O.message||"Unknown error"))}},k=E=>{g(E),u(!0)},U=E=>{w(E),p(!0)},C=E=>{y(E);const O=E.content||"";N({title:E.title||"",content:O,speaker:E.speaker||"",date:E.date?E.date.split("T")[0]:"",images:[]}),r(!0)},B=async E=>{if(confirm("Are you sure you want to delete this dhamma talk?"))try{await Uc.delete(E),D()}catch(O){console.error("Error deleting dhamma:",O),alert("Error deleting dhamma talk")}},R=()=>{N({title:"",content:"",speaker:"",date:"",images:[]}),y(null)};return t?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Dhamma Talks"}),o.jsx("button",{onClick:()=>{R(),r(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Dhamma Talk"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Speaker"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Views"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(E=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:text-amber-600 transition",onClick:()=>k(E),title:"Click to view details",children:E.title})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:E.speaker})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:E.date?new Date(E.date).toLocaleDateString():"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:()=>U(E),className:"text-blue-600 hover:text-blue-900 font-semibold cursor-pointer",title:"Click to view IP addresses",children:E.views_count||0})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx("button",{onClick:()=>k(E),className:"text-blue-600 hover:text-blue-900 mr-3",title:"View Details",children:"View"}),o.jsx("button",{onClick:()=>C(E),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),o.jsx("button",{onClick:()=>B(E.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},E.id))})]})}),i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:x?"Edit Dhamma Talk":"Create New Dhamma Talk"}),o.jsxs("form",{onSubmit:L,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),o.jsx("input",{type:"text",required:!0,value:j.title,onChange:E=>N({...j,title:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Speaker *"}),o.jsx("input",{type:"text",required:!0,value:j.speaker,onChange:E=>N({...j,speaker:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date *"}),o.jsx("input",{type:"date",required:!0,value:j.date,onChange:E=>N({...j,date:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content *"}),o.jsx(Ud,{value:j.content,onChange:E=>N({...j,content:E}),placeholder:"Write the dhamma talk content here..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Images"}),o.jsx(Rv,{images:j.images,onImagesChange:E=>N({...j,images:E}),maxImages:10}),x&&x.image&&j.images.length===0&&o.jsxs("div",{className:"mt-2",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Current Image:"}),o.jsx("img",{src:x.image,alt:"Current",className:"h-32 w-auto rounded-lg border border-gray-300"})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:x?"Update":"Create"}),o.jsx("button",{type:"button",onClick:()=>{r(!1),R()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),c&&f&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Dhamma Talk Details"}),o.jsx("button",{onClick:()=>{u(!1),g(null)},className:"text-gray-500 hover:text-gray-700",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"space-y-6",children:[f.image&&o.jsx("div",{children:o.jsx("img",{src:f.image,alt:f.title,className:"w-full h-64 object-cover rounded-lg"})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),o.jsx("div",{className:"text-lg font-semibold text-gray-900",children:f.title})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Speaker"}),o.jsx("div",{className:"text-gray-900",children:f.speaker||"N/A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),o.jsx("div",{className:"text-gray-900",children:f.date?new Date(f.date).toLocaleDateString():"N/A"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created At"}),o.jsx("div",{className:"text-gray-900",children:f.created_at?new Date(f.created_at).toLocaleString():"N/A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated At"}),o.jsx("div",{className:"text-gray-900",children:f.updated_at?new Date(f.updated_at).toLocaleString():"N/A"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),o.jsx("div",{className:"prose max-w-none p-4 bg-gray-50 rounded-lg border border-gray-200",dangerouslySetInnerHTML:{__html:f.content}})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[o.jsx("button",{onClick:()=>{u(!1),C(f)},className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:"Edit Dhamma Talk"}),o.jsx("button",{onClick:()=>{u(!1),g(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]})]})]})}),o.jsx(wa,{isOpen:h,onClose:()=>{p(!1),w(null)},viewableType:A?"App\\Models\\Dhamma":null,viewableId:A?.id||null})]})},b_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(!0),[i,r]=M.useState(!1),[c,u]=M.useState(!1),[h,p]=M.useState(null),[f,g]=M.useState(null),[x,y]=M.useState({donor_name:"",amount:"",donation_type:"",date:"",status:"pending"});M.useEffect(()=>{A()},[]);const A=async()=>{try{const C=await ra.getAll();e(C.data?.data||[])}catch(C){console.error("Error fetching donations:",C)}finally{s(!1)}},w=async C=>{C.preventDefault();try{h?await ra.update(h.id,x):await ra.create(x),r(!1),U(),A()}catch(B){console.error("Error saving donation:",B),alert("Error saving donation")}},j=async C=>{try{await ra.approve(C),A()}catch(B){console.error("Error approving donation:",B),alert("Error approving donation")}},N=async C=>{try{await ra.reject(C),A()}catch(B){console.error("Error rejecting donation:",B),alert("Error rejecting donation")}},D=C=>{p(C),y({donor_name:C.donor_name||"",amount:C.amount||"",donation_type:C.donation_type||"",date:C.date||"",status:C.status||"pending"}),r(!0)},L=C=>{g(C),u(!0)},k=async C=>{if(confirm("Are you sure you want to delete this donation?"))try{await ra.delete(C),A()}catch(B){console.error("Error deleting donation:",B),alert("Error deleting donation")}},U=()=>{y({donor_name:"",amount:"",donation_type:"",date:"",status:"pending"}),p(null)};return t?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Donations"}),o.jsx("button",{onClick:()=>{U(),r(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Donation"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Donor Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Views"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(C=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.donor_name})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm text-gray-900",children:[C.amount," Ks"]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:C.donation_type})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:C.date})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${C.status==="approved"?"bg-green-100 text-green-800":C.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:C.status})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:()=>L(C),className:"text-blue-600 hover:text-blue-900 font-semibold cursor-pointer",title:"Click to view IP addresses",children:C.views_count||0})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[C.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>j(C.id),className:"text-green-600 hover:text-green-900 mr-3",children:"Approve"}),o.jsx("button",{onClick:()=>N(C.id),className:"text-red-600 hover:text-red-900 mr-3",children:"Reject"})]}),o.jsx("button",{onClick:()=>D(C),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),o.jsx("button",{onClick:()=>k(C.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},C.id))})]})}),i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:h?"Edit Donation":"Create New Donation"}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Donor Name"}),o.jsx("input",{type:"text",required:!0,value:x.donor_name,onChange:C=>y({...x,donor_name:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),o.jsx("input",{type:"number",required:!0,value:x.amount,onChange:C=>y({...x,amount:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Donation Type"}),o.jsx("input",{type:"text",required:!0,value:x.donation_type,onChange:C=>y({...x,donation_type:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),o.jsx("input",{type:"date",required:!0,value:x.date,onChange:C=>y({...x,date:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),o.jsxs("select",{value:x.status,onChange:C=>y({...x,status:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",children:[o.jsx("option",{value:"pending",children:"Pending"}),o.jsx("option",{value:"approved",children:"Approved"}),o.jsx("option",{value:"rejected",children:"Rejected"})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:h?"Update":"Create"}),o.jsx("button",{type:"button",onClick:()=>{r(!1),U()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),o.jsx(wa,{isOpen:c,onClose:()=>{u(!1),g(null)},viewableType:f?"App\\Models\\Donation":null,viewableId:f?.id||null})]})},Ic={getAll:()=>le.get("/admin/biographies"),getById:l=>le.get(`/admin/biographies/${l}`),create:l=>le.post("/admin/biographies",l),update:(l,e)=>e instanceof FormData?(e.append("_method","PUT"),le.post(`/admin/biographies/${l}`,e)):le.put(`/admin/biographies/${l}`,e),delete:l=>le.delete(`/admin/biographies/${l}`)},y_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(!0),[i,r]=M.useState(!1),[c,u]=M.useState(!1),[h,p]=M.useState(!1),[f,g]=M.useState(null),[x,y]=M.useState(null),[A,w]=M.useState(null),[j,N]=M.useState({name:"",birth_year:"",sangha_entry_year:"",disciples:"",teaching_monastery:"",sangha_dhamma:"",image:null});M.useEffect(()=>{D()},[]);const D=async()=>{try{const E=await Ic.getAll();e(E.data?.data||[])}catch(E){console.error("Error fetching biographies:",E)}finally{s(!1)}},L=async E=>{E.preventDefault();try{const O=new FormData;O.append("name",j.name.trim()),O.append("birth_year",j.birth_year||""),O.append("sangha_entry_year",j.sangha_entry_year||""),O.append("disciples",j.disciples||""),O.append("teaching_monastery",j.teaching_monastery||""),O.append("sangha_dhamma",j.sangha_dhamma||""),j.image&&O.append("image",j.image),x?(console.log("Updating biography:",x.id),await Ic.update(x.id,O),alert("Biography updated successfully!")):(await Ic.create(O),alert("Biography created successfully!")),r(!1),R(),D()}catch(O){if(console.error("Error saving biography:",O),O.response?.data?.message)alert(`Error saving biography: ${O.response.data.message}`);else if(O.response?.data?.errors){const I=O.response.data.errors;let V=`Validation failed:
`;for(const z in I)V+=`- ${I[z].join(", ")}
`;alert(V)}else alert("Error saving biography: "+(O.message||"Unknown error"))}},k=E=>{g(E),u(!0)},U=E=>{w(E),p(!0)},C=E=>{y(E),N({name:E.name||"",birth_year:E.birth_year||"",sangha_entry_year:E.sangha_entry_year||"",disciples:E.disciples||"",teaching_monastery:E.teaching_monastery||"",sangha_dhamma:E.sangha_dhamma||"",image:null}),r(!0)},B=async E=>{if(confirm("Are you sure you want to delete this biography?"))try{await Ic.delete(E),D()}catch(O){console.error("Error deleting biography:",O),alert("Error deleting biography")}},R=()=>{N({name:"",birth_year:"",sangha_entry_year:"",disciples:"",teaching_monastery:"",sangha_dhamma:"",image:null}),y(null)};return t?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Biographies"}),o.jsx("button",{onClick:()=>{R(),r(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Biography"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Birth Year"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sangha Entry"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Disciples"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Views"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(E=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:text-amber-600 transition",onClick:()=>k(E),title:"Click to view details",children:E.name})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:E.birth_year})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:E.sangha_entry_year})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:E.disciples})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:()=>U(E),className:"text-blue-600 hover:text-blue-900 font-semibold cursor-pointer",title:"Click to view IP addresses",children:E.views_count||0})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx("button",{onClick:()=>k(E),className:"text-blue-600 hover:text-blue-900 mr-3",title:"View Details",children:"View"}),o.jsx("button",{onClick:()=>C(E),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),o.jsx("button",{onClick:()=>B(E.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},E.id))})]})}),i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:x?"Edit Biography":"Create New Biography"}),o.jsxs("form",{onSubmit:L,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),o.jsx("input",{type:"text",required:!0,value:j.name,onChange:E=>N({...j,name:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Birth Year"}),o.jsx("input",{type:"text",value:j.birth_year,onChange:E=>N({...j,birth_year:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sangha Entry Year"}),o.jsx("input",{type:"text",value:j.sangha_entry_year,onChange:E=>N({...j,sangha_entry_year:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Disciples"}),o.jsx("input",{type:"text",value:j.disciples,onChange:E=>N({...j,disciples:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teaching Monastery"}),o.jsx("input",{type:"text",value:j.teaching_monastery,onChange:E=>N({...j,teaching_monastery:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sangha Dhamma"}),o.jsx("textarea",{rows:4,value:j.sangha_dhamma,onChange:E=>N({...j,sangha_dhamma:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image"}),o.jsx("input",{type:"file",accept:"image/*",onChange:E=>N({...j,image:E.target.files[0]}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:x?"Update":"Create"}),o.jsx("button",{type:"button",onClick:()=>{r(!1),R()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),c&&f&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Biography Details"}),o.jsx("button",{onClick:()=>{u(!1),g(null)},className:"text-gray-500 hover:text-gray-700",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"space-y-6",children:[f.image&&o.jsx("div",{className:"flex justify-center",children:o.jsx("img",{src:f.image,alt:f.name,className:"w-64 h-64 object-cover rounded-lg"})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),o.jsx("div",{className:"text-lg font-semibold text-gray-900",children:f.name})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Birth Year"}),o.jsx("div",{className:"text-gray-900",children:f.birth_year||"N/A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sangha Entry Year"}),o.jsx("div",{className:"text-gray-900",children:f.sangha_entry_year||"N/A"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Disciples"}),o.jsx("div",{className:"text-gray-900",children:f.disciples||"N/A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teaching Monastery"}),o.jsx("div",{className:"text-gray-900",children:f.teaching_monastery||"N/A"})]})]}),f.sangha_dhamma&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sangha Dhamma"}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 whitespace-pre-wrap text-gray-900",children:f.sangha_dhamma})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created At"}),o.jsx("div",{className:"text-gray-900",children:f.created_at?new Date(f.created_at).toLocaleString():"N/A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated At"}),o.jsx("div",{className:"text-gray-900",children:f.updated_at?new Date(f.updated_at).toLocaleString():"N/A"})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[o.jsx("button",{onClick:()=>{u(!1),C(f)},className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:"Edit Biography"}),o.jsx("button",{onClick:()=>{u(!1),g(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]})]})]})}),o.jsx(wa,{isOpen:h,onClose:()=>{p(!1),w(null)},viewableType:A?"App\\Models\\Biography":null,viewableId:A?.id||null})]})},zc={getAll:()=>le.get("/admin/monasteries"),getById:l=>le.get(`/admin/monasteries/${l}`),create:l=>le.post("/admin/monasteries",l),update:(l,e)=>le.put(`/admin/monasteries/${l}`,e),delete:l=>le.delete(`/admin/monasteries/${l}`)},v_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(!0),[i,r]=M.useState(!1),[c,u]=M.useState(null),[h,p]=M.useState({name:"",type:"monastery",monastery_name:"",monks:0,novices:0,order:0});M.useEffect(()=>{f()},[]);const f=async()=>{try{const N=await zc.getAll();e(N.data?.data||[])}catch(N){console.error("Error fetching monasteries:",N)}finally{s(!1)}},g=async N=>{N.preventDefault();try{c?await zc.update(c.id,h):await zc.create(h),r(!1),A(),f()}catch(D){console.error("Error saving monastery:",D),alert("Error saving monastery")}},x=N=>{u(N),p({name:N.name||"",type:N.type||"monastery",monastery_name:N.monastery_name||"",monks:N.monks||0,novices:N.novices||0,order:N.order||0}),r(!0)},y=async N=>{if(confirm("Are you sure you want to delete this monastery?"))try{await zc.delete(N),f()}catch(D){console.error("Error deleting monastery:",D),alert("Error deleting monastery")}},A=()=>{p({name:"",type:"monastery",monastery_name:"",monks:0,novices:0,order:0}),u(null)};if(t)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})});const w=l.filter(N=>N.type==="monastery"),j=l.filter(N=>N.type==="building");return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Monasteries"}),o.jsx("button",{onClick:()=>{A(),r(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Monastery"})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Monasteries"}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Order"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Monks"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Novices"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(N=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:N.order})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.name})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:N.monks})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:N.novices})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-semibold text-amber-600",children:N.total})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx("button",{onClick:()=>x(N),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),o.jsx("button",{onClick:()=>y(N.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},N.id))})]})})})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Buildings"}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Order"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Monastery Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Monks"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Novices"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(N=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:N.order})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.name})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-500",children:N.monastery_name||"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:N.monks})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:N.novices})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-semibold text-amber-600",children:N.total})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx("button",{onClick:()=>x(N),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),o.jsx("button",{onClick:()=>y(N.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},N.id))})]})})})]}),i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:c?"Edit Monastery":"Create New Monastery"}),o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),o.jsxs("select",{required:!0,value:h.type,onChange:N=>p({...h,type:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",children:[o.jsx("option",{value:"monastery",children:"Monastery"}),o.jsx("option",{value:"building",children:"Building"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),o.jsx("input",{type:"text",required:!0,value:h.name,onChange:N=>p({...h,name:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),h.type==="building"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monastery Name (Parent)"}),o.jsx("input",{type:"text",value:h.monastery_name,onChange:N=>p({...h,monastery_name:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"Optional"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monks"}),o.jsx("input",{type:"number",required:!0,min:"0",value:h.monks,onChange:N=>p({...h,monks:parseInt(N.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Novices"}),o.jsx("input",{type:"number",required:!0,min:"0",value:h.novices,onChange:N=>p({...h,novices:parseInt(N.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order"}),o.jsx("input",{type:"number",min:"0",value:h.order,onChange:N=>p({...h,order:parseInt(N.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]})]}),o.jsx("div",{className:"bg-amber-50 p-3 rounded-lg",children:o.jsxs("p",{className:"text-sm text-gray-700",children:[o.jsx("strong",{children:"Total:"})," ",h.monks+h.novices," (Monks: ",h.monks," + Novices: ",h.novices,")"]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:c?"Update":"Create"}),o.jsx("button",{type:"button",onClick:()=>{r(!1),A()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})})]})},Hc={getAll:()=>le.get("/admin/monastery-building-donations"),getById:l=>le.get(`/admin/monastery-building-donations/${l}`),create:l=>le.post("/admin/monastery-building-donations",l),update:(l,e)=>le.put(`/admin/monastery-building-donations/${l}`,e),delete:l=>le.delete(`/admin/monastery-building-donations/${l}`)},w_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(!0),[i,r]=M.useState(!1),[c,u]=M.useState(null),[h,p]=M.useState({donor_name:"",amount:"",donation_purpose:"",date:"",description:""});M.useEffect(()=>{f()},[]);const f=async()=>{try{const w=await Hc.getAll();e(w.data?.data||[])}catch(w){console.error("Error fetching monastery building donations:",w)}finally{s(!1)}},g=async w=>{w.preventDefault();try{c?await Hc.update(c.id,h):await Hc.create(h),r(!1),A(),f()}catch(j){console.error("Error saving monastery building donation:",j),alert("Error saving donation record")}},x=w=>{u(w),p({donor_name:w.donor_name||"",amount:w.amount||"",donation_purpose:w.donation_purpose||"",date:w.date||"",description:w.description||""}),r(!0)},y=async w=>{if(confirm("Are you sure you want to delete this donation record?"))try{await Hc.delete(w),f()}catch(j){console.error("Error deleting donation:",j),alert("Error deleting donation record")}},A=()=>{p({donor_name:"",amount:"",donation_purpose:"",date:"",description:""}),u(null)};return t?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Monastery Building Donations"}),o.jsx("button",{onClick:()=>{A(),r(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Record"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Donor Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Purpose"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(w=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.donor_name})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm text-gray-900",children:[w.amount," Ks"]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-500",children:w.donation_purpose})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:w.date})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx("button",{onClick:()=>x(w),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),o.jsx("button",{onClick:()=>y(w.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},w.id))})]})}),i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:c?"Edit Donation Record":"Create New Donation Record"}),o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Donor Name"}),o.jsx("input",{type:"text",required:!0,value:h.donor_name,onChange:w=>p({...h,donor_name:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),o.jsx("input",{type:"number",required:!0,value:h.amount,onChange:w=>p({...h,amount:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Donation Purpose"}),o.jsx("input",{type:"text",required:!0,value:h.donation_purpose,onChange:w=>p({...h,donation_purpose:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),o.jsx("input",{type:"date",required:!0,value:h.date,onChange:w=>p({...h,date:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{rows:4,value:h.description,onChange:w=>p({...h,description:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:c?"Update":"Create"}),o.jsx("button",{type:"button",onClick:()=>{r(!1),A()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})})]})},A_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(!0),[i,r]=M.useState(!1),[c,u]=M.useState(null);M.useEffect(()=>{h()},[]);const h=async()=>{try{const x=await fd.getAll();e(x.data?.data||[])}catch(x){console.error("Error fetching contacts:",x)}finally{s(!1)}},p=async x=>{try{await fd.markAsRead(x),h()}catch(y){console.error("Error marking as read:",y),alert("Error updating contact")}},f=x=>{u(x),r(!0),x.is_read||p(x.id)},g=async x=>{if(confirm("Are you sure you want to delete this contact?"))try{await fd.delete(x),h()}catch(y){console.error("Error deleting contact:",y),alert("Error deleting contact")}};return t?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{children:[o.jsx("div",{className:"flex justify-between items-center mb-6",children:o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Contacts"})}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(x=>o.jsxs("tr",{className:`hover:bg-gray-50 ${x.is_read?"":"bg-blue-50"}`,children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.name})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:x.email})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-500",children:x.subject||"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:new Date(x.created_at).toLocaleDateString()})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${x.is_read?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:x.is_read?"Read":"New"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx("button",{onClick:()=>f(x),className:"text-amber-600 hover:text-amber-900 mr-3",children:"View"}),o.jsx("button",{onClick:()=>g(x.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},x.id))})]})}),i&&c&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Contact Details"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),o.jsx("p",{className:"text-gray-900",children:c.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),o.jsx("p",{className:"text-gray-900",children:c.email})]}),c.phone&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),o.jsx("p",{className:"text-gray-900",children:c.phone})]}),c.subject&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),o.jsx("p",{className:"text-gray-900",children:c.subject})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),o.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:c.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),o.jsx("p",{className:"text-gray-900",children:new Date(c.created_at).toLocaleString()})]})]}),o.jsx("div",{className:"mt-6",children:o.jsx("button",{onClick:()=>{r(!1),u(null)},className:"w-full bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Close"})})]})})]})},Vc={getAll:()=>le.get("/admin/banners"),getById:l=>le.get(`/admin/banners/${l}`),create:l=>{const e=new FormData;return e.append("image",l.image),l.order!==void 0&&l.order!==null&&l.order!==""&&e.append("order",parseInt(l.order)||0),l.is_active!==void 0&&e.append("is_active",l.is_active?"1":"0"),le.post("/admin/banners",e)},update:(l,e)=>{const t=new FormData;return e.image&&t.append("image",e.image),e.order!==void 0&&e.order!==null&&e.order!==""&&t.append("order",parseInt(e.order)||0),e.is_active!==void 0&&t.append("is_active",e.is_active?"1":"0"),t.append("_method","PUT"),le.post(`/admin/banners/${l}`,t)},delete:l=>le.delete(`/admin/banners/${l}`)},qc={getAll:()=>le.get("/admin/banner-texts"),getById:l=>le.get(`/admin/banner-texts/${l}`),create:l=>le.post("/admin/banner-texts",l),update:(l,e)=>le.put(`/admin/banner-texts/${l}`,e),delete:l=>le.delete(`/admin/banner-texts/${l}`)},N_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(!0),[i,r]=M.useState(!1),[c,u]=M.useState(null),[h,p]=M.useState({image:null,order:0,is_active:!0});M.useEffect(()=>{f()},[]);const f=async()=>{try{const w=await Vc.getAll();e(w.data?.data||[])}catch(w){console.error("Error fetching banners:",w)}finally{s(!1)}},g=async w=>{w.preventDefault();try{c?await Vc.update(c.id,h):await Vc.create(h),r(!1),A(),f()}catch(j){console.error("Error saving banner:",j),alert("Error saving banner")}},x=w=>{u(w),p({image:null,order:w.order||0,is_active:w.is_active!==void 0?w.is_active:!0}),r(!0)},y=async w=>{if(confirm("Are you sure you want to delete this banner?"))try{await Vc.delete(w),f()}catch(j){console.error("Error deleting banner:",j),alert("Error deleting banner")}},A=()=>{p({image:null,order:0,is_active:!0}),u(null)};return t?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Banners"}),o.jsx("button",{onClick:()=>{A(),r(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Banner"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Image"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Order"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(w=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:w.image&&o.jsx("img",{src:w.image,alt:"Banner",className:"h-20 w-32 object-cover rounded"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:w.order})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${w.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.is_active?"Active":"Inactive"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx("button",{onClick:()=>x(w),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),o.jsx("button",{onClick:()=>y(w.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},w.id))})]})}),i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:c?"Edit Banner":"Create New Banner"}),o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c?"New Image (optional)":"Image *"}),o.jsx("input",{type:"file",accept:"image/*",required:!c,onChange:w=>p({...h,image:w.target.files[0]}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"}),c&&c.image&&o.jsx("img",{src:c.image,alt:"Current",className:"mt-2 h-32 w-full object-cover rounded"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order"}),o.jsx("input",{type:"number",min:"0",value:h.order,onChange:w=>p({...h,order:parseInt(w.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsx("div",{children:o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:h.is_active,onChange:w=>p({...h,is_active:w.target.checked}),className:"mr-2"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:c?"Update":"Create"}),o.jsx("button",{type:"button",onClick:()=>{r(!1),A()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})})]})},j_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(!0),[i,r]=M.useState(!1),[c,u]=M.useState(null),[h,p]=M.useState({text:"",is_active:!0});M.useEffect(()=>{f()},[]);const f=async()=>{try{const w=await qc.getAll();e(w.data?.data||[])}catch(w){console.error("Error fetching banner texts:",w)}finally{s(!1)}},g=async w=>{w.preventDefault();try{c?await qc.update(c.id,h):await qc.create(h),r(!1),A(),f()}catch(j){console.error("Error saving banner text:",j),alert("Error saving banner text")}},x=w=>{u(w),p({text:w.text||"",is_active:w.is_active!==void 0?w.is_active:!0}),r(!0)},y=async w=>{if(confirm("Are you sure you want to delete this banner text?"))try{await qc.delete(w),f()}catch(j){console.error("Error deleting banner text:",j),alert("Error deleting banner text")}},A=()=>{p({text:"",is_active:!0}),u(null)};return t?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Banner Texts"}),o.jsx("button",{onClick:()=>{A(),r(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Banner Text"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Text"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(w=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-900 max-w-md truncate",children:w.text})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${w.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.is_active?"Active":"Inactive"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx("button",{onClick:()=>x(w),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),o.jsx("button",{onClick:()=>y(w.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},w.id))})]})}),i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:c?"Edit Banner Text":"Create New Banner Text"}),o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Text *"}),o.jsx("textarea",{required:!0,rows:4,value:h.text,onChange:w=>p({...h,text:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"Enter banner text for marquee..."})]}),o.jsx("div",{children:o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:h.is_active,onChange:w=>p({...h,is_active:w.target.checked}),className:"mr-2"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:c?"Update":"Create"}),o.jsx("button",{type:"button",onClick:()=>{r(!1),A()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})})]})},br={getAll:()=>le.get("/admin/academic-years"),getById:l=>le.get(`/admin/academic-years/${l}`),create:l=>le.post("/admin/academic-years",l),update:(l,e)=>le.put(`/admin/academic-years/${l}`,e),delete:l=>le.delete(`/admin/academic-years/${l}`)},S_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(!0),[i,r]=M.useState(!1),[c,u]=M.useState(!1),[h,p]=M.useState(null),[f,g]=M.useState(null),[x,y]=M.useState({name:"",code:"",start_date:"",end_date:"",is_active:!1,description:""});M.useEffect(()=>{A()},[]);const A=async()=>{try{const k=await br.getAll();e(k.data?.data||[])}catch(k){console.error("Error fetching academic years:",k)}finally{s(!1)}},w=async k=>{k.preventDefault();try{f?await br.update(f.id,x):await br.create(x),r(!1),L(),A()}catch(U){console.error("Error saving academic year:",U),alert("Error saving academic year")}},j=k=>{p(k),u(!0)},N=k=>{g(k),y({name:k.name||"",code:k.code||"",start_date:k.start_date||"",end_date:k.end_date||"",is_active:k.is_active||!1,description:k.description||""}),r(!0)},D=async k=>{if(confirm("Are you sure you want to delete this academic year?"))try{await br.delete(k),A()}catch(U){console.error("Error deleting academic year:",U),alert("Error deleting academic year")}},L=()=>{y({name:"",code:"",start_date:"",end_date:"",is_active:!1,description:""}),g(null)};return t?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Academic Years"}),o.jsx("button",{onClick:()=>{L(),r(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Academic Year"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Start Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"End Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(k=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.name})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:k.code})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:k.start_date?new Date(k.start_date).toLocaleDateString():"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:k.end_date?new Date(k.end_date).toLocaleDateString():"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${k.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:k.is_active?"Active":"Inactive"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx("button",{onClick:()=>j(k),className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),o.jsx("button",{onClick:()=>N(k),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),o.jsx("button",{onClick:()=>D(k.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},k.id))})]})}),i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:f?"Edit Academic Year":"Create New Academic Year"}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),o.jsx("input",{type:"text",required:!0,value:x.name,onChange:k=>y({...x,name:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"e.g., 2024-2025"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),o.jsx("input",{type:"text",required:!0,value:x.code,onChange:k=>y({...x,code:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"e.g., AY2024-25"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),o.jsx("input",{type:"date",required:!0,value:x.start_date,onChange:k=>y({...x,start_date:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),o.jsx("input",{type:"date",required:!0,value:x.end_date,onChange:k=>y({...x,end_date:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:x.is_active,onChange:k=>y({...x,is_active:k.target.checked}),className:"mr-2"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Set as Active Academic Year"})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"(Activating this will deactivate all other academic years)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{rows:4,value:x.description,onChange:k=>y({...x,description:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"Optional description..."})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:f?"Update":"Create"}),o.jsx("button",{type:"button",onClick:()=>{r(!1),L()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),c&&h&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Academic Year Details"}),o.jsx("button",{onClick:()=>{u(!1),p(null)},className:"text-gray-500 hover:text-gray-700",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),o.jsx("div",{className:"text-lg font-semibold text-gray-900",children:h.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),o.jsx("div",{className:"text-gray-900",children:h.code})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),o.jsx("div",{className:"text-gray-900",children:h.start_date?new Date(h.start_date).toLocaleDateString():"N/A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),o.jsx("div",{className:"text-gray-900",children:h.end_date?new Date(h.end_date).toLocaleDateString():"N/A"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${h.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:h.is_active?"Active":"Inactive"})]}),h.description&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("div",{className:"text-gray-900",children:h.description})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[o.jsx("button",{onClick:()=>{u(!1),N(h)},className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:"Edit Academic Year"}),o.jsx("button",{onClick:()=>{u(!1),p(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]})]})]})})]})},da={getAll:()=>le.get("/admin/subjects"),getById:l=>le.get(`/admin/subjects/${l}`),create:l=>le.post("/admin/subjects",l),update:(l,e)=>le.put(`/admin/subjects/${l}`,e),delete:l=>le.delete(`/admin/subjects/${l}`)},__=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(!0),[i,r]=M.useState(!1),[c,u]=M.useState(!1),[h,p]=M.useState(null),[f,g]=M.useState(null),[x,y]=M.useState({name:"",code:"",description:"",credit_hours:1,is_active:!0});M.useEffect(()=>{A()},[]);const A=async()=>{try{const k=await da.getAll();e(k.data?.data||[])}catch(k){console.error("Error fetching subjects:",k)}finally{s(!1)}},w=async k=>{k.preventDefault();try{f?await da.update(f.id,x):await da.create(x),r(!1),L(),A()}catch(U){console.error("Error saving subject:",U),alert("Error saving subject")}},j=k=>{p(k),u(!0)},N=k=>{g(k),y({name:k.name||"",code:k.code||"",description:k.description||"",credit_hours:k.credit_hours||1,is_active:k.is_active!==void 0?k.is_active:!0}),r(!0)},D=async k=>{if(confirm("Are you sure you want to delete this subject?"))try{await da.delete(k),A()}catch(U){console.error("Error deleting subject:",U),alert("Error deleting subject")}},L=()=>{y({name:"",code:"",description:"",credit_hours:1,is_active:!0}),g(null)};return t?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Subjects"}),o.jsx("button",{onClick:()=>{L(),r(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Subject"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Credit Hours"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(k=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.name})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:k.code})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:k.credit_hours||1})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${k.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:k.is_active?"Active":"Inactive"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx("button",{onClick:()=>j(k),className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),o.jsx("button",{onClick:()=>N(k),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),o.jsx("button",{onClick:()=>D(k.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},k.id))})]})}),i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:f?"Edit Subject":"Create New Subject"}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),o.jsx("input",{type:"text",required:!0,value:x.name,onChange:k=>y({...x,name:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"e.g., Mathematics"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),o.jsx("input",{type:"text",required:!0,value:x.code,onChange:k=>y({...x,code:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"e.g., MATH101"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Credit Hours"}),o.jsx("input",{type:"number",min:"1",value:x.credit_hours,onChange:k=>y({...x,credit_hours:parseInt(k.target.value)||1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsx("div",{children:o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:x.is_active,onChange:k=>y({...x,is_active:k.target.checked}),className:"mr-2"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{rows:4,value:x.description,onChange:k=>y({...x,description:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"Optional description..."})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:f?"Update":"Create"}),o.jsx("button",{type:"button",onClick:()=>{r(!1),L()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),c&&h&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Subject Details"}),o.jsx("button",{onClick:()=>{u(!1),p(null)},className:"text-gray-500 hover:text-gray-700",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),o.jsx("div",{className:"text-lg font-semibold text-gray-900",children:h.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),o.jsx("div",{className:"text-gray-900",children:h.code})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Credit Hours"}),o.jsx("div",{className:"text-gray-900",children:h.credit_hours||1})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${h.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:h.is_active?"Active":"Inactive"})]}),h.description&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("div",{className:"text-gray-900",children:h.description})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[o.jsx("button",{onClick:()=>{u(!1),N(h)},className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:"Edit Subject"}),o.jsx("button",{onClick:()=>{u(!1),p(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]})]})]})})]})},ua={getAll:()=>le.get("/admin/classes"),getById:l=>le.get(`/admin/classes/${l}`),create:l=>le.post("/admin/classes",l),update:(l,e)=>le.put(`/admin/classes/${l}`,e),delete:l=>le.delete(`/admin/classes/${l}`)},zd={getAll:()=>le.get("/admin/users"),getTeachers:()=>le.get("/admin/users?role=teacher")},E_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState([]),[i,r]=M.useState([]),[c,u]=M.useState(!0),[h,p]=M.useState(!1),[f,g]=M.useState(!1),[x,y]=M.useState(null),[A,w]=M.useState(null),[j,N]=M.useState({name:"",code:"",grade_level:1,section:"",capacity:30,is_active:!0,academic_year_id:"",class_teacher_id:""});M.useEffect(()=>{D()},[]);const D=async()=>{try{const[R,E,O]=await Promise.all([ua.getAll(),br.getAll(),zd.getAll()]);e(R.data?.data||[]),s(E.data?.data||[]),r(O.data?.data||[])}catch(R){console.error("Error fetching data:",R)}finally{u(!1)}},L=async R=>{R.preventDefault();try{A?await ua.update(A.id,j):await ua.create(j),p(!1),B(),D()}catch(E){console.error("Error saving class:",E),alert("Error saving class")}},k=R=>{y(R),g(!0)},U=R=>{w(R),N({name:R.name||"",code:R.code||"",grade_level:R.grade_level||1,section:R.section||"",capacity:R.capacity||30,is_active:R.is_active!==void 0?R.is_active:!0,academic_year_id:R.academic_year_id||"",class_teacher_id:R.class_teacher_id||""}),p(!0)},C=async R=>{if(confirm("Are you sure you want to delete this class?"))try{await ua.delete(R),D()}catch(E){console.error("Error deleting class:",E),alert("Error deleting class")}},B=()=>{N({name:"",code:"",grade_level:1,section:"",capacity:30,is_active:!0,academic_year_id:"",class_teacher_id:""}),w(null)};return c?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Classes"}),o.jsx("button",{onClick:()=>{B(),p(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Class"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Grade Level"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Section"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Academic Year"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(R=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:R.name})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:R.code})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:R.grade_level})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:R.section||"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:R.academic_year?.name||"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${R.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:R.is_active?"Active":"Inactive"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx("button",{onClick:()=>k(R),className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),o.jsx("button",{onClick:()=>U(R),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),o.jsx("button",{onClick:()=>C(R.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},R.id))})]})}),h&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:A?"Edit Class":"Create New Class"}),o.jsxs("form",{onSubmit:L,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),o.jsx("input",{type:"text",required:!0,value:j.name,onChange:R=>N({...j,name:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"e.g., Grade 1-A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),o.jsx("input",{type:"text",required:!0,value:j.code,onChange:R=>N({...j,code:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"e.g., G1A"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade Level *"}),o.jsx("input",{type:"number",min:"1",required:!0,value:j.grade_level,onChange:R=>N({...j,grade_level:parseInt(R.target.value)||1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section"}),o.jsx("input",{type:"text",value:j.section,onChange:R=>N({...j,section:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"e.g., A, B, C"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity"}),o.jsx("input",{type:"number",min:"1",value:j.capacity,onChange:R=>N({...j,capacity:parseInt(R.target.value)||30}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year *"}),o.jsxs("select",{required:!0,value:j.academic_year_id,onChange:R=>N({...j,academic_year_id:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",children:[o.jsx("option",{value:"",children:"Select Academic Year"}),t.map(R=>o.jsxs("option",{value:R.id,children:[R.name," (",R.code,")"]},R.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Teacher"}),o.jsxs("select",{value:j.class_teacher_id,onChange:R=>N({...j,class_teacher_id:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",children:[o.jsx("option",{value:"",children:"Select Teacher (Admin)"}),i.map(R=>o.jsxs("option",{value:R.id,children:[R.name," (",R.email,")"]},R.id))]})]}),o.jsx("div",{children:o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:j.is_active,onChange:R=>N({...j,is_active:R.target.checked}),className:"mr-2"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:A?"Update":"Create"}),o.jsx("button",{type:"button",onClick:()=>{p(!1),B()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),f&&x&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Class Details"}),o.jsx("button",{onClick:()=>{g(!1),y(null)},className:"text-gray-500 hover:text-gray-700",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),o.jsx("div",{className:"text-lg font-semibold text-gray-900",children:x.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),o.jsx("div",{className:"text-gray-900",children:x.code})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade Level"}),o.jsx("div",{className:"text-gray-900",children:x.grade_level})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section"}),o.jsx("div",{className:"text-gray-900",children:x.section||"N/A"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity"}),o.jsx("div",{className:"text-gray-900",children:x.capacity})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year"}),o.jsxs("div",{className:"text-gray-900",children:[x.academic_year?.name||"N/A"," (",x.academic_year?.code||"N/A",")"]})]}),x.class_teacher&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Teacher"}),o.jsxs("div",{className:"text-gray-900",children:[x.class_teacher.name," (",x.class_teacher.email,")"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${x.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:x.is_active?"Active":"Inactive"})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[o.jsx("button",{onClick:()=>{g(!1),U(x)},className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:"Edit Class"}),o.jsx("button",{onClick:()=>{g(!1),y(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]})]})]})})]})},Gc={getAll:()=>le.get("/admin/lessons"),getById:l=>le.get(`/admin/lessons/${l}`),create:l=>le.post("/admin/lessons",l),update:(l,e)=>e instanceof FormData?(e.append("_method","PUT"),le.post(`/admin/lessons/${l}`,e)):le.put(`/admin/lessons/${l}`,e),delete:l=>le.delete(`/admin/lessons/${l}`)},C_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState([]),[i,r]=M.useState([]),[c,u]=M.useState([]),[h,p]=M.useState(!0),[f,g]=M.useState(!1),[x,y]=M.useState(!1),[A,w]=M.useState(!1),[j,N]=M.useState(null),[D,L]=M.useState(null),[k,U]=M.useState(null),[C,B]=M.useState({title:"",description:"",content:"",class_id:"",subject_id:"",teacher_id:"",lesson_date:"",duration_minutes:60,status:"draft",attachments:[]});M.useEffect(()=>{R()},[]);const R=async()=>{try{const[_,q,Y,ee]=await Promise.all([Gc.getAll(),ua.getAll(),da.getAll(),zd.getAll()]);e(_.data?.data||[]),s(q.data?.data||[]),r(Y.data?.data||[]),u(ee.data?.data||[])}catch(_){console.error("Error fetching data:",_)}finally{p(!1)}},E=async _=>{_.preventDefault();try{const q=new FormData;q.append("title",C.title.trim()),q.append("description",C.description||""),q.append("content",C.content||""),q.append("class_id",String(C.class_id||"")),q.append("subject_id",String(C.subject_id||"")),q.append("teacher_id",String(C.teacher_id||"")),q.append("lesson_date",C.lesson_date||""),q.append("duration_minutes",C.duration_minutes||60),q.append("status",C.status),C.attachments.forEach((Y,ee)=>{q.append(`attachments[${ee}]`,Y)}),D?(console.log("Updating lesson:",D.id),await Gc.update(D.id,q),alert("Lesson updated successfully!")):(await Gc.create(q),alert("Lesson created successfully!")),g(!1),S(),R()}catch(q){if(console.error("Error saving lesson:",q),q.response?.data?.message)alert(`Error saving lesson: ${q.response.data.message}`);else if(q.response?.data?.errors){const Y=q.response.data.errors;let ee=`Validation failed:
`;for(const F in Y)ee+=`- ${Y[F].join(", ")}
`;alert(ee)}else alert("Error saving lesson: "+(q.message||"Unknown error"))}},O=_=>{N(_),y(!0)},I=_=>{U(_),w(!0)},V=_=>{L(_);const q=_.content||"",Y=_.description||"";B({title:_.title||"",description:Y,content:q,class_id:_.class_id?String(_.class_id):"",subject_id:_.subject_id?String(_.subject_id):"",teacher_id:_.teacher_id?String(_.teacher_id):"",lesson_date:_.lesson_date?_.lesson_date.split("T")[0]:"",duration_minutes:_.duration_minutes||60,status:_.status||"draft",attachments:[]}),g(!0)},z=async _=>{if(confirm("Are you sure you want to delete this lesson?"))try{await Gc.delete(_),R()}catch(q){console.error("Error deleting lesson:",q),alert("Error deleting lesson")}},H=_=>{const q=Array.from(_.target.files);B({...C,attachments:[...C.attachments,...q]})},$=_=>{const q=C.attachments.filter((Y,ee)=>ee!==_);B({...C,attachments:q})},S=()=>{B({title:"",description:"",content:"",class_id:"",subject_id:"",teacher_id:"",lesson_date:"",duration_minutes:60,status:"draft",attachments:[]}),L(null)};return h?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Lessons"}),o.jsx("button",{onClick:()=>{S(),g(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Lesson"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Teacher"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Views"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(_=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.title})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:_.class?.name||"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:_.subject?.name||"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:_.teacher?.name||"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:_.lesson_date?new Date(_.lesson_date).toLocaleDateString():"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${_.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:_.status})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:()=>I(_),className:"text-blue-600 hover:text-blue-900 font-semibold cursor-pointer",title:"Click to view IP addresses",children:_.views_count||0})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx("button",{onClick:()=>O(_),className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),o.jsx("button",{onClick:()=>V(_),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),o.jsx("button",{onClick:()=>z(_.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},_.id))})]})}),f&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-5xl max-h-[95vh] overflow-hidden flex flex-col",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-amber-50 to-amber-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:D?" Edit Lesson":" Create New Lesson"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:D?"Update lesson information":"Fill in the details to create a new lesson"})]}),o.jsx("button",{onClick:()=>{g(!1),S()},className:"text-gray-500 hover:text-gray-700 transition-colors",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsxs("form",{onSubmit:E,className:"flex-1 overflow-y-auto p-6 space-y-6",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 border border-gray-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[o.jsx("span",{className:"mr-2",children:""})," Basic Information"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Lesson Title ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",required:!0,value:C.title,onChange:_=>B({...C,title:_.target.value}),placeholder:"Enter lesson title...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),o.jsx("textarea",{rows:3,value:C.description,onChange:_=>B({...C,description:_.target.value}),placeholder:"Brief description of the lesson...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition resize-none"})]})]})]}),o.jsxs("div",{className:"bg-blue-50 rounded-lg p-5 border border-blue-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[o.jsx("span",{className:"mr-2",children:""})," Class & Subject Details"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Class ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{required:!0,value:C.class_id,onChange:_=>B({...C,class_id:_.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white",children:[o.jsx("option",{value:"",children:"Select Class"}),t.map(_=>o.jsx("option",{value:_.id,children:_.name},_.id))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Subject ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{required:!0,value:C.subject_id,onChange:_=>B({...C,subject_id:_.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white",children:[o.jsx("option",{value:"",children:"Select Subject"}),i.map(_=>o.jsx("option",{value:_.id,children:_.name},_.id))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Teacher (Admin) ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{required:!0,value:C.teacher_id,onChange:_=>B({...C,teacher_id:_.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white",children:[o.jsx("option",{value:"",children:"Select Teacher"}),c.map(_=>o.jsxs("option",{value:_.id,children:[_.name," (",_.email,")"]},_.id))]})]})]})]}),o.jsxs("div",{className:"bg-green-50 rounded-lg p-5 border border-green-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[o.jsx("span",{className:"mr-2",children:""})," Schedule & Duration"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lesson Date"}),o.jsx("input",{type:"date",value:C.lesson_date,onChange:_=>B({...C,lesson_date:_.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes)"}),o.jsx("input",{type:"number",min:"1",value:C.duration_minutes,onChange:_=>B({...C,duration_minutes:parseInt(_.target.value)||60}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white"})]})]})]}),o.jsxs("div",{className:"bg-purple-50 rounded-lg p-5 border border-purple-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[o.jsx("span",{className:"mr-2",children:""})," Lesson Content"]}),o.jsx("div",{className:"border-2 border-gray-300 rounded-lg overflow-hidden bg-white",children:o.jsx(Ud,{value:C.content,onChange:_=>B({...C,content:_})})})]}),o.jsxs("div",{className:"bg-orange-50 rounded-lg p-5 border border-orange-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[o.jsx("span",{className:"mr-2",children:""})," Attachments"]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Files"}),o.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 hover:border-amber-500 transition",children:o.jsx("input",{type:"file",multiple:!0,onChange:H,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 cursor-pointer"})}),C.attachments.length>0&&o.jsxs("div",{className:"mt-4 space-y-2",children:[o.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Selected Files:"}),C.attachments.map((_,q)=>o.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-amber-600",children:""}),o.jsx("span",{className:"text-sm text-gray-700 font-medium",children:_.name}),o.jsxs("span",{className:"text-xs text-gray-500",children:["(",(_.size/1024).toFixed(2)," KB)"]})]}),o.jsx("button",{type:"button",onClick:()=>$(q),className:"text-red-600 hover:text-red-800 hover:bg-red-50 px-3 py-1 rounded transition",children:" Remove"})]},q))]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 border border-gray-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[o.jsx("span",{className:"mr-2",children:""})," Status"]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Publication Status ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{required:!0,value:C.status,onChange:_=>B({...C,status:_.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white",children:[o.jsx("option",{value:"draft",children:" Draft (Not visible to public)"}),o.jsx("option",{value:"published",children:" Published (Visible to public)"})]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[o.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-amber-600 to-amber-700 text-white py-3 rounded-lg hover:from-amber-700 hover:to-amber-800 transition shadow-lg font-semibold",children:D?" Update Lesson":" Create Lesson"}),o.jsx("button",{type:"button",onClick:()=>{g(!1),S()},className:"flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition font-semibold",children:" Cancel"})]})]})]})}),x&&j&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Lesson Details"}),o.jsx("button",{onClick:()=>{y(!1),N(null)},className:"text-gray-500 hover:text-gray-700",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),o.jsx("div",{className:"text-lg font-semibold text-gray-900",children:j.title})]}),j.description&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("div",{className:"text-gray-900",children:j.description})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),o.jsx("div",{className:"text-gray-900",children:j.class?.name||"N/A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),o.jsx("div",{className:"text-gray-900",children:j.subject?.name||"N/A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher"}),o.jsx("div",{className:"text-gray-900",children:j.teacher?.name||"N/A"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lesson Date"}),o.jsx("div",{className:"text-gray-900",children:j.lesson_date?new Date(j.lesson_date).toLocaleDateString():"N/A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration"}),o.jsxs("div",{className:"text-gray-900",children:[j.duration_minutes||60," minutes"]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:j.status})]}),j.content&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),o.jsx("div",{className:"prose max-w-none p-4 bg-gray-50 rounded-lg border border-gray-200",dangerouslySetInnerHTML:{__html:j.content}})]}),j.attachments&&j.attachments.length>0&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Attachments"}),o.jsx("div",{className:"space-y-2",children:j.attachments.map((_,q)=>o.jsxs("a",{href:_,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline",children:["Attachment ",q+1]},q))})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[o.jsx("button",{onClick:()=>{y(!1),V(j)},className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:"Edit Lesson"}),o.jsx("button",{onClick:()=>{y(!1),N(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]})]})]})}),o.jsx(wa,{isOpen:A,onClose:()=>{w(!1),U(null)},viewableType:k?"App\\Models\\Lesson":null,viewableId:k?.id||null})]})},$c={getAll:()=>le.get("/admin/video-lessons"),getById:l=>le.get(`/admin/video-lessons/${l}`),create:l=>le.post("/admin/video-lessons",l),update:(l,e)=>le.put(`/admin/video-lessons/${l}`,e),delete:l=>le.delete(`/admin/video-lessons/${l}`)},T_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState([]),[i,r]=M.useState([]),[c,u]=M.useState([]),[h,p]=M.useState(!0),[f,g]=M.useState(!1),[x,y]=M.useState(!1),[A,w]=M.useState(!1),[j,N]=M.useState(null),[D,L]=M.useState(null),[k,U]=M.useState(null),[C,B]=M.useState({title:"",description:"",class_id:"",subject_id:"",teacher_id:"",video_url:"",lesson_date:"",duration_minutes:60,status:"draft"});M.useEffect(()=>{R()},[]);const R=async()=>{try{const[S,_,q,Y]=await Promise.all([$c.getAll(),ua.getAll(),da.getAll(),zd.getAll()]);e(S.data?.data||[]),s(_.data?.data||[]),r(q.data?.data||[]),u(Y.data?.data||[])}catch(S){console.error("Error fetching data:",S)}finally{p(!1)}},E=async S=>{S.preventDefault();try{const _={title:C.title.trim(),description:C.description||"",class_id:parseInt(C.class_id),subject_id:parseInt(C.subject_id),teacher_id:parseInt(C.teacher_id),video_url:C.video_url.trim(),lesson_date:C.lesson_date||null,duration_minutes:C.duration_minutes||60,status:C.status};D?(await $c.update(D.id,_),alert("Video lesson updated successfully!")):(await $c.create(_),alert("Video lesson created successfully!")),g(!1),H(),R()}catch(_){if(console.error("Error saving video lesson:",_),_.response?.data?.message)alert(`Error saving video lesson: ${_.response.data.message}`);else if(_.response?.data?.errors){const q=_.response.data.errors;let Y=`Validation failed:
`;for(const ee in q)Y+=`- ${q[ee].join(", ")}
`;alert(Y)}else alert("Error saving video lesson: "+(_.message||"Unknown error"))}},O=S=>{N(S),y(!0)},I=S=>{U(S),w(!0)},V=S=>{L(S),B({title:S.title||"",description:S.description||"",class_id:S.class_id?String(S.class_id):"",subject_id:S.subject_id?String(S.subject_id):"",teacher_id:S.teacher_id?String(S.teacher_id):"",video_url:S.video_url||"",lesson_date:S.lesson_date?S.lesson_date.split("T")[0]:"",duration_minutes:S.duration_minutes||60,status:S.status||"draft"}),g(!0)},z=async S=>{if(confirm("Are you sure you want to delete this video lesson?"))try{await $c.delete(S),R()}catch(_){console.error("Error deleting video lesson:",_),alert("Error deleting video lesson")}},H=()=>{B({title:"",description:"",class_id:"",subject_id:"",teacher_id:"",video_url:"",lesson_date:"",duration_minutes:60,status:"draft"}),L(null)},$=S=>{if(!S)return null;const _=[/youtube\.com\/watch\?v=([a-zA-Z0-9_-]+)/,/youtu\.be\/([a-zA-Z0-9_-]+)/,/youtube\.com\/embed\/([a-zA-Z0-9_-]+)/,/youtube\.com\/v\/([a-zA-Z0-9_-]+)/];for(const q of _){const Y=S.match(q);if(Y)return Y[1]}return null};return h?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Video Lessons"}),o.jsx("button",{onClick:()=>{H(),g(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Video Lesson"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Teacher"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Views"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(S=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.title})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:S.class?.name||"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:S.subject?.name||"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:S.teacher?.name||"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:S.lesson_date?new Date(S.lesson_date).toLocaleDateString():"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${S.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:S.status})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:()=>I(S),className:"text-blue-600 hover:text-blue-900 font-semibold cursor-pointer",title:"Click to view IP addresses",children:S.views_count||0})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx("button",{onClick:()=>O(S),className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),o.jsx("button",{onClick:()=>V(S),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),o.jsx("button",{onClick:()=>z(S.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},S.id))})]})}),f&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[95vh] overflow-hidden flex flex-col",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-amber-50 to-amber-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:D?" Edit Video Lesson":" Create New Video Lesson"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:D?"Update video lesson information":"Fill in the details to create a new video lesson"})]}),o.jsx("button",{onClick:()=>{g(!1),H()},className:"text-gray-500 hover:text-gray-700 transition-colors",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsxs("form",{onSubmit:E,className:"flex-1 overflow-y-auto p-6 space-y-6",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 border border-gray-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[o.jsx("span",{className:"mr-2",children:""})," Basic Information"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Video Lesson Title ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",required:!0,value:C.title,onChange:S=>B({...C,title:S.target.value}),placeholder:"Enter video lesson title...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),o.jsx("textarea",{rows:3,value:C.description,onChange:S=>B({...C,description:S.target.value}),placeholder:"Brief description of the video lesson...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition resize-none"})]})]})]}),o.jsxs("div",{className:"bg-red-50 rounded-lg p-5 border border-red-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[o.jsx("span",{className:"mr-2",children:""})," YouTube Video"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["YouTube Video URL ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"url",required:!0,value:C.video_url,onChange:S=>B({...C,video_url:S.target.value}),placeholder:"https://www.youtube.com/watch?v=...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition"}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Supported formats: youtube.com/watch?v=..., youtu.be/..., youtube.com/embed/..."})]}),C.video_url&&$(C.video_url)&&o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview"}),o.jsx("div",{className:"relative w-full",style:{paddingBottom:"56.25%"},children:o.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full rounded-lg",src:`https://www.youtube.com/embed/${$(C.video_url)}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})]})]}),o.jsxs("div",{className:"bg-blue-50 rounded-lg p-5 border border-blue-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[o.jsx("span",{className:"mr-2",children:""})," Class & Subject Details"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Class ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{required:!0,value:C.class_id,onChange:S=>B({...C,class_id:S.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white",children:[o.jsx("option",{value:"",children:"Select Class"}),t.map(S=>o.jsx("option",{value:S.id,children:S.name},S.id))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Subject ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{required:!0,value:C.subject_id,onChange:S=>B({...C,subject_id:S.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white",children:[o.jsx("option",{value:"",children:"Select Subject"}),i.map(S=>o.jsx("option",{value:S.id,children:S.name},S.id))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Teacher (Admin) ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{required:!0,value:C.teacher_id,onChange:S=>B({...C,teacher_id:S.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white",children:[o.jsx("option",{value:"",children:"Select Teacher"}),c.map(S=>o.jsxs("option",{value:S.id,children:[S.name," (",S.email,")"]},S.id))]})]})]})]}),o.jsxs("div",{className:"bg-green-50 rounded-lg p-5 border border-green-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[o.jsx("span",{className:"mr-2",children:""})," Schedule & Duration"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lesson Date"}),o.jsx("input",{type:"date",value:C.lesson_date,onChange:S=>B({...C,lesson_date:S.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes)"}),o.jsx("input",{type:"number",min:"1",value:C.duration_minutes,onChange:S=>B({...C,duration_minutes:parseInt(S.target.value)||60}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white"})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 border border-gray-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[o.jsx("span",{className:"mr-2",children:""})," Status"]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Publication Status ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{required:!0,value:C.status,onChange:S=>B({...C,status:S.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white",children:[o.jsx("option",{value:"draft",children:" Draft (Not visible to public)"}),o.jsx("option",{value:"published",children:" Published (Visible to public)"})]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[o.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-amber-600 to-amber-700 text-white py-3 rounded-lg hover:from-amber-700 hover:to-amber-800 transition shadow-lg font-semibold",children:D?" Update Video Lesson":" Create Video Lesson"}),o.jsx("button",{type:"button",onClick:()=>{g(!1),H()},className:"flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition font-semibold",children:" Cancel"})]})]})]})}),x&&j&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Video Lesson Details"}),o.jsx("button",{onClick:()=>{y(!1),N(null)},className:"text-gray-500 hover:text-gray-700",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),o.jsx("div",{className:"text-lg font-semibold text-gray-900",children:j.title})]}),j.description&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("div",{className:"text-gray-900",children:j.description})]}),j.video_url&&$(j.video_url)&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video"}),o.jsx("div",{className:"relative w-full",style:{paddingBottom:"56.25%"},children:o.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full rounded-lg",src:`https://www.youtube.com/embed/${$(j.video_url)}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),o.jsx("div",{className:"text-gray-900",children:j.class?.name||"N/A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),o.jsx("div",{className:"text-gray-900",children:j.subject?.name||"N/A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher"}),o.jsx("div",{className:"text-gray-900",children:j.teacher?.name||"N/A"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lesson Date"}),o.jsx("div",{className:"text-gray-900",children:j.lesson_date?new Date(j.lesson_date).toLocaleDateString():"N/A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration"}),o.jsxs("div",{className:"text-gray-900",children:[j.duration_minutes||60," minutes"]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:j.status})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[o.jsx("button",{onClick:()=>{y(!1),V(j)},className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:"Edit Video Lesson"}),o.jsx("button",{onClick:()=>{y(!1),N(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]})]})]})}),o.jsx(wa,{isOpen:A,onClose:()=>{w(!1),U(null)},viewableType:k?"App\\Models\\VideoLesson":null,viewableId:k?.id||null})]})},Yc={getAll:()=>le.get("/admin/questions"),getById:l=>le.get(`/admin/questions/${l}`),create:l=>le.post("/admin/questions",l),update:(l,e)=>e instanceof FormData?(e.append("_method","PUT"),le.post(`/admin/questions/${l}`,e)):le.put(`/admin/questions/${l}`,e),delete:l=>le.delete(`/admin/questions/${l}`)},R_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState([]),[i,r]=M.useState([]),[c,u]=M.useState([]),[h,p]=M.useState([]),[f,g]=M.useState(!0),[x,y]=M.useState(!1),[A,w]=M.useState(!1),[j,N]=M.useState(!1),[D,L]=M.useState(!1),[k,U]=M.useState(null),[C,B]=M.useState(null),[R,E]=M.useState(null),[O,I]=M.useState({title:"",description:"",academic_year_id:"",class_id:"",subject_id:"",teacher_id:"",content:"",pdf_file:null});M.useEffect(()=>{V()},[]);const V=async()=>{try{const[F,G,Z,Q,K]=await Promise.all([Yc.getAll(),br.getAll(),ua.getAll(),da.getAll(),zd.getAll()]);e(F.data?.data||[]),s(G.data?.data||[]),r(Z.data?.data||[]),u(Q.data?.data||[]),p(K.data?.data||[])}catch(F){console.error("Error fetching data:",F)}finally{g(!1)}},z=async F=>{F.preventDefault(),y(!0);try{if(O.pdf_file&&O.pdf_file.size>80*1024*1024){alert("PDF file size must be less than 80MB. Current size: "+(O.pdf_file.size/1024/1024).toFixed(2)+"MB");return}const G=O.content?new Blob([O.content]).size:0,Z=O.pdf_file?O.pdf_file.size:0;if(G+Z>90*1024*1024){alert("Total request size is too large. Please reduce the content or PDF file size.");return}const K=new FormData;K.append("title",O.title.trim()),K.append("description",O.description||""),K.append("content",O.content||""),K.append("academic_year_id",String(O.academic_year_id||"")),K.append("class_id",String(O.class_id||"")),K.append("subject_id",String(O.subject_id||"")),K.append("teacher_id",String(O.teacher_id||"")),O.pdf_file&&K.append("pdf_file",O.pdf_file),C?(await Yc.update(C.id,K),alert("Question updated successfully!")):(await Yc.create(K),alert("Question created successfully!")),w(!1),ee(),V()}catch(G){if(y(!1),console.error("Error saving question:",G),G.response?.status===413){alert(`Request too large! The file or content is too big. Please:
1. Reduce the PDF file size (max 80MB)
2. Reduce the content size
3. Contact administrator to increase server upload limits`);return}if(G.response?.data?.message)alert(`Error saving question: ${G.response.data.message}`);else if(G.response?.data?.errors){const Z=G.response.data.errors;let Q=`Validation failed:
`;for(const K in Z)Q+=`- ${Z[K].join(", ")}
`;alert(Q)}else alert("Error saving question: "+(G.message||"Unknown error"))}finally{y(!1)}},H=F=>{U(F),N(!0)},$=F=>{E(F),L(!0)},S=F=>{B(F),I({title:F.title||"",description:F.description||"",content:F.content||"",academic_year_id:F.academic_year_id?String(F.academic_year_id):"",class_id:F.class_id?String(F.class_id):"",subject_id:F.subject_id?String(F.subject_id):"",teacher_id:F.teacher_id?String(F.teacher_id):"",pdf_file:null}),w(!0)},_=async F=>{if(confirm("Are you sure you want to delete this question?"))try{await Yc.delete(F),V()}catch(G){console.error("Error deleting question:",G),alert("Error deleting question")}},q=F=>{const G=F.target.files[0];if(G){if(G.type!=="application/pdf"){alert("Please select a PDF file");return}if(G.size>80*1024*1024){alert("PDF file size must be less than 80MB");return}I({...O,pdf_file:G})}},Y=()=>{I({...O,pdf_file:null})},ee=()=>{I({title:"",description:"",academic_year_id:"",class_id:"",subject_id:"",teacher_id:"",content:"",pdf_file:null}),B(null)};return f?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Questions"}),o.jsx("button",{onClick:()=>{ee(),w(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Question"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Academic Year"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Teacher"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"PDF"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Views"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(F=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:F.title})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:F.academic_year?.name||"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:F.class?.name||"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:F.subject?.name||"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:F.teacher?.name||"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:F.pdf_file?o.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:" PDF"}):o.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800",children:"No PDF"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:()=>$(F),className:"text-blue-600 hover:text-blue-900 font-semibold cursor-pointer",title:"Click to view IP addresses",children:F.views_count||0})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx("button",{onClick:()=>H(F),className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),o.jsx("button",{onClick:()=>S(F),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),o.jsx("button",{onClick:()=>_(F.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},F.id))})]})}),A&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-5xl max-h-[95vh] overflow-hidden flex flex-col",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-amber-50 to-amber-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:C?" Edit Question":" Create New Question"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C?"Update question information":"Fill in the details to create a new question"})]}),o.jsx("button",{onClick:()=>{w(!1),ee()},className:"text-gray-500 hover:text-gray-700 transition-colors",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsxs("form",{onSubmit:z,className:"flex-1 overflow-y-auto p-6 space-y-6",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 border border-gray-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[o.jsx("span",{className:"mr-2",children:""})," Basic Information"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Question Title ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",required:!0,value:O.title,onChange:F=>I({...O,title:F.target.value}),placeholder:"Enter question title...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),o.jsx("textarea",{rows:3,value:O.description,onChange:F=>I({...O,description:F.target.value}),placeholder:"Brief description of the question...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition resize-none"})]})]})]}),o.jsxs("div",{className:"bg-blue-50 rounded-lg p-5 border border-blue-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[o.jsx("span",{className:"mr-2",children:""})," Academic Details"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Academic Year ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{required:!0,value:O.academic_year_id,onChange:F=>I({...O,academic_year_id:F.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white",children:[o.jsx("option",{value:"",children:"Select Academic Year"}),t.map(F=>o.jsxs("option",{value:F.id,children:[F.name," (",F.code,")"]},F.id))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Class ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{required:!0,value:O.class_id,onChange:F=>I({...O,class_id:F.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white",children:[o.jsx("option",{value:"",children:"Select Class"}),i.map(F=>o.jsx("option",{value:F.id,children:F.name},F.id))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Subject ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{required:!0,value:O.subject_id,onChange:F=>I({...O,subject_id:F.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white",children:[o.jsx("option",{value:"",children:"Select Subject"}),c.map(F=>o.jsx("option",{value:F.id,children:F.name},F.id))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Teacher (Admin) ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{required:!0,value:O.teacher_id,onChange:F=>I({...O,teacher_id:F.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white",children:[o.jsx("option",{value:"",children:"Select Teacher"}),h.map(F=>o.jsxs("option",{value:F.id,children:[F.name," (",F.email,")"]},F.id))]})]})]})]}),o.jsxs("div",{className:"bg-purple-50 rounded-lg p-5 border border-purple-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[o.jsx("span",{className:"mr-2",children:""})," Question Content (Optional)"]}),o.jsx("div",{className:"border-2 border-gray-300 rounded-lg overflow-hidden bg-white",children:o.jsx(Ud,{value:O.content,onChange:F=>I({...O,content:F})})})]}),o.jsxs("div",{className:"bg-red-50 rounded-lg p-5 border border-red-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[o.jsx("span",{className:"mr-2",children:""})," PDF File (Optional)"]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload PDF File (Max 80MB)"}),o.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 hover:border-amber-500 transition",children:o.jsx("input",{type:"file",accept:".pdf",onChange:q,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 cursor-pointer"})}),O.pdf_file&&o.jsxs("div",{className:"mt-4 flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-red-600",children:""}),o.jsx("span",{className:"text-sm text-gray-700 font-medium",children:O.pdf_file.name}),o.jsxs("span",{className:"text-xs text-gray-500",children:["(",(O.pdf_file.size/1024/1024).toFixed(2)," MB)"]})]}),o.jsx("button",{type:"button",onClick:Y,className:"text-red-600 hover:text-red-800 hover:bg-red-50 px-3 py-1 rounded transition",children:" Remove"})]}),C&&C.pdf_file&&!O.pdf_file&&o.jsxs("div",{className:"mt-4 bg-blue-50 p-3 rounded-lg border border-blue-200",children:[o.jsxs("p",{className:"text-sm text-blue-700",children:["Current PDF: ",C.pdf_file.split("/").pop()]}),o.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Upload a new PDF to replace the existing one"})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200",children:[o.jsx("button",{type:"button",onClick:()=>{w(!1),ee()},className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),o.jsxs("button",{type:"submit",disabled:x,className:"px-6 py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[x&&o.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),x?"Uploading...":C?"Update Question":"Create Question"]})]})]})]})}),j&&k&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-blue-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Question Details"}),o.jsx("button",{onClick:()=>N(!1),className:"text-gray-500 hover:text-gray-700",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:k.title}),k.description&&o.jsx("p",{className:"text-gray-600",children:k.description})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Academic Year:"}),o.jsx("p",{className:"text-gray-800",children:k.academic_year?.name||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Class:"}),o.jsx("p",{className:"text-gray-800",children:k.class?.name||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Subject:"}),o.jsx("p",{className:"text-gray-800",children:k.subject?.name||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Teacher:"}),o.jsx("p",{className:"text-gray-800",children:k.teacher?.name||"N/A"})]})]}),k.content&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Content:"}),o.jsx("div",{className:"mt-2 p-4 bg-gray-50 rounded-lg",dangerouslySetInnerHTML:{__html:k.content}})]}),k.pdf_file&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-500",children:"PDF File:"}),o.jsx("p",{className:"text-gray-800 mt-1",children:o.jsx("a",{href:k.pdf_file_url||`storage/${k.pdf_file}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"View PDF"})})]})]})})]})}),D&&R&&o.jsx(wa,{likeableType:"App\\Models\\Question",likeableId:R.id,onClose:()=>L(!1)})]})},k_=()=>{const{user:l,setUser:e}=Bd(),[t,s]=M.useState("profile"),[i,r]=M.useState(!1),[c,u]=M.useState({type:"",text:""}),[h,p]=M.useState({name:"",email:"",phone:""}),[f,g]=M.useState({current_password:"",new_password:"",new_password_confirmation:""});M.useEffect(()=>{l&&p({name:l.name||"",email:l.email||"",phone:l.phone||""})},[l]);const x=async A=>{A.preventDefault(),r(!0),u({type:"",text:""});try{const w=await pr.updateProfile(h);e(w.user),u({type:"success",text:"Profile updated successfully!"}),localStorage.setItem("admin_user",JSON.stringify(w.user))}catch(w){u({type:"error",text:w.response?.data?.message||"Failed to update profile. Please try again."})}finally{r(!1)}},y=async A=>{if(A.preventDefault(),r(!0),u({type:"",text:""}),f.new_password!==f.new_password_confirmation){u({type:"error",text:"New passwords do not match."}),r(!1);return}try{await pr.changePassword({current_password:f.current_password,new_password:f.new_password,new_password_confirmation:f.new_password_confirmation}),u({type:"success",text:"Password changed successfully!"}),g({current_password:"",new_password:"",new_password_confirmation:""})}catch(w){u({type:"error",text:w.response?.data?.message||"Failed to change password. Please check your current password."})}finally{r(!1)}};return o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Admin Profile"}),o.jsx("div",{className:"border-b border-gray-200 mb-6",children:o.jsxs("nav",{className:"flex space-x-8",children:[o.jsx("button",{onClick:()=>{s("profile"),u({type:"",text:""})},className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="profile"?"border-amber-600 text-amber-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Profile Information"}),o.jsx("button",{onClick:()=>{s("password"),u({type:"",text:""})},className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="password"?"border-amber-600 text-amber-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Change Password"})]})}),c.text&&o.jsx("div",{className:`mb-6 p-4 rounded-lg ${c.type==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,children:c.text}),t==="profile"&&o.jsxs("form",{onSubmit:x,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"user_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),o.jsx("input",{type:"text",id:"user_name",value:l?.user_name||"",disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-500 cursor-not-allowed"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Username cannot be changed"})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Name ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"name",required:!0,value:h.name,onChange:A=>p({...h,name:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter your name"})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:["Email ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"email",id:"email",required:!0,value:h.email,onChange:A=>p({...h,email:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter your email"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),o.jsx("input",{type:"text",id:"phone",value:h.phone||"",onChange:A=>p({...h,phone:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter your phone number"})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-amber-600 text-white rounded-lg font-semibold hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 transition disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Updating...":"Update Profile"})})]}),t==="password"&&o.jsxs("form",{onSubmit:y,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"current_password",className:"block text-sm font-medium text-gray-700 mb-2",children:["Current Password ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"password",id:"current_password",required:!0,value:f.current_password,onChange:A=>g({...f,current_password:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter current password"})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"new_password",className:"block text-sm font-medium text-gray-700 mb-2",children:["New Password ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"password",id:"new_password",required:!0,minLength:8,value:f.new_password,onChange:A=>g({...f,new_password:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter new password (min. 8 characters)"})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"new_password_confirmation",className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirm New Password ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"password",id:"new_password_confirmation",required:!0,minLength:8,value:f.new_password_confirmation,onChange:A=>g({...f,new_password_confirmation:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Confirm new password"})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-amber-600 text-white rounded-lg font-semibold hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 transition disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Changing...":"Change Password"})})]})]})})},_t={getPosts:()=>le.get("/public/posts"),getPost:l=>le.get(`/public/posts/${l}`),getDhammas:()=>le.get("/public/dhammas"),getDhamma:l=>le.get(`/public/dhammas/${l}`),getBiographies:()=>le.get("/public/biographies"),getBiography:l=>le.get(`/public/biographies/${l}`),getDonations:()=>le.get("/public/donations"),getMonasteryBuildingDonations:()=>le.get("/public/monastery-building-donations"),toggleLike:l=>le.post("/public/likes/toggle",l),getLikeCounts:l=>le.get("/public/likes/counts",{params:l}),getComments:l=>le.get("/public/comments",{params:l}),addComment:l=>le.post("/public/comments",l),getBanners:()=>le.get("/public/banners"),getBannerTexts:()=>le.get("/public/banner-texts"),getMonasteries:()=>le.get("/public/monasteries"),getLessons:()=>le.get("/public/lessons"),getLesson:l=>le.get(`/public/lessons/${l}`),getVideoLessons:()=>le.get("/public/video-lessons"),getVideoLesson:l=>le.get(`/public/video-lessons/${l}`),getQuestions:()=>le.get("/public/questions"),getQuestion:l=>le.get(`/public/questions/${l}`)},D_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(0),[i,r]=M.useState(!0);M.useEffect(()=>{c()},[]),M.useEffect(()=>{if(l.length>1){const f=setInterval(()=>{s(g=>(g+1)%l.length)},5e3);return()=>clearInterval(f)}},[l.length]);const c=async()=>{try{const f=await _t.getBanners();e(f.data?.data||[])}catch(f){console.error("Error fetching banners:",f)}finally{r(!1)}},u=f=>{s(f)},h=()=>{s(f=>(f-1+l.length)%l.length)},p=()=>{s(f=>(f+1)%l.length)};return i?o.jsx("div",{className:"w-full h-64 bg-amber-800 animate-pulse rounded-lg"}):l.length===0?null:o.jsxs("div",{className:"relative w-full h-64 md:h-96 overflow-hidden rounded-lg shadow-xl mb-6",children:[o.jsx("div",{className:"relative w-full h-full",children:l.map((f,g)=>o.jsx("div",{className:`absolute inset-0 transition-opacity duration-1000 ${g===t?"opacity-100":"opacity-0"}`,children:o.jsx("img",{src:f.image,alt:`Banner ${g+1}`,className:"w-full h-full object-cover"})},f.id))}),l.length>1&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:h,className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition z-10","aria-label":"Previous slide",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),o.jsx("button",{onClick:p,className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition z-10","aria-label":"Next slide",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),l.length>1&&o.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2 z-10",children:l.map((f,g)=>o.jsx("button",{onClick:()=>u(g),className:`w-3 h-3 rounded-full transition-all ${g===t?"bg-white w-8":"bg-white bg-opacity-50 hover:bg-opacity-75"}`,"aria-label":`Go to slide ${g+1}`},g))})]})},M_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(!0);M.useEffect(()=>{i()},[]);const i=async()=>{try{const c=await _t.getBannerTexts();e(c.data?.data||[])}catch(c){console.error("Error fetching banner texts:",c)}finally{s(!1)}};if(t||l.length===0)return null;const r=l.map(c=>c.text).join("  ");return o.jsxs("div",{className:"bg-amber-700 text-white py-3 overflow-hidden relative",children:[o.jsx("div",{className:"marquee-container",children:o.jsxs("div",{className:"marquee-content",children:[o.jsx("span",{className:"marquee-text",children:r}),o.jsx("span",{className:"marquee-text","aria-hidden":"true",children:r})]})}),o.jsx("style",{children:`
        .marquee-container {
          overflow: hidden;
          white-space: nowrap;
        }
        .marquee-content {
          display: inline-flex;
          animation: marquee 30s linear infinite;
        }
        .marquee-text {
          padding-right: 50px;
          font-size: 1rem;
          font-weight: 500;
        }
        @keyframes marquee {
          0% {
            transform: translateX(0);
          }
          100% {
            transform: translateX(-50%);
          }
        }
        .marquee-content:hover {
          animation-play-state: paused;
        }
      `})]})},Cf=()=>{const{notifications:l,unreadCount:e,markAllAsRead:t,handleNotificationClick:s}=KS(),[i,r]=M.useState(!1),c=M.useRef(null);M.useEffect(()=>{const h=p=>{c.current&&!c.current.contains(p.target)&&r(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const u=()=>{r(!i),!i&&e>0&&t()};return o.jsxs("div",{className:"relative",ref:c,children:[o.jsxs("button",{onClick:u,className:"relative p-2 text-gray-700 hover:text-amber-600 transition-colors","aria-label":"Notifications",children:[o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),e>0&&o.jsx("span",{className:"absolute top-0 right-0 block h-5 w-5 rounded-full bg-red-500 text-white text-xs font-bold flex items-center justify-center border-2 border-white shadow-md",children:e>99?"99+":e>9?"9+":e})]}),i&&o.jsxs("div",{className:"absolute right-0 mt-2 w-80 max-w-[calc(100vw-2rem)] bg-white rounded-lg shadow-xl z-50 border border-gray-200",children:[o.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:""}),e>0&&o.jsx("button",{onClick:t,className:"text-sm text-amber-600 hover:text-amber-700",children:" "})]}),o.jsx("div",{className:"max-h-96 overflow-y-auto",children:l.length===0?o.jsx("div",{className:"p-4 text-center text-gray-500",children:" "}):l.map(h=>o.jsx("div",{onClick:()=>{s(h),r(!1)},className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${h.read?"":"bg-amber-50"}`,children:o.jsxs("div",{className:"flex items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:h.title}),o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:h.body}),o.jsx("p",{className:"text-xs text-gray-400",children:new Date(h.timestamp).toLocaleString("my-MM",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),!h.read&&o.jsx("div",{className:"ml-2 w-2 h-2 bg-amber-600 rounded-full"})]})},h.id))})]})]})},L_="/assets/logo-DvhzjqSL.jpg",Gs=()=>{const[l,e]=M.useState(!1),t=An(),s=r=>t.pathname===r,i=[{to:"/",label:"Home",icon:""},{to:"/posts",label:"Posts",icon:""},{to:"/dhammas",label:"Dhamma Talks",icon:""},{to:"/biographies",label:"Biographies",icon:""},{to:"/donations",label:"Donations",icon:""},{to:"/monasteries",label:"Monasteries",icon:""}];return o.jsxs(o.Fragment,{children:[o.jsx(M_,{}),o.jsx("nav",{className:"bg-white shadow-lg sticky top-0 z-50",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"flex items-center justify-between h-16",children:[o.jsxs(rt,{to:"/",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity",children:[o.jsx("img",{src:L_,alt:" Dhamma Center Logo",className:"h-12 w-12 md:h-14 md:w-14 object-contain rounded-full"}),o.jsxs("div",{className:"hidden sm:block",children:[o.jsx("span",{className:"text-lg md:text-xl font-bold text-gray-800 block",children:""}),o.jsx("span",{className:"text-xs md:text-sm text-gray-600",children:""})]})]}),o.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[i.map(r=>o.jsxs(rt,{to:r.to,className:`px-4 py-2 rounded-lg transition-all duration-200 ${s(r.to)?"bg-amber-600 text-white shadow-md":"text-gray-700 hover:bg-amber-50 hover:text-amber-700"}`,children:[o.jsx("span",{className:"mr-2",children:r.icon}),r.label]},r.to)),o.jsx(Cf,{}),o.jsxs("a",{href:"https://drive.google.com/file/d/16IH01drYj_Gf9D-tcfz2fx2XzDfKjsbQ/view?usp=sharing",download:!0,className:"ml-4 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition flex items-center space-x-2",rel:"noopener noreferrer",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),o.jsx("span",{children:"App"})]}),o.jsx(rt,{to:"/admin/login",className:"ml-4 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition",children:"Admin"})]}),o.jsxs("div",{className:"md:hidden flex items-center space-x-2",children:[o.jsx(Cf,{}),o.jsx("button",{onClick:()=>e(!l),className:"p-2 rounded-lg text-gray-700 hover:bg-gray-100 transition","aria-label":"Toggle menu",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l?o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),l&&o.jsxs("div",{className:"md:hidden py-4 border-t border-gray-200",children:[o.jsxs("div",{className:"px-4 py-2 flex items-center justify-between border-b border-gray-200 mb-2",children:[o.jsx("span",{className:"text-gray-700 font-semibold",children:"Notifications"}),o.jsx(Cf,{})]}),i.map(r=>o.jsxs(rt,{to:r.to,onClick:()=>e(!1),className:`block px-4 py-3 rounded-lg transition ${s(r.to)?"bg-amber-600 text-white":"text-gray-700 hover:bg-amber-50"}`,children:[o.jsx("span",{className:"mr-2",children:r.icon}),r.label]},r.to)),o.jsxs("a",{href:"https://goldencitycasino123.pro/assets/apk/app-release.apk",download:!0,onClick:()=>e(!1),className:"block px-4 py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),o.jsx("span",{children:"Download App"})]}),o.jsx(rt,{to:"/admin/login",onClick:()=>e(!1),className:"block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition",children:"Admin"})]})]})})]})},$s=()=>{const l=new Date().getFullYear(),e={quickLinks:[{to:"/",label:"Home"},{to:"/posts",label:"Posts"},{to:"/dhammas",label:"Dhamma Talks"},{to:"/biographies",label:"Biographies"},{to:"/donations",label:"Donations"}],resources:[{to:"/posts",label:"Latest Posts"},{to:"/dhammas",label:"Dhamma Talks"},{to:"/biographies",label:"Biographies"},{to:"/donations",label:"Support Us"}]};return o.jsx("footer",{className:"bg-gradient-to-br from-gray-900 to-gray-800 text-white mt-16",children:o.jsxs("div",{className:"container mx-auto px-4 py-12",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[o.jsxs("div",{className:"col-span-1 md:col-span-2",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-600 to-amber-800 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xl font-bold",children:""})}),o.jsx("h3",{className:"text-xl font-bold",children:""})]}),o.jsx("p",{className:"text-gray-300 mb-4 leading-relaxed",children:"A place of peace, wisdom, and compassion. We are dedicated to spreading the teachings of the Buddha and providing a peaceful environment for meditation and learning."}),o.jsxs("div",{className:"flex space-x-4",children:[o.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-700 hover:bg-amber-600 rounded-full flex items-center justify-center transition","aria-label":"Facebook",children:o.jsx("span",{children:""})}),o.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-700 hover:bg-amber-600 rounded-full flex items-center justify-center transition","aria-label":"YouTube",children:o.jsx("span",{children:""})}),o.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-700 hover:bg-amber-600 rounded-full flex items-center justify-center transition","aria-label":"Contact",children:o.jsx("span",{children:""})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),o.jsx("ul",{className:"space-y-2",children:e.quickLinks.map(t=>o.jsx("li",{children:o.jsx(rt,{to:t.to,className:"text-gray-300 hover:text-amber-400 transition",children:t.label})},t.to))})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Resources"}),o.jsx("ul",{className:"space-y-2",children:e.resources.map(t=>o.jsx("li",{children:o.jsx(rt,{to:t.to,className:"text-gray-300 hover:text-amber-400 transition",children:t.label})},t.to))})]})]}),o.jsx("div",{className:"border-t border-gray-700 mt-8 pt-8",children:o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[o.jsxs("p",{className:"text-gray-400 text-sm mb-4 md:mb-0",children:[" ",l,"  Dhamma Center Monastery. All rights reserved."]}),o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[o.jsx("span",{children:"Ashin Nandamala"}),o.jsx("span",{className:"hidden md:inline",children:""}),o.jsx(rt,{to:"/admin/login",className:"hover:text-amber-400 transition",children:"Admin Login"})]})]})})]})})},Ys=()=>{const[l,e]=M.useState(!1),t=An(),s=r=>t.pathname===r,i=[{to:"/",label:"Home",icon:""},{to:"/posts",label:"Posts",icon:""},{to:"/dhammas",label:"Dhamma Talks",icon:""},{to:"/biographies",label:"Biographies",icon:""},{to:"/donations",label:"Donations",icon:""},{to:"/monasteries",label:"Monasteries",icon:""},{to:"/lessons",label:"Lessons",icon:""},{to:"/video-lessons",label:"Video Lessons",icon:""},{to:"/questions",label:"Questions",icon:""}];return o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>e(!l),className:"fixed left-4 top-20 z-40 md:hidden bg-white shadow-lg rounded-full p-3 hover:bg-gray-50 transition","aria-label":"Toggle sidebar",children:o.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l?o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),l&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden",onClick:()=>e(!1)}),o.jsx("aside",{className:`fixed left-0 top-16 h-[calc(100vh-4rem)] bg-white shadow-2xl z-40 transform transition-transform duration-300 ${l?"translate-x-0":"-translate-x-full"} md:translate-x-0 md:static md:z-auto md:top-0 md:h-screen w-64`,children:o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-600 to-amber-800 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xl font-bold",children:""})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-800",children:"Dhamma Center"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Navigation"})]})]})}),o.jsxs("nav",{className:"flex-1 overflow-y-auto p-4",children:[o.jsx("ul",{className:"space-y-2",children:i.map(r=>o.jsx("li",{children:o.jsxs(rt,{to:r.to,onClick:()=>e(!1),className:`flex items-center space-x-3 px-4 py-3 rounded-lg transition-all ${s(r.to)?"bg-amber-600 text-white shadow-md":"text-gray-700 hover:bg-amber-50 hover:text-amber-700"}`,children:[o.jsx("span",{className:"text-xl",children:r.icon}),o.jsx("span",{className:"font-medium",children:r.label})]})},r.to))}),o.jsxs("div",{className:"mt-8 p-4 bg-gradient-to-br from-amber-50 to-orange-50 rounded-lg",children:[o.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Quick Info"}),o.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[o.jsx("strong",{children:"Meditation:"})," Daily 6:00 AM - 7:00 AM"]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[o.jsx("strong",{children:"Evening:"})," 6:00 PM - 7:00 PM"]})]})]}),o.jsx("div",{className:"p-4 border-t border-gray-200",children:o.jsx(rt,{to:"/admin/login",className:"block w-full text-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition",children:"Admin Login"})})]})})]})},O_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState([]),[i,r]=M.useState([]),[c,u]=M.useState([]),[h,p]=M.useState(!0);M.useEffect(()=>{f()},[]);const f=async()=>{try{const[g,x,y,A]=await Promise.all([_t.getPosts().catch(w=>(console.error("Error fetching posts:",w),{data:{data:[]}})),_t.getDhammas().catch(w=>(console.error("Error fetching dhammas:",w),{data:{data:[]}})),_t.getLessons().catch(w=>(console.error("Error fetching lessons:",w),{data:{data:[]}})),_t.getVideoLessons().catch(w=>(console.error("Error fetching video lessons:",w),{data:{data:[]}}))]);e(g.data?.data?.slice(0,6)||[]),s(x.data?.data?.slice(0,6)||[]),r(y.data?.data?.slice(0,6)||[]),u(A.data?.data?.slice(0,6)||[])}catch(g){console.error("Error fetching data:",g)}finally{p(!1)}};return h?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[o.jsx(Gs,{}),o.jsxs("div",{className:"flex flex-1 relative",children:[o.jsx("div",{className:"hidden md:block md:relative",children:o.jsx(Ys,{})}),o.jsxs("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:[o.jsx(D_,{}),o.jsxs("section",{className:"mb-12",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Recent Lessons"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(g=>o.jsx(rt,{to:`/lessons/${g.id}`,className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs",children:g.class?.name||"N/A"}),o.jsx("span",{className:"text-gray-500 text-xs",children:g.lesson_date?new Date(g.lesson_date).toLocaleDateString():"N/A"})]}),o.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2 line-clamp-2",children:g.title}),g.description&&o.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-3",children:g.description}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[o.jsx("span",{children:g.subject?.name||"N/A"}),g.duration_minutes&&o.jsxs("span",{children:[g.duration_minutes," min"]})]}),g.teacher&&o.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["By ",g.teacher.name]})]})},g.id))})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Recent Video Lessons"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(g=>{const y=(A=>{if(!A)return null;const w=[/youtube\.com\/watch\?v=([a-zA-Z0-9_-]+)/,/youtu\.be\/([a-zA-Z0-9_-]+)/,/youtube\.com\/embed\/([a-zA-Z0-9_-]+)/,/youtube\.com\/v\/([a-zA-Z0-9_-]+)/];for(const j of w){const N=A.match(j);if(N)return N[1]}return null})(g.video_url);return o.jsxs(rt,{to:`/video-lessons/${g.id}`,className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition",children:[y&&o.jsxs("div",{className:"relative w-full",style:{paddingBottom:"56.25%"},children:[o.jsx("img",{src:`https://img.youtube.com/vi/${y}/maxresdefault.jpg`,alt:g.title,className:"absolute top-0 left-0 w-full h-full object-cover",onError:A=>{A.target.src=`https://img.youtube.com/vi/${y}/hqdefault.jpg`}}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 hover:bg-opacity-20 transition",children:o.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center",children:o.jsx("svg",{className:"w-8 h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M8 5v14l11-7z"})})})})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-xs",children:g.class?.name||"N/A"}),o.jsx("span",{className:"text-gray-500 text-xs",children:g.lesson_date?new Date(g.lesson_date).toLocaleDateString():"N/A"})]}),o.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2 line-clamp-2",children:g.title}),g.description&&o.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-3",children:g.description}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[o.jsx("span",{children:g.subject?.name||"N/A"}),g.duration_minutes&&o.jsxs("span",{children:[g.duration_minutes," min"]})]}),g.teacher&&o.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["By ",g.teacher.name]})]})]},g.id)})})]}),o.jsxs("section",{className:"mb-12",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Recent Posts"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(g=>o.jsxs(rt,{to:`/posts/${g.id}`,className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition",children:[g.image&&o.jsx("img",{src:g.image,alt:g.title,className:"w-full h-48 object-cover"}),o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:g.title}),o.jsxs("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:[g.content.substring(0,150),"..."]}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[o.jsx("span",{children:g.category?.name||"Uncategorized"}),o.jsx("span",{children:new Date(g.created_at).toLocaleDateString()})]})]})]},g.id))})]}),o.jsxs("section",{className:"mb-12",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Recent Dhamma Talks"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(g=>o.jsxs(rt,{to:`/dhammas/${g.id}`,className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition",children:[g.image&&o.jsx("img",{src:g.image,alt:g.title,className:"w-full h-48 object-cover"}),o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:g.title}),o.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:[o.jsx("strong",{children:"Speaker:"})," ",g.speaker]}),o.jsx("p",{className:"text-gray-500 text-sm",children:g.date})]})]},g.id))})]})]})]}),o.jsx($s,{})]})},Fr=({likeableType:l,likeableId:e})=>{const[t,s]=M.useState(0),[i,r]=M.useState(0),[c,u]=M.useState(null),[h,p]=M.useState(!1);M.useEffect(()=>{f()},[l,e]);const f=async()=>{try{const x=await _t.getLikeCounts({likeable_type:l,likeable_id:e});s(x.data.likes),r(x.data.dislikes),u(x.data.user_action)}catch(x){console.error("Error fetching like counts:",x)}},g=async x=>{p(!0);try{await _t.toggleLike({likeable_type:l,likeable_id:e,type:x}),await f()}catch(y){console.error("Error toggling like:",y)}finally{p(!1)}};return o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("button",{onClick:()=>g("like"),disabled:h,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition ${c==="like"?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-green-100"}`,children:[o.jsx("span",{children:""}),o.jsx("span",{children:t})]}),o.jsxs("button",{onClick:()=>g("dislike"),disabled:h,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition ${c==="dislike"?"bg-red-500 text-white":"bg-gray-200 text-gray-700 hover:bg-red-100"}`,children:[o.jsx("span",{children:""}),o.jsx("span",{children:i})]})]})},Ur=({commentableType:l,commentableId:e})=>{const[t,s]=M.useState([]),[i,r]=M.useState(!0),[c,u]=M.useState(!1),[h,p]=M.useState({comment:""});M.useEffect(()=>{f()},[l,e]);const f=async()=>{try{const x=await _t.getComments({commentable_type:l,commentable_id:e});s(x.data?.data||[])}catch(x){console.error("Error fetching comments:",x)}finally{r(!1)}},g=async x=>{x.preventDefault(),u(!0);try{await _t.addComment({commentable_type:l,commentable_id:e,comment:h.comment}),p({comment:""}),await f()}catch(y){console.error("Error adding comment:",y),alert("Error adding comment. Please try again.")}finally{u(!1)}};return i?o.jsx("div",{className:"text-center py-4",children:"Loading comments..."}):o.jsxs("div",{className:"mt-8",children:[o.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:["Comments (",t.length,")"]}),o.jsxs("form",{onSubmit:g,className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comment *"}),o.jsx("textarea",{required:!0,rows:4,value:h.comment,onChange:x=>p({...h,comment:x.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"Write your comment here..."})]}),o.jsx("button",{type:"submit",disabled:c,className:"bg-amber-600 text-white px-6 py-2 rounded-lg hover:bg-amber-700 transition disabled:opacity-50",children:c?"Submitting...":"Post Comment"})]}),o.jsx("div",{className:"space-y-4",children:t.length===0?o.jsx("p",{className:"text-gray-500 text-center py-8",children:"No comments yet. Be the first to comment!"}):t.map(x=>o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsx("div",{className:"flex items-start justify-between mb-2",children:o.jsx("span",{className:"text-sm text-gray-500",children:new Date(x.created_at).toLocaleDateString()})}),o.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:x.comment})]},x.id))})]})},ul=({content:l,className:e=""})=>{const[t,s]=M.useState(!1),i=c=>{const u=document.createElement("DIV");return u.innerHTML=c,u.textContent||u.innerText||""},r=async()=>{try{const c=i(l);await navigator.clipboard.writeText(c),s(!0),setTimeout(()=>s(!1),2e3)}catch(c){console.error("Failed to copy:",c)}};return o.jsx("button",{onClick:r,className:`flex items-center gap-2 px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg transition-colors duration-200 ${e}`,title:"Copy content",children:t?o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),o.jsx("span",{children:"Copied!"})]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),o.jsx("span",{children:"Copy"})]})})},B_=()=>{const{id:l}=Lr(),[e,t]=M.useState(null),[s,i]=M.useState(!0);M.useEffect(()=>{r()},[l]);const r=async()=>{try{const c=await _t.getPost(l);t(c.data?.data)}catch(c){console.error("Error fetching post:",c)}finally{i(!1)}};return s?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):e?o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[o.jsx(Gs,{}),o.jsxs("div",{className:"flex flex-1 relative",children:[o.jsx("div",{className:"hidden md:block md:relative",children:o.jsx(Ys,{})}),o.jsx("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:o.jsxs("article",{className:"bg-white rounded-xl shadow-lg overflow-hidden max-w-4xl mx-auto",children:[e.image&&o.jsx("img",{src:e.image,alt:e.title,className:"w-full h-96 object-cover"}),o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("span",{className:"bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm",children:e.category?.name||"Uncategorized"}),o.jsxs("div",{className:"flex items-center gap-4",children:[e.views_count!==void 0&&o.jsxs("span",{className:"flex items-center gap-1 text-gray-600 text-sm",children:[o.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),o.jsx("span",{className:"font-semibold",children:e.views_count||0}),o.jsx("span",{children:"views"})]}),o.jsx("span",{className:"text-gray-500 text-sm",children:new Date(e.created_at).toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:e.title}),o.jsx(ul,{content:e.content})]}),o.jsx(Fr,{likeableType:"App\\Models\\Post",likeableId:e.id}),o.jsx("div",{className:"mt-8 prose max-w-none",children:o.jsx("div",{className:"text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:e.content}})}),o.jsx(Ur,{commentableType:"App\\Models\\Post",commentableId:e.id})]})]})})]}),o.jsx($s,{})]}):o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Post not found"}),o.jsx(rt,{to:"/",className:"text-amber-600 hover:underline",children:"Go back home"})]})})},P_=()=>{const{id:l}=Lr(),[e,t]=M.useState(null),[s,i]=M.useState(!0);M.useEffect(()=>{r()},[l]);const r=async()=>{try{const c=await _t.getDhamma(l);t(c.data?.data)}catch(c){console.error("Error fetching dhamma:",c)}finally{i(!1)}};return s?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):e?o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[o.jsx(Gs,{}),o.jsxs("div",{className:"flex flex-1 relative",children:[o.jsx("div",{className:"hidden md:block md:relative",children:o.jsx(Ys,{})}),o.jsx("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:o.jsxs("article",{className:"bg-white rounded-xl shadow-lg overflow-hidden max-w-4xl mx-auto",children:[e.image&&o.jsx("img",{src:e.image,alt:e.title,className:"w-full h-96 object-cover"}),o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("span",{className:"bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm w-fit",children:"Dhamma Talk"}),e.speaker&&o.jsxs("span",{className:"text-gray-600 text-sm",children:[o.jsx("strong",{children:"Speaker:"})," ",e.speaker]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[e.views_count!==void 0&&o.jsxs("span",{className:"flex items-center gap-1 text-gray-600 text-sm",children:[o.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),o.jsx("span",{className:"font-semibold",children:e.views_count||0}),o.jsx("span",{children:"views"})]}),e.date&&o.jsx("span",{className:"text-gray-500 text-sm",children:new Date(e.date).toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:e.title}),o.jsx(ul,{content:e.content})]}),o.jsx(Fr,{likeableType:"App\\Models\\Dhamma",likeableId:e.id}),o.jsx("div",{className:"mt-8 prose max-w-none",children:o.jsx("div",{className:"text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:e.content}})}),o.jsx(Ur,{commentableType:"App\\Models\\Dhamma",commentableId:e.id})]})]})})]}),o.jsx($s,{})]}):o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Dhamma Talk not found"}),o.jsx(rt,{to:"/",className:"text-amber-600 hover:underline",children:"Go back home"})]})})},F_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(!0);M.useEffect(()=>{i()},[]);const i=async()=>{try{const r=await _t.getBiographies();e(r.data?.data||[])}catch(r){console.error("Error fetching biographies:",r)}finally{s(!1)}};return t?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[o.jsx(Gs,{}),o.jsxs("div",{className:"flex flex-1 relative",children:[o.jsx("div",{className:"hidden md:block md:relative",children:o.jsx(Ys,{})}),o.jsxs("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Biographies"}),o.jsx("p",{className:"text-gray-600",children:"Learn about the lives and teachings of great masters"})]}),l.length===0?o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"No biographies available at the moment."})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(r=>o.jsxs(rt,{to:`/biographies/${r.id}`,className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition",children:[r.image&&o.jsx("img",{src:r.image,alt:r.name,className:"w-full h-64 object-cover"}),o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:r.name}),r.title&&o.jsx("p",{className:"text-amber-600 text-sm font-medium mb-2",children:r.title}),r.birth_date&&o.jsxs("p",{className:"text-gray-500 text-sm mb-2",children:["Born: ",new Date(r.birth_date).toLocaleDateString()]}),r.biography&&o.jsxs("p",{className:"text-gray-600 text-sm line-clamp-3",children:[r.biography.substring(0,150),"..."]})]})]},r.id))})]})]}),o.jsx($s,{})]})},U_=()=>{const{id:l}=Lr(),[e,t]=M.useState(null),[s,i]=M.useState(!0);M.useEffect(()=>{r()},[l]);const r=async()=>{try{const c=await _t.getBiography(l);t(c.data?.data)}catch(c){console.error("Error fetching biography:",c)}finally{i(!1)}};return s?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):e?o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[o.jsx(Gs,{}),o.jsxs("div",{className:"flex flex-1 relative",children:[o.jsx("div",{className:"hidden md:block md:relative",children:o.jsx(Ys,{})}),o.jsx("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:o.jsxs("article",{className:"bg-white rounded-xl shadow-lg overflow-hidden max-w-4xl mx-auto",children:[e.image&&o.jsx("img",{src:e.image,alt:e.name,className:"w-full h-96 object-cover"}),o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:e.name}),e.views_count!==void 0&&o.jsxs("span",{className:"flex items-center gap-1 text-gray-600 text-sm",children:[o.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),o.jsx("span",{className:"font-semibold",children:e.views_count||0}),o.jsx("span",{children:"views"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 text-sm text-gray-600",children:[e.birth_year&&o.jsxs("div",{children:[o.jsx("strong",{className:"text-gray-800",children:":"})," ",e.birth_year]}),e.sangha_entry_year&&o.jsxs("div",{children:[o.jsx("strong",{className:"text-gray-800",children:":"})," ",e.sangha_entry_year]}),e.disciples&&o.jsxs("div",{children:[o.jsx("strong",{className:"text-gray-800",children:":"})," ",e.disciples]}),e.teaching_monastery&&o.jsxs("div",{children:[o.jsx("strong",{className:"text-gray-800",children:" :"})," ",e.teaching_monastery]})]}),o.jsx(Fr,{likeableType:"App\\Models\\Biography",likeableId:e.id}),e.sangha_dhamma&&o.jsxs("div",{className:"mt-8 prose max-w-none",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:""}),o.jsx("div",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:e.sangha_dhamma})]}),o.jsx(Ur,{commentableType:"App\\Models\\Biography",commentableId:e.id})]})]})})]}),o.jsx($s,{})]}):o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Biography not found"}),o.jsx(rt,{to:"/biographies",className:"text-amber-600 hover:underline",children:"Go back to biographies"})]})})},I_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(!0);M.useEffect(()=>{i()},[]);const i=async()=>{try{const u=await _t.getDonations();e(u.data?.data||[])}catch(u){console.error("Error fetching donations:",u)}finally{s(!1)}};if(t)return o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})});const r=l.reduce((u,h)=>u+parseFloat(h.amount||0),0),c=l.length;return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[o.jsx(Gs,{}),o.jsxs("div",{className:"flex flex-1 relative",children:[o.jsx("div",{className:"hidden md:block md:relative",children:o.jsx(Ys,{})}),o.jsxs("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Donations"}),o.jsx("p",{className:"text-gray-600",children:"Generosity helps spread the teachings of the Buddha"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Donations"}),o.jsxs("p",{className:"text-3xl font-bold text-amber-600",children:[r.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})," MMK"]})]}),o.jsx("div",{className:"text-4xl",children:""})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Donors"}),o.jsx("p",{className:"text-3xl font-bold text-amber-600",children:c})]}),o.jsx("div",{className:"text-4xl",children:""})]})})]}),l.length===0?o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"No donations available at the moment."})}):o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-amber-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Donor Name"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Amount"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Date"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Purpose"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(u=>o.jsxs("tr",{className:"hover:bg-amber-50 transition",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.donor_name||"Anonymous"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm font-semibold text-amber-600",children:[parseFloat(u.amount||0).toLocaleString("en-US")," MMK"]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:new Date(u.created_at).toLocaleDateString()})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-500",children:u.purpose||"General Donation"})})]},u.id))})]})})})]})]}),o.jsx($s,{})]})},z_=()=>{const[l,e]=M.useState(null),[t,s]=M.useState(!0);M.useEffect(()=>{i()},[]);const i=async()=>{try{const x=await _t.getMonasteries();e(x.data?.data)}catch(x){console.error("Error fetching monasteries:",x)}finally{s(!1)}};if(t)return o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})});if(!l)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"text-center",children:o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No data available"})})});const{title:r,subtitle:c,monasteries:u,buildings:h}=l,p=u.reduce((x,y)=>x+(y.monks||0),0)+h.reduce((x,y)=>x+(y.monks||0),0),f=u.reduce((x,y)=>x+(y.novices||0),0)+h.reduce((x,y)=>x+(y.novices||0),0),g=p+f;return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[o.jsx(Gs,{}),o.jsxs("div",{className:"flex flex-1 relative",children:[o.jsx("div",{className:"hidden md:block md:relative",children:o.jsx(Ys,{})}),o.jsxs("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:r}),o.jsx("p",{className:"text-lg text-gray-600",children:c})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Monks"}),o.jsx("p",{className:"text-3xl font-bold text-amber-600",children:p})]}),o.jsx("div",{className:"text-4xl",children:""})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Novices"}),o.jsx("p",{className:"text-3xl font-bold text-amber-600",children:f})]}),o.jsx("div",{className:"text-4xl",children:""})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Grand Total"}),o.jsx("p",{className:"text-3xl font-bold text-amber-600",children:g})]}),o.jsx("div",{className:"text-4xl",children:""})]})})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:["Monasteries (",u.length,")"]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-amber-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"No."}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Monks"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Novices"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Total"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map((x,y)=>o.jsxs("tr",{className:"hover:bg-amber-50 transition",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:y+1})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.name})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:o.jsx("div",{className:"text-sm text-gray-900",children:x.monks||0})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:o.jsx("div",{className:"text-sm text-gray-900",children:x.novices||0})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:o.jsx("div",{className:"text-sm font-semibold text-amber-600",children:x.total||0})})]},x.id))})]})})})]}),h&&h.length>0&&o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:["Buildings (",h.length,")"]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-amber-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"No."}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Monastery Name"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Monks"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Novices"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Total"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map((x,y)=>o.jsxs("tr",{className:"hover:bg-amber-50 transition",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:y+1})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.name})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-500",children:x.monastery_name||"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:o.jsx("div",{className:"text-sm text-gray-900",children:x.monks||0})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:o.jsx("div",{className:"text-sm text-gray-900",children:x.novices||0})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:o.jsx("div",{className:"text-sm font-semibold text-amber-600",children:x.total||0})})]},x.id))})]})})})]})]})]}),o.jsx($s,{})]})},H_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(!0),[i,r]=M.useState("");M.useEffect(()=>{c()},[]);const c=async()=>{try{const p=await _t.getLessons();e(p.data?.data||[])}catch(p){console.error("Error fetching lessons:",p)}finally{s(!1)}},u=M.useMemo(()=>{if(!i.trim())return l;const p=i.toLowerCase();return l.filter(f=>f.title?.toLowerCase().includes(p)||f.description?.toLowerCase().includes(p)||f.class?.name?.toLowerCase().includes(p)||f.subject?.name?.toLowerCase().includes(p)||f.teacher?.name?.toLowerCase().includes(p))},[l,i]),h=M.useMemo(()=>{const p={};return u.forEach(f=>{const g=f.class_id||"uncategorized",x=f.class?.name||"Uncategorized";p[g]||(p[g]={classId:g,className:x,lessons:[]}),p[g].lessons.push(f)}),Object.values(p).sort((f,g)=>f.className.localeCompare(g.className))},[u]);return t?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[o.jsx(Gs,{}),o.jsxs("div",{className:"flex flex-1 relative",children:[o.jsx("div",{className:"hidden md:block md:relative",children:o.jsx(Ys,{})}),o.jsxs("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Lessons"}),o.jsx("p",{className:"text-gray-600",children:"Browse all published lessons"})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"Search lessons by title, description, class, subject, or teacher...",value:i,onChange:p=>r(p.target.value),className:"w-full px-4 py-3 pl-12 pr-4 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition"}),o.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),i&&o.jsx("button",{onClick:()=>r(""),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i&&o.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Found ",u.length," lesson",u.length!==1?"s":""]})]}),l.length===0?o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:o.jsx("p",{className:"text-gray-500",children:"No lessons available at the moment."})}):u.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[o.jsxs("p",{className:"text-gray-500",children:['No lessons found matching "',i,'"']}),o.jsx("button",{onClick:()=>r(""),className:"mt-4 text-amber-600 hover:underline",children:"Clear search"})]}):o.jsx("div",{className:"space-y-8",children:h.map(p=>o.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 px-6 py-4",children:o.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[o.jsx("span",{className:"text-3xl",children:""}),p.className,o.jsxs("span",{className:"text-lg font-normal text-blue-100 ml-2",children:["(",p.lessons.length," ",p.lessons.length===1?"lesson":"lessons",")"]})]})}),o.jsx("div",{className:"p-6",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.lessons.map(f=>o.jsx(rt,{to:`/lessons/${f.id}`,className:"bg-gray-50 rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow border border-gray-200",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs",children:f.class?.name||"N/A"}),o.jsx("span",{className:"text-gray-500 text-xs",children:f.lesson_date?new Date(f.lesson_date).toLocaleDateString():"N/A"})]}),o.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2 line-clamp-2",children:f.title}),f.description&&o.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-3",children:f.description}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[o.jsx("span",{children:f.subject?.name||"N/A"}),o.jsx("span",{children:f.teacher?.name||"N/A"})]}),f.duration_minutes&&o.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:["Duration: ",f.duration_minutes," minutes"]})]})},f.id))})})]},p.classId))})]})]}),o.jsx($s,{})]})},V_=()=>{const{id:l}=Lr(),[e,t]=M.useState(null),[s,i]=M.useState(!0);M.useEffect(()=>{r()},[l]);const r=async()=>{try{const c=await _t.getLesson(l);t(c.data?.data)}catch(c){console.error("Error fetching lesson:",c)}finally{i(!1)}};return s?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):e?o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[o.jsx(Gs,{}),o.jsxs("div",{className:"flex flex-1 relative",children:[o.jsx("div",{className:"hidden md:block md:relative",children:o.jsx(Ys,{})}),o.jsx("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:o.jsx("article",{className:"bg-white rounded-xl shadow-lg overflow-hidden max-w-4xl mx-auto",children:o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:e.class?.name||"N/A"}),o.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:e.subject?.name||"N/A"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[e.views_count!==void 0&&o.jsxs("span",{className:"flex items-center gap-1 text-gray-600 text-sm",children:[o.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),o.jsx("span",{className:"font-semibold",children:e.views_count||0}),o.jsx("span",{children:"views"})]}),e.lesson_date&&o.jsx("span",{className:"text-gray-500 text-sm",children:new Date(e.lesson_date).toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:e.title}),e.content&&o.jsx(ul,{content:e.content})]}),e.description&&o.jsx("p",{className:"text-lg text-gray-600 mb-4",children:e.description}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 text-sm",children:[e.teacher&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Teacher:"}),o.jsx("p",{className:"font-semibold text-gray-800",children:e.teacher.name})]}),e.duration_minutes&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Duration:"}),o.jsxs("p",{className:"font-semibold text-gray-800",children:[e.duration_minutes," minutes"]})]}),e.class&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Class:"}),o.jsx("p",{className:"font-semibold text-gray-800",children:e.class.name})]}),e.subject&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Subject:"}),o.jsx("p",{className:"font-semibold text-gray-800",children:e.subject.name})]})]}),o.jsx(Fr,{likeableType:"App\\Models\\Lesson",likeableId:e.id}),e.content&&o.jsx("div",{className:"mt-8 prose max-w-none",children:o.jsx("div",{className:"text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:e.content}})}),e.attachments&&e.attachments.length>0&&o.jsxs("div",{className:"mt-8",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Attachments"}),o.jsx("div",{className:"space-y-2",children:e.attachments.map((c,u)=>o.jsx("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"block p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),o.jsxs("span",{className:"text-blue-600 hover:underline",children:["Attachment ",u+1]})]})},u))})]}),o.jsx(Ur,{commentableType:"App\\Models\\Lesson",commentableId:e.id})]})})})]}),o.jsx($s,{})]}):o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Lesson not found"}),o.jsx(rt,{to:"/lessons",className:"text-amber-600 hover:underline",children:"Go back to lessons"})]})})},q_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(!0),[i,r]=M.useState("");M.useEffect(()=>{c()},[]);const c=async()=>{try{const f=await _t.getVideoLessons();e(f.data?.data||[])}catch(f){console.error("Error fetching video lessons:",f)}finally{s(!1)}},u=M.useMemo(()=>{if(!i.trim())return l;const f=i.toLowerCase();return l.filter(g=>g.title?.toLowerCase().includes(f)||g.description?.toLowerCase().includes(f)||g.class?.name?.toLowerCase().includes(f)||g.subject?.name?.toLowerCase().includes(f)||g.teacher?.name?.toLowerCase().includes(f))},[l,i]),h=M.useMemo(()=>{const f={};return u.forEach(g=>{const x=g.class_id||"uncategorized",y=g.class?.name||"Uncategorized";f[x]||(f[x]={classId:x,className:y,videoLessons:[]}),f[x].videoLessons.push(g)}),Object.values(f).sort((g,x)=>g.className.localeCompare(x.className))},[u]),p=f=>{if(!f)return null;const g=[/youtube\.com\/watch\?v=([a-zA-Z0-9_-]+)/,/youtu\.be\/([a-zA-Z0-9_-]+)/,/youtube\.com\/embed\/([a-zA-Z0-9_-]+)/,/youtube\.com\/v\/([a-zA-Z0-9_-]+)/];for(const x of g){const y=f.match(x);if(y)return y[1]}return null};return t?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[o.jsx(Gs,{}),o.jsxs("div",{className:"flex flex-1 relative",children:[o.jsx("div",{className:"hidden md:block md:relative",children:o.jsx(Ys,{})}),o.jsxs("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Video Lessons"}),o.jsx("p",{className:"text-gray-600",children:"Watch and learn from our video lessons"})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"Search video lessons by title, description, class, subject, or teacher...",value:i,onChange:f=>r(f.target.value),className:"w-full px-4 py-3 pl-12 pr-4 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition"}),o.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),i&&o.jsx("button",{onClick:()=>r(""),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i&&o.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Found ",u.length," video lesson",u.length!==1?"s":""]})]}),l.length===0?o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:o.jsx("p",{className:"text-gray-500",children:"No video lessons available at the moment."})}):u.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[o.jsxs("p",{className:"text-gray-500",children:['No video lessons found matching "',i,'"']}),o.jsx("button",{onClick:()=>r(""),className:"mt-4 text-amber-600 hover:underline",children:"Clear search"})]}):o.jsx("div",{className:"space-y-8",children:h.map(f=>o.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 px-6 py-4",children:o.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[o.jsx("span",{className:"text-3xl",children:""}),f.className,o.jsxs("span",{className:"text-lg font-normal text-red-100 ml-2",children:["(",f.videoLessons.length," ",f.videoLessons.length===1?"video":"videos",")"]})]})}),o.jsx("div",{className:"p-6",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.videoLessons.map(g=>{const x=p(g.video_url);return o.jsxs(rt,{to:`/video-lessons/${g.id}`,className:"bg-gray-50 rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow border border-gray-200",children:[x&&o.jsxs("div",{className:"relative w-full",style:{paddingBottom:"56.25%"},children:[o.jsx("img",{src:`https://img.youtube.com/vi/${x}/maxresdefault.jpg`,alt:g.title,className:"absolute top-0 left-0 w-full h-full object-cover",onError:y=>{y.target.src=`https://img.youtube.com/vi/${x}/hqdefault.jpg`}}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 hover:bg-opacity-20 transition",children:o.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center",children:o.jsx("svg",{className:"w-8 h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M8 5v14l11-7z"})})})})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs",children:g.class?.name||"N/A"}),o.jsx("span",{className:"text-gray-500 text-xs",children:g.lesson_date?new Date(g.lesson_date).toLocaleDateString():"N/A"})]}),o.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2 line-clamp-2",children:g.title}),g.description&&o.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-3",children:g.description}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[o.jsx("span",{children:g.subject?.name||"N/A"}),o.jsx("span",{children:g.teacher?.name||"N/A"})]}),g.duration_minutes&&o.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:["Duration: ",g.duration_minutes," minutes"]})]})]},g.id)})})})]},f.classId))})]})]}),o.jsx($s,{})]})},G_=()=>{const{id:l}=Lr(),[e,t]=M.useState(null),[s,i]=M.useState(!0);M.useEffect(()=>{r()},[l]);const r=async()=>{try{const p=await _t.getVideoLesson(l);t(p.data?.data)}catch(p){console.error("Error fetching video lesson:",p)}finally{i(!1)}},c=p=>{if(!p)return null;const f=[/youtube\.com\/watch\?v=([a-zA-Z0-9_-]+)/,/youtu\.be\/([a-zA-Z0-9_-]+)/,/youtube\.com\/embed\/([a-zA-Z0-9_-]+)/,/youtube\.com\/v\/([a-zA-Z0-9_-]+)/];for(const g of f){const x=p.match(g);if(x)return x[1]}return null};if(s)return o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})});if(!e)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Video lesson not found"}),o.jsx(rt,{to:"/video-lessons",className:"text-amber-600 hover:underline",children:"Go back to video lessons"})]})});const u=c(e.video_url),h=e.description||e.title;return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[o.jsx(Gs,{}),o.jsxs("div",{className:"flex flex-1 relative",children:[o.jsx("div",{className:"hidden md:block md:relative",children:o.jsx(Ys,{})}),o.jsx("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:o.jsx("article",{className:"bg-white rounded-xl shadow-lg overflow-hidden max-w-4xl mx-auto",children:o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:e.class?.name||"N/A"}),o.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:e.subject?.name||"N/A"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[e.views_count!==void 0&&o.jsxs("span",{className:"flex items-center gap-1 text-gray-600 text-sm",children:[o.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),o.jsx("span",{className:"font-semibold",children:e.views_count||0}),o.jsx("span",{children:"views"})]}),e.lesson_date&&o.jsx("span",{className:"text-gray-500 text-sm",children:new Date(e.lesson_date).toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:e.title}),h&&o.jsx(ul,{content:h})]}),e.description&&o.jsx("p",{className:"text-lg text-gray-600 mb-6",children:e.description}),u&&o.jsx("div",{className:"mb-6",children:o.jsx("div",{className:"relative w-full",style:{paddingBottom:"56.25%"},children:o.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full rounded-lg",src:`https://www.youtube.com/embed/${u}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 text-sm",children:[e.teacher&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Teacher:"}),o.jsx("p",{className:"font-semibold text-gray-800",children:e.teacher.name})]}),e.duration_minutes&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Duration:"}),o.jsxs("p",{className:"font-semibold text-gray-800",children:[e.duration_minutes," minutes"]})]}),e.class&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Class:"}),o.jsx("p",{className:"font-semibold text-gray-800",children:e.class.name})]}),e.subject&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Subject:"}),o.jsx("p",{className:"font-semibold text-gray-800",children:e.subject.name})]})]}),o.jsx(Fr,{likeableType:"App\\Models\\VideoLesson",likeableId:e.id}),o.jsx(Ur,{commentableType:"App\\Models\\VideoLesson",commentableId:e.id})]})})})]}),o.jsx($s,{})]})},$_=()=>{const[l,e]=M.useState([]),[t,s]=M.useState(!0),[i,r]=M.useState("");M.useEffect(()=>{c()},[]);const c=async()=>{try{const p=await _t.getQuestions();e(p.data?.data||[])}catch(p){console.error("Error fetching questions:",p)}finally{s(!1)}},u=M.useMemo(()=>{if(!i.trim())return l;const p=i.toLowerCase();return l.filter(f=>f.title?.toLowerCase().includes(p)||f.description?.toLowerCase().includes(p)||f.class?.name?.toLowerCase().includes(p)||f.subject?.name?.toLowerCase().includes(p)||f.teacher?.name?.toLowerCase().includes(p)||f.academic_year?.name?.toLowerCase().includes(p))},[l,i]),h=M.useMemo(()=>{const p={};return u.forEach(f=>{const g=f.class_id||"uncategorized",x=f.class?.name||"Uncategorized";p[g]||(p[g]={classId:g,className:x,questions:[]}),p[g].questions.push(f)}),Object.values(p).sort((f,g)=>f.className.localeCompare(g.className))},[u]);return t?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[o.jsx(Gs,{}),o.jsxs("div",{className:"flex flex-1 relative",children:[o.jsx("div",{className:"hidden md:block md:relative",children:o.jsx(Ys,{})}),o.jsxs("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Questions"}),o.jsx("p",{className:"text-gray-600",children:"Browse all published questions"})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"Search questions by title, description, class, subject, teacher, or academic year...",value:i,onChange:p=>r(p.target.value),className:"w-full px-4 py-3 pl-12 pr-4 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition"}),o.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),i&&o.jsx("button",{onClick:()=>r(""),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i&&o.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Found ",u.length," question",u.length!==1?"s":""]})]}),l.length===0?o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:o.jsx("p",{className:"text-gray-500",children:"No questions available at the moment."})}):u.length===0?o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[o.jsxs("p",{className:"text-gray-500",children:['No questions found matching "',i,'"']}),o.jsx("button",{onClick:()=>r(""),className:"mt-4 text-amber-600 hover:underline",children:"Clear search"})]}):o.jsx("div",{className:"space-y-8",children:h.map(p=>o.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 px-6 py-4",children:o.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[o.jsx("span",{className:"text-3xl",children:""}),p.className,o.jsxs("span",{className:"text-lg font-normal text-purple-100 ml-2",children:["(",p.questions.length," ",p.questions.length===1?"question":"questions",")"]})]})}),o.jsx("div",{className:"p-6",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.questions.map(f=>o.jsx(rt,{to:`/questions/${f.id}`,className:"bg-gray-50 rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow border border-gray-200",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-xs",children:f.class?.name||"N/A"}),f.pdf_file&&o.jsxs("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs flex items-center gap-1",children:[o.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),"PDF"]})]}),o.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2 line-clamp-2",children:f.title}),f.description&&o.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-3",children:f.description}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[o.jsx("span",{children:f.subject?.name||"N/A"}),o.jsx("span",{children:f.teacher?.name||"N/A"})]}),f.academic_year&&o.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:["Academic Year: ",f.academic_year.name]})]})},f.id))})})]},p.classId))})]})]}),o.jsx($s,{})]})},ms=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Kf=[.001,0,0,.001,0,0],Tf=1.35,Is={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Un={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Qo="pdfjs_internal_editor_",Se={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ie={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},kv={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ss={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Xo={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Rt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},fr={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},hl={ERRORS:0,WARNINGS:1,INFOS:5},Cr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Xc={moveTo:0,lineTo:1,curveTo:2,closePath:3},Dv={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Hd=hl.WARNINGS;function Y_(l){Number.isInteger(l)&&(Hd=l)}function X_(){return Hd}function Vd(l){Hd>=hl.INFOS&&console.info(`Info: ${l}`)}function _e(l){Hd>=hl.WARNINGS&&console.warn(`Warning: ${l}`)}function ct(l){throw new Error(l)}function Ve(l,e){l||ct(e)}function W_(l){switch(l?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Em(l,e=null,t=null){if(!l)return null;if(t&&typeof l=="string"&&(t.addDefaultProtocol&&l.startsWith("www.")&&l.match(/\./g)?.length>=2&&(l=`http://${l}`),t.tryConvertEncoding))try{l=eE(l)}catch{}const s=e?URL.parse(l,e):URL.parse(l);return W_(s)?s:null}function Cm(l,e,t=!1){const s=URL.parse(l);return s?(s.hash=e,s.href):t&&Em(l,"http://example.com")?l.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Me(l,e,t,s=!1){return Object.defineProperty(l,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Aa=(function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e})();class Db extends Aa{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Rf extends Aa{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class jd extends Aa{constructor(e){super(e,"InvalidPDFException")}}class Zo extends Aa{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class K_ extends Aa{constructor(e){super(e,"FormatError")}}class di extends Aa{constructor(e){super(e,"AbortException")}}function Mv(l){(typeof l!="object"||l?.length===void 0)&&ct("Invalid argument for bytesToString");const e=l.length,t=8192;if(e<t)return String.fromCharCode.apply(null,l);const s=[];for(let i=0;i<e;i+=t){const r=Math.min(i+t,e),c=l.subarray(i,r);s.push(String.fromCharCode.apply(null,c))}return s.join("")}function fl(l){typeof l!="string"&&ct("Invalid argument for stringToBytes");const e=l.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=l.charCodeAt(s)&255;return t}function Q_(l){return String.fromCharCode(l>>24&255,l>>16&255,l>>8&255,l&255)}function Z_(){const l=new Uint8Array(4);return l[0]=1,new Uint32Array(l.buffer,0,1)[0]===1}function J_(){try{return new Function(""),!0}catch{return!1}}class Yt{static get isLittleEndian(){return Me(this,"isLittleEndian",Z_())}static get isEvalSupported(){return Me(this,"isEvalSupported",J_())}static get isOffscreenCanvasSupported(){return Me(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Me(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Me(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return Me(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const kf=Array.from(Array(256).keys(),l=>l.toString(16).padStart(2,"0"));class me{static makeHexColor(e,t,s){return`#${kf[e]}${kf[t]}${kf[s]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,s=0){const i=e[s],r=e[s+1];e[s]=i*t[0]+r*t[2]+t[4],e[s+1]=i*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const i=t[0],r=t[1],c=t[2],u=t[3],h=t[4],p=t[5];for(let f=0;f<6;f+=2){const g=e[s+f],x=e[s+f+1];e[s+f]=g*i+x*c+h,e[s+f+1]=g*r+x*u+p}}static applyInverseTransform(e,t){const s=e[0],i=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-s*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,s){const i=t[0],r=t[1],c=t[2],u=t[3],h=t[4],p=t[5],f=e[0],g=e[1],x=e[2],y=e[3];let A=i*f+h,w=A,j=i*x+h,N=j,D=u*g+p,L=D,k=u*y+p,U=k;if(r!==0||c!==0){const C=r*f,B=r*x,R=c*g,E=c*y;A+=R,N+=R,j+=E,w+=E,D+=C,U+=C,k+=B,L+=B}s[0]=Math.min(s[0],A,j,w,N),s[1]=Math.min(s[1],D,k,L,U),s[2]=Math.max(s[2],A,j,w,N),s[3]=Math.max(s[3],D,k,L,U)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],i=e[1],r=e[2],c=e[3],u=s**2+i**2,h=s*r+i*c,p=r**2+c**2,f=(u+p)/2,g=Math.sqrt(f**2-(u*p-h**2));t[0]=Math.sqrt(f+g||1),t[1]=Math.sqrt(f-g||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),c=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>c?null:[s,r,i,c]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,i,r){r[0]=Math.min(r[0],e,s),r[1]=Math.min(r[1],t,i),r[2]=Math.max(r[2],e,s),r[3]=Math.max(r[3],t,i)}static#e(e,t,s,i,r,c,u,h,p,f){if(p<=0||p>=1)return;const g=1-p,x=p*p,y=x*p,A=g*(g*(g*e+3*p*t)+3*x*s)+y*i,w=g*(g*(g*r+3*p*c)+3*x*u)+y*h;f[0]=Math.min(f[0],A),f[1]=Math.min(f[1],w),f[2]=Math.max(f[2],A),f[3]=Math.max(f[3],w)}static#t(e,t,s,i,r,c,u,h,p,f,g,x){if(Math.abs(p)<1e-12){Math.abs(f)>=1e-12&&this.#e(e,t,s,i,r,c,u,h,-g/f,x);return}const y=f**2-4*g*p;if(y<0)return;const A=Math.sqrt(y),w=2*p;this.#e(e,t,s,i,r,c,u,h,(-f+A)/w,x),this.#e(e,t,s,i,r,c,u,h,(-f-A)/w,x)}static bezierBoundingBox(e,t,s,i,r,c,u,h,p){p[0]=Math.min(p[0],e,u),p[1]=Math.min(p[1],t,h),p[2]=Math.max(p[2],e,u),p[3]=Math.max(p[3],t,h),this.#t(e,s,r,u,t,i,c,h,3*(-e+3*(s-r)+u),6*(e-2*s+r),3*(s-e),p),this.#t(e,s,r,u,t,i,c,h,3*(-t+3*(i-c)+h),6*(t-2*i+c),3*(i-t),p)}}function eE(l){return decodeURIComponent(escape(l))}let Df=null,Mb=null;function Lv(l){return Df||(Df=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Mb=new Map([["","t"]])),l.replaceAll(Df,(e,t,s)=>t?t.normalize("NFKC"):Mb.get(s))}function Tm(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const l=new Uint8Array(32);return crypto.getRandomValues(l),Mv(l)}const Rm="pdfjs_internal_id_";function tE(l,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,i,...r]=t;if(!l(s)&&!Number.isInteger(s)||!e(i))return!1;const c=r.length;let u=!0;switch(i.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const h of r)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function cs(l,e,t){return Math.min(Math.max(l,e),t)}function Ov(l){return Uint8Array.prototype.toBase64?l.toBase64():btoa(Mv(l))}function sE(l){return Uint8Array.fromBase64?Uint8Array.fromBase64(l):fl(atob(l))}typeof Promise.try!="function"&&(Promise.try=function(l,...e){return new Promise(t=>{t(l(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(l){return l.reduce((e,t)=>e+t,0)});class Jo{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(r){if(!r)return;let c=null;const u=r.name;if(u==="#text")c=r.value;else if(Jo.shouldBuildText(u))r?.attributes?.textContent?c=r.attributes.textContent:r.value&&(c=r.value);else return;if(c!==null&&t.push({str:c}),!!r.children)for(const h of r.children)i(h)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class km{static setupStorage(e,t,s,i,r){const c=i.getValue(t,{value:null});switch(s.name){case"textarea":if(c.value!==null&&(e.textContent=c.value),r==="print")break;e.addEventListener("input",u=>{i.setValue(t,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(c.value===s.attributes.xfaOn?e.setAttribute("checked",!0):c.value===s.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",u=>{i.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&e.setAttribute("value",c.value),r==="print")break;e.addEventListener("input",u=>{i.setValue(t,{value:u.target.value})})}break;case"select":if(c.value!==null){e.setAttribute("value",c.value);for(const u of s.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const h=u.target.options,p=h.selectedIndex===-1?"":h[h.selectedIndex].value;i.setValue(t,{value:p})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:r}){const{attributes:c}=t,u=e instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${i}`);for(const[h,p]of Object.entries(c))if(p!=null)switch(h){case"class":p.length&&e.setAttribute(h,p.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",p);break;case"style":Object.assign(e.style,p);break;case"textContent":e.textContent=p;break;default:(!u||h!=="href"&&h!=="newWindow")&&e.setAttribute(h,p)}u&&r.addLinkAttributes(e,c.href,c.newWindow),s&&c.dataId&&this.setupStorage(e,c.dataId,t,s)}static render(e){const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,r=e.intent||"display",c=document.createElement(i.name);i.attributes&&this.setAttributes({html:c,element:i,intent:r,linkService:s});const u=r!=="richText",h=e.div;if(h.append(c),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;h.style.transform=g}u&&h.setAttribute("class","xfaLayer xfaFont");const p=[];if(i.children.length===0){if(i.value){const g=document.createTextNode(i.value);c.append(g),u&&Jo.shouldBuildText(i.name)&&p.push(g)}return{textDivs:p}}const f=[[i,-1,c]];for(;f.length>0;){const[g,x,y]=f.at(-1);if(x+1===g.children.length){f.pop();continue}const A=g.children[++f.at(-1)[1]];if(A===null)continue;const{name:w}=A;if(w==="#text"){const N=document.createTextNode(A.value);p.push(N),y.append(N);continue}const j=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,w):document.createElement(w);if(y.append(j),A.attributes&&this.setAttributes({html:j,element:A,storage:t,intent:r,linkService:s}),A.children?.length>0)f.push([A,-1,j]);else if(A.value){const N=document.createTextNode(A.value);u&&Jo.shouldBuildText(w)&&p.push(N),j.append(N)}}for(const g of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:p}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const ri="http://www.w3.org/2000/svg";class ba{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Ir(l,e="text"){if(Go(l,document.baseURI)){const t=await fetch(l);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",l,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class ml{constructor({viewBox:e,userUnit:t,scale:s,rotation:i,offsetX:r=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=c,s*=t;const h=(e[2]+e[0])/2,p=(e[3]+e[1])/2;let f,g,x,y;switch(i%=360,i<0&&(i+=360),i){case 180:f=-1,g=0,x=0,y=1;break;case 90:f=0,g=1,x=1,y=0;break;case 270:f=0,g=-1,x=-1,y=0;break;case 0:f=1,g=0,x=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(x=-x,y=-y);let A,w,j,N;f===0?(A=Math.abs(p-e[1])*s+r,w=Math.abs(h-e[0])*s+c,j=(e[3]-e[1])*s,N=(e[2]-e[0])*s):(A=Math.abs(h-e[0])*s+r,w=Math.abs(p-e[1])*s+c,j=(e[2]-e[0])*s,N=(e[3]-e[1])*s),this.transform=[f*s,g*s,x*s,y*s,A-f*s*h-x*s*p,w-g*s*h-y*s*p],this.width=j,this.height=N}get rawDims(){const e=this.viewBox;return Me(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new ml({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){const s=[e,t];return me.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];me.applyTransform(t,this.transform);const s=[e[2],e[3]];return me.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return me.applyInverseTransform(s,this.transform),s}}class qd extends Aa{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function pl(l){const e=l.length;let t=0;for(;t<e&&l[t].trim()==="";)t++;return l.substring(t,t+5).toLowerCase()==="data:"}function Gd(l){return typeof l=="string"&&/\.pdf$/i.test(l)}function Bv(l){return[l]=l.split(/[#?]/,1),l.substring(l.lastIndexOf("/")+1)}function Pv(l,e="document.pdf"){if(typeof l!="string")return e;if(pl(l))return _e('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(l);if(!s)return e;const i=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},r=/\.pdf$/i,c=s.pathname.split("/").at(-1);if(r.test(c))return i(c);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const p of u)if(r.test(p))return i(p);const h=Array.from(s.searchParams.keys()).reverse();for(const p of h)if(r.test(p))return i(p)}if(s.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(h)return i(h[0])}return e}class Lb{started=Object.create(null);times=[];time(e){e in this.started&&_e(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||_e(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:r}of this.times)e.push(`${s.padEnd(t)} ${r-i}ms
`);return e.join("")}}function Go(l,e){const t=e?URL.parse(l,e):URL.parse(l);return t?.protocol==="http:"||t?.protocol==="https:"}function Vs(l){l.preventDefault()}function wt(l){l.preventDefault(),l.stopPropagation()}function nE(l){console.log("Deprecated API usage: "+l)}class Sd{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let c=parseInt(t[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(t[6],10);h=h>=0&&h<=59?h:0;const p=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,p==="-"?(c+=f,u+=g):p==="+"&&(c-=f,u-=g),new Date(Date.UTC(s,i,r,c,u,h))}}function Fv(l,{scale:e=1,rotation:t=0}){const{width:s,height:i}=l.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new ml({viewBox:r,userUnit:1,scale:e,rotation:t})}function zr(l){if(l.startsWith("#")){const e=parseInt(l.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return l.startsWith("rgb(")?l.slice(4,-1).split(",").map(e=>parseInt(e)):l.startsWith("rgba(")?l.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(_e(`Not a valid color format: "${l}"`),[0,0,0])}function iE(l){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of l.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;l.set(t,zr(s))}e.remove()}function vt(l){const{a:e,b:t,c:s,d:i,e:r,f:c}=l.getTransform();return[e,t,s,i,r,c]}function Mn(l){const{a:e,b:t,c:s,d:i,e:r,f:c}=l.getTransform().invertSelf();return[e,t,s,i,r,c]}function zi(l,e,t=!1,s=!0){if(e instanceof ml){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:c}=l,u=Yt.isCSSRoundSupported,h=`var(--total-scale-factor) * ${i}px`,p=`var(--total-scale-factor) * ${r}px`,f=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,g=u?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!t||e.rotation%180===0?(c.width=f,c.height=g):(c.width=g,c.height=f)}s&&l.setAttribute("data-main-rotation",e.rotation)}class vn{constructor(){const{pixelRatio:e}=vn;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,i,r=-1){let c=1/0,u=1/0,h=1/0;s=vn.capPixels(s,r),s>0&&(c=Math.sqrt(s/(e*t))),i!==-1&&(u=i/e,h=i/t);const p=Math.min(c,u,h);return this.sx>p||this.sy>p?(this.sx=p,this.sy=p,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const _d=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class aE{static get isDarkMode(){return Me(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Uv{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:s}=window.getComputedStyle(e);return e.remove(),Me(this,"commentForegroundColor",zr(s))}}function Iv(l,e,t,s){s=Math.min(Math.max(s??1,0),1);const i=255*(1-s);return l=Math.round(l*s+i),e=Math.round(e*s+i),t=Math.round(t*s+i),[l,e,t]}function Ob(l,e){const t=l[0]/255,s=l[1]/255,i=l[2]/255,r=Math.max(t,s,i),c=Math.min(t,s,i),u=(r+c)/2;if(r===c)e[0]=e[1]=0;else{const h=r-c;switch(e[1]=u<.5?h/(r+c):h/(2-r-c),r){case t:e[0]=((s-i)/h+(s<i?6:0))*60;break;case s:e[0]=((i-t)/h+2)*60;break;case i:e[0]=((t-s)/h+4)*60;break}}e[2]=u}function Qf(l,e){const t=l[0],s=l[1],i=l[2],r=(1-Math.abs(2*i-1))*s,c=r*(1-Math.abs(t/60%2-1)),u=i-r/2;switch(Math.floor(t/60)){case 0:e[0]=r+u,e[1]=c+u,e[2]=u;break;case 1:e[0]=c+u,e[1]=r+u,e[2]=u;break;case 2:e[0]=u,e[1]=r+u,e[2]=c+u;break;case 3:e[0]=u,e[1]=c+u,e[2]=r+u;break;case 4:e[0]=c+u,e[1]=u,e[2]=r+u;break;case 5:case 6:e[0]=r+u,e[1]=u,e[2]=c+u;break}}function Bb(l){return l<=.03928?l/12.92:((l+.055)/1.055)**2.4}function Pb(l,e,t){Qf(l,t),t.map(Bb);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];Qf(e,t),t.map(Bb);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return s>i?(s+.05)/(i+.05):(i+.05)/(s+.05)}const Fb=new Map;function zv(l,e){const t=l[0]+l[1]*256+l[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let s=Fb.get(t);if(s)return s;const i=new Float32Array(9),r=i.subarray(0,3),c=i.subarray(3,6);Ob(l,c);const u=i.subarray(6,9);Ob(e,u);const h=u[2]<.5,p=h?12:4.5;if(c[2]=h?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),Pb(c,u,r)<p){let f,g;h?(f=c[2],g=1):(f=0,g=c[2]);const x=.005;for(;g-f>x;){const y=c[2]=(f+g)/2;h===Pb(c,u,r)<p?f=y:g=y}c[2]=h?g:f}return Qf(c,r),s=me.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),Fb.set(t,s),s}function Dm({html:l,dir:e,className:t},s){const i=document.createDocumentFragment();if(typeof l=="string"){const r=document.createElement("p");r.dir=e||"auto";const c=l.split(/(?:\r\n?|\n)/);for(let u=0,h=c.length;u<h;++u){const p=c[u];r.append(document.createTextNode(p)),u<h-1&&r.append(document.createElement("br"))}i.append(r)}else km.render({xfaHtml:l,div:i,intent:"richText"});i.firstChild.classList.add("richText",t),s.append(i)}class Wo{#e=null;#t=null;#n;#s=null;#r=null;#i=null;#a=null;#o=null;static#c=null;constructor(e){this.#n=e,Wo.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#n._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Vs,{signal:t}),e.addEventListener("pointerdown",Wo.#l,{signal:t}));const s=this.#s=document.createElement("div");s.className="buttons",e.append(s);const i=this.#n.toolbarPosition;if(i){const{style:r}=e,c=this.#n._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*c}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#n._focusEventsAllowed=!1,wt(e)}#u(e){this.#n._focusEventsAllowed=!0,wt(e)}#f(e){const t=this.#n._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Vs,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#r?.shown(),this.#i?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#n,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",Wo.#c[e]),this.#f(s)&&s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#s.append(s)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#s.append(t,this.#g),this.#r=e}addComment(e,t=null){if(this.#i)return;const s=e.renderForToolbar();if(!s)return;this.#f(s);const i=this.#a=this.#g;t?(this.#s.insertBefore(s,t),this.#s.insertBefore(i,t)):this.#s.append(s,i),this.#i=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#s.append(t,this.#g)}async addEditSignatureButton(e){const t=this.#o=await e.renderEditButton(this.#n);this.#f(t),this.#s.append(t,this.#g)}removeButton(e){e==="comment"&&(this.#i?.removeToolbarCommentButton(),this.#i=null,this.#a?.remove(),this.#a=null)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,s){const i=this.#s.querySelector(s);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class rE{#e=null;#t=null;#n;constructor(e){this.#n=e}#s(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#n._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Vs,{signal:t});const s=this.#e=document.createElement("div");return s.className="buttons",e.append(s),this.#n.hasCommentManager()&&this.#i("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#i("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),e}#r(e,t){let s=0,i=0;for(const r of e){const c=r.y+r.height;if(c<s)continue;const u=r.x+(t?r.width:0);if(c>s){i=u,s=c;continue}t?u>i&&(i=u):u<i&&(i=u)}return[t?1-i:i,s]}show(e,t,s){const[i,r]=this.#r(t,s),{style:c}=this.#t||=this.#s();e.append(this.#t),c.insetInlineEnd=`${100*i}%`,c.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#i(e,t,s,i){const r=document.createElement("button");r.classList.add("basic",e),r.tabIndex=0,r.setAttribute("data-l10n-id",t);const c=document.createElement("span");r.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",s);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(r.addEventListener("contextmenu",Vs,{signal:u}),r.addEventListener("click",i,{signal:u})),this.#e.append(r)}}function Hv(l,e,t){for(const s of t)e.addEventListener(s,l[s].bind(l))}class oE{#e=0;get id(){return`${Qo}${this.#e++}`}}class Mm{#e=Tm();#t=0;#n=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Me(this,"_isSVGFittingCanvas",r)}async#s(e,t){this.#n||=new Map;let s=this.#n.get(e);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(s.url=t,i=await Ir(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const r=Mm._isSVGFittingCanvas,c=new FileReader,u=new Image,h=new Promise((p,f)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,p()},c.onload=async()=>{const g=s.svgUrl=c.result;u.src=await r?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=c.onerror=f});c.readAsDataURL(i),await h}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){_e(i),s=null}return this.#n.set(e,s),s&&this.#n.set(s.id,s),s}async getFromFile(e){const{lastModified:t,name:s,size:i,type:r}=e;return this.#s(`${t}_${s}_${i}_${r}`,e)}async getFromUrl(e){return this.#s(e,e)}async getFromBlob(e,t){const s=await t;return this.#s(e,s)}async getFromId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#n||=new Map;let s=this.#n.get(e);if(s?.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,s),this.#n.set(s.id,s),s}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}s.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class lE{#e=[];#t=!1;#n;#s=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(i&&e(),this.#t)return;const h={cmd:e,undo:t,post:s,type:r};if(this.#s===-1){this.#e.length>0&&(this.#e.length=0),this.#s=0,this.#e.push(h);return}if(c&&this.#e[this.#s].type===r){u&&(h.undo=this.#e[this.#s].undo),this.#e[this.#s]=h;return}const p=this.#s+1;p===this.#n?this.#e.splice(0,1):(this.#s=p,p<this.#e.length&&this.#e.splice(p)),this.#e.push(h)}undo(){if(this.#s===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#s];e(),t?.(),this.#t=!1,this.#s-=1}redo(){if(this.#s<this.#e.length-1){this.#s+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#s];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#s!==-1}hasSomethingToRedo(){return this.#s<this.#e.length-1}cleanType(e){if(this.#s!==-1){for(let t=this.#s;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#s-t),this.#s=t;return}this.#e.length=0,this.#s=-1}}destroy(){this.#e=null}}class gl{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Yt.platform;for(const[s,i,r={}]of e)for(const c of s){const u=c.startsWith("mac+");t&&u?(this.callbacks.set(c.slice(4),{callback:i,options:r}),this.allKeys.add(c.split("+").at(-1))):!t&&!u&&(this.callbacks.set(c,{callback:i,options:r}),this.allKeys.add(c.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(this.#e(t));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:c=[],checker:u=null}}=s;u&&!u(e,t)||(i.bind(e,...c,t)(),r||wt(t))}}class Lm{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return iE(e),Me(this,"_colors",e)}convert(e){const t=zr(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((r,c)=>r===t[c]))return Lm._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?me.makeHexColor(...t):e}}class ui{#e=new AbortController;#t=null;#n=null;#s=new Map;#r=new Map;#i=null;#a=null;#o=null;#c=new lE;#l=null;#h=null;#u=null;#f=0;#g=new Set;#m=null;#d=null;#p=new Set;_editorUndoBar=null;#x=!1;#y=!1;#b=!1;#S=null;#N=null;#v=null;#E=null;#A=!1;#j=null;#R=new oE;#C=!1;#T=!1;#P=!1;#D=null;#L=null;#F=null;#O=null;#q=null;#_=Se.NONE;#w=new Set;#M=null;#U=null;#z=null;#Y=null;#$=null;#X={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#B=null;#G=null;#Z=null;#J=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=ui.prototype,t=c=>c.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),s=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Me(this,"_keyboardManager",new gl([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#G.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}constructor(e,t,s,i,r,c,u,h,p,f,g,x,y,A,w,j){const N=this._signal=this.#e.signal;this.#G=e,this.#Z=t,this.#J=s,this.#i=i,this.#l=r,this.#U=c,this.#$=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:N}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:N}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:N}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:N}),u._on("setpreference",this.onSetPreference.bind(this),{signal:N}),u._on("switchannotationeditorparams",D=>this.updateParams(D.type,D.value),{signal:N}),window.addEventListener("pointerdown",()=>{this.#T=!0},{capture:!0,signal:N}),window.addEventListener("pointerup",()=>{this.#T=!1},{capture:!0,signal:N}),this.#le(),this.#he(),this.#te(),this.#a=h.annotationStorage,this.#S=h.filterFactory,this.#z=p,this.#E=f||null,this.#x=g,this.#y=x,this.#b=y,this.#q=A||null,this.viewParameters={realScale:ba.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=j!==!1,r?.setSidebarUiManager(this)}destroy(){this.#I?.resolve(),this.#I=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#r.values())e.destroy();this.#r.clear(),this.#s.clear(),this.#p.clear(),this.#O?.clear(),this.#t=null,this.#w.clear(),this.#c.destroy(),this.#i?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#j?.hide(),this.#j=null,this.#F?.destroy(),this.#F=null,this.#n=null,this.#N&&(clearTimeout(this.#N),this.#N=null),this.#B&&(clearTimeout(this.#B),this.#B=null),this._editorUndoBar?.destroy(),this.#$=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#q}get useNewAltTextFlow(){return this.#y}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return Me(this,"hcmFilter",this.#z?this.#S.addHCMFilter(this.#z.foreground,this.#z.background):"none")}get direction(){return Me(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return Me(this,"_highlightColors",this.#E?new Map(this.#E.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Me(this,"highlightColors",null);const t=new Map,s=!!this.#z;for(const[i,r]of e){const c=i.endsWith("_HCM");if(s&&c){t.set(i.replace("_HCM",""),r);continue}!s&&!c&&t.set(i,r)}return Me(this,"highlightColors",t)}get highlightColorNames(){return Me(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#u=e}setMainHighlightColorPicker(e){this.#F=e}editAltText(e,t=!1){this.#i?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,s,i){this.#l?.showDialog(this,e,t,s,i)}selectComment(e,t){this.#r.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,t,s=void 0){this.#l?.toggleCommentPopup(e,t,s)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#r.has(e-1))return;const{resolve:t,promise:s}=Promise.withResolvers(),i=r=>{r.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await s}getSignature(e){this.#U?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#U}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){e==="enableNewAltTextWhenAddingImage"&&(this.#b=t)}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#G.focus()}findParent(e,t){for(const s of this.#r.values()){const{x:i,y:r,width:c,height:u}=s.div.getBoundingClientRect();if(e>=i&&e<=i+c&&t>=r&&t<=r+u)return s}return null}disableUserSelect(e=!1){this.#Z.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*ba.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging();this.#u?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Q({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of this.#r.values())if(s.hasTextLayer(e))return s;return null}highlightSelection(e="",t=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:c,focusOffset:u}=s,h=s.toString(),f=this.#Q(s).closest(".textLayer"),g=this.getSelectionBoxes(f);if(!g)return;s.empty();const x=this.#ee(f),y=this.#_===Se.NONE,A=()=>{const w=x?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:i,anchorOffset:r,focusNode:c,focusOffset:u,text:h});y&&this.showAllEditors("highlight",!0,!0),t&&w?.editComment()};if(y){this.switchToMode(Se.HIGHLIGHT,A);return}A()}commentSelection(e=""){this.highlightSelection(e,!0)}#re(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=this.#Q(e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(this.#j||=new rE(this),this.#j.show(s,i,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#a)return null;const t=`${Qo}${e}`,s=this.#a.getRawValue(t);return s&&this.#a.remove(t),s}addToAnnotationStorage(e){!e.isEmpty()&&this.#a&&!this.#a.has(e.id)&&this.#a.setValue(e.id,e)}a11yAlert(e,t=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}#oe(){const e=document.getSelection();if(!e||e.isCollapsed){this.#M&&(this.#j?.hide(),this.#M=null,this.#k({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#M)return;const i=this.#Q(e).closest(".textLayer");if(!i){this.#M&&(this.#j?.hide(),this.#M=null,this.#k({hasSelectedText:!1}));return}if(this.#j?.hide(),this.#M=t,this.#k({hasSelectedText:!0}),!(this.#_!==Se.HIGHLIGHT&&this.#_!==Se.NONE)&&(this.#_===Se.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const r=this.#_===Se.HIGHLIGHT?this.#ee(i):null;if(r?.toggleDrawing(),this.#T){const c=new AbortController,u=this.combinedSignal(c),h=p=>{p.type==="pointerup"&&p.button!==0||(c.abort(),r?.toggleDrawing(!0),p.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else r?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(e=""){this.#_===Se.HIGHLIGHT?this.highlightSelection(e):this.#x&&this.#re()}#le(){document.addEventListener("selectionchange",this.#oe.bind(this),{signal:this._signal})}#ce(){if(this.#v)return;this.#v=new AbortController;const e=this.combinedSignal(this.#v);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#de(){this.#v?.abort(),this.#v=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#w)if(t.div.contains(e)){this.#L=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[e,t]=this.#L;this.#L=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#D)return;this.#D=new AbortController;const e=this.combinedSignal(this.#D);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ue(){this.#D?.abort(),this.#D=null}#se(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#ne(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.#se()}removeEditListeners(){this.#ue(),this.#ne()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of this.#d)if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of this.#d)if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of this.#w){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const c of this.#d)if(c.isHandlingMimeForPasting(r.type)){c.paste(r,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){_e(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const h of s){const p=await i.deserialize(h);if(!p)return;r.push(p)}const c=()=>{for(const h of r)this.#ie(h);this.#ae(r)},u=()=>{for(const h of r)h.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(r){_e(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#_!==Se.NONE&&!this.isEditorHandlingKeyboard&&ui._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#W("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#k(e){Object.entries(e).some(([s,i])=>this.#X[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#X,e)}),this.#_===Se.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#V([[Ie.HIGHLIGHT_FREE,!0]]))}#V(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ce(),this.#se(),this.#k({isEditing:this.#_!==Se.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#de(),this.#ne(),this.#k({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#d){this.#d=e;for(const t of this.#d)this.#V(t.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(e){return this.#r.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#r.set(e.pageIndex,e),this.#C?e.enable():e.disable()}removeLayer(e){this.#r.delete(e.pageIndex)}async updateMode(e,t=null,s=!1,i=!1,r=!1){if(this.#_!==e&&!(this.#I&&(await this.#I.promise,!this.#I))){if(this.#I=Promise.withResolvers(),this.#u?.commitOrRemove(),this.#_===Se.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#_=e,e===Se.NONE){this.setEditingState(!1),this.#me();for(const c of this.#s.values())c.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#I.resolve();return}for(const c of this.#s.values())c.addStandaloneCommentButton();e===Se.SIGNATURE&&await this.#U?.loadSignatures(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const c of this.#r.values())c.updateMode(e);if(e===Se.POPUP){this.#n||=await this.#$.getAnnotationsByType(new Set(this.#d.map(h=>h._editorType)));const c=new Set,u=[];for(const h of this.#s.values()){const{annotationElementId:p,hasComment:f,deleted:g}=h;p&&c.add(p),f&&!g&&u.push(h.getData())}for(const h of this.#n){const{id:p,popupRef:f,contentsObj:g}=h;f&&g?.str&&!c.has(p)&&!this.#g.has(p)&&u.push(h)}this.#l?.showSidebar(u)}if(!t){s&&this.addNewEditorFromKeyboard(),this.#I.resolve();return}for(const c of this.#s.values())c.uid===t?(this.setSelected(c),r?c.editComment():i?c.enterInEditMode():c.focus()):c.unselect();this.#I.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#d){switch(e){case Ie.CREATE:this.currentLayer.addNewEditor(t);return;case Ie.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of this.#w)s.updateParams(e,t);else for(const s of this.#d)s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){for(const r of this.#s.values())r.editorType===e&&r.show(t);(this.#Y?.get(Ie.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#V([[Ie.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#P!==e){this.#P=e;for(const t of this.#r.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#C){this.#C=!0;const e=[];for(const t of this.#r.values())e.push(t.enable());await Promise.all(e);for(const t of this.#s.values())t.enable()}}#me(){if(this.unselectAll(),this.#C){this.#C=!1;for(const e of this.#r.values())e.disable();for(const e of this.#s.values())e.disable()}}*getEditors(e){for(const t of this.#s.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#s.get(e)}addEditor(e){this.#s.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#N&&clearTimeout(this.#N),this.#N=setTimeout(()=>{this.focusMainContainer(),this.#N=null},0)),this.#s.delete(e.id),e.annotationElementId&&this.#O?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#a?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ie(e){const t=this.#r.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#V(e.propertiesToUpdate))}get#pe(){let e=null;for(e of this.#w);return e}updateUI(e){this.#pe===e&&this.#V(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#V(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#k({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#u?.commitOrRemove();for(const t of this.#w)t!==e&&t.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#k({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#k({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(e){this.#c.add(e),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(e){this.#c.cleanType(e)}#K(){if(this.#s.size===0)return!0;if(this.#s.size===1)for(const e of this.#s.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#w],s=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(const r of t)r.remove()},i=()=>{for(const r of t)this.#ie(r)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ae(e){for(const t of this.#w)t.unselect();this.#w.clear();for(const t of e)t.isEmpty()||(this.#w.add(t),t.select());this.#k({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#ae(this.#s.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#_!==Se.NONE))&&!this.#u?.commitOrRemove()&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#k({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=e,this.#H[1]+=t;const[i,r]=this.#H,c=[...this.#w],u=1e3;this.#B&&clearTimeout(this.#B),this.#B=setTimeout(()=>{this.#B=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const h of c)this.#s.has(h.id)&&(h.translateInPage(i,r),h.translationDone())},undo:()=>{for(const h of c)this.#s.has(h.id)&&(h.translateInPage(-i,-r),h.translationDone())},mustExec:!1})},u);for(const h of c)h.translateInPage(e,t),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const e of this.#w)this.#m.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const e=this.#m;this.#m=null;let t=!1;for(const[{x:i,y:r,pageIndex:c},u]of e)u.newX=i,u.newY=r,u.newPageIndex=c,t||=i!==u.savedX||r!==u.savedY||c!==u.savedPageIndex;if(!t)return!1;const s=(i,r,c,u)=>{if(this.#s.has(i.id)){const h=this.#r.get(u);h?i._setParentAndPosition(h,r,c):(i.pageIndex=u,i.x=r,i.y=c)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:c,newPageIndex:u}]of e)s(i,r,c,u)},undo:()=>{for(const[i,{savedX:r,savedY:c,savedPageIndex:u}]of e)s(i,r,c,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#m)for(const s of this.#m.keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#_}isEditingMode(){return this.#_!==Se.NONE}get imageManager(){return Me(this,"imageManager",new Mm)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let p=0,f=t.rangeCount;p<f;p++)if(!e.contains(t.getRangeAt(p).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:c}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(p,f,g,x)=>({x:(f-i)/c,y:1-(p+g-s)/r,width:x/c,height:g/r});break;case"180":u=(p,f,g,x)=>({x:1-(p+g-s)/r,y:1-(f+x-i)/c,width:g/r,height:x/c});break;case"270":u=(p,f,g,x)=>({x:1-(f+x-i)/c,y:(p-s)/r,width:x/c,height:g/r});break;default:u=(p,f,g,x)=>({x:(p-s)/r,y:(f-i)/c,width:g/r,height:x/c});break}const h=[];for(let p=0,f=t.rangeCount;p<f;p++){const g=t.getRangeAt(p);if(!g.collapsed)for(const{x,y,width:A,height:w}of g.getClientRects())A===0||w===0||h.push(u(x,y,A,w))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#o||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const t=this.#o?.get(e.data.id);if(!t)return;const s=this.#a.getRawValue(t);s&&(this.#_===Se.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){const i=this.#O?.get(e);i&&(i.setCanvas(t,s),this.#O.delete(e))}addMissingCanvas(e,t){(this.#O||=new Map).set(e,t)}}class Bn{#e=null;#t=!1;#n=null;#s=null;#r=null;#i=null;#a=!1;#o=null;#c=null;#l=null;#h=null;#u=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#u=e._uiManager.useNewAltTextFlow,Bn.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Bn._l10n??=e}async render(){const e=this.#n=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#s=document.createElement("span");e.append(t),this.#u?(e.classList.add("new"),e.setAttribute("data-l10n-id",Bn.#f.missing),t.setAttribute("data-l10n-id",Bn.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;e.addEventListener("contextmenu",Vs,{signal:s}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#u&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(this.#a=!0,i(r))},{signal:s}),await this.#m(),e}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#u?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#u?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await Bn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#m())}toggleAltTextBadge(e=!1){if(!this.#u||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(this.#l=s,this.#h=i),!(this.#e===e&&this.#t===t)&&(r||(this.#e=e,this.#t=t),this.#m())}toggle(e=!1){this.#n&&(!e&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#n.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#n?.remove(),this.#n=null,this.#s=null,this.#r=null,this.#o?.remove(),this.#o=null}async#m(){const e=this.#n;if(!e)return;if(this.#u){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",Bn.#f[this.#g]),this.#s?.setAttribute("data-l10n-id",Bn.#f[`${this.#g}-label`]),!this.#e){this.#r?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#r?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#r;if(!t){this.#r=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const i=100,r=this.#c._uiManager._signal;r.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:r}),e.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#r?.classList.remove("show")},{signal:r})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class Wc{#e=null;#t=null;#n=!1;#s=null;#r=null;#i=null;#a=null;#o=null;#c=!1;#l=null;constructor(e){this.#s=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#s.commentButtonPosition;if(t){const{style:s}=e;s.insetInlineEnd=`calc(${100*(this.#s._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=this.#s.commentButtonColor;i&&(s.backgroundColor=i)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#s.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#s._uiManager.updatePopupColor(this.#s)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#s.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:s}=this.#e.getBoundingClientRect(),{x:i,y:r,width:c,height:u}=this.#s.parent.boundingClientRect;return[(e-i)/c,(t+s-r)/u]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#s._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#s._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=this.#s._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return e;e.addEventListener("contextmenu",Vs,{signal:s}),t&&(e.addEventListener("focusin",r=>{this.#s._focusEventsAllowed=!1,wt(r)},{capture:!0,signal:s}),e.addEventListener("focusout",r=>{this.#s._focusEventsAllowed=!0,wt(r)},{capture:!0,signal:s})),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),e===this.#t?this.edit():this.#s.toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(this.#n=!0,i(r))},{signal:s}),e.addEventListener("pointerenter",()=>{this.#s.toggleComment(!1,!0)},{signal:s}),e.addEventListener("pointerleave",()=>{this.#s.toggleComment(!1,!1)},{signal:s}),e}edit(e){const t=this.commentPopupPositionInLayer;let s,i;if(t)[s,i]=t;else{[s,i]=this.#s.commentButtonPosition;const{width:f,height:g,x,y}=this.#s;s=x+s*f,i=y+i*g}const r=this.#s.parent.boundingClientRect,{x:c,y:u,width:h,height:p}=r;this.#s._uiManager.editComment(this.#s,c+s*h,u+i*p,{...e,parentDimensions:r})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#i,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#a&&(this.#i=null),e===null){this.#a="",this.#c=!0;return}this.#a=e,this.#o=new Date,this.#c=!1}setInitialText(e,t=null){this.#r=e,this.data=e,this.#o=null,this.#i=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#a="",this.#i=null,this.#o=null,this.#s=null,this.#n=!1,this.#c=!1}}class xl{#e;#t=!1;#n=null;#s;#r;#i;#a;#o=null;#c;#l=null;#h;#u=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:c=null,signal:u}){this.#e=e,this.#n=s,this.#s=t,this.#r=i,this.#i=r,this.#a=c,this.#h=new AbortController,this.#c=AbortSignal.any([u,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/vn.pixelRatio}#f(e){if(this.#s?.())return;if(e.touches.length===1){if(this.#o)return;const i=this.#o=new AbortController,r=AbortSignal.any([this.#c,i.signal]),c=this.#e,u={capture:!0,signal:r,passive:!1},h=p=>{p.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(wt(p),h(p))},u),c.addEventListener("pointerup",h,u),c.addEventListener("pointercancel",h,u);return}if(!this.#u){this.#u=new AbortController;const i=AbortSignal.any([this.#c,this.#u.signal]),r=this.#e,c={signal:i,capture:!1,passive:!1};r.addEventListener("touchmove",this.#g.bind(this),c);const u=this.#m.bind(this);r.addEventListener("touchend",u,c),r.addEventListener("touchcancel",u,c),c.capture=!0,r.addEventListener("pointerdown",wt,c),r.addEventListener("pointermove",wt,c),r.addEventListener("pointercancel",wt,c),r.addEventListener("pointerup",wt,c),this.#r?.()}if(wt(e),e.touches.length!==2||this.#n?.()){this.#l=null;return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#g(e){if(!this.#l||e.touches.length!==2)return;wt(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:i,screenY:r}=t,{screenX:c,screenY:u}=s,h=this.#l,{touch0X:p,touch0Y:f,touch1X:g,touch1Y:x}=h,y=g-p,A=x-f,w=c-i,j=u-r,N=Math.hypot(w,j)||1,D=Math.hypot(y,A)||1;if(!this.#t&&Math.abs(D-N)<=xl.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=i,h.touch0Y=r,h.touch1X=c,h.touch1Y=u,!this.#t){this.#t=!0;return}const L=[(i+c)/2,(r+u)/2];this.#i?.(L,D,N)}#m(e){e.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#a?.()),this.#l&&(wt(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class ye{#e=null;#t=null;#n=null;#s=null;#r=null;#i=!1;#a=null;#o="";#c=null;#l=null;#h=null;#u=null;#f=null;#g="";#m=!1;#d=null;#p=!1;#x=!1;#y=!1;#b=null;#S=0;#N=0;#v=null;#E=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#j=ye._zIndex++;static _borderLineWidth=-1;static _colorManager=new Lm;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=ye.prototype._resizeWithKeyboard,t=ui.TRANSLATE_SMALL,s=ui.TRANSLATE_BIG;return Me(this,"_resizerKeyboardManager",new gl([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],ye.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:c}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,c];const[u,h]=this.parentDimensions;this.x=e.x/u,this.y=e.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Me(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new cE({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(ye._l10n??=e,ye._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ye._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ye._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ct("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(e){this.#A=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#j}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#B(),this.#u?.remove(),this.#u=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[r,c]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/r,this.y=(t+i)/c,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,i]=this.parentDimensions;this.setAt(e*s,t*i,this.width*s,this.height*i),this._onTranslated()}#R([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#R(this.parentDimensions,e,t)}translateInPage(e,t){this.#d||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#d||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[i,r]}=this;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:x}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,x)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[h,p]=this.getBaseTranslation();c+=h,u+=p;const{style:f}=s;f.left=`${(100*c).toFixed(2)}%`,f.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#d&&(this.#d[0]!==this.x||this.#d[1]!==this.y)}get _hasBeenResized(){return!!this.#d&&(this.#d[2]!==this.width||this.#d[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=ye,i=s/e,r=s/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,i]}=this;let{x:r,y:c,width:u,height:h}=this;if(u*=s,h*=i,r*=s,c*=i,this._mustFixPosition)switch(e){case 0:r=cs(r,0,s-u),c=cs(c,0,i-h);break;case 90:r=cs(r,0,s-h),c=cs(c,u,i);break;case 180:r=cs(r,u,s),c=cs(c,h,i);break;case 270:r=cs(r,h,s),c=cs(c,0,i-u);break}this.x=r/=s,this.y=c/=i;const[p,f]=this.getBaseTranslation();r+=p,c+=f,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#C(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return ye.#C(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return ye.#C(e,t,360-this.parentRotation)}#T(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(){const{div:{style:e},width:t,height:s}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#P(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");this.#c.append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",this.#D.bind(this,s),{signal:t}),i.addEventListener("contextmenu",Vs,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#c)}#D(e,t){t.preventDefault();const{isMac:s}=Yt.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#n?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const r=new AbortController,c=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#O.bind(this,e),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",wt,{passive:!1,signal:c}),window.addEventListener("contextmenu",Vs,{signal:c}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{r.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#F()};window.addEventListener("pointerup",p,{signal:c}),window.addEventListener("blur",p,{signal:c})}#L(e,t,s,i){this.width=s,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=this.#h;this.#h=null;const r=this.x,c=this.y,u=this.width,h=this.height;r===e&&c===t&&u===s&&h===i||this.addCommands({cmd:this.#L.bind(this,r,c,u,h),undo:this.#L.bind(this,e,t,s,i),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#O(e,t){const[s,i]=this.parentDimensions,r=this.x,c=this.y,u=this.width,h=this.height,p=ye.MIN_SIZE/s,f=ye.MIN_SIZE/i,g=this.#T(this.rotation),x=(S,_)=>[g[0]*S+g[2]*_,g[1]*S+g[3]*_],y=this.#T(360-this.rotation),A=(S,_)=>[y[0]*S+y[2]*_,y[1]*S+y[3]*_];let w,j,N=!1,D=!1;switch(e){case"topLeft":N=!0,w=(S,_)=>[0,0],j=(S,_)=>[S,_];break;case"topMiddle":w=(S,_)=>[S/2,0],j=(S,_)=>[S/2,_];break;case"topRight":N=!0,w=(S,_)=>[S,0],j=(S,_)=>[0,_];break;case"middleRight":D=!0,w=(S,_)=>[S,_/2],j=(S,_)=>[0,_/2];break;case"bottomRight":N=!0,w=(S,_)=>[S,_],j=(S,_)=>[0,0];break;case"bottomMiddle":w=(S,_)=>[S/2,_],j=(S,_)=>[S/2,0];break;case"bottomLeft":N=!0,w=(S,_)=>[0,_],j=(S,_)=>[S,0];break;case"middleLeft":D=!0,w=(S,_)=>[0,_/2],j=(S,_)=>[S,_/2];break}const L=w(u,h),k=j(u,h);let U=x(...k);const C=ye._round(r+U[0]),B=ye._round(c+U[1]);let R=1,E=1,O,I;if(t.fromKeyboard)({deltaX:O,deltaY:I}=t);else{const{screenX:S,screenY:_}=t,[q,Y]=this.#l;[O,I]=this.screenToPageTranslation(S-q,_-Y),this.#l[0]=S,this.#l[1]=_}if([O,I]=A(O/s,I/i),N){const S=Math.hypot(u,h);R=E=Math.max(Math.min(Math.hypot(k[0]-L[0]-O,k[1]-L[1]-I)/S,1/u,1/h),p/u,f/h)}else D?R=cs(Math.abs(k[0]-L[0]-O),p,1)/u:E=cs(Math.abs(k[1]-L[1]-I),f,1)/h;const V=ye._round(u*R),z=ye._round(h*E);U=x(...j(V,z));const H=C-U[0],$=B-U[1];this.#d||=[this.x,this.y,this.width,this.height],this.width=V,this.height=z,this.x=H,this.y=$,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#x)return this._editToolbar;this._editToolbar=new Wo(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Bn.initialize(ye._l10n),this.#n=new Bn(this),this.#e&&(this.#n.data=this.#e,this.#e=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(e){await this.#n?.setGuessedText(e)}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#s?.focusButton()}addCommentButton(){return this.#s||=new Wc(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#s.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#s.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:s,deleted:i}}=this.#s;return{text:t,richText:e,date:s,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#s||=new Wc(this),this.#s.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:s}){if(!t||(this.#s||=new Wc(this),this.#s.setInitialText(e,s),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return this.#s?.hasBeenEdited()}get hasDeletedComment(){return this.#s?.isDeleted()}get hasComment(){return!!this.#s&&!this.#s.isEmpty()&&!this.#s.isDeleted()}async editComment(e){this.#s||=new Wc(this),this.#s.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#s.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[r]=this.pageDimensions,[c]=this.pageTranslation,u=c+r+1,h=i-100,p=u+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,p,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#s.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#i?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#z();const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),Hv(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#E||=new xl({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#q.bind(this),onPinching:this.#_.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#q(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#_(e,t,s){let r=.7*(s/t)+1-.7;if(r===1)return;const c=this.#T(this.rotation),u=(C,B)=>[c[0]*C+c[2]*B,c[1]*C+c[3]*B],[h,p]=this.parentDimensions,f=this.x,g=this.y,x=this.width,y=this.height,A=ye.MIN_SIZE/h,w=ye.MIN_SIZE/p;r=Math.max(Math.min(r,1/x,1/y),A/x,w/y);const j=ye._round(x*r),N=ye._round(y*r);if(j===x&&N===y)return;this.#d||=[f,g,x,y];const D=u(x/2,y/2),L=ye._round(f+D[0]),k=ye._round(g+D[1]),U=u(j/2,N/2);this.x=L-U[0],this.y=k-U[1],this.width=j,this.height=N,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(e){const{isMac:t}=Yt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#U(e);return}this.#M(e)}#M(e){const{isMac:t}=Yt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),c={capture:!0,passive:!1,signal:r},u=p=>{i.abort(),this.#a=null,this.#m=!1,this._uiManager.endDragSession()||this.#M(p),s&&this._onStopDragging()};t&&(this.#S=e.clientX,this.#N=e.clientY,this.#a=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",p=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:g,pointerId:x}=p;if(x!==this.#a){wt(p);return}const[y,A]=this.screenToPageTranslation(f-this.#S,g-this.#N);this.#S=f,this.#N=g,this._uiManager.dragSelectedEditors(y,A)},c),window.addEventListener("touchmove",wt,c),window.addEventListener("pointerdown",p=>{p.pointerType===this.#o&&(this.#E||p.isPrimary)&&u(p),wt(p)},c));const h=p=>{if(!this.#a||this.#a===p.pointerId){u(p);return}wt(p)};window.addEventListener("pointerup",h,{signal:r}),window.addEventListener("blur",h,{signal:r})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const i=this.parentScale,[r,c]=this.pageDimensions,[u,h]=this.pageTranslation,p=e/i,f=t/i,g=this.x*r,x=this.y*c,y=this.width*r,A=this.height*c;switch(s){case 0:return[g+p+u,c-x-f-A+h,g+p+y+u,c-x-f+h];case 90:return[g+f+u,c-x+p+h,g+f+A+u,c-x+p+y+h];case 180:return[g-p-y+u,c-x+f+h,g-p+u,c-x+f+A+h];case 270:return[g-f-A+u,c-x-p-y+h,g-f+u,c-x-p+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,r,c]=e,u=r-s,h=c-i;switch(this.rotation){case 0:return[s,t-c,u,h];case 90:return[s,t-i,h,u];case 180:return[r,t-i,u,h];case 270:return[r,t-c,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ye._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#s?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:s,opacity:i,deleted:r,richText:c},uid:u,pageIndex:h,creationDate:p,modificationDate:f}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:c,contentsObj:{str:e},creationDate:p,modificationDate:s||f,popupRef:!r,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#x=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#x=!1,!0):!1}isInEditMode(){return this.#x}shouldGetKeyboardEvents(){return this.#y}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:c}=window;return t<c&&i>0&&e<r&&s>0}#z(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#z()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,i.#e=e.accessibilityData,i._isCopy=e.isCopy||!1;const[r,c]=i.pageDimensions,[u,h,p,f]=i.getRectInCurrentCoords(e.rect,c);return i.x=u/r,i.y=h/c,i.width=p/r,i.height=f/c,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#B(),this.removeEditToolbar(),this.#v){for(const e of this.#v.values())clearTimeout(e);this.#v=null}this.parent=null,this.#E?.destroy(),this.#E=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#P(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[s,i,r,c]=this.getPDFRect();return[ye._round(s+(r-s)*e),ye._round(i+(c-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#s.commentPopupPositionInLayer}set commentPopupPosition(e){this.#s.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#s.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#s.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#s.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const c=this.#Y.bind(this),u=this.#$.bind(this),h=this._uiManager._signal;for(const p of this.#t){const f=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",c,{signal:h}),p.addEventListener("blur",u,{signal:h}),p.addEventListener("focus",this.#X.bind(this,f),{signal:h}),p.setAttribute("data-l10n-id",ye._l10nResizer[f])}}const s=this.#t[0];let i=0;for(const c of t){if(c===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(r!==i){if(r<i)for(let u=0;u<i-r;u++)this.#c.append(this.#c.firstChild);else if(r>i)for(let u=0;u<r-i;u++)this.#c.firstChild.before(this.#c.lastChild);let c=0;for(const u of t){const p=this.#t[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",ye._l10nResizer[p])}}this.#H(0),this.#y=!0,this.#c.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#Y(e){ye._resizerKeyboardManager.exec(this,e)}#$(e){this.#y&&e.relatedTarget?.parentNode!==this.#c&&this.#B()}#X(e){this.#g=this.#y?e:""}#H(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#y&&this.#O(this.#g,{deltaX:e,deltaY:t,fromKeyboard:!0})}#B(){this.#y=!1,this.#H(-1),this.#F()}_stopResizingWithKeyboard(){this.#B(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#v||=new Map;const{action:s}=e;let i=this.#v.get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#v.delete(s),this.#v.size===0&&(this.#v=null)},ye._telemetryTimeout),this.#v.set(s,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}updateFakeAnnotationElement(e){if(!this.#u&&!this.deleted){this.#u=e.addFakeAnnotation(this);return}if(this.deleted){this.#u.remove(),this.#u=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#u.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class cE extends ye{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Ub=3285377520,an=4294901760,Ln=65535;class Vv{constructor(e){this.h1=e?e&4294967295:Ub,this.h2=e?e&4294967295:Ub}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let w=0,j=e.length;w<j;w++){const N=e.charCodeAt(w);N<=255?t[s++]=N:(t[s++]=N>>>8,t[s++]=N&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,c=new Uint32Array(t.buffer,0,i);let u=0,h=0,p=this.h1,f=this.h2;const g=3432918353,x=461845907,y=g&Ln,A=x&Ln;for(let w=0;w<i;w++)w&1?(u=c[w],u=u*g&an|u*y&Ln,u=u<<15|u>>>17,u=u*x&an|u*A&Ln,p^=u,p=p<<13|p>>>19,p=p*5+3864292196):(h=c[w],h=h*g&an|h*y&Ln,h=h<<15|h>>>17,h=h*x&an|h*A&Ln,f^=h,f=f<<13|f>>>19,f=f*5+3864292196);switch(u=0,r){case 3:u^=t[i*4+2]<<16;case 2:u^=t[i*4+1]<<8;case 1:u^=t[i*4],u=u*g&an|u*y&Ln,u=u<<15|u>>>17,u=u*x&an|u*A&Ln,i&1?p^=u:f^=u}this.h1=p,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&an|e*36045&Ln,t=t*4283543511&an|((t<<16|e>>>16)*2950163797&an)>>>16,e^=t>>>1,e=e*444984403&an|e*60499&Ln,t=t*3301882366&an|((t<<16|e>>>16)*3120437893&an)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Zf=Object.freeze({map:null,hash:"",transfer:void 0});class Om{#e=!1;#t=null;#n=null;#s=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=this.#s.get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return this.#s.get(e)}remove(e){const t=this.#s.get(e);if(t!==void 0&&(t instanceof ye&&this.#n.delete(t.annotationElementId),this.#s.delete(e),this.#s.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#s.values())if(s instanceof ye)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=this.#s.get(e);let i=!1;if(s!==void 0)for(const[r,c]of Object.entries(t))s[r]!==c&&(i=!0,s[r]=c);else i=!0,this.#s.set(e,t);i&&this.#r(),t instanceof ye&&((this.#n||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#s.has(e)}get size(){return this.#s.size}#r(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new qv(this)}get serializable(){if(this.#s.size===0)return Zf;const e=new Map,t=new Vv,s=[],i=Object.create(null);let r=!1;for(const[c,u]of this.#s){const h=u instanceof ye?u.serialize(!1,i):u;h&&(e.set(c,h),t.update(`${c}:${JSON.stringify(h)}`),r||=!!h.bitmap)}if(r)for(const c of e.values())c.bitmap&&s.push(c.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:Zf}get editorStats(){let e=null;const t=new Map;let s=0,i=0;for(const r of this.#s.values()){if(!(r instanceof ye)){r.popup&&(r.popup.deleted?i+=1:s+=1);continue}r.isCommentDeleted?i+=1:r.hasEditedComment&&(s+=1);const c=r.telemetryFinalData;if(!c)continue;const{type:u}=c;t.has(u)||t.set(u,Object.getPrototypeOf(r).constructor),e||=Object.create(null);const h=e[u]||=new Map;for(const[p,f]of Object.entries(c)){if(p==="type")continue;let g=h.get(p);g||(g=new Map,h.set(p,g));const x=g.get(f)??0;g.set(f,x+1)}}if((i>0||s>0)&&(e||=Object.create(null),e.comments={deleted:i,edited:s}),!e)return null;for(const[r,c]of t)e[r]=c.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const s=this.#n?.get(e);return s?(s.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#n?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#n)for(const t of this.#n.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#s.entries()}}class qv extends Om{#e;constructor(e){super();const{map:t,hash:s,transfer:i}=e.serializable,r=structuredClone(t,i?{transfer:i}:null);this.#e={map:r,hash:s,transfer:i}}get print(){ct("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Me(this,"modifiedIds",{ids:new Set,hash:""})}}class dE{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||this.#e.has(e.loadedName))){if(Ve(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:c}=e,u=new FontFace(i,r,c);this.addNativeFontFace(u);try{await u.load(),this.#e.add(i),s?.(e)}catch{_e(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}ct("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw _e(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Me(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Me(this,"isSyncFontLoadingSupported",ms||Yt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Ve(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Me(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(k,U){return k.charCodeAt(U)<<24|k.charCodeAt(U+1)<<16|k.charCodeAt(U+2)<<8|k.charCodeAt(U+3)&255}function i(k,U,C,B){const R=k.substring(0,U),E=k.substring(U+C);return R+B+E}let r,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let p=0;function f(k,U){if(++p>30){_e("Load test font never loaded."),U();return}if(h.font="30px "+k,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){U();return}setTimeout(f.bind(null,k,U))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=i(x,976,g.length,g);const A=16,w=1482184792;let j=s(x,A);for(r=0,c=g.length-3;r<c;r+=4)j=j-w+s(g,r)|0;r<g.length&&(j=j-w+s(g+"XXX",r)|0),x=i(x,A,4,Q_(j));const N=`url(data:font/opentype;base64,${btoa(x)});`,D=`@font-face {font-family:"${g}";src:${N}}`;this.insertRule(D);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const k of[e.loadedName,g]){const U=this._document.createElement("span");U.textContent="Hi",U.style.fontFamily=k,L.append(U)}this._document.body.append(L),f(g,()=>{L.remove(),t.complete()})}}class uE{#e;constructor(e,t=null,s,i){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,s&&Object.assign(this,s),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Ov(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let i;try{i=e.get(s)}catch(c){_e(`getPathGenerator - ignoring character: "${c}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=r}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}function hE(l){if(l instanceof URL)return l.href;if(typeof l=="string"){if(ms)return l;const e=URL.parse(l,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function fE(l){if(ms&&typeof Buffer<"u"&&l instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength)return l;if(typeof l=="string")return fl(l);if(l instanceof ArrayBuffer||ArrayBuffer.isView(l)||typeof l=="object"&&!isNaN(l?.length))return new Uint8Array(l);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Kc(l){if(typeof l!="string")return null;if(l.endsWith("/"))return l;throw new Error(`Invalid factory url: "${l}" must include trailing slash.`)}const Jf=l=>typeof l=="object"&&Number.isInteger(l?.num)&&l.num>=0&&Number.isInteger(l?.gen)&&l.gen>=0,mE=l=>typeof l=="object"&&typeof l?.name=="string",Gv=tE.bind(null,Jf,mE);class pE{#e=new Map;#t=Promise.resolve();postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,s)})}addEventListener(e,t,s=null){let i=null;if(s?.signal instanceof AbortSignal){const{signal:r}=s;if(r.aborted){_e("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",c),r.addEventListener("abort",c)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Qc={DATA:1,ERROR:2},Pt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ib(){}function Ss(l){if(l instanceof di||l instanceof jd||l instanceof Db||l instanceof Zo||l instanceof Rf)return l;switch(l instanceof Error||typeof l=="object"&&l!==null||ct('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),l.name){case"AbortException":return new di(l.message);case"InvalidPDFException":return new jd(l.message);case"PasswordException":return new Db(l.message,l.code);case"ResponseException":return new Zo(l.message,l.status,l.missing);case"UnknownErrorException":return new Rf(l.message,l.details)}return new Rf(l.message,l.toString())}class $o{#e=new AbortController;constructor(e,t,s){this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#s(e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Qc.DATA)i.resolve(e.data);else if(e.callback===Qc.ERROR)i.reject(Ss(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(c){r.postMessage({sourceName:s,targetName:i,callback:Qc.DATA,callbackId:e.callbackId,data:c})},function(c){r.postMessage({sourceName:s,targetName:i,callback:Qc.ERROR,callbackId:e.callbackId,reason:Ss(c)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(c){r.reject(c)}return r.promise}sendWithStream(e,t,s,i){const r=this.streamId++,c=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:p=>{const f=Promise.withResolvers();return this.streamControllers[r]={controller:p,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:c,targetName:u,action:e,streamId:r,data:t,desiredSize:p.desiredSize},i),f.promise},pull:p=>{const f=Promise.withResolvers();return this.streamControllers[r].pullCall=f,h.postMessage({sourceName:c,targetName:u,stream:Pt.PULL,streamId:r,desiredSize:p.desiredSize}),f.promise},cancel:p=>{Ve(p instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[r].cancelCall=f,this.streamControllers[r].isClosed=!0,h.postMessage({sourceName:c,targetName:u,stream:Pt.CANCEL,streamId:r,reason:Ss(p)}),f.promise}},s)}#n(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,c=this,u=this.actionHandler[e.action],h={enqueue(p,f=1,g){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=f,x>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:Pt.ENQUEUE,streamId:t,chunk:p},g)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:Pt.CLOSE,streamId:t}),delete c.streamSinks[t])},error(p){Ve(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:Pt.ERROR,streamId:t,reason:Ss(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[t]=h,Promise.try(u,e.data,h).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Pt.START_COMPLETE,streamId:t,success:!0})},function(p){r.postMessage({sourceName:s,targetName:i,stream:Pt.START_COMPLETE,streamId:t,reason:Ss(p)})})}#s(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,c=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case Pt.START_COMPLETE:e.success?c.startCall.resolve():c.startCall.reject(Ss(e.reason));break;case Pt.PULL_COMPLETE:e.success?c.pullCall.resolve():c.pullCall.reject(Ss(e.reason));break;case Pt.PULL:if(!u){r.postMessage({sourceName:s,targetName:i,stream:Pt.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,Promise.try(u.onPull||Ib).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Pt.PULL_COMPLETE,streamId:t,success:!0})},function(p){r.postMessage({sourceName:s,targetName:i,stream:Pt.PULL_COMPLETE,streamId:t,reason:Ss(p)})});break;case Pt.ENQUEUE:if(Ve(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(e.chunk);break;case Pt.CLOSE:if(Ve(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#r(c,t);break;case Pt.ERROR:Ve(c,"error should have stream controller"),c.controller.error(Ss(e.reason)),this.#r(c,t);break;case Pt.CANCEL_COMPLETE:e.success?c.cancelCall.resolve():c.cancelCall.reject(Ss(e.reason)),this.#r(c,t);break;case Pt.CANCEL:if(!u)break;const h=Ss(e.reason);Promise.try(u.onCancel||Ib,h).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Pt.CANCEL_COMPLETE,streamId:t,success:!0})},function(p){r.postMessage({sourceName:s,targetName:i,stream:Pt.CANCEL_COMPLETE,streamId:t,reason:Ss(p)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#r(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class $v{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ct("Abstract method `_createCanvas` called.")}}class gE extends $v{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class Yv{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){ct("Abstract method `_fetch` called.")}}class zb extends Yv{async _fetch(e){const t=await Ir(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):fl(t)}}class Xv{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,r){return"none"}destroy(e=!1){}}class xE extends Xv{#e;#t;#n;#s;#r;#i;#a=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#s=e,this.#r=t}get#o(){return this.#t||=new Map}get#c(){return this.#i||=new Map}get#l(){if(!this.#n){const e=this.#r.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const s=this.#r.createElementNS(ri,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#r.createElementNS(ri,"defs"),e.append(s),s.append(this.#n),this.#r.body.append(e)}return this.#n}#h(e){if(e.length===1){const h=e[0],p=new Array(256);for(let g=0;g<256;g++)p[g]=h[g]/255;const f=p.join(",");return[f,f,f]}const[t,s,i]=e,r=new Array(256),c=new Array(256),u=new Array(256);for(let h=0;h<256;h++)r[h]=t[h]/255,c[h]=s[h]/255,u[h]=i[h]/255;return[r.join(","),c.join(","),u.join(",")]}#u(e){if(this.#e===void 0){this.#e="";const t=this.#r.URL;t!==this.#r.baseURI&&(pl(t)?_e('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=Cm(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[s,i,r]=this.#h(e),c=e.length===1?s:`${s}${i}${r}`;if(t=this.#o.get(c),t)return this.#o.set(e,t),t;const u=`g_${this.#s}_transfer_map_${this.#a++}`,h=this.#u(u);this.#o.set(e,h),this.#o.set(c,h);const p=this.#m(u);return this.#p(s,i,r,p),h}addHCMFilter(e,t){const s=`${e}-${t}`,i="base";let r=this.#c.get(i);if(r?.key===s||(r?(r.filter?.remove(),r.key=s,r.url="none",r.filter=null):(r={key:s,url:"none",filter:null},this.#c.set(i,r)),!e||!t))return r.url;const c=this.#y(e);e=me.makeHexColor(...c);const u=this.#y(t);if(t=me.makeHexColor(...u),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return r.url;const h=new Array(256);for(let y=0;y<=255;y++){const A=y/255;h[y]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const p=h.join(","),f=`g_${this.#s}_hcm_filter`,g=r.filter=this.#m(f);this.#p(p,p,p,g),this.#g(g);const x=(y,A)=>{const w=c[y]/255,j=u[y]/255,N=new Array(A+1);for(let D=0;D<=A;D++)N[D]=w+D/A*(j-w);return N.join(",")};return this.#p(x(0,5),x(1,5),x(2,5),g),r.url=this.#u(f),r.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[s]=this.#h([e]),i=`alpha_${s}`;if(t=this.#o.get(i),t)return this.#o.set(e,t),t;const r=`g_${this.#s}_alpha_map_${this.#a++}`,c=this.#u(r);this.#o.set(e,c),this.#o.set(i,c);const u=this.#m(r);return this.#x(s,u),c}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let s,i;if(e?([s]=this.#h([e]),i=`luminosity_${s}`):i="luminosity",t=this.#o.get(i),t)return this.#o.set(e,t),t;const r=`g_${this.#s}_luminosity_map_${this.#a++}`,c=this.#u(r);this.#o.set(e,c),this.#o.set(i,c);const u=this.#m(r);return this.#f(u),e&&this.#x(s,u),c}addHighlightHCMFilter(e,t,s,i,r){const c=`${t}-${s}-${i}-${r}`;let u=this.#c.get(e);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#c.set(e,u)),!t||!s))return u.url;const[h,p]=[t,s].map(this.#y.bind(this));let f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),g=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[x,y]=[i,r].map(this.#y.bind(this));g<f&&([f,g,x,y]=[g,f,y,x]),this.#l.style.color="";const A=(N,D,L)=>{const k=new Array(256),U=(g-f)/L,C=N/255,B=(D-N)/(255*L);let R=0;for(let E=0;E<=L;E++){const O=Math.round(f+E*U),I=C+E*B;for(let V=R;V<=O;V++)k[V]=I;R=O+1}for(let E=R;E<256;E++)k[E]=k[R-1];return k.join(",")},w=`g_${this.#s}_hcm_${e}_filter`,j=u.filter=this.#m(w);return this.#g(j),this.#p(A(x[0],y[0],5),A(x[1],y[1],5),A(x[2],y[2],5),j),u.url=this.#u(w),u.url}destroy(e=!1){e&&this.#i?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#t?.clear(),this.#t=null,this.#i?.clear(),this.#i=null,this.#a=0)}#f(e){const t=this.#r.createElementNS(ri,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#g(e){const t=this.#r.createElementNS(ri,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#m(e){const t=this.#r.createElementNS(ri,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#d(e,t,s){const i=this.#r.createElementNS(ri,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),e.append(i)}#p(e,t,s,i){const r=this.#r.createElementNS(ri,"feComponentTransfer");i.append(r),this.#d(r,"feFuncR",e),this.#d(r,"feFuncG",t),this.#d(r,"feFuncB",s)}#x(e,t){const s=this.#r.createElementNS(ri,"feComponentTransfer");t.append(s),this.#d(s,"feFuncA",e)}#y(e){return this.#l.style.color=e,zr(getComputedStyle(this.#l).getPropertyValue("color"))}}class Wv{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){ct("Abstract method `_fetch` called.")}}class Hb extends Wv{async _fetch(e){const t=await Ir(e,"arraybuffer");return new Uint8Array(t)}}class Kv{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){ct("Abstract method `_fetch` called.")}}class Vb extends Kv{async _fetch(e){const t=await Ir(e,"arraybuffer");return new Uint8Array(t)}}ms&&_e("Please use the `legacy` build in Node.js environments.");async function Bm(l){const t=await process.getBuiltinModule("fs").promises.readFile(l);return new Uint8Array(t)}class bE extends Xv{}class yE extends $v{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class vE extends Yv{async _fetch(e){return Bm(e)}}class wE extends Wv{async _fetch(e){return Bm(e)}}class AE extends Kv{async _fetch(e){return Bm(e)}}const hr="__forcedDependency",{floor:qb,ceil:Gb}=Math;function Zc(l,e,t,s,i,r){l[e*4+0]=Math.min(l[e*4+0],t),l[e*4+1]=Math.min(l[e*4+1],s),l[e*4+2]=Math.max(l[e*4+2],i),l[e*4+3]=Math.max(l[e*4+3],r)}const em=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class NE{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===em}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const Jc=(l,e)=>{if(!l)return;let t=l.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},l.set(e,t)),t};class jE{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[hr]:[]};#n=new Map;#s=[];#r=[];#i=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#u=new Map;#f;#g;#m;#d;#p;constructor(e,t,s=!1){this.#f=e.width,this.#g=e.height,this.#x(t),s&&(this.#p=new Map)}growOperationsCount(e){e>=this.#d.length&&this.#x(e,this.#d)}#x(e,t){const s=new ArrayBuffer(e*4);this.#m=new Uint8ClampedArray(s),this.#d=new Uint32Array(s),t&&t.length>0?(this.#d.set(t),this.#d.fill(em,t.length)):this.#d.fill(em)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[hr]:{__proto__:this.#t[hr]}},this.#a={__proto__:this.#a},this.#s.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#a=Object.getPrototypeOf(this.#a);const s=this.#s.pop();return s!==void 0&&(Jc(this.#p,e)?.dependencies.add(s),this.#d[e]=this.#d[s]),this}recordOpenMarker(e){return this.#s.push(e),this}getOpenMarker(){return this.#s.length===0?null:this.#s.at(-1)}recordCloseMarker(e){const t=this.#s.pop();return t!==void 0&&(Jc(this.#p,e)?.dependencies.add(t),this.#d[e]=this.#d[t]),this}beginMarkedContent(e){return this.#r.push(e),this}endMarkedContent(e){const t=this.#r.pop();return t!==void 0&&(Jc(this.#p,e)?.dependencies.add(t),this.#d[e]=this.#d[t]),this}pushBaseTransform(e){return this.#i.push(me.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform())),this}popBaseTransform(){return this.#i.length>1&&this.#i.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#n.set(e,t),this}recordSimpleDataFromNamed(e,t,s){this.#e[e]=this.#n.get(t)??s}recordFutureForcedDependency(e,t){return this.recordIncrementalData(hr,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(hr,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,t,s,i,r,c){const u=me.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform()),h=[1/0,1/0,-1/0,-1/0];me.axialAlignedBoundingBox([s,r,i,c],u,h);const p=me.intersect(this.#a,h);return p?(this.#a[0]=p[0],this.#a[1]=p[1],this.#a[2]=p[2],this.#a[3]=p[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(e,t,s,i,r,c){const u=this.#a;if(u[0]===1/0)return this;const h=me.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform());if(u[0]===-1/0)return me.axialAlignedBoundingBox([s,r,i,c],h,this.#o),this;const p=[1/0,1/0,-1/0,-1/0];return me.axialAlignedBoundingBox([s,r,i,c],h,p),this.#o[0]=Math.min(this.#o[0],Math.max(p[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(p[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(p[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(p[3],u[3])),this}recordCharacterBBox(e,t,s,i=1,r=0,c=0,u){const h=s.bbox;let p,f;if(h&&(p=h[2]!==h[0]&&h[3]!==h[1]&&this.#u.get(s),p!==!1&&(f=[0,0,0,0],me.axialAlignedBoundingBox(h,s.fontMatrix,f),(i!==1||r!==0||c!==0)&&me.scaleMinMax([i,0,0,-i,r,c],f),p)))return this.recordBBox(e,t,f[0],f[2],f[1],f[3]);if(!u)return this.recordFullPageBBox(e);const g=u();return h&&f&&p===void 0&&(p=f[0]<=r-g.actualBoundingBoxLeft&&f[2]>=r+g.actualBoundingBoxRight&&f[1]<=c-g.actualBoundingBoxAscent&&f[3]>=c+g.actualBoundingBoxDescent,this.#u.set(s,p),p)?this.recordBBox(e,t,f[0],f[2],f[1],f[3]):this.recordBBox(e,t,r-g.actualBoundingBoxLeft,r+g.actualBoundingBoxRight,c-g.actualBoundingBoxAscent,c+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#g,this.#a[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const s=this.#l,i=this.#e,r=this.#t;for(const c of t)c in this.#e?s.add(i[c]):c in r&&r[c].forEach(s.add,s);return this}recordNamedDependency(e,t){return this.#n.has(t)&&this.#l.add(this.#n.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[hr]),this.#p){const s=Jc(this.#p,e),{dependencies:i}=s;this.#l.forEach(i.add,i),this.#s.forEach(i.add,i),this.#r.forEach(i.add,i),i.delete(e),s.isRenderingOperation=!0}if(this.#c===e){const s=qb(this.#o[0]*256/this.#f),i=qb(this.#o[1]*256/this.#g),r=Gb(this.#o[2]*256/this.#f),c=Gb(this.#o[3]*256/this.#g);Zc(this.#m,e,s,i,r,c);for(const u of this.#l)u!==e&&Zc(this.#m,u,s,i,r,c);for(const u of this.#s)u!==e&&Zc(this.#m,u,s,i,r,c);for(const u of this.#r)u!==e&&Zc(this.#m,u,s,i,r,c);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const s=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of s)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#u.clear(),new NE(this.#d,this.#m)}takeDebugMetadata(){return this.#p}}class Ed{#e;#t;#n;#s=0;#r=0;constructor(e,t,s){if(e instanceof Ed&&e.#n===!!s)return e;this.#e=e,this.#t=t,this.#n=!!s}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#r++,this.#e.save(this.#t),this}restore(e){return this.#r>0&&(this.#e.restore(this.#t),this.#r--),this}recordOpenMarker(e){return this.#s++,this}getOpenMarker(){return this.#s>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#s--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,s){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#n||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,s,i,r,c){return this.#n||this.#e.recordClipBox(this.#t,t,s,i,r,c),this}recordBBox(e,t,s,i,r,c){return this.#n||this.#e.recordBBox(this.#t,t,s,i,r,c),this}recordCharacterBBox(e,t,s,i,r,c,u){return this.#n||this.#e.recordCharacterBBox(this.#t,t,s,i,r,c,u),this}recordFullPageBBox(e){return this.#n||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#n||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const rn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},ns={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function tm(l,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),l.clip(i)}class Pm{isModifyingCurrentTransform(){return!1}getPattern(){ct("Abstract method `getPattern` called.")}}class SE extends Pm{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,i){let r;if(i===ns.STROKE||i===ns.FILL){const c=t.current.getClippedPathBoundingBox(i,vt(e))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,h=Math.ceil(c[3]-c[1])||1,p=t.cachedCanvases.getCanvas("pattern",u,h),f=p.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-c[0],-c[1]),s=me.transform(s,[1,0,0,1,c[0],c[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),tm(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),r=e.createPattern(p.canvas,"no-repeat");const g=new DOMMatrix(s);r.setTransform(g)}else tm(e,this._bbox),r=this._createGradient(e);return r}}function Mf(l,e,t,s,i,r,c,u){const h=e.coords,p=e.colors,f=l.data,g=l.width*4;let x;h[t+1]>h[s+1]&&(x=t,t=s,s=x,x=r,r=c,c=x),h[s+1]>h[i+1]&&(x=s,s=i,i=x,x=c,c=u,u=x),h[t+1]>h[s+1]&&(x=t,t=s,s=x,x=r,r=c,c=x);const y=(h[t]+e.offsetX)*e.scaleX,A=(h[t+1]+e.offsetY)*e.scaleY,w=(h[s]+e.offsetX)*e.scaleX,j=(h[s+1]+e.offsetY)*e.scaleY,N=(h[i]+e.offsetX)*e.scaleX,D=(h[i+1]+e.offsetY)*e.scaleY;if(A>=D)return;const L=p[r],k=p[r+1],U=p[r+2],C=p[c],B=p[c+1],R=p[c+2],E=p[u],O=p[u+1],I=p[u+2],V=Math.round(A),z=Math.round(D);let H,$,S,_,q,Y,ee,F;for(let G=V;G<=z;G++){if(G<j){const ue=G<A?0:(A-G)/(A-j);H=y-(y-w)*ue,$=L-(L-C)*ue,S=k-(k-B)*ue,_=U-(U-R)*ue}else{let ue;G>D?ue=1:j===D?ue=0:ue=(j-G)/(j-D),H=w-(w-N)*ue,$=C-(C-E)*ue,S=B-(B-O)*ue,_=R-(R-I)*ue}let Z;G<A?Z=0:G>D?Z=1:Z=(A-G)/(A-D),q=y-(y-N)*Z,Y=L-(L-E)*Z,ee=k-(k-O)*Z,F=U-(U-I)*Z;const Q=Math.round(Math.min(H,q)),K=Math.round(Math.max(H,q));let de=g*G+Q*4;for(let ue=Q;ue<=K;ue++)Z=(H-ue)/(H-q),Z<0?Z=0:Z>1&&(Z=1),f[de++]=$-($-Y)*Z|0,f[de++]=S-(S-ee)*Z|0,f[de++]=_-(_-F)*Z|0,f[de++]=255}}function _E(l,e,t){const s=e.coords,i=e.colors;let r,c;switch(e.type){case"lattice":const u=e.verticesPerRow,h=Math.floor(s.length/u)-1,p=u-1;for(r=0;r<h;r++){let f=r*u;for(let g=0;g<p;g++,f++)Mf(l,t,s[f],s[f+1],s[f+u],i[f],i[f+1],i[f+u]),Mf(l,t,s[f+u+1],s[f+1],s[f+u],i[f+u+1],i[f+1],i[f+u])}break;case"triangles":for(r=0,c=s.length;r<c;r+=3)Mf(l,t,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class EE extends Pm{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-u,f=Math.ceil(this._bounds[3])-h,g=Math.min(Math.ceil(Math.abs(p*e[0]*1.1)),3e3),x=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),y=p/g,A=f/x,w={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/y,scaleY:1/A},j=g+4,N=x+4,D=s.getCanvas("mesh",j,N),L=D.context,k=L.createImageData(g,x);if(t){const C=k.data;for(let B=0,R=C.length;B<R;B+=4)C[B]=t[0],C[B+1]=t[1],C[B+2]=t[2],C[B+3]=255}for(const C of this._figures)_E(k,C,w);return L.putImageData(k,2,2),{canvas:D.canvas,offsetX:u-2*y,offsetY:h-2*A,scaleX:y,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,i){tm(e,this._bbox);const r=new Float32Array(2);if(i===ns.SHADING)me.singularValueDecompose2dScale(vt(e),r);else if(this.matrix){me.singularValueDecompose2dScale(this.matrix,r);const[u,h]=r;me.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=u,r[1]*=h}else me.singularValueDecompose2dScale(t.baseTransform,r);const c=this._createMeshCanvas(r,i===ns.SHADING?null:this._background,t.cachedCanvases);return i!==ns.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(c.offsetX,c.offsetY),e.scale(c.scaleX,c.scaleY),e.createPattern(c.canvas,"no-repeat")}}class CE extends Pm{getPattern(){return"hotpink"}}function TE(l){switch(l[0]){case"RadialAxial":return new SE(l);case"Mesh":return new EE(l);case"Dummy":return new CE}throw new Error(`Unknown IR type: ${l[0]}`)}const $b={COLORED:1,UNCOLORED:2};class Fm{static MAX_PATTERN_SIZE=3e3;constructor(e,t,s,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e,t){const{bbox:s,operatorList:i,paintType:r,tilingType:c,color:u,canvasGraphicsFactory:h}=this;let{xstep:p,ystep:f}=this;p=Math.abs(p),f=Math.abs(f),Vd("TilingType: "+c);const g=s[0],x=s[1],y=s[2],A=s[3],w=y-g,j=A-x,N=new Float32Array(2);me.singularValueDecompose2dScale(this.matrix,N);const[D,L]=N;me.singularValueDecompose2dScale(this.baseTransform,N);const k=D*N[0],U=L*N[1];let C=w,B=j,R=!1,E=!1;const O=Math.ceil(p*k),I=Math.ceil(f*U),V=Math.ceil(w*k),z=Math.ceil(j*U);O>=V?C=p:R=!0,I>=z?B=f:E=!0;const H=this.getSizeAndScale(C,this.ctx.canvas.width,k),$=this.getSizeAndScale(B,this.ctx.canvas.height,U),S=e.cachedCanvases.getCanvas("pattern",H.size,$.size),_=S.context,q=h.createCanvasGraphics(_,t);if(q.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(q,r,u),_.translate(-H.scale*g,-$.scale*x),q.transform(0,H.scale,0,0,$.scale,0,0),_.save(),q.dependencyTracker?.save(),this.clipBbox(q,g,x,y,A),q.baseTransform=vt(q.ctx),q.executeOperatorList(i),q.endDrawing(),q.dependencyTracker?.restore(),_.restore(),R||E){const Y=S.canvas;R&&(C=p),E&&(B=f);const ee=this.getSizeAndScale(C,this.ctx.canvas.width,k),F=this.getSizeAndScale(B,this.ctx.canvas.height,U),G=ee.size,Z=F.size,Q=e.cachedCanvases.getCanvas("pattern-workaround",G,Z),K=Q.context,de=R?Math.floor(w/p):0,ue=E?Math.floor(j/f):0;for(let ve=0;ve<=de;ve++)for(let he=0;he<=ue;he++)K.drawImage(Y,G*ve,Z*he,G,Z,0,0,G,Z);return{canvas:Q.canvas,scaleX:ee.scale,scaleY:F.scale,offsetX:g,offsetY:x}}return{canvas:S.canvas,scaleX:H.scale,scaleY:$.scale,offsetX:g,offsetY:x}}getSizeAndScale(e,t,s){const i=Math.max(Fm.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*s);return r>=i?r=i:s=r/e,{scale:s,size:r}}clipBbox(e,t,s,i,r){const c=i-t,u=r-s;e.ctx.rect(t,s,c,u),me.axialAlignedBoundingBox([t,s,i,r],vt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,r=e.current;switch(t){case $b.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;i.fillStyle=r.fillColor=c,i.strokeStyle=r.strokeColor=u;break;case $b.UNCOLORED:i.fillStyle=i.strokeStyle=s,r.fillColor=r.strokeColor=s;break;default:throw new K_(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,i,r){let c=s;i!==ns.SHADING&&(c=me.transform(c,t.baseTransform),this.matrix&&(c=me.transform(c,this.matrix)));const u=this.createPatternCanvas(t,r);let h=new DOMMatrix(c);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const p=e.createPattern(u.canvas,"repeat");return p.setTransform(h),p}}function RE({src:l,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:c=!1}){const u=Yt.isLittleEndian?4278190080:255,[h,p]=c?[r,u]:[u,r],f=s>>3,g=s&7,x=l.length;t=new Uint32Array(t.buffer);let y=0;for(let A=0;A<i;A++){for(const j=e+f;e<j;e++){const N=e<x?l[e]:255;t[y++]=N&128?p:h,t[y++]=N&64?p:h,t[y++]=N&32?p:h,t[y++]=N&16?p:h,t[y++]=N&8?p:h,t[y++]=N&4?p:h,t[y++]=N&2?p:h,t[y++]=N&1?p:h}if(g===0)continue;const w=e<x?l[e++]:255;for(let j=0;j<g;j++)t[y++]=w&1<<7-j?p:h}return{srcPos:e,destPos:y}}const Yb=16,Xb=100,kE=15,Wb=10,_s=16,Lf=new DOMMatrix,Hs=new Float32Array(2),yr=new Float32Array([1/0,1/0,-1/0,-1/0]);function DE(l,e){if(l._removeMirroring)throw new Error("Context is already forwarding operations.");l.__originalSave=l.save,l.__originalRestore=l.restore,l.__originalRotate=l.rotate,l.__originalScale=l.scale,l.__originalTranslate=l.translate,l.__originalTransform=l.transform,l.__originalSetTransform=l.setTransform,l.__originalResetTransform=l.resetTransform,l.__originalClip=l.clip,l.__originalMoveTo=l.moveTo,l.__originalLineTo=l.lineTo,l.__originalBezierCurveTo=l.bezierCurveTo,l.__originalRect=l.rect,l.__originalClosePath=l.closePath,l.__originalBeginPath=l.beginPath,l._removeMirroring=()=>{l.save=l.__originalSave,l.restore=l.__originalRestore,l.rotate=l.__originalRotate,l.scale=l.__originalScale,l.translate=l.__originalTranslate,l.transform=l.__originalTransform,l.setTransform=l.__originalSetTransform,l.resetTransform=l.__originalResetTransform,l.clip=l.__originalClip,l.moveTo=l.__originalMoveTo,l.lineTo=l.__originalLineTo,l.bezierCurveTo=l.__originalBezierCurveTo,l.rect=l.__originalRect,l.closePath=l.__originalClosePath,l.beginPath=l.__originalBeginPath,delete l._removeMirroring},l.save=function(){e.save(),this.__originalSave()},l.restore=function(){e.restore(),this.__originalRestore()},l.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},l.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},l.transform=function(t,s,i,r,c,u){e.transform(t,s,i,r,c,u),this.__originalTransform(t,s,i,r,c,u)},l.setTransform=function(t,s,i,r,c,u){e.setTransform(t,s,i,r,c,u),this.__originalSetTransform(t,s,i,r,c,u)},l.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},l.rotate=function(t){e.rotate(t),this.__originalRotate(t)},l.clip=function(t){e.clip(t),this.__originalClip(t)},l.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},l.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},l.bezierCurveTo=function(t,s,i,r,c,u){e.bezierCurveTo(t,s,i,r,c,u),this.__originalBezierCurveTo(t,s,i,r,c,u)},l.rect=function(t,s,i,r){e.rect(t,s,i,r),this.__originalRect(t,s,i,r)},l.closePath=function(){e.closePath(),this.__originalClosePath()},l.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class ME{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function ed(l,e,t,s,i,r,c,u,h,p){const[f,g,x,y,A,w]=vt(l);if(g===0&&x===0){const D=c*f+A,L=Math.round(D),k=u*y+w,U=Math.round(k),C=(c+h)*f+A,B=Math.abs(Math.round(C)-L)||1,R=(u+p)*y+w,E=Math.abs(Math.round(R)-U)||1;return l.setTransform(Math.sign(f),0,0,Math.sign(y),L,U),l.drawImage(e,t,s,i,r,0,0,B,E),l.setTransform(f,g,x,y,A,w),[B,E]}if(f===0&&y===0){const D=u*x+A,L=Math.round(D),k=c*g+w,U=Math.round(k),C=(u+p)*x+A,B=Math.abs(Math.round(C)-L)||1,R=(c+h)*g+w,E=Math.abs(Math.round(R)-U)||1;return l.setTransform(0,Math.sign(g),Math.sign(x),0,L,U),l.drawImage(e,t,s,i,r,0,0,E,B),l.setTransform(f,g,x,y,A,w),[E,B]}l.drawImage(e,t,s,i,r,c,u,h,p);const j=Math.hypot(f,g),N=Math.hypot(x,y);return[j*h,N*p]}class Kb{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Kf;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=ss.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,s){s?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=yr.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=ns.FILL,t=null){const s=this.minMax.slice();if(e===ns.STROKE){t||ct("Stroke bounding box must include transform."),me.singularValueDecompose2dScale(t,Hs);const i=Hs[0]*this.lineWidth/2,r=Hs[1]*this.lineWidth/2;s[0]-=i,s[1]-=r,s[2]+=i,s[3]+=r}return s}updateClipFromPath(){const e=me.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(yr,0)}getClippedPathBoundingBox(e=ns.FILL,t=null){return me.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Qb(l,e){if(e instanceof ImageData){l.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%_s,r=(t-i)/_s,c=i===0?r:r+1,u=l.createImageData(s,_s);let h=0,p;const f=e.data,g=u.data;let x,y,A,w;if(e.kind===Xo.GRAYSCALE_1BPP){const j=f.byteLength,N=new Uint32Array(g.buffer,0,g.byteLength>>2),D=N.length,L=s+7>>3,k=4294967295,U=Yt.isLittleEndian?4278190080:255;for(x=0;x<c;x++){for(A=x<r?_s:i,p=0,y=0;y<A;y++){const C=j-h;let B=0;const R=C>L?s:C*8-7,E=R&-8;let O=0,I=0;for(;B<E;B+=8)I=f[h++],N[p++]=I&128?k:U,N[p++]=I&64?k:U,N[p++]=I&32?k:U,N[p++]=I&16?k:U,N[p++]=I&8?k:U,N[p++]=I&4?k:U,N[p++]=I&2?k:U,N[p++]=I&1?k:U;for(;B<R;B++)O===0&&(I=f[h++],O=128),N[p++]=I&O?k:U,O>>=1}for(;p<D;)N[p++]=0;l.putImageData(u,0,x*_s)}}else if(e.kind===Xo.RGBA_32BPP){for(y=0,w=s*_s*4,x=0;x<r;x++)g.set(f.subarray(h,h+w)),h+=w,l.putImageData(u,0,y),y+=_s;x<c&&(w=s*i*4,g.set(f.subarray(h,h+w)),l.putImageData(u,0,y))}else if(e.kind===Xo.RGB_24BPP)for(A=_s,w=s*A,x=0;x<c;x++){for(x>=r&&(A=i,w=s*A),p=0,y=w;y--;)g[p++]=f[h++],g[p++]=f[h++],g[p++]=f[h++],g[p++]=255;l.putImageData(u,0,x*_s)}else throw new Error(`bad image kind: ${e.kind}`)}function Zb(l,e){if(e.bitmap){l.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%_s,r=(t-i)/_s,c=i===0?r:r+1,u=l.createImageData(s,_s);let h=0;const p=e.data,f=u.data;for(let g=0;g<c;g++){const x=g<r?_s:i;({srcPos:h}=RE({src:p,srcPos:h,dest:f,width:s,height:x,nonBlackColor:0})),l.putImageData(u,0,g*_s)}}function Uo(l,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)l[s]!==void 0&&(e[s]=l[s]);l.setLineDash!==void 0&&(e.setLineDash(l.getLineDash()),e.lineDashOffset=l.lineDashOffset)}function td(l){l.strokeStyle=l.fillStyle="#000000",l.fillRule="nonzero",l.globalAlpha=1,l.lineWidth=1,l.lineCap="butt",l.lineJoin="miter",l.miterLimit=10,l.globalCompositeOperation="source-over",l.font="10px sans-serif",l.setLineDash!==void 0&&(l.setLineDash([]),l.lineDashOffset=0);const{filter:e}=l;e!=="none"&&e!==""&&(l.filter="none")}function Jb(l,e){if(e)return!0;me.singularValueDecompose2dScale(l,Hs);const t=Math.fround(vn.pixelRatio*ba.PDF_TO_CSS_UNITS);return Hs[0]<=t&&Hs[1]<=t}const LE=["butt","round","square"],OE=["miter","round","bevel"],BE={},ey={};class wr{constructor(e,t,s,i,r,{optionalContentConfig:c,markedContentStack:u=null},h,p,f){this.ctx=e,this.current=new Kb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new ME(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,t,s=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):s}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,c),this.ctx.fillStyle=u,s){const h=this.cachedCanvases.getCanvas("transparent",r,c);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...vt(this.compositeCtx))}this.ctx.save(),td(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=vt(this.ctx)}executeOperatorList(e,t,s,i,r){const c=e.argsArray,u=e.fnArray;let h=t||0;const p=c.length;if(p===h)return h;const f=p-h>Wb&&typeof s=="function",g=f?Date.now()+kE:0;let x=0;const y=this.commonObjs,A=this.objs;let w,j;for(;;){if(i!==void 0&&h===i.nextBreakPoint)return i.breakIt(h,s),h;if(!r||r(h))if(w=u[h],j=c[h]??null,w!==Cr.dependency)j===null?this[w](h):this[w](h,...j);else for(const N of j){this.dependencyTracker?.recordNamedData(N,h);const D=N.startsWith("g_")?y:A;if(!D.has(N))return D.get(N,s),h}if(h++,h===p)return h;if(f&&++x>Wb){if(Date.now()>g)return s(),h;x=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),u=s,h=i,p="prescale1",f,g;for(;r>2&&u>1||c>2&&h>1;){let x=u,y=h;r>2&&u>1&&(x=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),r/=u/x),c>2&&h>1&&(y=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/y),f=this.cachedCanvases.getCanvas(p,x,y),g=f.context,g.clearRect(0,0,x,y),g.drawImage(e,0,0,u,h,0,0,x,y),e=f.canvas,u=x,h=y,p=p==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:h}}_createMaskCanvas(e,t){const s=this.ctx,{width:i,height:r}=t,c=this.current.fillColor,u=this.current.patternFill,h=vt(s);let p,f,g,x;if((t.bitmap||t.data)&&t.count>1){const O=t.bitmap||t.data.buffer;f=JSON.stringify(u?h:[h.slice(0,4),c]),p=this._cachedBitmapsMap.get(O),p||(p=new Map,this._cachedBitmapsMap.set(O,p));const I=p.get(f);if(I&&!u){const V=Math.round(Math.min(h[0],h[2])+h[4]),z=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(e,rn.transformAndFill),{canvas:I,offsetX:V,offsetY:z}}g=I}g||(x=this.cachedCanvases.getCanvas("maskCanvas",i,r),Zb(x.context,t));let y=me.transform(h,[1/i,0,0,-1/r,0,0]);y=me.transform(y,[1,0,0,1,0,-r]);const A=yr.slice();me.axialAlignedBoundingBox([0,0,i,r],y,A);const[w,j,N,D]=A,L=Math.round(N-w)||1,k=Math.round(D-j)||1,U=this.cachedCanvases.getCanvas("fillCanvas",L,k),C=U.context,B=w,R=j;C.translate(-B,-R),C.transform(...y),g||(g=this._scaleImage(x.canvas,Mn(C)),g=g.img,p&&u&&p.set(f,g)),C.imageSmoothingEnabled=Jb(vt(C),t.interpolate),ed(C,g,0,0,g.width,g.height,0,0,i,r),C.globalCompositeOperation="source-in";const E=me.transform(Mn(C),[1,0,0,1,-B,-R]);return C.fillStyle=u?c.getPattern(s,this,E,ns.FILL,e):c,C.fillRect(0,0,i,r),p&&!u&&(this.cachedCanvases.delete("fillCanvas"),p.set(f,U.canvas)),this.dependencyTracker?.recordDependencies(e,rn.transformAndFill),{canvas:U.canvas,offsetX:Math.round(B),offsetY:Math.round(R)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=LE[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=OE[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,s){this.dependencyTracker?.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=s)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[s,i]of t)switch(s){case"LW":this.setLineWidth(e,i);break;case"LC":this.setLineCap(e,i);break;case"LJ":this.setLineJoin(e,i);break;case"ML":this.setMiterLimit(e,i);break;case"D":this.setDash(e,i[0],i[1]);break;case"RI":this.setRenderingIntent(e,i);break;case"FL":this.setFlatness(e,i);break;case"Font":this.setFont(e,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,t,s);this.suspendedCtx=this.ctx;const c=this.ctx=r.context;c.setTransform(this.suspendedCtx.getTransform()),Uo(this.suspendedCtx,c),DE(c,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Uo(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const r=i[0],c=i[1],u=i[2]-r,h=i[3]-c;u===0||h===0||(this.genericComposeSMask(t.context,s,u,h,t.subtype,t.backdrop,t.transferMap,r,c,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,r,c,u,h,p,f,g){let x=e.canvas,y=h-f,A=p-g;if(c)if(y<0||A<0||y+s>x.width||A+i>x.height){const j=this.cachedCanvases.getCanvas("maskExtension",s,i),N=j.context;N.drawImage(x,-y,-A),N.globalCompositeOperation="destination-atop",N.fillStyle=c,N.fillRect(0,0,s,i),N.globalCompositeOperation="source-over",x=j.canvas,y=A=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const j=new Path2D;j.rect(y,A,s,i),e.clip(j),e.globalCompositeOperation="destination-atop",e.fillStyle=c,e.fillRect(y,A,s,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const w=new Path2D;w.rect(h,p,s,i),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(x,y,A,s,i,h,p,s,i),t.restore()}save(e){this.inSMaskMode&&Uo(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Uo(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,i,r,c,u){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,s,i,r,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s,i){let[r]=s;if(!i){r||=s[0]=new Path2D,this[t](e,r);return}if(this.dependencyTracker!==null){const c=t===Cr.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-c,i[2]+c,i[1]-c,i[3]+c).recordDependencies(e,["transform"])}if(!(r instanceof Path2D)){const c=s[0]=new Path2D;for(let u=0,h=r.length;u<h;)switch(r[u++]){case Xc.moveTo:c.moveTo(r[u++],r[u++]);break;case Xc.lineTo:c.lineTo(r[u++],r[u++]);break;case Xc.curveTo:c.bezierCurveTo(r[u++],r[u++],r[u++],r[u++],r[u++],r[u++]);break;case Xc.closePath:c.closePath();break;default:_e(`Unrecognized drawing path operator: ${r[u-1]}`);break}r=c}me.axialAlignedBoundingBox(i,vt(this.ctx),this.current.minMax),this[t](e,r),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,s=!0){const i=this.ctx,r=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&r?.getPattern){const c=r.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=r.getPattern(i,this,Mn(i),ns.STROKE,e),c){const u=new Path2D;u.addPath(t,i.getTransform().invertSelf().multiplySelf(c)),t=u}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,rn.stroke),s&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(ns.STROKE,vt(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,s=!0){const i=this.ctx,r=this.current.fillColor,c=this.current.patternFill;let u=!1;if(c){const p=r.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(e),i.save(),i.fillStyle=r.getPattern(i,this,Mn(i),ns.FILL,e),p){const f=new Path2D;f.addPath(t,i.getTransform().invertSelf().multiplySelf(p)),t=f}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),this.dependencyTracker?.recordDependencies(e,rn.fill),u&&(i.restore(),this.dependencyTracker?.restore(e)),s&&this.consumePath(e,t,h)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,rn.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=BE}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=ey}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,r=s.getTransform().invertSelf();for(const{transform:c,x:u,y:h,fontSize:p,path:f}of t)f&&i.addPath(f,new DOMMatrix(c).preMultiplySelf(r).translate(u,h).scale(p,-p));s.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,s){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=i.fontMatrix||Kf,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&_e("Invalid font matrix for font "+t),s<0?(s=-s,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=s,i.isType3Font)return;const c=i.loadedName||"sans-serif",u=i.systemFontInfo?.css||`"${c}", ${i.fallbackName}`;let h="normal";i.black?h="900":i.bold&&(h="bold");const p=i.italic?"italic":"normal";let f=s;s<Yb?f=Yb:s>Xb&&(f=Xb),this.current.fontSizeScale=s/f,this.ctx.font=`${p} ${h} ${f}px ${u}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,t,s){this.setLeading(e,-s),this.moveText(e,t,s)}setTextMatrix(e,t){this.dependencyTracker?.recordSimpleData("textMatrix",e);const{current:s}=this;s.textMatrix=t,s.textMatrixScale=Math.hypot(t[0],t[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#n(e,t,s){const i=new Path2D;return i.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),i}paintChar(e,t,s,i,r,c){const u=this.ctx,h=this.current,p=h.font,f=h.textRenderingMode,g=h.fontSize/h.fontSizeScale,x=f&ss.FILL_STROKE_MASK,y=!!(f&ss.ADD_TO_PATH_FLAG),A=h.patternFill&&!p.missingFile,w=h.patternStroke&&!p.missingFile;let j;if((p.disableFontFace||y||A||w)&&!p.missingFile&&(j=p.getPathGenerator(this.commonObjs,t)),j&&(p.disableFontFace||A||w)){u.save(),u.translate(s,i),u.scale(g,-g),this.dependencyTracker?.recordCharacterBBox(e,u,p);let N;if(x===ss.FILL||x===ss.FILL_STROKE)if(r){N=u.getTransform(),u.setTransform(...r);const D=this.#n(j,N,r);u.fill(D)}else u.fill(j);if(x===ss.STROKE||x===ss.FILL_STROKE)if(c){N||=u.getTransform(),u.setTransform(...c);const{a:D,b:L,c:k,d:U}=N,C=me.inverseTransform(c),B=me.transform([D,L,k,U,0,0],C);me.singularValueDecompose2dScale(B,Hs),u.lineWidth*=Math.max(Hs[0],Hs[1])/g,u.stroke(this.#n(j,N,c))}else u.lineWidth/=g,u.stroke(j);u.restore()}else(x===ss.FILL||x===ss.FILL_STROKE)&&(u.fillText(t,s,i),this.dependencyTracker?.recordCharacterBBox(e,u,p,g,s,i,()=>u.measureText(t))),(x===ss.STROKE||x===ss.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,u,p,g,s,i,()=>u.measureText(t)).recordDependencies(e,rn.stroke),u.strokeText(t,s,i));y&&((this.pendingTextPaths||=[]).push({transform:vt(u),x:s,y:i,fontSize:g,path:j}),this.dependencyTracker?.recordCharacterBBox(e,u,p,g,s,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return Me(this,"isFontSubpixelAAEnabled",s)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,rn.showText).resetBBox(e),this.current.textRenderingMode&ss.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,i=s.font;if(i.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const r=s.fontSize;if(r===0){this.dependencyTracker?.recordOperation(e);return}const c=this.ctx,u=s.fontSizeScale,h=s.charSpacing,p=s.wordSpacing,f=s.fontDirection,g=s.textHScale*f,x=t.length,y=i.vertical,A=y?1:-1,w=i.defaultVMetrics,j=r*s.fontMatrix[0],N=s.textRenderingMode===ss.FILL&&!i.disableFontFace&&!s.patternFill;c.save(),s.textMatrix&&c.transform(...s.textMatrix),c.translate(s.x,s.y+s.textRise),f>0?c.scale(g,-1):c.scale(g,1);let D,L;if(s.patternFill){c.save();const R=s.fillColor.getPattern(c,this,Mn(c),ns.FILL,e);D=vt(c),c.restore(),c.fillStyle=R}if(s.patternStroke){c.save();const R=s.strokeColor.getPattern(c,this,Mn(c),ns.STROKE,e);L=vt(c),c.restore(),c.strokeStyle=R}let k=s.lineWidth;const U=s.textMatrixScale;if(U===0||k===0){const R=s.textRenderingMode&ss.FILL_STROKE_MASK;(R===ss.STROKE||R===ss.FILL_STROKE)&&(k=this.getSinglePixelWidth())}else k/=U;if(u!==1&&(c.scale(u,u),k/=u),c.lineWidth=k,i.isInvalidPDFjsFont){const R=[];let E=0;for(const I of t)R.push(I.unicode),E+=I.width;const O=R.join("");if(c.fillText(O,0,0),this.dependencyTracker!==null){const I=c.measureText(O);this.dependencyTracker.recordBBox(e,this.ctx,-I.actualBoundingBoxLeft,I.actualBoundingBoxRight,-I.actualBoundingBoxAscent,I.actualBoundingBoxDescent).recordShowTextOperation(e)}s.x+=E*j*g,c.restore(),this.compose();return}let C=0,B;for(B=0;B<x;++B){const R=t[B];if(typeof R=="number"){C+=A*R*r/1e3;continue}let E=!1;const O=(R.isSpace?p:0)+h,I=R.fontChar,V=R.accent;let z,H,$=R.width;if(y){const q=R.vmetric||w,Y=-(R.vmetric?q[1]:$*.5)*j,ee=q[2]*j;$=q?-q[0]:$,z=Y/u,H=(C+ee)/u}else z=C/u,H=0;let S;if(i.remeasure&&$>0){S=c.measureText(I);const q=S.width*1e3/r*u;if($<q&&this.isFontSubpixelAAEnabled){const Y=$/q;E=!0,c.save(),c.scale(Y,1),z/=Y}else $!==q&&(z+=($-q)/2e3*r/u)}if(this.contentVisible&&(R.isInFont||i.missingFile)){if(N&&!V)c.fillText(I,z,H),this.dependencyTracker?.recordCharacterBBox(e,c,S?{bbox:null}:i,r/u,z,H,()=>S??c.measureText(I));else if(this.paintChar(e,I,z,H,D,L),V){const q=z+r*V.offset.x/u,Y=H-r*V.offset.y/u;this.paintChar(e,V.fontChar,q,Y,D,L)}}const _=y?$*j-O*f:$*j+O*f;C+=_,E&&c.restore()}y?s.y-=C:s.x+=C*g,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const s=this.ctx,i=this.current,r=i.font,c=i.fontSize,u=i.fontDirection,h=r.vertical?1:-1,p=i.charSpacing,f=i.wordSpacing,g=i.textHScale*u,x=i.fontMatrix||Kf,y=t.length,A=i.textRenderingMode===ss.INVISIBLE;let w,j,N,D;if(A||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),i.textMatrix&&s.transform(...i.textMatrix),s.translate(i.x,i.y+i.textRise),s.scale(g,u);const L=this.dependencyTracker;for(this.dependencyTracker=L?new Ed(L,e):null,w=0;w<y;++w){if(j=t[w],typeof j=="number"){D=h*j*c/1e3,this.ctx.translate(D,0),i.x+=D*g;continue}const k=(j.isSpace?f:0)+p,U=r.charProcOperatorList[j.operatorListId];U?this.contentVisible&&(this.save(),s.scale(c,c),s.transform(...x),this.executeOperatorList(U),this.restore()):_e(`Type3 character "${j.operatorListId}" is not available.`);const C=[j.width,0];me.applyTransform(C,x),N=C[0]*c+k,s.translate(N,0),i.x+=N*g}s.restore(),L&&(this.dependencyTracker=L)}setCharWidth(e,t,s){}setCharWidthAndBounds(e,t,s,i,r,c,u){const h=new Path2D;h.rect(i,r,c-i,u-r),this.ctx.clip(h),this.dependencyTracker?.recordBBox(e,this.ctx,i,c,r,u).recordClipBox(e,this.ctx,i,c,r,u),this.endPath(e)}getColorN_Pattern(e,t){let s;if(t[0]==="TilingPattern"){const i=this.baseTransform||vt(this.ctx),r={createCanvasGraphics:(c,u)=>new wr(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Ed(this.dependencyTracker,u,!0):null)};s=new Fm(t,this.ctx,r,i)}else s=this._getPattern(e,t[1],t[2]);return s}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,s=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=TE(this.getObject(e,t)),this.cachedPatterns.set(t,i)),s&&(i.matrix=s),i}shadingFill(e,t){if(!this.contentVisible)return;const s=this.ctx;this.save(e);const i=this._getPattern(e,t);s.fillStyle=i.getPattern(s,this,Mn(s),ns.SHADING,e);const r=Mn(s);if(r){const{width:c,height:u}=s.canvas,h=yr.slice();me.axialAlignedBoundingBox([0,0,c,u],r,h);const[p,f,g,x]=h;this.ctx.fillRect(p,f,g-p,x-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,rn.transform).recordDependencies(e,rn.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){ct("Should not call beginInlineImage")}beginImageData(){ct("Should not call beginImageData")}paintFormXObjectBegin(e,t,s){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=vt(this.ctx),s)){me.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[i,r,c,u]=s,h=new Path2D;h.rect(i,r,c-i,u-r),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(e,this.ctx,i,c,r,u),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||Vd("TODO: Support non-isolated groups."),t.knockout&&_e("Knockout groups not supported.");const i=vt(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=yr.slice();me.axialAlignedBoundingBox(t.bbox,vt(s),r);const c=[0,0,s.canvas.width,s.canvas.height];r=me.intersect(r,c)||[0,0,0,0];const u=Math.floor(r[0]),h=Math.floor(r[1]),p=Math.max(Math.ceil(r[2])-u,1),f=Math.max(Math.ceil(r[3])-h,1);this.current.startNewPathAndClipBox([0,0,p,f]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const x=this.cachedCanvases.getCanvas(g,p,f),y=x.context;y.translate(-u,-h),y.transform(...i);let A=new Path2D;const[w,j,N,D]=t.bbox;if(A.rect(w,j,N-w,D-j),t.matrix){const L=new Path2D;L.addPath(A,new DOMMatrix(t.matrix)),A=L}y.clip(A),t.smask&&this.smaskStack.push({canvas:x.canvas,context:y,offsetX:u,offsetY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,h),s.save()),Uo(s,y),this.ctx=y,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const r=vt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...r);const c=yr.slice();me.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],r,c),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(e,t,s,i,r,c){if(this.#e(),td(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],h=s[3]-s[1];if(c&&this.annotationCanvasMap){i=i.slice(),i[4]-=s[0],i[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=h,me.singularValueDecompose2dScale(vt(this.ctx),Hs);const{viewportScale:p}=this,f=Math.ceil(u*this.outputScaleX*p),g=Math.ceil(h*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(f,g);const{canvas:x,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(t,x),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(Hs[0],0,0,-Hs[1],0,h*Hs[1]),td(this.ctx)}else{td(this.ctx),this.endPath(e);const p=new Path2D;p.rect(s[0],s[1],u,h),this.ctx.clip(p)}}this.current=new Kb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...r)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const s=t.count;t=this.getObject(e,t.data,t),t.count=s;const i=this.ctx,r=this._createMaskCanvas(e,t),c=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(c,r.offsetX,r.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,r.offsetX,r.offsetX+c.width,r.offsetY,r.offsetY+c.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s,i=0,r=0,c,u){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const h=this.ctx;h.save();const p=vt(h);h.transform(s,i,r,c,0,0);const f=this._createMaskCanvas(e,t);h.setTransform(1,0,0,1,f.offsetX-p[4],f.offsetY-p[5]),this.dependencyTracker?.resetBBox(e);for(let g=0,x=u.length;g<x;g+=2){const y=me.transform(p,[s,i,r,c,u[g],u[g+1]]);h.drawImage(f.canvas,y[4],y[5]),this.dependencyTracker?.recordBBox(e,this.ctx,y[4],y[4]+f.canvas.width,y[5],y[5]+f.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx,i=this.current.fillColor,r=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,rn.transformAndFill);for(const c of t){const{data:u,width:h,height:p,transform:f}=c,g=this.cachedCanvases.getCanvas("maskCanvas",h,p),x=g.context;x.save();const y=this.getObject(e,u,c);Zb(x,y),x.globalCompositeOperation="source-in",x.fillStyle=r?i.getPattern(x,this,Mn(s),ns.FILL,e):i,x.fillRect(0,0,h,p),x.restore(),s.save(),s.transform(...f),s.scale(1,-1),ed(s,g.canvas,0,0,h,p,0,-1,1,1),this.dependencyTracker?.recordBBox(e,s,0,h,0,p),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){_e("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,s)}paintImageXObjectRepeat(e,t,s,i,r){if(!this.contentVisible)return;const c=this.getObject(e,t);if(!c){_e("Dependent image isn't ready yet");return}const u=c.width,h=c.height,p=[];for(let f=0,g=r.length;f<g;f+=2)p.push({transform:[s,0,0,i,r[f],r[f+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(e,c,p)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",s,i),c=r.context;return c.filter=this.current.transferMaps,c.drawImage(t,0,0),c.filter="none",r.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const s=t.width,i=t.height,r=this.ctx;this.save(e);const{filter:c}=r;c!=="none"&&c!==""&&(r.filter="none"),r.scale(1/s,-1/i);let u;if(t.bitmap)u=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)u=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",s,i).context;Qb(f,t),u=this.applyTransferMapsToCanvas(f)}const h=this._scaleImage(u,Mn(r));r.imageSmoothingEnabled=Jb(vt(r),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,r,0,s,-i,0).recordDependencies(e,rn.imageXObject).recordOperation(e),ed(r,h.img,0,0,h.paintWidth,h.paintHeight,0,-i,s,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,s){if(!this.contentVisible)return;const i=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const c=t.width,u=t.height,p=this.cachedCanvases.getCanvas("inlineImage",c,u).context;Qb(p,t),r=this.applyTransferMapsToCanvas(p)}this.dependencyTracker?.resetBBox(e);for(const c of s)i.save(),i.transform(...c.transform),i.scale(1,-1),ed(i,r,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,rn.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,s){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,s){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,s){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const r=this.ctx;this.pendingClip?(i||(this.pendingClip===ey?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=vt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:r}=this.ctx.getTransform();let c,u;if(s===0&&i===0){const h=Math.abs(t),p=Math.abs(r);if(h===p)if(e===0)c=u=1/h;else{const f=h*e;c=u=f<1?1/f:1}else if(e===0)c=1/h,u=1/p;else{const f=h*e,g=p*e;c=f<1?1/f:1,u=g<1?1/g:1}}else{const h=Math.abs(t*r-s*i),p=Math.hypot(t,s),f=Math.hypot(i,r);if(e===0)c=f/h,u=p/h;else{const g=e*h;c=f>g?f/g:1,u=p>g?p/g:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:i}}=this,[r,c]=this.getScaleForStroking();if(r===c){s.lineWidth=(i||1)*r,s.stroke(e);return}const u=s.getLineDash();t&&s.save(),s.scale(r,c),Lf.a=1/r,Lf.d=1/c;const h=new Path2D;if(h.addPath(e,Lf),u.length>0){const p=Math.max(r,c);s.setLineDash(u.map(f=>f/p)),s.lineDashOffset/=p}s.lineWidth=i||1,s.stroke(h),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const l in Cr)wr.prototype[l]!==void 0&&(wr.prototype[Cr[l]]=wr.prototype[l]);class Ar{#e;#t;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,s={};let i=0;for(const p of Ar.strings){const f=t.encode(e[p]);s[p]=f,i+=4+f.length}const r=new ArrayBuffer(i),c=new Uint8Array(r),u=new DataView(r);let h=0;for(const p of Ar.strings){const f=s[p],g=f.length;u.setUint32(h,g),c.set(f,h+4),h+=4+g}return Ve(h===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#n=new TextDecoder}#s(e){Ve(e<Ar.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const s=this.#t.getUint32(t);return this.#n.decode(new Uint8Array(this.#e,t+4,s))}get fontFamily(){return this.#s(0)}get fontWeight(){return this.#s(1)}get italicAngle(){return this.#s(2)}}class Nr{#e;#t;#n;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,s={};let i=0;for(const x of Nr.strings){const y=t.encode(e[x]);s[x]=y,i+=4+y.length}i+=4;let r,c,u=1+i;e.style&&(r=t.encode(e.style.style),c=t.encode(e.style.weight),u+=4+r.length+4+c.length);const h=new ArrayBuffer(u),p=new Uint8Array(h),f=new DataView(h);let g=0;f.setUint8(g++,e.guessFallback?1:0),f.setUint32(g,0),g+=4,i=0;for(const x of Nr.strings){const y=s[x],A=y.length;i+=4+A,f.setUint32(g,A),p.set(y,g+4),g+=4+A}return f.setUint32(g-i-4,i),e.style&&(f.setUint32(g,r.length),p.set(r,g+4),g+=4+r.length,f.setUint32(g,c.length),p.set(c,g+4),g+=4+c.length),Ve(g<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(g)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#n=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#s(e){Ve(e<Nr.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const s=this.#t.getUint32(t);return this.#n.decode(new Uint8Array(this.#e,t+4,s))}get css(){return this.#s(0)}get loadedName(){return this.#s(1)}get baseFontName(){return this.#s(2)}get src(){return this.#s(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),s=this.#n.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const i=this.#t.getUint32(e),r=this.#n.decode(new Uint8Array(this.#e,e+4,i));return{style:s,weight:r}}}class at{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#n=this.#t+1+8;static#s=this.#n+1+48;static#r=this.#s+1+6;#i;#a;#o;constructor({data:e,extra:t}){this.#i=e,this.#a=new TextDecoder,this.#o=new DataView(this.#i),t&&Object.assign(this,t)}#c(e){Ve(e<at.bools.length,"Invalid boolean index");const t=Math.floor(e/4),s=e*2%8,i=this.#o.getUint8(t)>>s&3;return i===0?void 0:i===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return Ve(e<at.numbers.length,"Invalid number index"),this.#o.getFloat64(at.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=at.#t;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<4;i++)s.push(this.#o.getInt16(e,!0)),e+=2;return s}get fontMatrix(){let e=at.#n;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<6;i++)s.push(this.#o.getFloat64(e,!0)),e+=8;return s}get defaultVMetrics(){let e=at.#s;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<3;i++)s.push(this.#o.getInt16(e,!0)),e+=2;return s}#h(e){Ve(e<at.strings.length,"Invalid string index");let t=at.#r+4;for(let r=0;r<e;r++)t+=this.#o.getUint32(t)+4;const s=this.#o.getUint32(t),i=new Uint8Array(s);return i.set(new Uint8Array(this.#i,t+4,s)),this.#a.decode(i)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=at.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const i=this.#o.getUint32(e);e+=4+i;const r=this.#o.getUint32(e);if(r!==0)return new Uint8Array(this.#i,e+4,r)}clearData(){let e=at.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const i=this.#o.getUint32(e);e+=4+i;const r=this.#o.getUint32(e);new Uint8Array(this.#i,e+4,r).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=at.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const i=this.#o.getUint32(e);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(this.#i,e+4,i)),new Ar(r.buffer)}get systemFontInfo(){let e=at.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);if(s===0)return null;const i=new Uint8Array(s);return i.set(new Uint8Array(this.#i,e+4,s)),new Nr(i.buffer)}static write(e){const t=e.systemFontInfo?Nr.write(e.systemFontInfo):null,s=e.cssFontInfo?Ar.write(e.cssFontInfo):null,i=new TextEncoder,r={};let c=0;for(const w of at.strings)r[w]=i.encode(e[w]),c+=4+r[w].length;const u=at.#r+4+c+4+(t?t.byteLength:0)+4+(s?s.byteLength:0)+4+(e.data?e.data.length:0),h=new ArrayBuffer(u),p=new Uint8Array(h),f=new DataView(h);let g=0;const x=at.bools.length;let y=0,A=0;for(let w=0;w<x;w++){const j=e[at.bools[w]];y|=(j===void 0?0:j?2:1)<<A,A+=2,(A===8||w===x-1)&&(f.setUint8(g++,y),y=0,A=0)}Ve(g===at.#e,"FontInfo.write: Boolean properties offset mismatch");for(const w of at.numbers)f.setFloat64(g,e[w]),g+=8;if(Ve(g===at.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(g++,4);for(const w of e.bbox)f.setInt16(g,w,!0),g+=2}else f.setUint8(g++,0),g+=8;if(Ve(g===at.#n,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(g++,6);for(const w of e.fontMatrix)f.setFloat64(g,w,!0),g+=8}else f.setUint8(g++,0),g+=48;if(Ve(g===at.#s,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(g++,1);for(const w of e.defaultVMetrics)f.setInt16(g,w,!0),g+=2}else f.setUint8(g++,0),g+=6;Ve(g===at.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(at.#r,0),g+=4;for(const w of at.strings){const j=r[w],N=j.length;f.setUint32(g,N),p.set(j,g+4),g+=4+N}if(f.setUint32(at.#r,g-at.#r-4),!t)f.setUint32(g,0),g+=4;else{const w=t.byteLength;f.setUint32(g,w),Ve(g+4+w<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),p.set(new Uint8Array(t),g+4),g+=4+w}if(!s)f.setUint32(g,0),g+=4;else{const w=s.byteLength;f.setUint32(g,w),Ve(g+4+w<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),p.set(new Uint8Array(s),g+4),g+=4+w}return e.data===void 0?(f.setUint32(g,0),g+=4):(f.setUint32(g,e.data.length),p.set(e.data,g+4),g+=4+e.data.length),Ve(g<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(g)}}class Ii{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class PE{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const mr=Symbol("INTERNAL");class FE{#e=!1;#t=!1;#n=!1;#s=!0;constructor(e,{name:t,intent:s,usage:i,rbGroups:r}){this.#e=!!(e&Is.DISPLAY),this.#t=!!(e&Is.PRINT),this.name=t,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(this.#n)return this.#s;if(!this.#s)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,s=!1){e!==mr&&ct("Internal method `_setVisible` called."),this.#n=s,this.#s=t}}class UE{#e=null;#t=new Map;#n=null;#s=null;constructor(e,t=Is.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#s=e.order;for(const s of e.groups)this.#t.set(s.id,new FE(t,s));if(e.baseState==="OFF")for(const s of this.#t.values())s._setVisible(mr,!1);for(const s of e.on)this.#t.get(s)._setVisible(mr,!0);for(const s of e.off)this.#t.get(s)._setVisible(mr,!1);this.#n=this.getHash()}}#r(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const r=e[i];let c;if(Array.isArray(r))c=this.#r(r);else if(this.#t.has(r))c=this.#t.get(r).visible;else return _e(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return s==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return Vd("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(_e(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#r(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return _e(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return _e(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return _e(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return _e(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return _e(`Unknown optional content policy ${e.policy}.`),!0}return _e(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){const i=this.#t.get(e);if(!i){_e(`Optional content group not found: ${e}`);return}if(s&&t&&i.rbGroups.length)for(const r of i.rbGroups)for(const c of r)c!==e&&this.#t.get(c)?._setVisible(mr,!1,!0);i._setVisible(mr,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=this.#t.get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!r.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#s?this.#s.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new Vv;for(const[t,s]of this.#t)e.update(`${t}:${s.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class IE{constructor(e,{disableRange:t=!1,disableStream:s=!1}){Ve(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:c,contentDispositionFilename:u}=e;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,r?.length>0){const h=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((h,p)=>{this._onReceiveData({begin:h,chunk:p})}),e.addProgressListener((h,p)=>{this._onProgress({loaded:h,total:p})}),e.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(s),!0)});Ve(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ve(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new zE(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new HE(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class zE{constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=Gd(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class HE{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function VE(l){let e=!0,t=s("filename\\*","i").exec(l);if(t){t=t[1];let f=u(t);return f=unescape(f),f=h(f),f=p(f),r(f)}if(t=c(l),t){const f=p(t);return r(f)}if(t=s("filename","i").exec(l),t){t=t[1];let f=u(t);return f=p(f),r(f)}function s(f,g){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function i(f,g){if(f){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const x=new TextDecoder(f,{fatal:!0}),y=fl(g);g=x.decode(y),e=!1}catch{}}return g}function r(f){return e&&/[\x80-\xff]/.test(f)&&(f=i("utf-8",f),e&&(f=i("iso-8859-1",f))),f}function c(f){const g=[];let x;const y=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(x=y.exec(f))!==null;){let[,w,j,N]=x;if(w=parseInt(w,10),w in g){if(w===0)break;continue}g[w]=[j,N]}const A=[];for(let w=0;w<g.length&&w in g;++w){let[j,N]=g[w];N=u(N),j&&(N=unescape(N),w===0&&(N=h(N))),A.push(N)}return A.join("")}function u(f){if(f.startsWith('"')){const g=f.slice(1).split('\\"');for(let x=0;x<g.length;++x){const y=g[x].indexOf('"');y!==-1&&(g[x]=g[x].slice(0,y),g.length=x+1),g[x]=g[x].replaceAll(/\\(.)/g,"$1")}f=g.join('"')}return f}function h(f){const g=f.indexOf("'");if(g===-1)return f;const x=f.slice(0,g),A=f.slice(g+1).replace(/^[^']*'/,"");return i(x,A)}function p(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,x,y,A){if(y==="q"||y==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,j){return String.fromCharCode(parseInt(j,16))}),i(x,A);try{A=atob(A)}catch{}return i(x,A)})}return""}function Qv(l,e){const t=new Headers;if(!l||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function $d(l){return URL.parse(l)?.origin??null}function Zv({responseHeaders:l,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(l.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*t)||s||!e||l.get("Accept-Ranges")!=="bytes"||(l.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function Jv(l){const e=l.get("Content-Disposition");if(e){let t=VE(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Gd(t))return t}return null}function bl(l,e){return new Zo(`Unexpected server response (${l}) while retrieving PDF "${e}".`,l,l===404||l===0&&e.startsWith("file:"))}function ew(l){return l===200||l===206}function tw(l,e,t){return{method:"GET",headers:l,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function sw(l){return l instanceof Uint8Array?l.buffer:l instanceof ArrayBuffer?l:(_e(`getArrayBuffer - unexpected data format: ${l}`),new Uint8Array(l).buffer)}class qE{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Qv(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ve(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new GE(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new $E(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class GE{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,tw(s,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=$d(r.url),!ew(r.status))throw bl(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const c=r.headers,{allowRangeRequests:u,suggestedLength:h}=Zv({responseHeaders:c,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=Jv(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new di("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:sw(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class $E{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${s-1}`);const c=i.url;fetch(c,tw(r,this._withCredentials,this._abortController)).then(u=>{const h=$d(u.url);if(h!==e._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${e._responseOrigin}".`);if(!ew(u.status))throw bl(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:sw(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Of=200,Bf=206;function YE(l){const e=l.response;return typeof e!="string"?e:fl(e).buffer}class XE{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:s}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Qv(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,c]of this.headers)t.setRequestHeader(r,c);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Bf):i.expectedStatus=Of,t.responseType="arraybuffer",Ve(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){const s=this.pendingRequests[e];s&&s.onProgress?.(t)}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||Of;if(!(r===Of&&s.expectedStatus===Bf)&&r!==s.expectedStatus){s.onError(i.status);return}const u=YE(i);if(r===Bf){const h=i.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);p?s.onDone({begin:parseInt(p[1],10),chunk:u}):(_e('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class WE{constructor(e){this._source=e,this._manager=new XE(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ve(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new KE(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new QE(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class KE{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=$d(t.responseURL);const s=t.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...p]=u.split(": ");return[h,p.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:c}=Zv({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=Jv(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=bl(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class QE{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=$d(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=bl(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const ZE=/^[a-z][a-z0-9\-+.]+:/i;function JE(l){if(ZE.test(l))return new URL(l);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(l))}class eC{constructor(e){this.source=e,this.url=JE(e.url),Ve(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ve(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new tC(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new sC(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class tC{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=bl(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new di("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class sC{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Io=Symbol("INITIAL_DATA");class nw{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Io}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const s=this.#e[e];if(!s||s.data===Io)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=this.#e[e];return!!t&&t.data!==Io}delete(e){const t=this.#e[e];return!t||t.data===Io?!1:(delete this.#e[e],!0)}resolve(e,t=null){const s=this.#t(e);s.data=t,s.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Io&&(yield[e,t])}}}const nC=1e5,ty=30;let el=class on{#e=Promise.withResolvers();#t=null;#n=!1;#s=!!globalThis.FontInspector?.enabled;#r=null;#i=null;#a=0;#o=0;#c=null;#l=null;#h=0;#u=0;#f=Object.create(null);#g=[];#m=null;#d=[];#p=new WeakMap;#x=null;static#y=new Map;static#b=new Map;static#S=new WeakMap;static#N=null;static#v=new Set;constructor({textContentSource:e,container:t,viewport:s}){if(e instanceof ReadableStream)this.#m=e;else if(typeof e=="object")this.#m=new ReadableStream({start(h){h.enqueue(e),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#u=s.scale*vn.pixelRatio,this.#h=s.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:r,pageX:c,pageY:u}=s.rawDims;this.#x=[1,0,0,-1,-c,u+r],this.#o=i,this.#a=r,on.#T(),zi(t,s),this.#e.promise.finally(()=>{on.#v.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Yt.platform;return Me(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:s})=>{if(s){this.#e.resolve();return}this.#r??=t.lang,Object.assign(this.#f,t.styles),this.#E(t.items),e()},this.#e.reject)};return this.#c=this.#m.getReader(),on.#v.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const s=e.scale*vn.pixelRatio,i=e.rotation;if(i!==this.#h&&(t?.(),this.#h=i,zi(this.#l,{rotation:i})),s!==this.#u){t?.(),this.#u=s;const r={div:null,properties:null,ctx:on.#R(this.#r)};for(const c of this.#d)r.properties=this.#p.get(c),r.div=c,this.#j(r)}}cancel(){const e=new di("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#d}get textContentItemsStr(){return this.#g}#E(e){if(this.#n)return;this.#i.ctx??=on.#R(this.#r);const t=this.#d,s=this.#g;for(const i of e){if(t.length>nC){_e("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const r=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id&&this.#t.setAttribute("id",`${i.id}`),r.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}s.push(i.str),this.#A(i)}}#A(e){const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#d.push(t);const i=me.transform(this.#x,e.transform);let r=Math.atan2(i[1],i[0]);const c=this.#f[e.fontName];c.vertical&&(r+=Math.PI/2);let u=this.#s&&c.fontSubstitution||c.fontFamily;u=on.fontFamilyMap.get(u)||u;const h=Math.hypot(i[2],i[3]),p=h*on.#P(u,c,this.#r);let f,g;r===0?(f=i[4],g=i[5]-p):(f=i[4]+p*Math.sin(r),g=i[5]-p*Math.cos(r));const x="calc(var(--total-scale-factor) *",y=t.style;this.#t===this.#l?(y.left=`${(100*f/this.#o).toFixed(2)}%`,y.top=`${(100*g/this.#a).toFixed(2)}%`):(y.left=`${x}${f.toFixed(2)}px)`,y.top=`${x}${g.toFixed(2)}px)`),y.fontSize=`${x}${(on.#N*h).toFixed(2)}px)`,y.fontFamily=u,s.fontSize=h,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#s&&(t.dataset.fontName=c.fontSubstitutionLoadedName||e.fontName),r!==0&&(s.angle=r*(180/Math.PI));let A=!1;if(e.str.length>1)A=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),j=Math.abs(e.transform[3]);w!==j&&Math.max(w,j)/Math.min(w,j)>1.5&&(A=!0)}if(A&&(s.canvasWidth=c.vertical?e.height:e.width),this.#p.set(t,s),this.#i.div=t,this.#i.properties=s,this.#j(this.#i),s.hasText&&this.#t.append(t),s.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#t.append(w)}}#j(e){const{div:t,properties:s,ctx:i}=e,{style:r}=t;let c="";if(on.#N>1&&(c=`scale(${1/on.#N})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:u}=r,{canvasWidth:h,fontSize:p}=s;on.#C(i,p*this.#u,u);const{width:f}=i.measureText(t.textContent);f>0&&(c=`scaleX(${h*this.#u/f}) ${c}`)}s.angle!==0&&(c=`rotate(${s.angle}deg) ${c}`),c.length>0&&(r.transform=c)}static cleanup(){if(!(this.#v.size>0)){this.#y.clear();for(const{canvas:e}of this.#b.values())e.remove();this.#b.clear()}}static#R(e=null){let t=this.#b.get(e||="");if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(e,t),this.#S.set(t,{size:0,family:""})}return t}static#C(e,t,s){const i=this.#S.get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)}static#T(){if(this.#N!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#N=e.getBoundingClientRect().height,e.remove()}static#P(e,t,s){const i=this.#y.get(e);if(i)return i;const r=this.#R(s);r.canvas.width=r.canvas.height=ty,this.#C(r,ty,e);const c=r.measureText(""),u=c.fontBoundingBoxAscent,h=Math.abs(c.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let p=.8;return u?p=u/(u+h):(Yt.platform.isFirefox&&_e("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?p=t.ascent:t.descent&&(p=1+t.descent)),this.#y.set(e,p),p}};const iC=100;function Um(l={}){typeof l=="string"||l instanceof URL?l={url:l}:(l instanceof ArrayBuffer||ArrayBuffer.isView(l))&&(l={data:l});const e=new Im,{docId:t}=e,s=l.url?hE(l.url):null,i=l.data?fE(l.data):null,r=l.httpHeaders||null,c=l.withCredentials===!0,u=l.password??null,h=l.range instanceof zm?l.range:null,p=Number.isInteger(l.rangeChunkSize)&&l.rangeChunkSize>0?l.rangeChunkSize:2**16;let f=l.worker instanceof Tr?l.worker:null;const g=l.verbosity,x=typeof l.docBaseUrl=="string"&&!pl(l.docBaseUrl)?l.docBaseUrl:null,y=Kc(l.cMapUrl),A=l.cMapPacked!==!1,w=l.CMapReaderFactory||(ms?vE:zb),j=Kc(l.iccUrl),N=Kc(l.standardFontDataUrl),D=l.StandardFontDataFactory||(ms?wE:Hb),L=Kc(l.wasmUrl),k=l.WasmFactory||(ms?AE:Vb),U=l.stopAtErrors!==!0,C=Number.isInteger(l.maxImageSize)&&l.maxImageSize>-1?l.maxImageSize:-1,B=l.isEvalSupported!==!1,R=typeof l.isOffscreenCanvasSupported=="boolean"?l.isOffscreenCanvasSupported:!ms,E=typeof l.isImageDecoderSupported=="boolean"?l.isImageDecoderSupported:!ms&&(Yt.platform.isFirefox||!globalThis.chrome),O=Number.isInteger(l.canvasMaxAreaInBytes)?l.canvasMaxAreaInBytes:-1,I=typeof l.disableFontFace=="boolean"?l.disableFontFace:ms,V=l.fontExtraProperties===!0,z=l.enableXfa===!0,H=l.ownerDocument||globalThis.document,$=l.disableRange===!0,S=l.disableStream===!0,_=l.disableAutoFetch===!0,q=l.pdfBug===!0,Y=l.CanvasFactory||(ms?yE:gE),ee=l.FilterFactory||(ms?bE:xE),F=l.enableHWA===!0,G=l.useWasm!==!1,Z=h?h.length:l.length??NaN,Q=typeof l.useSystemFonts=="boolean"?l.useSystemFonts:!ms&&!I,K=typeof l.useWorkerFetch=="boolean"?l.useWorkerFetch:!!(w===zb&&D===Hb&&k===Vb&&y&&N&&L&&Go(y,document.baseURI)&&Go(N,document.baseURI)&&Go(L,document.baseURI)),de=null;Y_(g);const ue={canvasFactory:new Y({ownerDocument:H,enableHWA:F}),filterFactory:new ee({docId:t,ownerDocument:H}),cMapReaderFactory:K?null:new w({baseUrl:y,isCompressed:A}),standardFontDataFactory:K?null:new D({baseUrl:N}),wasmFactory:K?null:new k({baseUrl:L})};f||(f=Tr.create({verbosity:g,port:Ii.workerPort}),e._worker=f);const ve={docId:t,apiVersion:"5.4.296",data:i,password:u,disableAutoFetch:_,rangeChunkSize:p,length:Z,docBaseUrl:x,enableXfa:z,evaluatorOptions:{maxImageSize:C,disableFontFace:I,ignoreErrors:U,isEvalSupported:B,isOffscreenCanvasSupported:R,isImageDecoderSupported:E,canvasMaxAreaInBytes:O,fontExtraProperties:V,useSystemFonts:Q,useWasm:G,useWorkerFetch:K,cMapUrl:y,iccUrl:j,standardFontDataUrl:N,wasmUrl:L}},he={ownerDocument:H,pdfBug:q,styleElement:de,loadingParams:{disableAutoFetch:_,enableXfa:z}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const xe=f.messageHandler.sendWithPromise("GetDocRequest",ve,i?[i.buffer]:null);let Pe;if(h)Pe=new IE(h,{disableRange:$,disableStream:S});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");const $e=Go(s)?qE:ms?eC:WE;Pe=new $e({url:s,length:Z,httpHeaders:r,withCredentials:c,rangeChunkSize:p,disableRange:$,disableStream:S})}return xe.then($e=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Ce=new $o(t,$e,f.port),Ee=new oC(Ce,e,Pe,he,ue,F);e._transport=Ee,Ce.send("Ready",null)})}).catch(e._capability.reject),e}class Im{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Im.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let zm=class{#e=Promise.withResolvers();#t=[];#n=[];#s=[];#r=[];constructor(e,t,s=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i}addRangeListener(e){this.#r.push(e)}addProgressListener(e){this.#s.push(e)}addProgressiveReadListener(e){this.#n.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const s of this.#r)s(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const s of this.#s)s(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#n)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){ct("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class aC{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Me(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class rC{#e=!1;constructor(e,t,s,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new Lb:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new nw,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new ml({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Me(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:i="display",annotationMode:r=Un.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:p=null,pageColors:f=null,printAnnotationStorage:g=null,isEditing:x=!1,recordOperations:y=!1,operationsFilter:A=null}){this._stats?.time("Overall");const w=this._transport.getRenderingIntent(i,r,g,x),{renderingIntent:j,cacheKey:N}=w;this.#e=!1,h||=this._transport.getOptionalContentConfig(j);let D=this._intentStates.get(N);D||(D=Object.create(null),this._intentStates.set(N,D)),D.streamReaderCancelTimeout&&(clearTimeout(D.streamReaderCancelTimeout),D.streamReaderCancelTimeout=null);const L=!!(j&Is.PRINT);D.displayReadyCapability||(D.displayReadyCapability=Promise.withResolvers(),D.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w));const k=!!(this._pdfBug&&globalThis.StepperManager?.enabled),U=!this.recordedBBoxes&&(y||k),C=E=>{if(D.renderTasks.delete(B),U){const O=B.gfx?.dependencyTracker.take();O&&(B.stepper&&B.stepper.setOperatorBBoxes(O,B.gfx.dependencyTracker.takeDebugMetadata()),y&&(this.recordedBBoxes=O))}L&&(this.#e=!0),this.#t(),E?(B.capability.reject(E),this._abortOperatorList({intentState:D,reason:E instanceof Error?E:new Error(E)})):B.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},B=new vr({callback:C,params:{canvas:t,canvasContext:e,dependencyTracker:U?new jE(t,D.operatorList.length,k):null,viewport:s,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:D.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!L,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:A});(D.renderTasks||=new Set).add(B);const R=B.task;return Promise.all([D.displayReadyCapability.promise,h]).then(([E,O])=>{if(this.destroyed){C();return}if(this._stats?.time("Rendering"),!(O.renderingIntent&j))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");B.initializeGraphics({transparency:E,optionalContentConfig:O}),B.operatorListChanged()}).catch(C),R}getOperatorList({intent:e="display",annotationMode:t=Un.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){function r(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const c=this._transport.getRenderingIntent(e,t,s,i,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=r,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Jo.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function r(){c.read().then(function({value:h,done:p}){if(p){s(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),r()},i)}const c=t.getReader(),u={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new Lb),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const s=this._intentStates.get(t);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:c}=s,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:i},c).getReader(),p=this._intentStates.get(t);p.streamReader=h;const f=()=>{h.read().then(({value:g,done:x})=>{if(x){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,p),f())},g=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const x of p.renderTasks)x.operatorListChanged();this.#t()}if(p.displayReadyCapability)p.displayReadyCapability.reject(g);else if(p.opListReadCapability)p.opListReadCapability.reject(g);else throw g}})};f()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof qd){let i=iC;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new di(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var Fi,bn,oi,fa,Cd,ma,pa,ps,pd,iw,aw,Yo,_r,gd;const xt=class xt{constructor({name:e=null,port:t=null,verbosity:s=X_()}={}){Rn(this,ps);Rn(this,Fi,Promise.withResolvers());Rn(this,bn,null);Rn(this,oi,null);Rn(this,fa,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(gt(xt,pa).has(t))throw new Error("Cannot use more than one PDFWorker per port.");gt(xt,pa).set(t,this),kn(this,ps,iw).call(this,t)}else kn(this,ps,aw).call(this)}get promise(){return gt(this,Fi).promise}get port(){return gt(this,oi)}get messageHandler(){return gt(this,bn)}destroy(){this.destroyed=!0,gt(this,fa)?.terminate(),js(this,fa,null),gt(xt,pa).delete(gt(this,oi)),js(this,oi,null),gt(this,bn)?.destroy(),js(this,bn,null)}static create(e){const t=gt(this,pa).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new xt(e)}static get workerSrc(){if(Ii.workerSrc)return Ii.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Me(this,"_setupFakeWorkerGlobal",(async()=>gt(this,_r,gd)?gt(this,_r,gd):(await import(this.workerSrc)).WorkerMessageHandler)())}};Fi=new WeakMap,bn=new WeakMap,oi=new WeakMap,fa=new WeakMap,Cd=new WeakMap,ma=new WeakMap,pa=new WeakMap,ps=new WeakSet,pd=function(){gt(this,Fi).resolve(),gt(this,bn).send("configure",{verbosity:this.verbosity})},iw=function(e){js(this,oi,e),js(this,bn,new $o("main","worker",e)),gt(this,bn).on("ready",()=>{}),kn(this,ps,pd).call(this)},aw=function(){if(gt(xt,ma)||gt(xt,_r,gd)){kn(this,ps,Yo).call(this);return}let{workerSrc:e}=xt;try{xt._isSameOrigin(window.location,e)||(e=xt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new $o("main","worker",t),i=()=>{r.abort(),s.destroy(),t.terminate(),this.destroyed?gt(this,Fi).reject(new Error("Worker was destroyed")):kn(this,ps,Yo).call(this)},r=new AbortController;t.addEventListener("error",()=>{gt(this,fa)||i()},{signal:r.signal}),s.on("test",u=>{if(r.abort(),this.destroyed||!u){i();return}js(this,bn,s),js(this,oi,t),js(this,fa,t),kn(this,ps,pd).call(this)}),s.on("ready",u=>{if(r.abort(),this.destroyed){i();return}try{c()}catch{kn(this,ps,Yo).call(this)}});const c=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};c();return}catch{Vd("The worker has been disabled.")}kn(this,ps,Yo).call(this)},Yo=function(){gt(xt,ma)||(_e("Setting up fake worker."),js(xt,ma,!0)),xt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){gt(this,Fi).reject(new Error("Worker was destroyed"));return}const t=new pE;js(this,oi,t);const s=`fake${qx(xt,Cd)._++}`,i=new $o(s+"_worker",s,t);e.setup(i,t),js(this,bn,new $o(s,s+"_worker",t)),kn(this,ps,pd).call(this)}).catch(e=>{gt(this,Fi).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},_r=new WeakSet,gd=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Rn(xt,_r),Rn(xt,Cd,0),Rn(xt,ma,!1),Rn(xt,pa,new WeakMap),ms&&(js(xt,ma,!0),Ii.workerSrc||="./pdf.worker.mjs"),xt._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!s?.origin||s.origin==="null")return!1;const i=new URL(t,s);return s.origin===i.origin},xt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},xt.fromPort=e=>{if(nE("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return xt.create(e)};let Tr=xt;class oC{#e=new Map;#t=new Map;#n=new Map;#s=new Map;#r=null;constructor(e,t,s,i,r,c){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new nw,this.fontLoader=new dE({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}#i(e,t=null){const s=this.#e.get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return Me(this,"annotationStorage",new Om)}getRenderingIntent(e,t=Un.ENABLE,s=null,i=!1,r=!1){let c=Is.DISPLAY,u=Zf;switch(e){case"any":c=Is.ANY;break;case"display":break;case"print":c=Is.PRINT;break;default:_e(`getRenderingIntent - invalid intent: ${e}`)}const h=c&Is.PRINT&&s instanceof qv?s:this.annotationStorage;switch(t){case Un.DISABLE:c+=Is.ANNOTATIONS_DISABLE;break;case Un.ENABLE:break;case Un.ENABLE_FORMS:c+=Is.ANNOTATIONS_FORMS;break;case Un.ENABLE_STORAGE:c+=Is.ANNOTATIONS_STORAGE,u=h.serializable;break;default:_e(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(c+=Is.IS_EDITING),r&&(c+=Is.OPLIST);const{ids:p,hash:f}=h.modifiedIds,g=[c,u.hash,f];return{renderingIntent:c,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:p}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of this.#t.values())e.push(s._destroy());this.#t.clear(),this.#n.clear(),this.#s.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),el.cleanup(),this._networkStream?.cancelAllRequests(new di("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{Ve(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:c}){if(c){i.close();return}Ve(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:c}=this._fullReader;return(!i||!r)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{t.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:c}}),e.on("GetRangeReader",(s,i)=>{Ve(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:c,done:u}){if(u){i.close();return}Ve(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{i.error(c)})},i.onCancel=c=>{r.cancel(c),i.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new aC(s,this))}),e.on("DocException",s=>{t._capability.reject(Ss(s))}),e.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!t.onPassword)throw Ss(s);const i=r=>{r instanceof Error?this.#r.reject(r):this.#r.resolve({password:r})};t.onPassword(i,s.code)}catch(i){this.#r.reject(i)}return this.#r.promise}),e.on("DataLoaded",s=>{t.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;this.#t.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,r])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in r){const f=r.error;_e(`Error during font loading: ${f}`),this.commonObjs.resolve(s,f);break}const c=new at(r),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(f,g)=>globalThis.FontInspector.fontAdded(f,g):null,h=new uE(c,u,r.extra,r.charProcOperatorList);this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(s,h)});break;case"CopyLocalImage":const{imageRef:p}=r;Ve(p,"The imageRef must be defined.");for(const f of this.#t.values())for(const[,g]of f.objs)if(g?.ref===p)return g.dataLen?(this.commonObjs.resolve(s,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,r,c])=>{if(this.destroyed)return;const u=this.#t.get(i);if(!u.objs.has(s)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(r){case"Image":case"Pattern":u.objs.resolve(s,c);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",s=>{this.destroyed||t.onProgress?.({loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[s.type];if(!i)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&_e("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=this.#n.get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&this.#s.set(r.refStr,e);const c=new rC(t,r,this,this._params.pdfBug);return this.#t.set(t,c),c});return this.#n.set(t,i),i}getPageIndex(e){return Jf(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#i("GetOptionalContentConfig").then(t=>new UE(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new PE(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),el.cleanup()}}cachedPageNumber(e){if(!Jf(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#s.get(t)??null}}class lC{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class vr{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:c,pageIndex:u,canvasFactory:h,filterFactory:p,useRequestAnimationFrame:f=!1,pdfBug:g=!1,pageColors:x=null,enableHWA:y=!1,operationsFilter:A=null}){this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=p,this._pdfBug=g,this.pageColors=x,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new lC(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=y,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=A}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(vr.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");vr.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:i,background:r,dependencyTracker:c}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new wr(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),vr.#t.delete(this._canvas),e||=new qd(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),vr.#t.delete(this._canvas),this.callback())))}}const tl="5.4.296",rw="f56dc8601";class zs{#e=null;#t=null;#n;#s=null;#r=!1;#i=!1;#a=null;#o;#c=null;#l=null;static#h=null;static get _keyboardManager(){return Me(this,"_keyboardManager",new gl([[["Escape","mac+Escape"],zs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],zs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],zs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],zs.prototype._moveToPrevious],[["Home","mac+Home"],zs.prototype._moveToBeginning],[["End","mac+End"],zs.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#i=!1,this.#a=e):this.#i=!0,this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#n=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",zs.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#a&&(e.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#m.bind(this),{signal:t}),e.addEventListener("keydown",this.#g.bind(this),{signal:t});const s=this.#t=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#n,e.append(s),e}renderMainDropdown(){const e=this.#s=this.#u();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#u(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",Vs,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(e.id=`${this.#a.id}_colorpicker_dropdown`);for(const[s,i]of this.#l.highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",zs.#h[s]);const c=document.createElement("span");r.append(c),c.className="swatch",c.style.backgroundColor=i,r.ariaSelected=i===this.#n,r.addEventListener("click",this.#f.bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",this.#g.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Ie.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#m(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#p){this.#m(e);return}if(e.target===this.#e){this.#s.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#s?.firstChild||e.target===this.#e){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#p){this.#m(e);return}this.#s.firstChild?.focus()}_moveToEnd(e){if(!this.#p){this.#m(e);return}this.#s.lastChild?.focus()}#g(e){zs._keyboardManager.exec(this,e)}#m(e){if(this.#p){this.hideDropdown();return}if(this.#r=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#d.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#s){this.#s.classList.remove("hidden");return}const t=this.#s=this.#u();this.#e.append(t)}#d(e){this.#s?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#s?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#s&&!this.#s.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#p){this.#a?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#s)return;const t=this.#l.highlightColors.values();for(const s of this.#s.children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#s?.remove(),this.#s=null}}class sl{#e=null;#t=null;#n=null;static#s=null;constructor(e){this.#t=e,this.#n=e._uiManager,sl.#s||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,colorValue:s}=this.#t,i=this.#e=document.createElement("input");return i.type="color",i.value=s||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",sl.#s[e]),i.addEventListener("input",()=>{this.#n.updateParams(t,i.value)},{signal:this.#n._signal}),i}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function sy(l){return Math.floor(Math.max(0,Math.min(1,l))*255).toString(16).padStart(2,"0")}function zo(l){return Math.max(0,Math.min(255,255*l))}class ny{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=zo(e),[e,e,e]}static G_HTML([e]){const t=sy(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(zo)}static RGB_HTML(e){return`#${e.map(sy).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[zo(1-Math.min(1,e+i)),zo(1-Math.min(1,s+i)),zo(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,r=1-t,c=1-s,u=Math.min(i,r,c);return["CMYK",i,r,c,u]}}class cC{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ct("Abstract method `_createSVG` called.")}}class nl extends cC{_createSVG(e){return document.createElementNS(ri,e)}}const dC=9,ya=new WeakSet,uC=new Date().getTimezoneOffset()*60*1e3;class iy{static create(e){switch(e.data.annotationType){case Rt.LINK:return new Hm(e);case Rt.TEXT:return new fC(e);case Rt.WIDGET:switch(e.data.fieldType){case"Tx":return new mC(e);case"Btn":return e.data.radioButton?new ow(e):e.data.checkBox?new gC(e):new xC(e);case"Ch":return new bC(e);case"Sig":return new pC(e)}return new Na(e);case Rt.POPUP:return new sm(e);case Rt.FREETEXT:return new lw(e);case Rt.LINE:return new vC(e);case Rt.SQUARE:return new wC(e);case Rt.CIRCLE:return new AC(e);case Rt.POLYLINE:return new cw(e);case Rt.CARET:return new jC(e);case Rt.INK:return new Vm(e);case Rt.POLYGON:return new NC(e);case Rt.HIGHLIGHT:return new dw(e);case Rt.UNDERLINE:return new SC(e);case Rt.SQUIGGLY:return new _C(e);case Rt.STRIKEOUT:return new EC(e);case Rt.STAMP:return new uw(e);case Rt.FILEATTACHMENT:return new CC(e);default:return new At(e)}}}class At{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return At._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:s,rect:i}=this.data;let r=-1/0,c=-1/0;if(t?.length>=8){for(let u=0;u<t.length;u+=8)t[u+1]>c?(c=t[u+1],r=t[u+2]):t[u+1]===c&&(r=Math.max(r,t[u+2]));return[r,c]}if(s?.length>=1){for(const u of s)for(let h=0,p=u.length;h<p;h+=2)u[h+1]>c?(c=u[h+1],r=u[h]):u[h+1]===c&&(r=Math.max(r,u[h]));if(r!==1/0)return[r,c]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:c}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-r)/s,e[1]=100*(e[1]-c)/i,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${Qo}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,s={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:s})||this.annotationStorage.setValue(`${Qo}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:s}=e;t&&this.#s(t);let i=this.#n?.popup||this.popup;!i&&s?.text&&(this._createPopup(s),i=this.#n.popup),i&&(i.updateEdited(e),s?.deleted&&(i.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#e&&(this.#s(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#s(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:c,pageX:u,pageY:h}}}}=this;s?.splice(0,4,...e),t.left=`${100*(e[0]-u)/r}%`,t.top=`${100*(c-e[3]+h)/c}%`,i===0?(t.width=`${100*(e[2]-e[0])/r}%`,t.height=`${100*(e[3]-e[1])/c}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),!(this instanceof Na)&&!(this instanceof Hm)&&(r.tabIndex=0);const{style:c}=r;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof sm){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,r),r}const{width:u,height:h}=this;if(!e&&t.borderStyle.width>0){c.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,j=t.borderStyle.verticalCornerRadius;if(w>0||j>0){const D=`calc(${w}px * var(--total-scale-factor)) / calc(${j}px * var(--total-scale-factor))`;c.borderRadius=D}else if(this instanceof ow){const D=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;c.borderRadius=D}switch(t.borderStyle.style){case fr.SOLID:c.borderStyle="solid";break;case fr.DASHED:c.borderStyle="dashed";break;case fr.BEVELED:_e("Unimplemented border style: beveled");break;case fr.INSET:_e("Unimplemented border style: inset");break;case fr.UNDERLINE:c.borderBottomStyle="solid";break}const N=t.borderColor||null;N?(this.#t=!0,c.borderColor=me.makeHexColor(N[0]|0,N[1]|0,N[2]|0)):c.borderWidth=0}const p=me.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:f,pageHeight:g,pageX:x,pageY:y}=i.rawDims;c.left=`${100*(p[0]-x)/f}%`,c.top=`${100*(p[1]-y)/g}%`;const{rotation:A}=t;return t.hasOwnCanvas||A===0?(c.width=`${100*u/f}%`,c.height=`${100*h/g}%`):this.setRotation(A,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:c}=this;e%180!==0&&([r,c]=[c,r]),t.style.width=`${100*r/s}%`,t.style.height=`${100*c/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const r=i.detail[t],c=r[0],u=r.slice(1);i.target.style[s]=ny[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:ny[`${c}_rgb`](u)})};return Me(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||s[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,r]of Object.entries(t)){const c=s[i];if(c){const u={detail:{[i]:r},target:e};c(u),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,r]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,j,N,D]=e.subarray(2,6);if(i===w&&r===j&&t===N&&s===D)return}const{style:c}=this.container;let u;if(this.#t){const{borderColor:w,borderWidth:j}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${j}">`],this.container.classList.add("hasBorder")}const h=i-t,p=r-s,{svgFactory:f}=this,g=f.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const x=f.createElement("defs");g.append(x);const y=f.createElement("clipPath"),A=`clippath_${this.data.id}`;y.setAttribute("id",A),y.setAttribute("clipPathUnits","objectBoundingBox"),x.append(y);for(let w=2,j=e.length;w<j;w+=8){const N=e[w],D=e[w+1],L=e[w+2],k=e[w+3],U=f.createElement("rect"),C=(L-t)/h,B=(r-D)/p,R=(N-L)/h,E=(D-k)/p;U.setAttribute("x",C),U.setAttribute("y",B),U.setAttribute("width",R),U.setAttribute("height",E),y.append(U),u?.push(`<rect vector-effect="non-scaling-stroke" x="${C}" y="${B}" width="${R}" height="${E}"/>`)}this.#t&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${A})`}_createPopup(e=null){const{data:t}=this;let s,i;e?(s={str:e.text},i=e.date):(s=t.contentsObj,i=t.modificationDate);const r=this.#n=new sm({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(r.render())}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){ct("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:r,id:c,exportValues:u}of i){if(r===-1||c===t)continue;const h=typeof u=="string"?u:null,p=document.querySelector(`[data-element-id="${c}"]`);if(p&&!ya.has(p)){_e(`_getElementsByName - element not allowed: ${c}`);continue}s.push({id:c,exportValue:h,domElement:p})}return s}for(const i of document.getElementsByName(e)){const{exportValue:r}=i,c=i.getAttribute("data-element-id");c!==t&&ya.has(i)&&s.push({id:c,exportValue:r,domElement:i})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class hC extends At{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class Hm extends At{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(s,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(s,e.action,e.overlaidText),i=!0):e.attachment?(this.#t(s,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(this.#n(s,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(s,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),i=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,s=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),s&&(e.title=s)}_bindNamedAction(e,t,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),s&&(e.title=s),this.#e()}#t(e,t,s="",i=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:s&&(e.title=s),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#n(e,t,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),s&&(e.title=s),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const r=s.get(i);r&&(e[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){_e('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{s?.();const{fields:i,refs:r,include:c}=t,u=[];if(i.length!==0||r.length!==0){const f=new Set(r);for(const g of i){const x=this._fieldObjects[g]||[];for(const{id:y}of x)f.add(y)}for(const g of Object.values(this._fieldObjects))for(const x of g)f.has(x.id)===c&&u.push(x)}else for(const f of Object.values(this._fieldObjects))u.push(...f);const h=this.annotationStorage,p=[];for(const f of u){const{id:g}=f;switch(p.push(g),f.type){case"text":{const y=f.defaultValue||"";h.setValue(g,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;h.setValue(g,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";h.setValue(g,{value:y});break}default:continue}const x=document.querySelector(`[data-element-id="${g}"]`);if(x){if(!ya.has(x)){_e(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}}),!1}}}class fC extends At{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Na extends At{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Yt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,r){s.includes("mouse")?e.addEventListener(s,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):e.addEventListener(s,c=>{if(s==="blur"){if(!t.focused||!c.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(c)}})})}_setEventListeners(e,t,s,i){for(const[r,c]of s)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,r,c,i),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":me.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||dC,r=e.style;let c;const u=2,h=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u),f=Math.round(p/(Tf*i))||1,g=p/f;c=Math.min(i,h(g/Tf))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(i,h(p/Tf))}r.fontSize=`calc(${c}px * var(--total-scale-factor))`,r.color=me.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class mC extends Na{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const r=this.annotationStorage;for(const c of this._getElementsByName(e.name,e.id))c.domElement&&(c.domElement[t]=s),r.setValue(c.id,{[i]:s})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let r=i.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&r.length>c&&(r=r.slice(0,c));let u=i.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:r,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??r,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??r),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),ya.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:p,datetimeType:f,timeStep:g}=this.data,x=!!f&&this.enableScripting;p&&(s.title=p),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",A=>{e.setValue(t,{value:A.target.value}),this.setPropertyOnSiblings(s,"value",A.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",A=>{const w=this.data.defaultFieldValue??"";s.value=h.userValue=w,h.formattedValue=null});let y=A=>{const{formattedValue:w}=h;w!=null&&(A.target.value=w),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",w=>{if(h.focused)return;const{target:j}=w;if(x&&(j.type=f,g&&(j.step=g)),h.userValue){const N=h.userValue;if(x)if(f==="time"){const D=new Date(N),L=[D.getHours(),D.getMinutes(),D.getSeconds()];j.value=L.map(k=>k.toString().padStart(2,"0")).join(":")}else j.value=new Date(N-uC).toISOString().split(f==="date"?"T":".",1)[0];else j.value=N}h.lastCommittedValue=j.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const j={value(N){h.userValue=N.detail.value??"",x||e.setValue(t,{value:h.userValue.toString()}),N.target.value=h.userValue},formattedValue(N){const{formattedValue:D}=N.detail;h.formattedValue=D,D!=null&&N.target!==document.activeElement&&(N.target.value=D);const L={formattedValue:D};x&&(L.value=D),e.setValue(t,L)},selRange(N){N.target.setSelectionRange(...N.detail.selRange)},charLimit:N=>{const{charLimit:D}=N.detail,{target:L}=N;if(D===0){L.removeAttribute("maxLength");return}L.setAttribute("maxLength",D);let k=h.userValue;!k||k.length<=D||(k=k.slice(0,D),L.value=h.userValue=k,e.setValue(t,{value:k}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,willCommit:!0,commitKey:1,selStart:L.selectionStart,selEnd:L.selectionEnd}}))}};this._dispatchEventFromSandbox(j,w)}),s.addEventListener("keydown",w=>{h.commitKey=1;let j=-1;if(w.key==="Escape"?j=0:w.key==="Enter"&&!this.data.multiLine?j=2:w.key==="Tab"&&(h.commitKey=3),j===-1)return;const{value:N}=w.target;h.lastCommittedValue!==N&&(h.lastCommittedValue=N,h.userValue=N,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,willCommit:!0,commitKey:j,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const A=y;y=null,s.addEventListener("blur",w=>{if(!h.focused||!w.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:j}=w;let{value:N}=j;if(x){if(N&&f==="time"){const D=N.split(":").map(L=>parseInt(L,10));N=new Date(2e3,0,1,D[0],D[1],D[2]||0).valueOf(),j.step=""}else N.includes("T")||(N=`${N}T00:00`),N=new Date(N).valueOf();j.type="text"}h.userValue=N,h.lastCommittedValue!==N&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,willCommit:!0,commitKey:h.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}),A(w)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",w=>{h.lastCommittedValue=null;const{data:j,target:N}=w,{value:D,selectionStart:L,selectionEnd:k}=N;let U=L,C=k;switch(w.inputType){case"deleteWordBackward":{const B=D.substring(0,L).match(/\w*[^\w]*$/);B&&(U-=B[0].length);break}case"deleteWordForward":{const B=D.substring(L).match(/^[^\w]*\w*/);B&&(C+=B[0].length);break}case"deleteContentBackward":L===k&&(U-=1);break;case"deleteContentForward":L===k&&(C+=1);break}w.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:D,change:j||"",willCommit:!1,selStart:U,selEnd:C}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(y&&s.addEventListener("blur",y),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class pC extends Na{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class gC extends Na{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return ya.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const p of this._getElementsByName(u,s)){const f=h&&p.exportValue===t.exportValue;p.domElement&&(p.domElement.checked=f),e.setValue(p.id,{value:f})}e.setValue(s,{value:h})}),r.addEventListener("resetform",c=>{const u=t.defaultFieldValue||"Off";c.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",c=>{const u={value(h){h.target.checked=h.detail.value!=="Off",e.setValue(s,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class ow extends Na{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const c of this._getElementsByName(t.fieldName,s))e.setValue(c.id,{value:!1});const r=document.createElement("input");if(ya.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const p of this._getElementsByName(u,s))e.setValue(p.id,{value:!1});e.setValue(s,{value:h})}),r.addEventListener("resetform",c=>{const u=t.defaultFieldValue;c.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const c=t.buttonValue;r.addEventListener("updatefromsandbox",u=>{const h={value:p=>{const f=c===p.detail.value;for(const g of this._getElementsByName(p.target.name)){const x=f&&g.id===s;g.domElement&&(g.domElement.checked=x),e.setValue(g.id,{value:x})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class xC extends Hm{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class bC extends Na{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");ya.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue;for(const x of i.options)x.selected=x.value===g});for(const f of this.data.options){const g=document.createElement("option");g.textContent=f.displayValue,g.value=f.exportValue,s.value.includes(f.exportValue)&&(g.setAttribute("selected",!0),r=!1),i.append(g)}let c=null;if(r){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),i.prepend(f),c=()=>{f.remove(),i.removeEventListener("input",c),c=null},i.addEventListener("input",c)}const u=f=>{const g=f?"value":"textContent",{options:x,multiple:y}=i;return y?Array.prototype.filter.call(x,A=>A.selected).map(A=>A[g]):x.selectedIndex===-1?null:x[x.selectedIndex][g]};let h=u(!1);const p=f=>{const g=f.target.options;return Array.prototype.map.call(g,x=>({displayValue:x.textContent,exportValue:x.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",f=>{const g={value(x){c?.();const y=x.detail.value,A=new Set(Array.isArray(y)?y:[y]);for(const w of i.options)w.selected=A.has(w.value);e.setValue(t,{value:u(!0)}),h=u(!1)},multipleSelection(x){i.multiple=!0},remove(x){const y=i.options,A=x.detail.remove;y[A].selected=!1,i.remove(A),y.length>0&&Array.prototype.findIndex.call(y,j=>j.selected)===-1&&(y[0].selected=!0),e.setValue(t,{value:u(!0),items:p(x)}),h=u(!1)},clear(x){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),h=u(!1)},insert(x){const{index:y,displayValue:A,exportValue:w}=x.detail.insert,j=i.children[y],N=document.createElement("option");N.textContent=A,N.value=w,j?j.before(N):i.append(N),e.setValue(t,{value:u(!0),items:p(x)}),h=u(!1)},items(x){const{items:y}=x.detail;for(;i.length!==0;)i.remove(0);for(const A of y){const{displayValue:w,exportValue:j}=A,N=document.createElement("option");N.textContent=w,N.value=j,i.append(N)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:u(!0),items:p(x)}),h=u(!1)},indices(x){const y=new Set(x.detail.indices);for(const A of x.target.options)A.selected=y.has(A.index);e.setValue(t,{value:u(!0)}),h=u(!1)},editable(x){x.target.disabled=!x.detail.editable}};this._dispatchEventFromSandbox(g,f)}),i.addEventListener("input",f=>{const g=u(!0),x=u(!1);e.setValue(t,{value:g}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,change:x,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):i.addEventListener("input",function(f){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class sm extends At{constructor(e){const{data:t,elements:s,parent:i}=e,r=!!i._commentManager;if(super(e,{isRenderable:!r&&At._hasPopupData(t)}),this.elements=s,r&&At._hasPopupData(t)){const c=this.popup=this.#e();for(const u of s)u.popup=c}else this.popup=null}#e(){return new yC({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),s=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${Rm}${i}`).join(",")),this.container}}class yC{#e=null;#t=this.#q.bind(this);#n=this.#U.bind(this);#s=this.#M.bind(this);#r=this.#w.bind(this);#i=null;#a=null;#o=null;#c=null;#l=null;#h=null;#u=null;#f=!1;#g=null;#m=null;#d=null;#p=null;#x=null;#y=null;#b=null;#S=null;#N=null;#v=null;#E=!1;#A=null;#j=null;constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:r,contentsObj:c,richText:u,parent:h,rect:p,parentRect:f,open:g,commentManager:x=null}){this.#a=e,this.#N=i,this.#o=c,this.#S=u,this.#h=h,this.#i=t,this.#b=p,this.#u=f,this.#l=s,this.#e=x,this.#A=s[0],this.#c=Sd.toDateObject(r),this.trigger=s.flatMap(y=>y.getElementsToTriggerPopup()),x?this.renderCommentButton():(this.#R(),this.#a.hidden=!0,g&&this.#w())}#R(){if(this.#m)return;this.#m=new AbortController;const{signal:e}=this.#m;for(const t of this.trigger)t.addEventListener("click",this.#r,{signal:e}),t.addEventListener("pointerenter",this.#s,{signal:e}),t.addEventListener("pointerleave",this.#n,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#C(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#x=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#p||(this.#x||this.#C(),!this.#x))return;const{signal:e}=this.#m=new AbortController,t=!!this.#A.extraPopupElement,s=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},i=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},r=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#p=this.#A.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#t,{signal:e}),c.addEventListener("click",s,{signal:e}),c.addEventListener("pointerenter",i,{signal:e}),c.addEventListener("pointerleave",r,{signal:e}),c.classList.add("popupTriggerArea")}else{const c=this.#p=document.createElement("button");c.className="annotationCommentButton";const u=this.#A.container;c.style.zIndex=u.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#P(),this.#T(),c.addEventListener("keydown",this.#t,{signal:e}),c.addEventListener("click",s,{signal:e}),c.addEventListener("pointerenter",i,{signal:e}),c.addEventListener("pointerleave",r,{signal:e}),u.after(c)}}#T(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.renderCommentButton();const[e,t]=this.#x,{style:s}=this.#p;s.left=`calc(${e}%)`,s.top=`calc(${t}% - var(--comment-button-dim))`}#P(){this.#A.extraPopupElement||(this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#A.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:e,color:t,opacity:s,creationDate:i,modificationDate:r}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:s,creationDate:i,modificationDate:r}}get elementBeforePopup(){return this.#p}get comment(){return this.#j||=this.#A.commentText,this.#j}set comment(e){e!==this.comment&&(this.#A.commentText=this.#j=e)}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#p&&(this.#p.classList.toggle("selected",e),this.#p.ariaExpanded=t)}setSelectedCommentButton(e){this.#p.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#y)return this.#y;const{x:e,y:t,height:s}=this.#p.getBoundingClientRect(),{x:i,y:r,width:c,height:u}=this.#A.layer.getBoundingClientRect();return[(e-i)/c,(t+s-r)/u]}set commentPopupPosition(e){this.#y=e}hasDefaultPopupPosition(){return this.#y===null}get commentButtonPosition(){return this.#x}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,s]=this.#y||this.commentButtonPosition.map(p=>p/100),i=this.parentBoundingClientRect,{x:r,y:c,width:u,height:h}=i;this.#e.showDialog(null,this,r+t*u,c+s*h,{...e,parentDimensions:i})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#i){const s=e.style.outlineColor=me.makeHexColor(...this.#i);e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#N?.str){const s=document.createElement("span");s.className="title",t.append(s),{dir:s.dir,str:s.textContent}=this.#N}if(e.append(t),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),t.append(s)}Dm({html:this.#D||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#a.append(e)}get#D(){const e=this.#S,t=this.#o;return e?.str&&(!t?.str||t.str===e.str)&&this.#S.html||null}get#L(){return this.#D?.attributes?.style?.fontSize||0}get#F(){return this.#D?.attributes?.style?.color||null}#O(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#F,fontSize:this.#L?`calc(${this.#L}px * var(--total-scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:i});return s}#q(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:e,popup:t,deleted:s}){if(this.#e){s?(this.remove(),this.#j=null):t&&(t.deleted?this.remove():(this.#P(),this.#j=t.text)),e&&(this.#x=null,this.#C(),this.#T());return}if(s||t?.deleted){this.remove();return}this.#R(),this.#v||={contentsObj:this.#o,richText:this.#S},e&&(this.#d=null),t&&t.text&&(this.#S=this.#O(t.text),this.#c=Sd.toDateObject(t.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#v&&({contentsObj:this.#o,richText:this.#S}=this.#v,this.#v=null,this.#g?.remove(),this.#g=null,this.#d=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#E=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#_(){if(this.#d!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:r}}}=this.#h;let c=!!this.#u,u=c?this.#u:this.#b;for(const A of this.#l)if(!u||me.intersect(A.data.rect,u)!==null){u=A.data.rect,c=!0;break}const h=me.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),f=c?u[2]-u[0]+5:0,g=h[0]+f,x=h[1];this.#d=[100*(g-i)/t,100*(x-r)/s];const{style:y}=this.#a;y.left=`${this.#d[0]}%`,y.top=`${this.#d[1]}%`}#w(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#M(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#t)):(this.#U(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#t))}#M(){this.#g||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#_(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#U(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#E=this.isVisible,this.#E&&(this.#a.hidden=!0)}maybeShow(){this.#e||(this.#R(),this.#E&&(this.#g||this.#M(),this.#E=!1,this.#a.hidden=!1))}get isVisible(){return this.#e?!1:this.#a.hidden===!1}}class lw extends At{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Se.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class vC extends At{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),r=this.#e=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class wC extends At{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),r=e.borderStyle.width,c=this.#e=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",r/2),c.setAttribute("y",r/2),c.setAttribute("width",t-r),c.setAttribute("height",s-r),c.setAttribute("stroke-width",r||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),i.append(c),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class AC extends At{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),r=e.borderStyle.width,c=this.#e=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",t/2),c.setAttribute("cy",s/2),c.setAttribute("rx",t/2-r/2),c.setAttribute("ry",s/2-r/2),c.setAttribute("stroke-width",r||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),i.append(c),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class cw extends At{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:s,popupRef:i},width:r,height:c}=this;if(!t)return this.container;const u=this.svgFactory.create(r,c,!0);let h=[];for(let f=0,g=t.length;f<g;f+=2){const x=t[f]-e[0],y=e[3]-t[f+1];h.push(`${x},${y}`)}h=h.join(" ");const p=this.#e=this.svgFactory.createElement(this.svgElementName);return p.setAttribute("points",h),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),u.append(p),this.container.append(u),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class NC extends cw{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class jC extends At{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Vm extends At{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Se.HIGHLIGHT:Se.INK}#n(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:s,borderStyle:i,popupRef:r}}=this,{transform:c,width:u,height:h}=this.#n(t,e),p=this.svgFactory.create(u,h,!0),f=this.#e=this.svgFactory.createElement("svg:g");p.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",c);for(let g=0,x=s.length;g<x;g++){const y=this.svgFactory.createElement(this.svgElementName);this.#t.push(y),y.setAttribute("points",s[g].join(",")),f.append(y)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:s,rect:i}=e,r=this.#e;if(t>=0&&r.setAttribute("stroke-width",t||1),s)for(let c=0,u=this.#t.length;c<u;c++)this.#t[c].setAttribute("points",s[c].join(","));if(i){const{transform:c,width:u,height:h}=this.#n(this.data.rotation,i);r.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),r.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class dw extends At{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Se.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class SC extends At{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class _C extends At{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class EC extends At{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class uw extends At{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Se.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class CC extends At{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let s;t.hasAppearance||t.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#t.bind(this)),this.#e=s;const{isMac:i}=Yt.platform;return e.addEventListener("keydown",r=>{r.key==="Enter"&&(i?r.metaKey:r.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let qm=class hw{#e=null;#t=null;#n=null;#s=new Map;#r=null;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:c,structTreeLayer:u,commentManager:h,linkService:p,annotationStorage:f}){this.div=e,this.#e=t,this.#t=s,this.#r=u||null,this.#i=p||null,this.#n=f||new Om,this.page=r,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=h||null}hasEditableAnnotations(){return this.#s.size>0}async#a(e,t,s){const i=e.firstChild||e,r=i.id=`${Rm}${t}`,c=await this.#r?.getAriaAttributes(r);if(c)for(const[u,h]of c)i.setAttribute(u,h);s?s.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,i,!1))}async render(e){const{annotations:t}=e,s=this.div;zi(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:this.#i,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new nl,annotationStorage:this.#n,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const c of t){if(c.noHTML)continue;const u=c.annotationType===Rt.POPUP;if(u){const f=i.get(c.id);if(!f)continue;r.elements=f}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;r.data=c;const h=iy.create(r);if(!h.isRenderable)continue;if(!u&&c.popupRef){const f=i.get(c.popupRef);f?f.push(h):i.set(c.popupRef,[h])}const p=h.render();c.hidden&&(p.style.visibility="hidden"),await this.#a(p,c.id,r.elements),h.extraPopupElement?.popup?.renderCommentButton(),h._isEditable&&(this.#s.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#o()}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#i,svgFactory:new nl,parent:this};for(const s of e){s.borderStyle||=hw._defaultBorderStyle,t.data=s;const i=iy.create(t);if(!i.isRenderable)continue;const r=i.render();await this.#a(r,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,zi(t,{rotation:e.rotation}),this.#o(),t.hidden=!1}#o(){if(!this.#t)return;const e=this.div;for(const[t,s]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):i.append(s);const c=this.#s.get(t);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,i.id,s),c._hasNoCanvas=!1):c.canvas=s)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#s.values())}getEditableAnnotation(e){return this.#s.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:s,rotation:i}=e,r=new hC({data:{id:s,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#i,annotationStorage:this.#n}),c=r.render();return t.append(c),this.#e?.moveElementInDOM(t,c,c,!1),r.createOrUpdatePopup(),r}static get _defaultBorderStyle(){return Me(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:fr.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const sd=/\r\n?|\n/g;class Gt extends ye{#e="";#t=`${this.id}-editor`;#n=null;#s;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Gt.prototype,t=r=>r.isEmpty(),s=ui.TRANSLATE_SMALL,i=ui.TRANSLATE_BIG;return Me(this,"_keyboardManager",new gl([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=Se.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||Gt._defaultColor||ye._defaultLineColor,this.#s=e.fontSize||Gt._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){ye.initialize(e,t);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Ie.FREETEXT_SIZE:Gt._defaultFontSize=t;break;case Ie.FREETEXT_COLOR:Gt._defaultColor=t;break}}updateParams(e,t){switch(e){case Ie.FREETEXT_SIZE:this.#r(t);break;case Ie.FREETEXT_COLOR:this.#i(t);break}}static get defaultPropertiesToUpdate(){return[[Ie.FREETEXT_SIZE,Gt._defaultFontSize],[Ie.FREETEXT_COLOR,Gt._defaultColor||ye._defaultLineColor]]}get propertiesToUpdate(){return[[Ie.FREETEXT_SIZE,this.#s],[Ie.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new sl(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ie.FREETEXT_COLOR}#r(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#s)*this.parentScale),this.#s=i,this.#o()},s=this.#s;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ie.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#i(e){const t=i=>{this.color=i,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ie.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Gt._internalPadding*e,-(Gt._internalPadding+this.#s)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const e=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const e=[];this.editorDiv.normalize();let t=null;for(const s of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(e.push(Gt.#c(s)),t=s);return e.join(`
`)}#o(){const[e,t]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:r}=this,c=r.style.display,u=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",i.div.append(this.div),s=r.getBoundingClientRect(),r.remove(),r.style.display=c,r.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/t):(this.width=s.height/e,this.height=s.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#a().trimEnd();if(e===t)return;const s=i=>{if(this.#e=i,!i){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(t)},undo:()=>{s(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Gt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#s}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,r]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[p,f]=this.pageDimensions,[g,x]=this.pageTranslation;let y,A;switch(this.rotation){case 0:y=e+(c[0]-g)/p,A=t+this.height-(c[1]-x)/f;break;case 90:y=e+(c[0]-g)/p,A=t-(c[1]-x)/f,[u,h]=[h,-u];break;case 180:y=e-this.width+(c[0]-g)/p,A=t-(c[1]-x)/f,[u,h]=[-u,-h];break;case 270:y=e+(c[0]-g-this.height*f)/p,A=t+(c[1]-x-this.width*p)/f,[u,h]=[-h,u];break}this.setAt(y*i,A*r,u,h)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(sd,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:s}=t;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const i=Gt.#u(t.getData("text")||"").replaceAll(sd,`
`);if(!i)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const c=r.getRangeAt(0);if(!i.includes(`
`)){c.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:u,startOffset:h}=c,p=[],f=[];if(u.nodeType===Node.TEXT_NODE){const y=u.parentElement;if(f.push(u.nodeValue.slice(h).replaceAll(sd,"")),y!==this.editorDiv){let A=p;for(const w of this.editorDiv.childNodes){if(w===y){A=f;continue}A.push(Gt.#c(w))}}p.push(u.nodeValue.slice(0,h).replaceAll(sd,""))}else if(u===this.editorDiv){let y=p,A=0;for(const w of this.editorDiv.childNodes)A++===h&&(y=f),y.push(Gt.#c(w))}this.#e=`${p.join(`
`)}${i}${f.join(`
`)}`,this.#l();const g=new Range;let x=Math.sumPrecise(p.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const A=y.nodeValue.length;if(x<=A){g.setStart(y,x),g.setEnd(y,x);break}x-=A}r.removeAllRanges(),r.addRange(g)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(""," ")}static#u(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Gt._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,s){let i=null;if(e instanceof lw){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:p,id:f,popupRef:g,richText:x,contentsObj:y,creationDate:A,modificationDate:w},textContent:j,textPosition:N,parent:{page:{pageNumber:D}}}=e;if(!j||j.length===0)return null;i=e={annotationType:Se.FREETEXT,color:Array.from(u),fontSize:c,value:j.join(`
`),position:N,pageIndex:D-1,rect:h.slice(0),rotation:p,annotationElementId:f,id:f,deleted:!1,popupRef:g,comment:y?.str||null,richText:x,creationDate:A,modificationDate:w}}const r=await super.deserialize(e,t,s);return r.#s=e.fontSize,r.color=me.makeHexColor(...e.color),r.#e=Gt.#u(e.value),r._initialData=i,e.comment&&r.setCommentData(e),r}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=ye._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(e),{color:t,fontSize:this.#s,value:this.#h()});return this.addComment(s),e?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(e){const{value:t,fontSize:s,color:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==s||e.color.some((c,u)=>c!==i[u])||e.pageIndex!==r}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:s}=t;s.fontSize=`calc(${this.#s}px * var(--total-scale-factor))`,s.color=this.color,t.replaceChildren();for(const i of this.#e.split(`
`)){const r=document.createElement("div");r.append(i?document.createTextNode(i):document.createElement("br")),t.append(r)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class fe{static PRECISION=1e-4;toSVGPath(){ct("Abstract method `toSVGPath` must be implemented.")}get box(){ct("Abstract getter `box` must be implemented.")}serialize(e,t){ct("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,i,r,c){c||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)c[u]=t+e[u]*i,c[u+1]=s+e[u+1]*r;return c}static _rescaleAndSwap(e,t,s,i,r,c){c||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)c[u]=t+e[u+1]*i,c[u+1]=s+e[u]*r;return c}static _translate(e,t,s,i){i||=new Float32Array(e.length);for(let r=0,c=e.length;r<c;r+=2)i[r]=t+e[r],i[r+1]=s+e[r+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,i,r){switch(r){case 90:return[1-t/s,e/i];case 180:return[1-e/s,1-t/i];case 270:return[t/s,1-e/i];default:return[e/s,t/i]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,i,r,c){return[(e+5*s)/6,(t+5*i)/6,(5*s+r)/6,(5*i+c)/6,(s+r)/2,(i+c)/2]}}class ha{#e;#t=[];#n;#s;#r=[];#i=new Float32Array(18);#a;#o;#c;#l;#h;#u;#f=[];static#g=8;static#m=2;static#d=ha.#g+ha.#m;constructor({x:e,y:t},s,i,r,c,u=0){this.#e=s,this.#u=r*i,this.#s=c,this.#i.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=u,this.#l=ha.#g*i,this.#c=ha.#d*i,this.#h=i,this.#f.push(e,t)}isEmpty(){return isNaN(this.#i[8])}#p(){const e=this.#i.subarray(4,6),t=this.#i.subarray(16,18),[s,i,r,c]=this.#e;return[(this.#a+(e[0]-t[0])/2-s)/r,(this.#o+(e[1]-t[1])/2-i)/c,(this.#a+(t[0]-e[0])/2-s)/r,(this.#o+(t[1]-e[1])/2-i)/c]}add({x:e,y:t}){this.#a=e,this.#o=t;const[s,i,r,c]=this.#e;let[u,h,p,f]=this.#i.subarray(8,12);const g=e-p,x=t-f,y=Math.hypot(g,x);if(y<this.#c)return!1;const A=y-this.#l,w=A/y,j=w*g,N=w*x;let D=u,L=h;u=p,h=f,p+=j,f+=N,this.#f?.push(e,t);const k=-N/A,U=j/A,C=k*this.#u,B=U*this.#u;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([p+C,f+B],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([p-C,f-B],16),isNaN(this.#i[6])?(this.#r.length===0&&(this.#i.set([u+C,h+B],2),this.#r.push(NaN,NaN,NaN,NaN,(u+C-s)/r,(h+B-i)/c),this.#i.set([u-C,h-B],14),this.#t.push(NaN,NaN,NaN,NaN,(u-C-s)/r,(h-B-i)/c)),this.#i.set([D,L,u,h,p,f],6),!this.isEmpty()):(this.#i.set([D,L,u,h,p,f],6),Math.abs(Math.atan2(L-h,D-u)-Math.atan2(N,j))<Math.PI/2?([u,h,p,f]=this.#i.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+p)/2-s)/r,((h+f)/2-i)/c),[u,h,D,L]=this.#i.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((D+u)/2-s)/r,((L+h)/2-i)/c),!0):([D,L,u,h,p,f]=this.#i.subarray(0,6),this.#r.push(((D+5*u)/6-s)/r,((L+5*h)/6-i)/c,((5*u+p)/6-s)/r,((5*h+f)/6-i)/c,((u+p)/2-s)/r,((h+f)/2-i)/c),[p,f,u,h,D,L]=this.#i.subarray(12,18),this.#t.push(((D+5*u)/6-s)/r,((L+5*h)/6-i)/c,((5*u+p)/6-s)/r,((5*h+f)/6-i)/c,((u+p)/2-s)/r,((h+f)/2-i)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#r,t=this.#t;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#x();const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#b(s);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#y(s),s.join(" ")}#x(){const[e,t,s,i]=this.#e,[r,c,u,h]=this.#p();return`M${(this.#i[2]-e)/s} ${(this.#i[3]-t)/i} L${(this.#i[4]-e)/s} ${(this.#i[5]-t)/i} L${r} ${c} L${u} ${h} L${(this.#i[16]-e)/s} ${(this.#i[17]-t)/i} L${(this.#i[14]-e)/s} ${(this.#i[15]-t)/i} Z`}#y(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#b(e){const[t,s,i,r]=this.#e,c=this.#i.subarray(4,6),u=this.#i.subarray(16,18),[h,p,f,g]=this.#p();e.push(`L${(c[0]-t)/i} ${(c[1]-s)/r} L${h} ${p} L${f} ${g} L${(u[0]-t)/i} ${(u[1]-s)/r}`)}newFreeDrawOutline(e,t,s,i,r,c){return new fw(e,t,s,i,r,c)}getOutlines(){const e=this.#r,t=this.#t,s=this.#i,[i,r,c,u]=this.#e,h=new Float32Array((this.#f?.length??0)+2);for(let g=0,x=h.length-2;g<x;g+=2)h[g]=(this.#f[g]-i)/c,h[g+1]=(this.#f[g+1]-r)/u;if(h[h.length-2]=(this.#a-i)/c,h[h.length-1]=(this.#o-r)/u,isNaN(s[6])&&!this.isEmpty())return this.#S(h);const p=new Float32Array(this.#r.length+24+this.#t.length);let f=e.length;for(let g=0;g<f;g+=2){if(isNaN(e[g])){p[g]=p[g+1]=NaN;continue}p[g]=e[g],p[g+1]=e[g+1]}f=this.#v(p,f);for(let g=t.length-6;g>=6;g-=6)for(let x=0;x<6;x+=2){if(isNaN(t[g+x])){p[f]=p[f+1]=NaN,f+=2;continue}p[f]=t[g+x],p[f+1]=t[g+x+1],f+=2}return this.#N(p,f),this.newFreeDrawOutline(p,h,this.#e,this.#h,this.#n,this.#s)}#S(e){const t=this.#i,[s,i,r,c]=this.#e,[u,h,p,f]=this.#p(),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-s)/r,(t[3]-i)/c,NaN,NaN,NaN,NaN,(t[4]-s)/r,(t[5]-i)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,p,f,NaN,NaN,NaN,NaN,(t[16]-s)/r,(t[17]-i)/c,NaN,NaN,NaN,NaN,(t[14]-s)/r,(t[15]-i)/c],0),this.newFreeDrawOutline(g,e,this.#e,this.#h,this.#n,this.#s)}#N(e,t){const s=this.#t;return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6}#v(e,t){const s=this.#i.subarray(4,6),i=this.#i.subarray(16,18),[r,c,u,h]=this.#e,[p,f,g,x]=this.#p();return e.set([NaN,NaN,NaN,NaN,(s[0]-r)/u,(s[1]-c)/h,NaN,NaN,NaN,NaN,p,f,NaN,NaN,NaN,NaN,g,x,NaN,NaN,NaN,NaN,(i[0]-r)/u,(i[1]-c)/h],t),t+=24}}class fw extends fe{#e;#t=new Float32Array(4);#n;#s;#r;#i;#a;constructor(e,t,s,i,r,c){super(),this.#a=e,this.#r=t,this.#e=s,this.#i=i,this.#n=r,this.#s=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(c);const[u,h,p,f]=this.#t;for(let g=0,x=e.length;g<x;g+=2)e[g]=(e[g]-u)/p,e[g+1]=(e[g+1]-h)/f;for(let g=0,x=t.length;g<x;g+=2)t[g]=(t[g]-u)/p,t[g+1]=(t[g+1]-h)/f}toSVGPath(){const e=[`M${this.#a[4]} ${this.#a[5]}`];for(let t=6,s=this.#a.length;t<s;t+=6){if(isNaN(this.#a[t])){e.push(`L${this.#a[t+4]} ${this.#a[t+5]}`);continue}e.push(`C${this.#a[t]} ${this.#a[t+1]} ${this.#a[t+2]} ${this.#a[t+3]} ${this.#a[t+4]} ${this.#a[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,s,i],r){const c=s-e,u=i-t;let h,p;switch(r){case 0:h=fe._rescale(this.#a,e,i,c,-u),p=fe._rescale(this.#r,e,i,c,-u);break;case 90:h=fe._rescaleAndSwap(this.#a,e,t,c,u),p=fe._rescaleAndSwap(this.#r,e,t,c,u);break;case 180:h=fe._rescale(this.#a,s,t,-c,u),p=fe._rescale(this.#r,s,t,-c,u);break;case 270:h=fe._rescaleAndSwap(this.#a,s,i,-c,-u),p=fe._rescaleAndSwap(this.#r,s,i,-c,-u);break}return{outline:Array.from(h),points:[Array.from(p)]}}#o(e){const t=this.#a;let s=t[4],i=t[5];const r=[s,i,s,i];let c=s,u=i,h=s,p=i;const f=e?Math.max:Math.min,g=new Float32Array(4);for(let y=6,A=t.length;y<A;y+=6){const w=t[y+4],j=t[y+5];isNaN(t[y])?(me.pointBoundingBox(w,j,r),u>j?(c=w,u=j):u===j&&(c=f(c,w)),p<j?(h=w,p=j):p===j&&(h=f(h,w))):(g[0]=g[1]=1/0,g[2]=g[3]=-1/0,me.bezierBoundingBox(s,i,...t.slice(y,y+6),g),me.rectBoundingBox(g[0],g[1],g[2],g[3],r),u>g[1]?(c=g[0],u=g[1]):u===g[1]&&(c=f(c,g[0])),p<g[3]?(h=g[2],p=g[3]):p===g[3]&&(h=f(h,g[2]))),s=w,i=j}const x=this.#t;x[0]=r[0]-this.#n,x[1]=r[1]-this.#n,x[2]=r[2]-r[0]+2*this.#n,x[3]=r[3]-r[1]+2*this.#n,this.firstPoint=[c,u],this.lastPoint=[h,p]}get box(){return this.#t}newOutliner(e,t,s,i,r,c=0){return new ha(e,t,s,i,r,c)}getNewOutline(e,t){const[s,i,r,c]=this.#t,[u,h,p,f]=this.#e,g=r*p,x=c*f,y=s*p+u,A=i*f+h,w=this.newOutliner({x:this.#r[0]*g+y,y:this.#r[1]*x+A},this.#e,this.#i,e,this.#s,t??this.#n);for(let j=2;j<this.#r.length;j+=2)w.add({x:this.#r[j]*g+y,y:this.#r[j+1]*x+A});return w.getOutlines()}}class nm{#e;#t;#n;#s=[];#r=[];constructor(e,t=0,s=0,i=!0){const r=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:w,y:j,width:N,height:D}of e){const L=Math.floor((w-t)/c)*c,k=Math.ceil((w+N+t)/c)*c,U=Math.floor((j-t)/c)*c,C=Math.ceil((j+D+t)/c)*c,B=[L,U,C,!0],R=[k,U,C,!1];this.#s.push(B,R),me.rectBoundingBox(L,U,k,C,r)}const u=r[2]-r[0]+2*s,h=r[3]-r[1]+2*s,p=r[0]-s,f=r[1]-s;let g=i?-1/0:1/0,x=1/0;const y=this.#s.at(i?-1:-2),A=[y[0],y[2]];for(const w of this.#s){const[j,N,D,L]=w;!L&&i?N<x?(x=N,g=j):N===x&&(g=Math.max(g,j)):L&&!i&&(N<x?(x=N,g=j):N===x&&(g=Math.min(g,j))),w[0]=(j-p)/u,w[1]=(N-f)/h,w[2]=(D-f)/h}this.#e=new Float32Array([p,f,u,h]),this.#t=[g,x],this.#n=A}getOutlines(){this.#s.sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of this.#s)t[3]?(e.push(...this.#l(t)),this.#o(t)):(this.#c(t),e.push(...this.#l(t)));return this.#i(e)}#i(e){const t=[],s=new Set;for(const c of e){const[u,h,p]=c;t.push([u,h,c],[u,p,c])}t.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=t.length;c<u;c+=2){const h=t[c][2],p=t[c+1][2];h.push(p),p.push(h),s.add(h),s.add(p)}const i=[];let r;for(;s.size>0;){const c=s.values().next().value;let[u,h,p,f,g]=c;s.delete(c);let x=u,y=h;for(r=[u,p],i.push(r);;){let A;if(s.has(f))A=f;else if(s.has(g))A=g;else break;s.delete(A),[u,h,p,f,g]=A,x!==u&&(r.push(x,y,u,y===h?h:p),x=u),y=y===h?p:h}r.push(x,y)}return new TC(i,this.#e,this.#t,this.#n)}#a(e){const t=this.#r;let s=0,i=t.length-1;for(;s<=i;){const r=s+i>>1,c=t[r][0];if(c===e)return r;c<e?s=r+1:i=r-1}return i+1}#o([,e,t]){const s=this.#a(e);this.#r.splice(s,0,[e,t])}#c([,e,t]){const s=this.#a(e);for(let i=s;i<this.#r.length;i++){const[r,c]=this.#r[i];if(r!==e)break;if(r===e&&c===t){this.#r.splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,c]=this.#r[i];if(r!==e)break;if(r===e&&c===t){this.#r.splice(i,1);return}}}#l(e){const[t,s,i]=e,r=[[t,s,i]],c=this.#a(i);for(let u=0;u<c;u++){const[h,p]=this.#r[u];for(let f=0,g=r.length;f<g;f++){const[,x,y]=r[f];if(!(p<=x||y<=h)){if(x>=h){if(y>p)r[f][1]=p;else{if(g===1)return[];r.splice(f,1),f--,g--}continue}r[f][2]=h,y>p&&r.push([t,p,y])}}}return r}}class TC extends fe{#e;#t;constructor(e,t,s,i){super(),this.#t=e,this.#e=t,this.firstPoint=s,this.lastPoint=i}toSVGPath(){const e=[];for(const t of this.#t){let[s,i]=t;e.push(`M${s} ${i}`);for(let r=2;r<t.length;r+=2){const c=t[r],u=t[r+1];c===s?(e.push(`V${u}`),i=u):u===i&&(e.push(`H${c}`),s=c)}e.push("Z")}return e.join(" ")}serialize([e,t,s,i],r){const c=[],u=s-e,h=i-t;for(const p of this.#t){const f=new Array(p.length);for(let g=0;g<p.length;g+=2)f[g]=e+p[g]*u,f[g+1]=i-p[g+1]*h;c.push(f)}return c}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class im extends ha{newFreeDrawOutline(e,t,s,i,r,c){return new RC(e,t,s,i,r,c)}}class RC extends fw{newOutliner(e,t,s,i,r,c=0){return new im(e,t,s,i,r,c)}}class kt extends ye{#e=null;#t=0;#n;#s=null;#r=null;#i=null;#a=null;#o=0;#c=null;#l=null;#h=null;#u=!1;#f=null;#g=null;#m=null;#d="";#p;#x="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Se.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=kt.prototype;return Me(this,"_keyboardManager",new gl([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||kt._defaultColor,this.#p=e.thickness||kt._defaultThickness,this.opacity=e.opacity||kt._defaultOpacity,this.#n=e.boxes||null,this.#x=e.methodOfCreation||"",this.#d=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#u=!0,this.#b(e),this.#A()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#a=e.focusNode,this.#o=e.focusOffset,this.#y(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#x}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#y(){const e=new nm(this.#n,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new nm(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#i=t.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:i}=this.#i;this.#g=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#b({highlightOutlines:e,highlightId:t,clipPathId:s}){this.#l=e;const i=1.5;if(this.#i=e.getNewOutline(this.#p/2+i,.0025),t>=0)this.#h=t,this.#s=s,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:kt.#j(this.#l.box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:kt.#j(this.#i.box,g),path:{d:this.#i.toSVGPath()}})}const[r,c,u,h]=e.box;switch(this.rotation){case 0:this.x=r,this.y=c,this.width=u,this.height=h;break;case 90:{const[g,x]=this.parentDimensions;this.x=c,this.y=1-r,this.width=u*x/g,this.height=h*g/x;break}case 180:this.x=1-r,this.y=1-c,this.width=u,this.height=h;break;case 270:{const[g,x]=this.parentDimensions;this.x=1-c,this.y=r,this.width=u*x/g,this.height=h*g/x;break}}const{firstPoint:p}=e;this.#f=[(p[0]-r)/u,(p[1]-c)/h];const{lastPoint:f}=this.#i;this.#g=[(f[0]-r)/u,(f[1]-c)/h]}static initialize(e,t){ye.initialize(e,t),kt._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case Ie.HIGHLIGHT_COLOR:kt._defaultColor=t;break;case Ie.HIGHLIGHT_THICKNESS:kt._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case Ie.HIGHLIGHT_COLOR:this.#S(t);break;case Ie.HIGHLIGHT_THICKNESS:this.#N(t);break}}static get defaultPropertiesToUpdate(){return[[Ie.HIGHLIGHT_COLOR,kt._defaultColor],[Ie.HIGHLIGHT_THICKNESS,kt._defaultThickness]]}get propertiesToUpdate(){return[[Ie.HIGHLIGHT_COLOR,this.color||kt._defaultColor],[Ie.HIGHLIGHT_THICKNESS,this.#p||kt._defaultThickness],[Ie.HIGHLIGHT_FREE,this.#u]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#S(e){const t=(r,c)=>{this.color=r,this.opacity=c,this.onUpdatedColor()},s=this.color,i=this.opacity;this.addCommands({cmd:t.bind(this,e,kt._defaultOpacity),undo:t.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ie.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#N(e){const t=this.#p,s=i=>{this.#p=i,this.#v(i)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ie.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new zs({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#T())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#T())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#E(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#E():e&&(this.#A(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#v(e){this.#u&&(this.#b({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#E(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#A(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#s}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#u},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#u),this.#c&&(this.#c.style.clipPath=this.#s))}static#j([e,t,s,i],r){switch(r){case 90:return[1-t-i,e,i,s];case 180:return[1-e-s,1-t-i,s,i];case 270:return[t,1-e-s,i,s]}return[e,t,s,i]}rotate(e){const{drawLayer:t}=this.parent;let s;this.#u?(e=(e-this.rotation+360)%360,s=kt.#j(this.#l.box,e)):s=kt.#j([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:s,root:{"data-main-rotation":e}}),t.updateProperties(this.#m,{bbox:kt.#j(this.#i.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#d&&(e.setAttribute("aria-label",this.#d),e.setAttribute("role","mark")),this.#u?e.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#s,this.setDims(this.width,this.height),Hv(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#R(e){kt._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#a,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#u||this.#C(!1))}get _mustFixPosition(){return!this.#u}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!e}}))}#T(){return this.#u?this.rotation:0}#P(){if(this.#u)return null;const[e,t]=this.pageDimensions,[s,i]=this.pageTranslation,r=this.#n,c=new Float32Array(r.length*8);let u=0;for(const{x:h,y:p,width:f,height:g}of r){const x=h*e+s,y=(1-p)*t+i;c[u]=c[u+4]=x,c[u+1]=c[u+3]=y,c[u+2]=c[u+6]=x+f*e,c[u+5]=c[u+7]=y-g*t,u+=8}return c}#D(e){return this.#l.serialize(e,this.#T())}static startHighlighting(e,t,{target:s,x:i,y:r}){const{x:c,y:u,width:h,height:p}=s.getBoundingClientRect(),f=new AbortController,g=e.combinedSignal(f),x=y=>{f.abort(),this.#F(e,y)};window.addEventListener("blur",x,{signal:g}),window.addEventListener("pointerup",x,{signal:g}),window.addEventListener("pointerdown",wt,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Vs,{signal:g}),s.addEventListener("pointermove",this.#L.bind(this,e),{signal:g}),this._freeHighlight=new im({x:i,y:r},[c,u,h,p],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#L(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,s){let i=null;if(e instanceof dw){const{data:{quadPoints:A,rect:w,rotation:j,id:N,color:D,opacity:L,popupRef:k,richText:U,contentsObj:C,creationDate:B,modificationDate:R},parent:{page:{pageNumber:E}}}=e;i=e={annotationType:Se.HIGHLIGHT,color:Array.from(D),opacity:L,quadPoints:A,boxes:null,pageIndex:E-1,rect:w.slice(0),rotation:j,annotationElementId:N,id:N,deleted:!1,popupRef:k,richText:U,comment:C?.str||null,creationDate:B,modificationDate:R}}else if(e instanceof Vm){const{data:{inkLists:A,rect:w,rotation:j,id:N,color:D,borderStyle:{rawWidth:L},popupRef:k,richText:U,contentsObj:C,creationDate:B,modificationDate:R},parent:{page:{pageNumber:E}}}=e;i=e={annotationType:Se.HIGHLIGHT,color:Array.from(D),thickness:L,inkLists:A,boxes:null,pageIndex:E-1,rect:w.slice(0),rotation:j,annotationElementId:N,id:N,deleted:!1,popupRef:k,richText:U,comment:C?.str||null,creationDate:B,modificationDate:R}}const{color:r,quadPoints:c,inkLists:u,opacity:h}=e,p=await super.deserialize(e,t,s);p.color=me.makeHexColor(...r),p.opacity=h||1,u&&(p.#p=e.thickness),p._initialData=i,e.comment&&p.setCommentData(e);const[f,g]=p.pageDimensions,[x,y]=p.pageTranslation;if(c){const A=p.#n=[];for(let w=0;w<c.length;w+=8)A.push({x:(c[w]-x)/f,y:1-(c[w+1]-y)/g,width:(c[w+2]-c[w])/f,height:(c[w+1]-c[w+5])/g});p.#y(),p.#A(),p.rotate(p.rotation)}else if(u){p.#u=!0;const A=u[0],w={x:A[0]-x,y:g-(A[1]-y)},j=new im(w,[0,0,f,g],1,p.#p/2,!0,.001);for(let L=0,k=A.length;L<k;L+=2)w.x=A[L]-x,w.y=g-(A[L+1]-y),j.add(w);const{id:N,clipPathId:D}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:j.toSVGPath()}},!0,!0);p.#b({highlightOutlines:j.getOutlines(),highlightId:N,clipPathId:D}),p.#A(),p.rotate(p.parentRotation)}return p}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=ye._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(e);return Object.assign(s,{color:t,opacity:this.opacity,thickness:this.#p,quadPoints:this.#P(),outlines:this.#D(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#O(s)?null:(s.id=this.annotationElementId,s)}#O(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((s,i)=>s!==t[i])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class mw{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){ct("Not implemented")}}class Ae extends ye{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#s=null;static#r=null;static#i=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#l(e),this.#f())}#l({drawOutlines:e,drawId:t,drawingOptions:s}){this.#e=e,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#d(e.box)}#h(e,t){const{id:s}=t.drawLayer.draw(Ae._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(e,t){const s=new Set(Object.keys(e));for(const[i,r]of Object.entries(t))s.has(i)?Object.assign(e[i],r):e[i]=r;return e}static getDefaultDrawingOptions(e){ct("Not implemented")}static get typesMap(){ct("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,t),this._currentParent&&(Ae.#n.updateProperty(s,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)e.push([s,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[s,i]of this.constructor.typesMap)e.push([s,t[i]]);return e}_updateProperty(e,t,s){const i=this._drawingOptions,r=i[t],c=u=>{i.updateProperty(t,u);const h=this.#e.updateProperty(t,u);h&&this.#d(h),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,s),undo:c.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Ae._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#m()),{bbox:this.#p()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Ae._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#m()),{bbox:this.#p()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#p()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Ae._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#m(),this.parentDimensions),{bbox:this.#p()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#u()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#g([e,t,s,i]){const{parentDimensions:[r,c],rotation:u}=this;switch(u){case 90:return[t,1-e,s*(c/r),i*(r/c)];case 180:return[1-e,1-t,s,i];case 270:return[1-t,e,s*(c/r),i*(r/c)];default:return[e,t,s,i]}}#m(){const{x:e,y:t,width:s,height:i,parentDimensions:[r,c],rotation:u}=this;switch(u){case 90:return[1-t,e,s*(r/c),i*(c/r)];case 180:return[1-e,1-t,s,i];case 270:return[t,1-e,s*(r/c),i*(c/r)];default:return[e,t,s,i]}}#d(e){[this.x,this.y,this.width,this.height]=this.#g(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#p(){const{x:e,y:t,width:s,height:i,rotation:r,parentRotation:c,parentDimensions:[u,h]}=this;switch((r*4+c)/90){case 1:return[1-t-i,e,i,s];case 2:return[1-e-s,1-t-i,s,i];case 3:return[t,1-e-s,i,s];case 4:return[e,t-s*(u/h),i*(h/u),s*(u/h)];case 5:return[1-t,e,s*(u/h),i*(h/u)];case 6:return[1-e-i*(h/u),1-t,i*(h/u),s*(u/h)];case 7:return[t-s*(u/h),1-e-i*(h/u),s*(u/h),i*(h/u)];case 8:return[e-s,t-i,s,i];case 9:return[1-t,e-s,i,s];case 10:return[1-e,1-t,s,i];case 11:return[t-i,1-e,i,s];case 12:return[e-i*(h/u),t,i*(h/u),s*(u/h)];case 13:return[1-t-s*(u/h),e-i*(h/u),s*(u/h),i*(h/u)];case 14:return[1-e,1-t-s*(u/h),i*(h/u),s*(u/h)];case 15:return[t,1-e,s*(u/h),i*(h/u)];default:return[e,t,s,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ae._mergeSVGProperties({bbox:this.#p()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");return s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),s}static createDrawerInstance(e,t,s,i,r){ct("Not implemented")}static startDrawing(e,t,s,i){const{target:r,offsetX:c,offsetY:u,pointerId:h,pointerType:p}=i;if(Ae.#a&&Ae.#a!==p)return;const{viewport:{rotation:f}}=e,{width:g,height:x}=r.getBoundingClientRect(),y=Ae.#s=new AbortController,A=e.combinedSignal(y);if(Ae.#i||=h,Ae.#a??=p,window.addEventListener("pointerup",w=>{Ae.#i===w.pointerId?this._endDraw(w):Ae.#o?.delete(w.pointerId)},{signal:A}),window.addEventListener("pointercancel",w=>{Ae.#i===w.pointerId?this._currentParent.endDrawingSession():Ae.#o?.delete(w.pointerId)},{signal:A}),window.addEventListener("pointerdown",w=>{Ae.#a===w.pointerType&&((Ae.#o||=new Set).add(w.pointerId),Ae.#n.isCancellable()&&(Ae.#n.removeLastElement(),Ae.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",Vs,{signal:A}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),r.addEventListener("touchmove",w=>{w.timeStamp===Ae.#c&&wt(w)},{signal:A}),e.toggleDrawing(),t._editorUndoBar?.hide(),Ae.#n){e.drawLayer.updateProperties(this._currentDrawId,Ae.#n.startNew(c,u,g,x,f));return}t.updateUIForDefaultProperties(this),Ae.#n=this.createDrawerInstance(c,u,g,x,f),Ae.#r=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Ae.#r.toSVGProperties(),Ae.#n.defaultSVGProperties),!0,!1)}static _drawMove(e){if(Ae.#c=-1,!Ae.#n)return;const{offsetX:t,offsetY:s,pointerId:i}=e;if(Ae.#i===i){if(Ae.#o?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ae.#n.add(t,s)),Ae.#c=e.timeStamp,wt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Ae.#n=null,Ae.#r=null,Ae.#a=null,Ae.#c=NaN),Ae.#s&&(Ae.#s.abort(),Ae.#s=null,Ae.#i=NaN,Ae.#o=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,Ae.#n.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=Ae.#n,i=this._currentDrawId,r=s.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,s.setLastElement(r))},undo:()=>{t.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:Ie.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(Ie.DRAW_STEP),!Ae.#n.isEmpty()){const{pageDimensions:[s,i],scale:r}=t,c=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ae.#n.getOutlines(s*r,i*r,r,this._INNER_MARGIN),drawingOptions:Ae.#r,mustBeCommitted:!e});return this._cleanup(!0),c}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,s,i,r,c){ct("Not implemented")}static async deserialize(e,t,s){const{rawDims:{pageWidth:i,pageHeight:r,pageX:c,pageY:u}}=t.viewport,h=this.deserializeDraw(c,u,i,r,this._INNER_MARGIN,e),p=await super.deserialize(e,t,s);return p.createDrawingOptions(e),p.#l({drawOutlines:h}),p.#f(),p.onScaleChanging(),p.rotate(),p}serializeDraw(e){const[t,s]=this.pageTranslation,[i,r]=this.pageDimensions;return this.#e.serialize([t,s,i,r],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class kC{#e=new Float64Array(6);#t;#n;#s;#r;#i;#a="";#o=0;#c=new yl;#l;#h;constructor(e,t,s,i,r,c){this.#l=s,this.#h=i,this.#s=r,this.#r=c,[e,t]=this.#u(e,t);const u=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t],this.#n=[{line:u,points:this.#i}],this.#e.set(u,0)}updateProperty(e,t){e==="stroke-width"&&(this.#r=t)}#u(e,t){return fe._normalizePoint(e,t,this.#l,this.#h,this.#s)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#i.length<=10}add(e,t){[e,t]=this.#u(e,t);const[s,i,r,c]=this.#e.subarray(2,6),u=e-r,h=t-c;return Math.hypot(this.#l*u,this.#h*h)<=2?null:(this.#i.push(e,t),isNaN(s)?(this.#e.set([r,c,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([s,i,r,c,e,t],0),this.#t.push(...fe.createBezierPoints(s,i,r,c,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,i,r){this.#l=s,this.#h=i,this.#s=r,[e,t]=this.#u(e,t);const c=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:c,points:this.#i}),this.#e.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(e){return this.#n?(this.#n.push(e),this.#t=e.line,this.#i=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#a="";for(let e=0,t=this.#n.length;e<t;e++){const{line:s,points:i}=this.#n[e];this.#t=s,this.#i=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const e=fe.svgRound(this.#t[4]),t=fe.svgRound(this.#t[5]);if(this.#i.length===2)return this.#a=`${this.#a} M ${e} ${t} Z`,this.#a;if(this.#i.length<=6){const i=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,i)} M ${e} ${t}`,this.#o=6}if(this.#i.length===4){const i=fe.svgRound(this.#t[10]),r=fe.svgRound(this.#t[11]);return this.#a=`${this.#a} L ${i} ${r}`,this.#o=12,this.#a}const s=[];this.#o===0&&(s.push(`M ${e} ${t}`),this.#o=6);for(let i=this.#o,r=this.#t.length;i<r;i+=6){const[c,u,h,p,f,g]=this.#t.slice(i,i+6).map(fe.svgRound);s.push(`C${c} ${u} ${h} ${p} ${f} ${g}`)}return this.#a+=s.join(" "),this.#o=this.#t.length,this.#a}getOutlines(e,t,s,i){const r=this.#n.at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),this.#c.build(this.#n,e,t,s,this.#s,this.#r,i),this.#e=null,this.#t=null,this.#n=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class yl extends fe{#e;#t=0;#n;#s;#r;#i;#a;#o;#c;build(e,t,s,i,r,c,u){this.#r=t,this.#i=s,this.#a=i,this.#o=r,this.#c=c,this.#n=u??0,this.#s=e,this.#u()}get thickness(){return this.#c}setLastElement(e){return this.#s.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#s.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#s){if(e.push(`M${fe.svgRound(t[4])} ${fe.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${fe.svgRound(t[10])} ${fe.svgRound(t[11])}`);continue}for(let s=6,i=t.length;s<i;s+=6){const[r,c,u,h,p,f]=t.subarray(s,s+6).map(fe.svgRound);e.push(`C${r} ${c} ${u} ${h} ${p} ${f}`)}}return e.join("")}serialize([e,t,s,i],r){const c=[],u=[],[h,p,f,g]=this.#h();let x,y,A,w,j,N,D,L,k;switch(this.#o){case 0:k=fe._rescale,x=e,y=t+i,A=s,w=-i,j=e+h*s,N=t+(1-p-g)*i,D=e+(h+f)*s,L=t+(1-p)*i;break;case 90:k=fe._rescaleAndSwap,x=e,y=t,A=s,w=i,j=e+p*s,N=t+h*i,D=e+(p+g)*s,L=t+(h+f)*i;break;case 180:k=fe._rescale,x=e+s,y=t,A=-s,w=i,j=e+(1-h-f)*s,N=t+p*i,D=e+(1-h)*s,L=t+(p+g)*i;break;case 270:k=fe._rescaleAndSwap,x=e+s,y=t+i,A=-s,w=-i,j=e+(1-p-g)*s,N=t+(1-h-f)*i,D=e+(1-p)*s,L=t+(1-h)*i;break}for(const{line:U,points:C}of this.#s)c.push(k(U,x,y,A,w,r?new Array(U.length):null)),u.push(k(C,x,y,A,w,r?new Array(C.length):null));return{lines:c,points:u,rect:[j,N,D,L]}}static deserialize(e,t,s,i,r,{paths:{lines:c,points:u},rotation:h,thickness:p}){const f=[];let g,x,y,A,w;switch(h){case 0:w=fe._rescale,g=-e/s,x=t/i+1,y=1/s,A=-1/i;break;case 90:w=fe._rescaleAndSwap,g=-t/i,x=-e/s,y=1/i,A=1/s;break;case 180:w=fe._rescale,g=e/s+1,x=-t/i,y=-1/s,A=1/i;break;case 270:w=fe._rescaleAndSwap,g=t/i+1,x=e/s+1,y=-1/i,A=-1/s;break}if(!c){c=[];for(const N of u){const D=N.length;if(D===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1]]));continue}if(D===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1],NaN,NaN,NaN,NaN,N[2],N[3]]));continue}const L=new Float32Array(3*(D-2));c.push(L);let[k,U,C,B]=N.subarray(0,4);L.set([NaN,NaN,NaN,NaN,k,U],0);for(let R=4;R<D;R+=2){const E=N[R],O=N[R+1];L.set(fe.createBezierPoints(k,U,C,B,E,O),(R-2)*3),[k,U,C,B]=[C,B,E,O]}}}for(let N=0,D=c.length;N<D;N++)f.push({line:w(c[N].map(L=>L??NaN),g,x,y,A),points:w(u[N].map(L=>L??NaN),g,x,y,A)});const j=new this.prototype.constructor;return j.build(f,s,i,1,h,p,r),j}#l(e=this.#c){const t=this.#n+e/2*this.#a;return this.#o%180===0?[t/this.#r,t/this.#i]:[t/this.#i,t/this.#r]}#h(){const[e,t,s,i]=this.#e,[r,c]=this.#l(0);return[e+r,t+c,s-2*r,i-2*c]}#u(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#s){if(i.length<=12){for(let u=4,h=i.length;u<h;u+=6)me.pointBoundingBox(i[u],i[u+1],e);continue}let r=i[4],c=i[5];for(let u=6,h=i.length;u<h;u+=6){const[p,f,g,x,y,A]=i.subarray(u,u+6);me.bezierBoundingBox(r,c,p,f,g,x,y,A,e),r=y,c=A}}const[t,s]=this.#l();e[0]=cs(e[0]-t,0,1),e[1]=cs(e[1]-s,0,1),e[2]=cs(e[2]+t,0,1),e[3]=cs(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,s]=this.#l();this.#c=e;const[i,r]=this.#l(),[c,u]=[i-t,r-s],h=this.#e;return h[0]-=c,h[1]-=u,h[2]+=2*c,h[3]+=2*u,h}updateParentDimensions([e,t],s){const[i,r]=this.#l();this.#r=e,this.#i=t,this.#a=s;const[c,u]=this.#l(),h=c-i,p=u-r,f=this.#e;return f[0]-=h,f[1]-=p,f[2]+=2*h,f[3]+=2*p,f}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(fe.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${fe.svgRound(e)} ${fe.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let s=0,i=0,r=0,c=0,u=0,h=0;switch(this.#t){case 90:i=t/e,r=-e/t,u=e;break;case 180:s=-1,c=-1,u=e,h=t;break;case 270:i=-t/e,r=e/t,h=t;break;default:return""}return`matrix(${s} ${i} ${r} ${c} ${fe.svgRound(u)} ${fe.svgRound(h)})`}getPathResizingSVGProperties([e,t,s,i]){const[r,c]=this.#l(),[u,h,p,f]=this.#e;if(Math.abs(p-r)<=fe.PRECISION||Math.abs(f-c)<=fe.PRECISION){const w=e+s/2-(u+p/2),j=t+i/2-(h+f/2);return{path:{"transform-origin":`${fe.svgRound(e)} ${fe.svgRound(t)}`,transform:`${this.rotationTransform} translate(${w} ${j})`}}}const g=(s-2*r)/(p-2*r),x=(i-2*c)/(f-2*c),y=p/s,A=f/i;return{path:{"transform-origin":`${fe.svgRound(u)} ${fe.svgRound(h)}`,transform:`${this.rotationTransform} scale(${y} ${A}) translate(${fe.svgRound(r)} ${fe.svgRound(c)}) scale(${g} ${x}) translate(${fe.svgRound(-r)} ${fe.svgRound(-c)})`}}}getPathResizedSVGProperties([e,t,s,i]){const[r,c]=this.#l(),u=this.#e,[h,p,f,g]=u;if(u[0]=e,u[1]=t,u[2]=s,u[3]=i,Math.abs(f-r)<=fe.PRECISION||Math.abs(g-c)<=fe.PRECISION){const j=e+s/2-(h+f/2),N=t+i/2-(p+g/2);for(const{line:D,points:L}of this.#s)fe._translate(D,j,N,D),fe._translate(L,j,N,L);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${fe.svgRound(e)} ${fe.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const x=(s-2*r)/(f-2*r),y=(i-2*c)/(g-2*c),A=-x*(h+r)+e+r,w=-y*(p+c)+t+c;if(x!==1||y!==1||A!==0||w!==0)for(const{line:j,points:N}of this.#s)fe._rescale(j,A,w,x,y,j),fe._rescale(N,A,w,x,y,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${fe.svgRound(e)} ${fe.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],s){const[i,r]=s,c=this.#e,u=e-c[0],h=t-c[1];if(this.#r===i&&this.#i===r)for(const{line:p,points:f}of this.#s)fe._translate(p,u,h,p),fe._translate(f,u,h,f);else{const p=this.#r/i,f=this.#i/r;this.#r=i,this.#i=r;for(const{line:g,points:x}of this.#s)fe._rescale(g,u,h,p,f,g),fe._rescale(x,u,h,p,f,x);c[2]*=p,c[3]*=f}return c[0]=e,c[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${fe.svgRound(e)} ${fe.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${fe.svgRound(e[0])} ${fe.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class Yd extends mw{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:ye._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Yd(this._viewParameters);return e.updateAll(this),e}}class Gm extends Ae{static _type="ink";static _editorType=Se.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){ye.initialize(e,t),this._defaultDrawingOptions=new Yd(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Me(this,"typesMap",new Map([[Ie.INK_THICKNESS,"stroke-width"],[Ie.INK_COLOR,"stroke"],[Ie.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,s,i,r){return new kC(e,t,s,i,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,s,i,r,c){return yl.deserialize(e,t,s,i,r,c)}static async deserialize(e,t,s){let i=null;if(e instanceof Vm){const{data:{inkLists:c,rect:u,rotation:h,id:p,color:f,opacity:g,borderStyle:{rawWidth:x},popupRef:y,richText:A,contentsObj:w,creationDate:j,modificationDate:N},parent:{page:{pageNumber:D}}}=e;i=e={annotationType:Se.INK,color:Array.from(f),thickness:x,opacity:g,paths:{points:c},boxes:null,pageIndex:D-1,rect:u.slice(0),rotation:h,annotationElementId:p,id:p,deleted:!1,popupRef:y,richText:A,comment:w?.str||null,creationDate:j,modificationDate:N}}const r=await super.deserialize(e,t,s);return r._initialData=i,e.comment&&r.setCommentData(e),r}get toolbarButtons(){return this._colorPicker||=new sl(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ie.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:s}=this;t.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:s}){this._drawingOptions=Gm.getDefaultDrawingOptions({stroke:me.makeHexColor(...e),"stroke-width":t,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:s}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":r,"stroke-width":c}}=this,u=Object.assign(super.serialize(e),{color:ye._colorManager.convert(i),opacity:r,thickness:c,paths:{lines:t,points:s}});return this.addComment(u),e?(u.isCopy=!0,u):this.annotationElementId&&!this.#e(u)?null:(u.id=this.annotationElementId,u)}#e(e){const{color:t,thickness:s,opacity:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((c,u)=>c!==t[u])||e.thickness!==s||e.opacity!==i||e.pageIndex!==r}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class am extends yl{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const nd=8,Ho=3;class oa{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,s,i){return s-=e,i-=t,s===0?i>0?0:4:s===1?i+6:2-i}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#s(e,t,s,i,r,c,u){const h=this.#t(s,i,r,c);for(let p=0;p<8;p++){const f=(-p+h-u+16)%8,g=this.#n[2*f],x=this.#n[2*f+1];if(e[(s+g)*t+(i+x)]!==0)return f}return-1}static#r(e,t,s,i,r,c,u){const h=this.#t(s,i,r,c);for(let p=0;p<8;p++){const f=(p+h+u+16)%8,g=this.#n[2*f],x=this.#n[2*f+1];if(e[(s+g)*t+(i+x)]!==0)return f}return-1}static#i(e,t,s,i){const r=e.length,c=new Int32Array(r);for(let f=0;f<r;f++)c[f]=e[f]<=i?1:0;for(let f=1;f<s-1;f++)c[f*t]=c[f*t+t-1]=0;for(let f=0;f<t;f++)c[f]=c[t*s-1-f]=0;let u=1,h;const p=[];for(let f=1;f<s-1;f++){h=1;for(let g=1;g<t-1;g++){const x=f*t+g,y=c[x];if(y===0)continue;let A=f,w=g;if(y===1&&c[x-1]===0)u+=1,w-=1;else if(y>=1&&c[x+1]===0)u+=1,w+=1,y>1&&(h=y);else{y!==1&&(h=Math.abs(y));continue}const j=[g,f],N=w===g+1,D={isHole:N,points:j,id:u,parent:0};p.push(D);let L;for(const I of p)if(I.id===h){L=I;break}L?L.isHole?D.parent=N?L.parent:h:D.parent=N?h:L.parent:D.parent=N?h:0;const k=this.#s(c,t,f,g,A,w,0);if(k===-1){c[x]=-u,c[x]!==1&&(h=Math.abs(c[x]));continue}let U=this.#n[2*k],C=this.#n[2*k+1];const B=f+U,R=g+C;A=B,w=R;let E=f,O=g;for(;;){const I=this.#r(c,t,E,O,A,w,1);U=this.#n[2*I],C=this.#n[2*I+1];const V=E+U,z=O+C;j.push(z,V);const H=E*t+O;if(c[H+1]===0?c[H]=-u:c[H]===1&&(c[H]=u),V===f&&z===g&&E===B&&O===R){c[x]!==1&&(h=Math.abs(c[x]));break}else A=E,w=O,E=V,O=z}}}return p}static#a(e,t,s,i){if(s-t<=4){for(let B=t;B<s-2;B+=2)i.push(e[B],e[B+1]);return}const r=e[t],c=e[t+1],u=e[s-4]-r,h=e[s-3]-c,p=Math.hypot(u,h),f=u/p,g=h/p,x=f*c-g*r,y=h/u,A=1/p,w=Math.atan(y),j=Math.cos(w),N=Math.sin(w),D=A*(Math.abs(j)+Math.abs(N)),L=A*(1-D+D**2),k=Math.max(Math.atan(Math.abs(N+j)*L),Math.atan(Math.abs(N-j)*L));let U=0,C=t;for(let B=t+2;B<s-2;B+=2){const R=Math.abs(x-f*e[B+1]+g*e[B]);R>U&&(C=B,U=R)}U>(p*k)**2?(this.#a(e,t,C+2,i),this.#a(e,C,s,i)):i.push(r,c)}static#o(e){const t=[],s=e.length;return this.#a(e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t}static#c(e,t,s,i,r,c){const u=new Float32Array(c**2),h=-2*i**2,p=c>>1;for(let w=0;w<c;w++){const j=(w-p)**2;for(let N=0;N<c;N++)u[w*c+N]=Math.exp((j+(N-p)**2)/h)}const f=new Float32Array(256),g=-2*r**2;for(let w=0;w<256;w++)f[w]=Math.exp(w**2/g);const x=e.length,y=new Uint8Array(x),A=new Uint32Array(256);for(let w=0;w<s;w++)for(let j=0;j<t;j++){const N=w*t+j,D=e[N];let L=0,k=0;for(let C=0;C<c;C++){const B=w+C-p;if(!(B<0||B>=s))for(let R=0;R<c;R++){const E=j+R-p;if(E<0||E>=t)continue;const O=e[B*t+E],I=u[C*c+R]*f[Math.abs(O-D)];L+=O*I,k+=I}}const U=y[N]=Math.round(L/k);A[U]++}return[y,A]}static#l(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t}static#h(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let i=-1/0,r=1/0;for(let u=0,h=s.length;u<h;u++){const p=s[u]=e[u<<2];i=Math.max(i,p),r=Math.min(r,p)}const c=255/(i-r);for(let u=0,h=s.length;u<h;u++)s[u]=(s[u]-r)*c;return s}static#u(e){let t,s=-1/0,i=-1/0;const r=e.findIndex(h=>h!==0);let c=r,u=r;for(t=r;t<256;t++){const h=e[t];h>s&&(t-c>i&&(i=t-c,u=t-1),s=h,c=t)}for(t=u-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:s,height:i}=e,{maxDim:r}=this.#e;let c=s,u=i;if(s>r||i>r){let x=s,y=i,A=Math.log2(Math.max(s,i)/r);const w=Math.floor(A);A=A===w?w-1:w;for(let N=0;N<A;N++){c=Math.ceil(x/2),u=Math.ceil(y/2);const D=new OffscreenCanvas(c,u);D.getContext("2d").drawImage(e,0,0,x,y,0,0,c,u),x=c,y=u,e!==t&&e.close(),e=D.transferToImageBitmap()}const j=Math.min(r/c,r/u);c=Math.round(c*j),u=Math.round(u*j)}const p=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});p.fillStyle="white",p.fillRect(0,0,c,u),p.filter="grayscale(1)",p.drawImage(e,0,0,e.width,e.height,0,0,c,u);const f=p.getImageData(0,0,c,u).data;return[this.#h(f),c,u]}static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:i},r,c,u,h){let p=new OffscreenCanvas(1,1),f=p.getContext("2d",{alpha:!1});const g=200,x=f.font=`${s} ${i} ${g}px ${t}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:A,actualBoundingBoxAscent:w,actualBoundingBoxDescent:j,fontBoundingBoxAscent:N,fontBoundingBoxDescent:D,width:L}=f.measureText(e),k=1.5,U=Math.ceil(Math.max(Math.abs(y)+Math.abs(A)||0,L)*k),C=Math.ceil(Math.max(Math.abs(w)+Math.abs(j)||g,Math.abs(N)+Math.abs(D)||g)*k);p=new OffscreenCanvas(U,C),f=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=x,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,U,C),f.fillStyle="black",f.fillText(e,U*(k-1)/2,C*(3-k)/2);const B=this.#h(f.getImageData(0,0,U,C).data),R=this.#l(B),E=this.#u(R),O=this.#i(B,U,C,E);return this.processDrawnLines({lines:{curves:O,width:U,height:C},pageWidth:r,pageHeight:c,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(e,t,s,i,r){const[c,u,h]=this.#f(e),[p,f]=this.#c(c,u,h,Math.hypot(u,h)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),g=this.#u(f),x=this.#i(p,u,h,g);return this.processDrawnLines({lines:{curves:x,width:u,height:h},pageWidth:t,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:c,areContours:u}){i%180!==0&&([t,s]=[s,t]);const{curves:h,width:p,height:f}=e,g=e.thickness??0,x=[],y=Math.min(t/p,s/f),A=y/t,w=y/s,j=[];for(const{points:D}of h){const L=c?this.#o(D):D;if(!L)continue;j.push(L);const k=L.length,U=new Float32Array(k),C=new Float32Array(3*(k===2?2:k-2));if(x.push({line:C,points:U}),k===2){U[0]=L[0]*A,U[1]=L[1]*w,C.set([NaN,NaN,NaN,NaN,U[0],U[1]],0);continue}let[B,R,E,O]=L;B*=A,R*=w,E*=A,O*=w,U.set([B,R,E,O],0),C.set([NaN,NaN,NaN,NaN,B,R],0);for(let I=4;I<k;I+=2){const V=U[I]=L[I]*A,z=U[I+1]=L[I+1]*w;C.set(fe.createBezierPoints(B,R,E,O,V,z),(I-2)*3),[B,R,E,O]=[E,O,V,z]}}if(x.length===0)return null;const N=u?new am:new yl;return N.build(x,t,s,1,i,u?0:g,r),{outline:N,newCurves:j,areContours:u,thickness:g,width:p,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:i,height:r}){let c=1/0,u=-1/0,h=0;for(const L of e){h+=L.length;for(let k=2,U=L.length;k<U;k++){const C=L[k]-L[k-2];c=Math.min(c,C),u=Math.max(u,C)}}let p;c>=-128&&u<=127?p=Int8Array:c>=-32768&&u<=32767?p=Int16Array:p=Int32Array;const f=e.length,g=nd+Ho*f,x=new Uint32Array(g);let y=0;x[y++]=g*Uint32Array.BYTES_PER_ELEMENT+(h-2*f)*p.BYTES_PER_ELEMENT,x[y++]=0,x[y++]=i,x[y++]=r,x[y++]=t?0:1,x[y++]=Math.max(0,Math.floor(s??0)),x[y++]=f,x[y++]=p.BYTES_PER_ELEMENT;for(const L of e)x[y++]=L.length-2,x[y++]=L[0],x[y++]=L[1];const A=new CompressionStream("deflate-raw"),w=A.writable.getWriter();await w.ready,w.write(x);const j=p.prototype.constructor;for(const L of e){const k=new j(L.length-2);for(let U=2,C=L.length;U<C;U++)k[U-2]=L[U]-L[U-2];w.write(k)}w.close();const N=await new Response(A.readable).arrayBuffer(),D=new Uint8Array(N);return Ov(D)}static async decompressSignature(e){try{const t=sE(e),{readable:s,writable:i}=new DecompressionStream("deflate-raw"),r=i.getWriter();await r.ready,r.write(t).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let c=null,u=0;for await(const L of s)c||=new Uint8Array(new Uint32Array(L.buffer,0,4)[0]),c.set(L,u),u+=L.length;const h=new Uint32Array(c.buffer,0,c.length>>2),p=h[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const f=h[2],g=h[3],x=h[4]===0,y=h[5],A=h[6],w=h[7],j=[],N=(nd+Ho*A)*Uint32Array.BYTES_PER_ELEMENT;let D;switch(w){case Int8Array.BYTES_PER_ELEMENT:D=new Int8Array(c.buffer,N);break;case Int16Array.BYTES_PER_ELEMENT:D=new Int16Array(c.buffer,N);break;case Int32Array.BYTES_PER_ELEMENT:D=new Int32Array(c.buffer,N);break}u=0;for(let L=0;L<A;L++){const k=h[Ho*L+nd],U=new Float32Array(k+2);j.push(U);for(let C=0;C<Ho-1;C++)U[C]=h[Ho*L+nd+C+1];for(let C=0;C<k;C++)U[C+2]=U[C]+D[u++]}return{areContours:x,thickness:y,outlines:j,width:f,height:g}}catch(t){return _e(`decompressSignature: ${t}`),null}}}class $m extends mw{constructor(){super(),super.updateProperties({fill:ye._defaultLineColor,"stroke-width":0})}clone(){const e=new $m;return e.updateAll(this),e}}class Ym extends Yd{constructor(e){super(e),super.updateProperties({stroke:ye._defaultLineColor,"stroke-width":1})}clone(){const e=new Ym(this._viewParameters);return e.updateAll(this),e}}class On extends Ae{#e=!1;#t=null;#n=null;#s=null;static _type="signature";static _editorType=Se.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){ye.initialize(e,t),this._defaultDrawingOptions=new $m,this._defaultDrawnSignatureOptions=new Ym(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Me(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:i,mustSmooth:r,areContours:c,description:u,uuid:h,heightInPage:p}=this.#n,{rawDims:{pageWidth:f,pageHeight:g},rotation:x}=this.parent.viewport,y=oa.processDrawnLines({lines:i,pageWidth:f,pageHeight:g,rotation:x,innerMargin:On._INNER_MARGIN,mustSmooth:r,areContours:c});this.addSignature(y,p,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#s=e,this.addEditToolbar()}getUuid(){return this.#s}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:s,width:i,height:r}=this.#n,c=Math.max(i,r),u=oa.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:s,width:i,height:r},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,s,i){const{x:r,y:c}=this,{outline:u}=this.#n=e;this.#e=u instanceof am,this.description=s;let h;this.#e?h=On.getDefaultDrawingOptions():(h=On._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,p]=this.pageDimensions;let f=t/p;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=r,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:s},rotation:i}=this.parent.viewport;return oa.process(e,t,s,i,On._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return oa.extractContoursFromText(e,t,s,i,r,On._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:s},rotation:i}=this.parent.viewport;return oa.processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:On._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=On.getDefaultDrawingOptions():(this._drawingOptions=On._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,r=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:i});return this.addComment(r),e?(r.paths={lines:t,points:s},r.uuid=this.#s,r.isCopy=!0):r.lines=t,this.#t&&(r.accessibilityData={type:"Figure",alt:this.#t}),r}static deserializeDraw(e,t,s,i,r,c){return c.areContours?am.deserialize(e,t,s,i,r,c):yl.deserialize(e,t,s,i,r,c)}static async deserialize(e,t,s){const i=await super.deserialize(e,t,s);return i.#e=e.areContours,i.description=e.accessibilityData?.alt||"",i.#s=e.uuid,i}}class DC extends ye{#e=null;#t=null;#n=null;#s=null;#r=null;#i="";#a=null;#o=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=Se.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#s=e.bitmapUrl,this.#r=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){ye.initialize(e,t)}static isHandlingMimeForPasting(e){return _d.includes(e)}static paste(e,t){t.pasteEditor({mode:Se.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#u(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#i=e.file.name),this.#m()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:r,height:c}=e||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:i,width:r,height:c,channels:i.length/(r*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),t&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(s=>this.#u(s,!0)).finally(()=>this.#f());return}if(this.#s){const s=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(i=>this.#u(i)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(i=>this.#u(i)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=_d.join(",");const t=this._uiManager._signal;this.#n=new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(i)}s()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#a===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#s||this.#r||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#t=s,i&&(this.#e=i),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},e)}#m(){const{div:e}=this;let{width:t,height:s}=this.#e;const[i,r]=this.pageDimensions,c=.75;if(this.width)t=this.width*i,s=this.height*r;else if(t>c*i||s>c*r){const h=Math.min(c*i/t,c*r/s);t*=h,s*=h}this._uiManager.enableWaiting(!1);const u=this.#a=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=t/i,this.height=s/r,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#p(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,s=!1){e||(e=224);const{width:i,height:r}=this.#e,c=new vn;let u=this.#e,h=i,p=r,f=null;if(t){if(i>t||r>t){const C=Math.min(t/i,t/r);h=Math.floor(i*C),p=Math.floor(r*C)}f=document.createElement("canvas");const x=f.width=Math.ceil(h*c.sx),y=f.height=Math.ceil(p*c.sy);this.#l||(u=this.#d(x,y));const A=f.getContext("2d");A.filter=this._uiManager.hcmFilter;let w="white",j="#cfcfd8";this._uiManager.hcmFilter!=="none"?j="black":aE.isDarkMode&&(w="#8f8f9d",j="#42414d");const N=15,D=N*c.sx,L=N*c.sy,k=new OffscreenCanvas(D*2,L*2),U=k.getContext("2d");U.fillStyle=w,U.fillRect(0,0,D*2,L*2),U.fillStyle=j,U.fillRect(0,0,D,L),U.fillRect(D,L,D,L),A.fillStyle=A.createPattern(k,"repeat"),A.fillRect(0,0,x,y),A.drawImage(u,0,0,u.width,u.height,0,0,x,y)}let g=null;if(s){let x,y;if(c.symmetric&&u.width<e&&u.height<e)x=u.width,y=u.height;else if(u=this.#e,i>e||r>e){const j=Math.min(e/i,e/r);x=Math.floor(i*j),y=Math.floor(r*j),this.#l||(u=this.#d(x,y))}const w=new OffscreenCanvas(x,y).getContext("2d",{willReadFrequently:!0});w.drawImage(u,0,0,u.width,u.height,0,0,x,y),g={width:x,height:y,data:w.getImageData(0,0,x,y).data}}return{canvas:f,width:h,height:p,imageData:g}}#d(e,t){const{width:s,height:i}=this.#e;let r=s,c=i,u=this.#e;for(;r>2*e||c>2*t;){const h=r,p=c;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),c>2*t&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const f=new OffscreenCanvas(r,c);f.getContext("2d").drawImage(u,0,0,h,p,0,0,r,c),u=f.transferToImageBitmap()}return u}#p(){const[e,t]=this.parentDimensions,{width:s,height:i}=this,r=new vn,c=Math.ceil(s*e*r.sx),u=Math.ceil(i*t*r.sy),h=this.#a;if(!h||h.width===c&&h.height===u)return;h.width=c,h.height=u;const p=this.#l?this.#e:this.#d(c,u),f=h.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(p,0,0,p.width,p.height,0,0,c,u)}#x(e){if(e){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,s]=this.pageDimensions,i=Math.round(this.width*t*ba.PDF_TO_CSS_UNITS),r=Math.round(this.height*s*ba.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(i,r);return c.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,r),c.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,s){let i=null,r=!1;if(e instanceof uw){const{data:{rect:w,rotation:j,id:N,structParent:D,popupRef:L,richText:k,contentsObj:U,creationDate:C,modificationDate:B},container:R,parent:{page:{pageNumber:E}},canvas:O}=e;let I,V;O?(delete e.canvas,{id:I,bitmap:V}=s.imageManager.getFromCanvas(R.id,O),O.remove()):(r=!0,e._hasNoCanvas=!0);const z=(await t._structTree.getAriaAttributes(`${Rm}${N}`))?.get("aria-label")||"";i=e={annotationType:Se.STAMP,bitmapId:I,bitmap:V,pageIndex:E-1,rect:w.slice(0),rotation:j,annotationElementId:N,id:N,deleted:!1,accessibilityData:{decorative:!1,altText:z},isSvg:!1,structParent:D,popupRef:L,richText:k,comment:U?.str||null,creationDate:C,modificationDate:B}}const c=await super.deserialize(e,t,s),{rect:u,bitmap:h,bitmapUrl:p,bitmapId:f,isSvg:g,accessibilityData:x}=e;r?(s.addMissingCanvas(e.id,c),c.#o=!0):f&&s.imageManager.isValidId(f)?(c.#t=f,h&&(c.#e=h)):c.#s=p,c.#l=g;const[y,A]=c.pageDimensions;return c.width=(u[2]-u[0])/y,c.height=(u[3]-u[1])/A,x&&(c.altTextData=x),c._initialData=i,e.comment&&c.setCommentData(e),c.#h=!!i,c}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(s),e)return s.bitmapUrl=this.#x(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:r}=this.serializeAltText(!1);if(!i&&r&&(s.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const u=this.#y(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(t===null)return s;t.stamps||=new Map;const c=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:c,serialized:s}),s.bitmap=this.#x(!1);else if(this.#l){const u=t.stamps.get(this.#t);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#x(!1))}return s}#y(e){const{pageIndex:t,accessibilityData:{altText:s}}=this._initialData,i=e.pageIndex===t,r=(e.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&r,isSameAltText:r}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Pn{#e;#t=!1;#n=null;#s=null;#r=null;#i=new Map;#a=!1;#o=!1;#c=!1;#l=null;#h=null;#u=null;#f=null;#g=null;#m=-1;#d;static _initialized=!1;static#p=new Map([Gt,Gm,DC,kt,On].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:c,drawLayer:u,textLayer:h,viewport:p,l10n:f}){const g=[...Pn.#p.values()];if(!Pn._initialized){Pn._initialized=!0;for(const x of g)x.initialize(f,e)}e.registerEditorTypes(g),this.#d=e,this.pageIndex=t,this.div=s,this.#e=r,this.#n=c,this.viewport=p,this.#u=h,this.drawLayer=u,this._structTree=i,this.#d.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#d.getMode()===Se.NONE}updateToolbar(e){this.#d.updateToolbar(e)}updateMode(e=this.#d.getMode()){switch(this.#v(),e){case Se.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Se.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Se.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Se.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const s of Pn.#p.values())t.toggle(`${s._type}Editing`,e===s._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#u?.div}setEditingState(e){this.#d.setEditingState(e)}addCommands(e){this.#d.addCommands(e)}cleanUndoStack(e){this.#d.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.div.classList.toggle("disabled",!e)}get#x(){return this.#i.size!==0?this.#i.values():this.#d.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const e=new Set;for(const s of this.#x)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#d.removeChangedExistingAnnotation(s),e.add(s.annotationElementId));const t=this.#n;if(t)for(const s of t.getEditableAnnotations()){if(s.hide(),this.#d.isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}this.#c=!1,this.#d._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#u&&!this.#g){this.#g=new AbortController;const s=this.#d.combinedSignal(this.#g);this.#u.div.addEventListener("pointerdown",i=>{const{clientX:c,clientY:u,timeStamp:h}=i,p=this.#m;if(h-p>500){this.#m=h;return}this.#m=-1;const{classList:f}=this.div;f.toggle("getElements",!0);const g=document.elementsFromPoint(c,u);if(f.toggle("getElements",!1),!this.div.contains(g[0]))return;let x;const y=new RegExp(`^${Qo}[0-9]+$`);for(const w of g)if(y.test(w.id)){x=w.id;break}if(!x)return;const A=this.#i.get(x);A?.annotationElementId===null&&(i.stopPropagation(),i.preventDefault(),A.dblclick(i))},{signal:s,capture:!0})}const e=this.#n;if(e){const s=new Map,i=new Map;for(const c of this.#x){if(c.disableEditing(),!c.annotationElementId){c.updateFakeAnnotationElement(e);continue}if(c.serialize()!==null){s.set(c.annotationElementId,c);continue}else i.set(c.annotationElementId,c);this.getEditableAnnotation(c.annotationElementId)?.show(),c.remove()}const r=e.getEditableAnnotations();for(const c of r){const{id:u}=c.data;if(this.#d.isDeletedAnnotationElement(u)){c.updateEdited({deleted:!0});continue}let h=i.get(u);if(h){h.resetAnnotationElement(c),h.show(!1),c.show();continue}h=s.get(u),h&&(this.#d.addChangedExistingAnnotation(h),h.renderAnnotationElement(c)&&h.show(!1)),c.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const s of Pn.#p.values())t.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#d.getActive()!==e&&this.#d.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;const e=this.#d.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#y.bind(this),{signal:e}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#y(e){this.#d.unselectAll();const{target:t}=e;if(t===this.#u.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#u.div.contains(t)){const{isMac:s}=Yt.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#d.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),kt.startHighlighting(this,this.#d.direction==="ltr",{target:this.#u.div,x:e.x,y:e.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#d._signal}),e.preventDefault()}}enableClick(){if(this.#s)return;this.#s=new AbortController;const e=this.#d.combinedSignal(this.#s);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#s?.abort(),this.#s=null}attach(e){this.#i.set(e.id,e);const{annotationElementId:t}=e;t&&this.#d.isDeletedAnnotationElement(t)&&this.#d.removeDeletedAnnotationElement(e)}detach(e){this.#i.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#d.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#d.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#d.addDeletedAnnotationElement(e.annotationElementId),ye.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#d.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#d.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#r&&(e._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#d._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getEditorByUID(e){for(const t of this.#i.values())if(t.uid===e)return t;return null}getNextId(){return this.#d.getId()}get#b(){return Pn.#p.get(this.#d.getMode())}combinedSignal(e){return this.#d.combinedSignal(e)}#S(e){const t=this.#b;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#d.updateMode(e.mode);const{offsetX:s,offsetY:i}=this.#N(),r=this.getNextId(),c=this.#S({parent:this,id:r,x:s,y:i,uiManager:this.#d,isCentered:!0,...t});c&&this.add(c)}async deserialize(e){return await Pn.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#d)||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),r=this.#S({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#d,isCentered:t,...s});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}#N(){const{x:e,y:t,width:s,height:i}=this.boundingClientRect,r=Math.max(0,e),c=Math.max(0,t),u=Math.min(window.innerWidth,e+s),h=Math.min(window.innerHeight,t+i),p=(r+u)/2-e,f=(c+h)/2-t,[g,x]=this.viewport.rotation%180===0?[p,f]:[f,p];return{offsetX:g,offsetY:x}}addNewEditor(e={}){this.createAndAddNewEditor(this.#N(),!0,e)}setSelected(e){this.#d.setSelected(e)}toggleSelected(e){this.#d.toggleSelected(e)}unselect(e){this.#d.unselect(e)}pointerup(e){const{isMac:t}=Yt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#a||(this.#a=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const s=this.#d.getMode();if(s===Se.STAMP||s===Se.SIGNATURE){this.#d.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#d.getMode()===Se.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:t}=Yt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#a=!0,this.#b?.isDrawer){this.startDrawingSession(e);return}const s=this.#d.getActive();this.#t=!s||s.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#d,!1,e);return}this.#d.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#d.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#b.startDrawing(this,this.#d,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#d.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#b.endDrawing(e)):null}findNewParent(e,t,s){const i=this.#d.findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#d.getActive()?.parent===this&&(this.#d.commitOrRemove(),this.#d.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const e of this.#i.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#i.clear(),this.#d.removeLayer(this)}#v(){for(const e of this.#i.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,zi(this.div,e);for(const t of this.#d.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#d.commitOrRemove(),this.#v();const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,zi(this.div,{rotation:s}),t!==s)for(const i of this.#i.values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#d.viewParameters.realScale}}class $t{#e=null;#t=new Map;#n=new Map;static#s=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return Me(this,"_svgFactory",new nl)}static#r(e,[t,s,i,r]){const{style:c}=e;c.top=`${100*s}%`,c.left=`${100*t}%`,c.width=`${100*i}%`,c.height=`${100*r}%`}#i(){const e=$t._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#a(e,t){const s=$t._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=$t._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),i}#o(e,t){for(const[s,i]of Object.entries(t))i===null?e.removeAttribute(s):e.setAttribute(s,i)}draw(e,t=!1,s=!1){const i=$t.#s++,r=this.#i(),c=$t._svgFactory.createElement("defs");r.append(c);const u=$t._svgFactory.createElement("path");c.append(u);const h=`path_p${this.pageIndex}_${i}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#n.set(i,u);const p=s?this.#a(c,h):null,f=$t._svgFactory.createElement("use");return r.append(f),f.setAttribute("href",`#${h}`),this.updateProperties(r,e),this.#t.set(i,r),{id:i,clipPathId:`url(#${p})`}}drawOutline(e,t){const s=$t.#s++,i=this.#i(),r=$t._svgFactory.createElement("defs");i.append(r);const c=$t._svgFactory.createElement("path");r.append(c);const u=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let h;if(t){const g=$t._svgFactory.createElement("mask");r.append(g),h=`mask_p${this.pageIndex}_${s}`,g.setAttribute("id",h),g.setAttribute("maskUnits","objectBoundingBox");const x=$t._svgFactory.createElement("rect");g.append(x),x.setAttribute("width","1"),x.setAttribute("height","1"),x.setAttribute("fill","white");const y=$t._svgFactory.createElement("use");g.append(y),y.setAttribute("href",`#${u}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const p=$t._svgFactory.createElement("use");i.append(p),p.setAttribute("href",`#${u}`),h&&p.setAttribute("mask",`url(#${h})`);const f=p.cloneNode();return i.append(f),p.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#t.set(s,i),s}finalizeDraw(e,t){this.#n.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:s,bbox:i,rootClass:r,path:c}=t,u=typeof e=="number"?this.#t.get(e):e;if(u){if(s&&this.#o(u,s),i&&$t.#r(u,i),r){const{classList:h}=u;for(const[p,f]of Object.entries(r))h.toggle(p,f)}if(c){const p=u.firstChild.firstChild;this.#o(p,c)}}}updateParent(e,t){if(t===this)return;const s=this.#t.get(e);s&&(t.#e.append(s),this.#t.delete(e),t.#t.set(e,s))}remove(e){this.#n.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:nm};globalThis.pdfjsLib={AbortException:di,AnnotationEditorLayer:Pn,AnnotationEditorParamsType:Ie,AnnotationEditorType:Se,AnnotationEditorUIManager:ui,AnnotationLayer:qm,AnnotationMode:Un,AnnotationType:Rt,applyOpacity:Iv,build:rw,ColorPicker:zs,createValidAbsoluteUrl:Em,CSSConstants:Uv,DOMSVGFactory:nl,DrawLayer:$t,FeatureTest:Yt,fetchData:Ir,findContrastColor:zv,getDocument:Um,getFilenameFromUrl:Bv,getPdfFilenameFromUrl:Pv,getRGB:zr,getUuid:Tm,getXfaPageViewport:Fv,GlobalWorkerOptions:Ii,ImageKind:Xo,InvalidPDFException:jd,isDataScheme:pl,isPdfFile:Gd,isValidExplicitDest:Gv,MathClamp:cs,noContextMenu:Vs,normalizeUnicode:Lv,OPS:Cr,OutputScale:vn,PasswordResponses:Dv,PDFDataRangeTransport:zm,PDFDateString:Sd,PDFWorker:Tr,PermissionFlag:kv,PixelsPerInch:ba,RenderingCancelledException:qd,renderRichText:Dm,ResponseException:Zo,setLayerDimensions:zi,shadow:Me,SignatureExtractor:oa,stopEvent:wt,SupportedImageMimeTypes:_d,TextLayer:el,TouchManager:xl,updateUrlHash:Cm,Util:me,VerbosityLevel:hl,version:tl,XfaLayer:km};const MC=Object.freeze(Object.defineProperty({__proto__:null,AbortException:di,AnnotationEditorLayer:Pn,AnnotationEditorParamsType:Ie,AnnotationEditorType:Se,AnnotationEditorUIManager:ui,AnnotationLayer:qm,AnnotationMode:Un,AnnotationType:Rt,CSSConstants:Uv,ColorPicker:zs,DOMSVGFactory:nl,DrawLayer:$t,FeatureTest:Yt,GlobalWorkerOptions:Ii,ImageKind:Xo,InvalidPDFException:jd,MathClamp:cs,OPS:Cr,OutputScale:vn,PDFDataRangeTransport:zm,PDFDateString:Sd,PDFWorker:Tr,PasswordResponses:Dv,PermissionFlag:kv,PixelsPerInch:ba,RenderingCancelledException:qd,ResponseException:Zo,SignatureExtractor:oa,SupportedImageMimeTypes:_d,TextLayer:el,TouchManager:xl,Util:me,VerbosityLevel:hl,XfaLayer:km,applyOpacity:Iv,build:rw,createValidAbsoluteUrl:Em,fetchData:Ir,findContrastColor:zv,getDocument:Um,getFilenameFromUrl:Bv,getPdfFilenameFromUrl:Pv,getRGB:zr,getUuid:Tm,getXfaPageViewport:Fv,isDataScheme:pl,isPdfFile:Gd,isValidExplicitDest:Gv,noContextMenu:Vs,normalizeUnicode:Lv,renderRichText:Dm,setLayerDimensions:zi,shadow:Me,stopEvent:wt,updateUrlHash:Cm,version:tl},Symbol.toStringTag,{value:"Module"}));function pw(l){var e,t,s="";if(typeof l=="string"||typeof l=="number")s+=l;else if(typeof l=="object")if(Array.isArray(l)){var i=l.length;for(e=0;e<i;e++)l[e]&&(t=pw(l[e]))&&(s&&(s+=" "),s+=t)}else for(t in l)l[t]&&(s&&(s+=" "),s+=t);return s}function Xd(){for(var l,e,t=0,s="",i=arguments.length;t<i;t++)(l=arguments[t])&&(e=pw(l))&&(s&&(s+=" "),s+=e);return s}var ay=Object.prototype.hasOwnProperty;function ry(l,e,t){for(t of l.keys())if(jr(t,e))return t}function jr(l,e){var t,s,i;if(l===e)return!0;if(l&&e&&(t=l.constructor)===e.constructor){if(t===Date)return l.getTime()===e.getTime();if(t===RegExp)return l.toString()===e.toString();if(t===Array){if((s=l.length)===e.length)for(;s--&&jr(l[s],e[s]););return s===-1}if(t===Set){if(l.size!==e.size)return!1;for(s of l)if(i=s,i&&typeof i=="object"&&(i=ry(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(l.size!==e.size)return!1;for(s of l)if(i=s[0],i&&typeof i=="object"&&(i=ry(e,i),!i)||!jr(s[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)l=new Uint8Array(l),e=new Uint8Array(e);else if(t===DataView){if((s=l.byteLength)===e.byteLength)for(;s--&&l.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(l)){if((s=l.byteLength)===e.byteLength)for(;s--&&l[s]===e[s];);return s===-1}if(!t||typeof l=="object"){s=0;for(t in l)if(ay.call(l,t)&&++s&&!ay.call(e,t)||!(t in e)||!jr(l[t],e[t]))return!1;return Object.keys(e).length===s}}return l!==l&&e!==e}function vl(l){let e=!1;return{promise:new Promise((s,i)=>{l.then(r=>!e&&s(r)).catch(r=>!e&&i(r))}),cancel(){e=!0}}}const LC=["onCopy","onCut","onPaste"],OC=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],BC=["onFocus","onBlur"],PC=["onInput","onInvalid","onReset","onSubmit"],FC=["onLoad","onError"],UC=["onKeyDown","onKeyPress","onKeyUp"],IC=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],zC=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],HC=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],VC=["onSelect"],qC=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],GC=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],$C=["onScroll"],YC=["onWheel"],XC=["onAnimationStart","onAnimationEnd","onAnimationIteration"],WC=["onTransitionEnd"],KC=["onToggle"],QC=["onChange"],ZC=[...LC,...OC,...BC,...PC,...FC,...UC,...IC,...zC,...HC,...VC,...qC,...GC,...$C,...YC,...XC,...WC,...QC,...KC];function gw(l,e){const t={};for(const s of ZC){const i=l[s];i&&(e?t[s]=(r=>i(r,e(s))):t[s]=i)}return t}var JC="Invariant failed";function lt(l,e){if(!l)throw new Error(JC)}var Pf,oy;function eT(){if(oy)return Pf;oy=1;var l=function(){};return Pf=l,Pf}var tT=eT();const us=my(tT),xw=M.createContext(null),sT="noopener noreferrer nofollow";class nT{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return lt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){lt(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||sT,e.target=s?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{lt(this.pdfDocument),lt(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{lt(Array.isArray(t));const s=t[0];new Promise(i=>{lt(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(r=>{i(r)}).catch(()=>{lt(!1)}):typeof s=="number"?i(s):lt(!1)}).then(i=>{const r=i+1;lt(this.pdfViewer),lt(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:i,pageNumber:r})})})}goToPage(e){const t=e-1;lt(this.pdfViewer),lt(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function Sr({children:l,type:e}){return o.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:l})}const ly={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function iT(l,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return l}}function Rr(){return M.useReducer(iT,{value:void 0,error:void 0})}const Wd=typeof window<"u",bw=Wd&&window.location.protocol==="file:";function aT(l){return typeof l<"u"}function aa(l){return aT(l)&&l!==null}function rT(l){return typeof l=="string"}function oT(l){return l instanceof ArrayBuffer}function lT(l){return lt(Wd),l instanceof Blob}function rm(l){return rT(l)&&/^data:/.test(l)}function cy(l){lt(rm(l));const[e="",t=""]=l.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function cT(){return Wd&&window.devicePixelRatio||1}const yw="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function dy(){us(!bw,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${yw}`)}function dT(){us(!bw,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${yw}`)}function va(l){l?.cancel&&l.cancel()}function om(l,e){return Object.defineProperty(l,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(l,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(l,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(l,"originalHeight",{get(){return this.view[3]},configurable:!0}),l}function uT(l){return l.name==="RenderingCancelledException"}function hT(l){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=i=>{if(!i.target)return t(new Error("Error while reading a file."));const{error:r}=i.target;if(!r)return t(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(l)})}const{PDFDataRangeTransport:fT}=MC,mT=(l,e)=>{switch(e){case ly.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");l(t);break}case ly.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");l(t);break}}};function uy(l){return typeof l=="object"&&l!==null&&("data"in l||"range"in l||"url"in l)}const pT=M.forwardRef(function({children:e,className:t,error:s="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:r,file:c,inputRef:u,imageResourcesPath:h,loading:p="Loading PDF",noData:f="No PDF file specified.",onItemClick:g,onLoadError:x,onLoadProgress:y,onLoadSuccess:A,onPassword:w=mT,onSourceError:j,onSourceSuccess:N,options:D,renderMode:L,rotate:k,scale:U,...C},B){const[R,E]=Rr(),{value:O,error:I}=R,[V,z]=Rr(),{value:H,error:$}=V,S=M.useRef(new nT),_=M.useRef([]),q=M.useRef(void 0),Y=M.useRef(void 0);c&&c!==q.current&&uy(c)&&(us(!jr(c,q.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),q.current=c),D&&D!==Y.current&&(us(!jr(D,Y.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Y.current=D);const ee=M.useRef({scrollPageIntoView:Ce=>{const{dest:Ee,pageNumber:Ne,pageIndex:Le=Ne-1}=Ce;if(g){g({dest:Ee,pageIndex:Le,pageNumber:Ne});return}const Ye=_.current[Le];if(Ye){Ye.scrollIntoView();return}us(!1,`An internal link leading to page ${Ne} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});M.useImperativeHandle(B,()=>({linkService:S,pages:_,viewer:ee}),[]);function F(){N&&N()}function G(){I&&(us(!1,I.toString()),j&&j(I))}function Z(){E({type:"RESET"})}M.useEffect(Z,[c,E]);const Q=M.useCallback(async()=>{if(!c)return null;if(typeof c=="string")return rm(c)?{data:cy(c)}:(dy(),{url:c});if(c instanceof fT)return{range:c};if(oT(c))return{data:c};if(Wd&&lT(c))return{data:await hT(c)};if(lt(typeof c=="object"),lt(uy(c)),"url"in c&&typeof c.url=="string"){if(rm(c.url)){const{url:Ce,...Ee}=c;return{data:cy(Ce),...Ee}}dy()}return c},[c]);M.useEffect(()=>{const Ce=vl(Q());return Ce.promise.then(Ee=>{E({type:"RESOLVE",value:Ee})}).catch(Ee=>{E({type:"REJECT",error:Ee})}),()=>{va(Ce)}},[Q,E]),M.useEffect(()=>{if(!(typeof O>"u")){if(O===!1){G();return}F()}},[O]);function K(){H&&(A&&A(H),_.current=new Array(H.numPages),S.current.setDocument(H))}function de(){$&&(us(!1,$.toString()),x&&x($))}M.useEffect(function(){z({type:"RESET"})},[z,O]),M.useEffect(function(){if(!O)return;const Ee=D?{...O,...D}:O,Ne=Um(Ee);y&&(Ne.onProgress=y),w&&(Ne.onPassword=w);const Le=Ne,Ye=Le.promise.then(qe=>{z({type:"RESOLVE",value:qe})}).catch(qe=>{Le.destroyed||z({type:"REJECT",error:qe})});return()=>{Ye.finally(()=>Le.destroy())}},[D,z,O]),M.useEffect(()=>{if(!(typeof H>"u")){if(H===!1){de();return}K()}},[H]),M.useEffect(function(){S.current.setViewer(ee.current),S.current.setExternalLinkRel(i),S.current.setExternalLinkTarget(r)},[i,r]);const ue=M.useCallback((Ce,Ee)=>{_.current[Ce]=Ee},[]),ve=M.useCallback(Ce=>{delete _.current[Ce]},[]),he=M.useMemo(()=>({imageResourcesPath:h,linkService:S.current,onItemClick:g,pdf:H,registerPage:ue,renderMode:L,rotate:k,scale:U,unregisterPage:ve}),[h,g,H,ue,L,k,U,ve]),xe=M.useMemo(()=>gw(C,()=>H),[C,H]);function Pe(){function Ce(Ne){return!!Ne?.pdf}if(!Ce(he))throw new Error("pdf is undefined");const Ee=typeof e=="function"?e(he):e;return o.jsx(xw.Provider,{value:he,children:Ee})}function $e(){return c?H==null?o.jsx(Sr,{type:"loading",children:typeof p=="function"?p():p}):H===!1?o.jsx(Sr,{type:"error",children:typeof s=="function"?s():s}):Pe():o.jsx(Sr,{type:"no-data",children:typeof f=="function"?f():f})}return o.jsx("div",{className:Xd("react-pdf__Document",t),ref:u,...xe,children:$e()})});function vw(){return M.useContext(xw)}function ww(){for(var l=[],e=0;e<arguments.length;e++)l[e]=arguments[e];var t=l.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(r){for(var c=0,u=t;c<u.length;c++){var h=u[c];typeof h=="function"?h(r):h&&(h.current=r)}}}const Aw=M.createContext(null);function Kd(){return M.useContext(Aw)}function gT(){const l=vw(),e=Kd();lt(e);const t={...l,...e},{imageResourcesPath:s,linkService:i,onGetAnnotationsError:r,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:h,page:p,pdf:f,renderForms:g,rotate:x,scale:y=1}=t;lt(f),lt(p),lt(i);const[A,w]=Rr(),{value:j,error:N}=A,D=M.useRef(null);us(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function L(){j&&c&&c(j)}function k(){N&&(us(!1,N.toString()),r&&r(N))}M.useEffect(function(){w({type:"RESET"})},[w,p]),M.useEffect(function(){if(!p)return;const E=vl(p.getAnnotations()),O=E;return E.promise.then(I=>{w({type:"RESOLVE",value:I})}).catch(I=>{w({type:"REJECT",error:I})}),()=>{va(O)}},[w,p]),M.useEffect(()=>{if(j!==void 0){if(j===!1){k();return}L()}},[j]);function U(){h&&h()}function C(R){us(!1,`${R}`),u&&u(R)}const B=M.useMemo(()=>p.getViewport({scale:y,rotation:x}),[p,x,y]);return M.useEffect(function(){if(!f||!p||!i||!j)return;const{current:E}=D;if(!E)return;const O=B.clone({dontFlip:!0}),I={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:f.annotationStorage,commentManager:null,div:E,l10n:null,linkService:i,page:p,structTreeLayer:null,viewport:O},V={annotations:j,annotationStorage:f.annotationStorage,div:E,imageResourcesPath:s,linkService:i,page:p,renderForms:g,viewport:O};E.innerHTML="";try{new qm(I).render(V),U()}catch(z){C(z)}return()=>{}},[j,s,i,p,f,g,B]),o.jsx("div",{className:Xd("react-pdf__Page__annotations","annotationLayer"),ref:D})}const Nw={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},xT=/^H(\d+)$/;function bT(l){return l in Nw}function Qd(l){return"children"in l}function jw(l){return Qd(l)?l.children.length===1&&0 in l.children&&"id"in l.children[0]:!1}function yT(l){const e={};if(Qd(l)){const{role:t}=l,s=t.match(xT);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(bT(t)){const i=Nw[t];i&&(e.role=i)}}return e}function Sw(l){const e={};if(Qd(l)){if(l.alt!==void 0&&(e["aria-label"]=l.alt),l.lang!==void 0&&(e.lang=l.lang),jw(l)){const[t]=l.children;if(t){const s=Sw(t);return{...e,...s}}}}else"id"in l&&(e["aria-owns"]=l.id);return e}function vT(l){return l?{...yT(l),...Sw(l)}:null}function _w({className:l,node:e}){const t=M.useMemo(()=>vT(e),[e]),s=M.useMemo(()=>!Qd(e)||jw(e)?null:e.children.map((i,r)=>o.jsx(_w,{node:i},r)),[e]);return o.jsx("span",{className:l,...t,children:s})}function wT(){const l=Kd();lt(l);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=l,[s,i]=Rr(),{value:r,error:c}=s,{customTextRenderer:u,page:h}=l;function p(){r&&t&&t(r)}function f(){c&&(us(!1,c.toString()),e&&e(c))}return M.useEffect(function(){i({type:"RESET"})},[i,h]),M.useEffect(function(){if(u||!h)return;const x=vl(h.getStructTree()),y=x;return x.promise.then(A=>{i({type:"RESOLVE",value:A})}).catch(A=>{i({type:"REJECT",error:A})}),()=>va(y)},[u,h,i]),M.useEffect(()=>{if(r!==void 0){if(r===!1){f();return}p()}},[r]),r?o.jsx(_w,{className:"react-pdf__Page__structTree structTree",node:r}):null}const hy=Un;function AT(l){const e=Kd();lt(e);const t={...e,...l},{_className:s,canvasBackground:i,devicePixelRatio:r=cT(),onRenderError:c,onRenderSuccess:u,page:h,renderForms:p,renderTextLayer:f,rotate:g,scale:x}=t,{canvasRef:y}=l;lt(h);const A=M.useRef(null);function w(){h&&u&&u(om(h,x))}function j(k){uT(k)||(us(!1,k.toString()),c&&c(k))}const N=M.useMemo(()=>h.getViewport({scale:x*r,rotation:g}),[r,h,g,x]),D=M.useMemo(()=>h.getViewport({scale:x,rotation:g}),[h,g,x]);M.useEffect(function(){if(!h)return;h.cleanup();const{current:U}=A;if(!U)return;U.width=N.width,U.height=N.height,U.style.width=`${Math.floor(D.width)}px`,U.style.height=`${Math.floor(D.height)}px`,U.style.visibility="hidden";const C={annotationMode:p?hy.ENABLE_FORMS:hy.ENABLE,canvas:U,canvasContext:U.getContext("2d",{alpha:!1}),viewport:N};i&&(C.background=i);const B=h.render(C),R=B;return B.promise.then(()=>{U.style.visibility="",w()}).catch(j),()=>va(R)},[i,h,p,N,D]);const L=M.useCallback(()=>{const{current:k}=A;k&&(k.width=0,k.height=0)},[]);return M.useEffect(()=>L,[L]),o.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:ww(y,A),style:{display:"block",userSelect:"none"},children:f?o.jsx(wT,{}):null})}function NT(l){return"str"in l}function jT(){const l=Kd();lt(l);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:i,onRenderTextLayerSuccess:r,page:c,pageIndex:u,pageNumber:h,rotate:p,scale:f}=l;lt(c);const[g,x]=Rr(),{value:y,error:A}=g,w=M.useRef(null);us(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function j(){y&&s&&s(y)}function N(){A&&(us(!1,A.toString()),t&&t(A))}M.useEffect(function(){x({type:"RESET"})},[c,x]),M.useEffect(function(){if(!c)return;const R=vl(c.getTextContent()),E=R;return R.promise.then(O=>{x({type:"RESOLVE",value:O})}).catch(O=>{x({type:"REJECT",error:O})}),()=>va(E)},[c,x]),M.useEffect(()=>{if(y!==void 0){if(y===!1){N();return}j()}},[y]);const D=M.useCallback(()=>{r&&r()},[r]),L=M.useCallback(B=>{us(!1,B.toString()),i&&i(B)},[i]);function k(){const B=w.current;B&&B.classList.add("selecting")}function U(){const B=w.current;B&&B.classList.remove("selecting")}const C=M.useMemo(()=>c.getViewport({scale:f,rotation:p}),[c,p,f]);return M.useLayoutEffect(function(){if(!c||!y)return;const{current:R}=w;if(!R)return;R.innerHTML="";const E=c.streamTextContent({includeMarkedContent:!0}),O={container:R,textContentSource:E,viewport:C},I=new el(O),V=I;return I.render().then(()=>{const z=document.createElement("div");z.className="endOfContent",R.append(z);const H=R.querySelectorAll('[role="presentation"]');if(e){let $=0;y.items.forEach((S,_)=>{if(!NT(S))return;const q=H[$];if(!q)return;const Y=e({pageIndex:u,pageNumber:h,itemIndex:_,...S});q.innerHTML=Y,$+=S.str&&S.hasEOL?2:1})}D()}).catch(L),()=>va(V)},[e,L,D,c,u,h,y,C]),o.jsx("div",{className:Xd("react-pdf__Page__textContent","textLayer"),onMouseUp:U,onMouseDown:k,ref:w})}const fy=1;function ST(l){const t={...vw(),...l},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:r,canvasRef:c,children:u,className:h,customRenderer:p,customTextRenderer:f,devicePixelRatio:g,error:x="Failed to load the page.",height:y,inputRef:A,loading:w="Loading page",noData:j="No page specified.",onGetAnnotationsError:N,onGetAnnotationsSuccess:D,onGetStructTreeError:L,onGetStructTreeSuccess:k,onGetTextError:U,onGetTextSuccess:C,onLoadError:B,onLoadSuccess:R,onRenderAnnotationLayerError:E,onRenderAnnotationLayerSuccess:O,onRenderError:I,onRenderSuccess:V,onRenderTextLayerError:z,onRenderTextLayerSuccess:H,pageIndex:$,pageNumber:S,pdf:_,registerPage:q,renderAnnotationLayer:Y=!0,renderForms:ee=!1,renderMode:F="canvas",renderTextLayer:G=!0,rotate:Z,scale:Q=fy,unregisterPage:K,width:de,...ue}=t,[ve,he]=Rr(),{value:xe,error:Pe}=ve,$e=M.useRef(null);lt(_);const Ce=aa(S)?S-1:$??null,Ee=S??(aa($)?$+1:null),Ne=Z??(xe?xe.rotate:null),Le=M.useMemo(()=>{if(!xe)return null;let is=1;const et=Q??fy;if(de||y){const It=xe.getViewport({scale:1,rotation:Ne});de?is=de/It.width:y&&(is=y/It.height)}return et*is},[y,xe,Ne,Q,de]);M.useEffect(function(){return()=>{aa(Ce)&&i&&K&&K(Ce)}},[i,_,Ce,K]);function Ye(){if(R){if(!xe||!Le)return;R(om(xe,Le))}if(i&&q){if(!aa(Ce)||!$e.current)return;q(Ce,$e.current)}}function qe(){Pe&&(us(!1,Pe.toString()),B&&B(Pe))}M.useEffect(function(){he({type:"RESET"})},[he,_,Ce]),M.useEffect(function(){if(!_||!Ee)return;const et=vl(_.getPage(Ee)),It=et;return et.promise.then(Nt=>{he({type:"RESOLVE",value:Nt})}).catch(Nt=>{he({type:"REJECT",error:Nt})}),()=>va(It)},[he,_,Ee]),M.useEffect(()=>{if(xe!==void 0){if(xe===!1){qe();return}Ye()}},[xe,Le]);const dt=M.useMemo(()=>aa(Ce)&&Ee&&aa(Ne)&&aa(Le)?{_className:s,canvasBackground:r,customTextRenderer:f,devicePixelRatio:g,onGetAnnotationsError:N,onGetAnnotationsSuccess:D,onGetStructTreeError:L,onGetStructTreeSuccess:k,onGetTextError:U,onGetTextSuccess:C,onRenderAnnotationLayerError:E,onRenderAnnotationLayerSuccess:O,onRenderError:I,onRenderSuccess:V,onRenderTextLayerError:z,onRenderTextLayerSuccess:H,page:xe,pageIndex:Ce,pageNumber:Ee,renderForms:ee,renderTextLayer:G,rotate:Ne,scale:Le}:null,[s,r,f,g,N,D,L,k,U,C,E,O,I,V,z,H,xe,Ce,Ee,ee,G,Ne,Le]),Et=M.useMemo(()=>gw(ue,()=>xe&&(Le?om(xe,Le):void 0)),[ue,xe,Le]),Qe=`${Ce}@${Le}/${Ne}`;function Xt(){switch(F){case"custom":return lt(p),o.jsx(p,{},`${Qe}_custom`);case"none":return null;default:return o.jsx(AT,{canvasRef:c},`${Qe}_canvas`)}}function ft(){return G?o.jsx(jT,{},`${Qe}_text`):null}function ke(){return Y?o.jsx(gT,{},`${Qe}_annotations`):null}function Wt(){function is(It){return!!It?.page}if(!is(dt))throw new Error("page is undefined");const et=typeof u=="function"?u(dt):u;return o.jsxs(Aw.Provider,{value:dt,children:[Xt(),ft(),ke(),et]})}function Rs(){return Ee?_===null||xe===void 0||xe===null?o.jsx(Sr,{type:"loading",children:typeof w=="function"?w():w}):_===!1||xe===!1?o.jsx(Sr,{type:"error",children:typeof x=="function"?x():x}):Wt():o.jsx(Sr,{type:"no-data",children:typeof j=="function"?j():j})}return o.jsx("div",{className:Xd(s,h),"data-page-number":Ee,ref:ww(A,$e),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Le}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Et,children:Rs()})}dT();Ii.workerSrc="pdf.worker.mjs";Ii.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${tl}/pdf.worker.min.js`;const _T=()=>{const{id:l}=Lr(),[e,t]=M.useState(null),[s,i]=M.useState(!0),[r,c]=M.useState(null),[u,h]=M.useState(1),[p,f]=M.useState(!1),[g,x]=M.useState(null);M.useEffect(()=>{y()},[l]);const y=async()=>{try{const L=await _t.getQuestion(l);t(L.data?.data)}catch(L){console.error("Error fetching question:",L)}finally{i(!1)}},A=({numPages:L})=>{c(L),f(!1),x(null)},w=L=>{console.error("Error loading PDF:",L),x("Failed to load PDF. Please try again or download the file."),f(!1)},j=()=>{h(L=>Math.max(1,L-1))},N=()=>{h(L=>Math.min(r,L+1))};if(s)return o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})});if(!e)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Question not found"}),o.jsx(rt,{to:"/questions",className:"text-amber-600 hover:underline",children:"Go back to questions"})]})});const D=e.pdf_file_url||(e.pdf_file?`http://localhost:8000/storage/${e.pdf_file}`:null);return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[o.jsx(Gs,{}),o.jsxs("div",{className:"flex flex-1 relative",children:[o.jsx("div",{className:"hidden md:block md:relative",children:o.jsx(Ys,{})}),o.jsx("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:o.jsx("article",{className:"bg-white rounded-xl shadow-lg overflow-hidden max-w-4xl mx-auto",children:o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm",children:e.class?.name||"N/A"}),o.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:e.subject?.name||"N/A"}),e.academic_year&&o.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:e.academic_year.name})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[e.views_count!==void 0&&o.jsxs("span",{className:"flex items-center gap-1 text-gray-600 text-sm",children:[o.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),o.jsx("span",{className:"font-semibold",children:e.views_count||0}),o.jsx("span",{children:"views"})]}),o.jsx("span",{className:"text-gray-500 text-sm",children:new Date(e.created_at).toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:e.title}),e.content&&o.jsx(ul,{content:e.content})]}),e.description&&o.jsx("p",{className:"text-gray-600 text-lg mb-6",children:e.description}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Teacher: "}),o.jsx("span",{className:"font-semibold text-gray-800",children:e.teacher?.name||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Academic Year: "}),o.jsx("span",{className:"font-semibold text-gray-800",children:e.academic_year?.name||"N/A"})]})]})}),o.jsx(Fr,{likeableType:"App\\Models\\Question",likeableId:e.id}),e.content&&o.jsx("div",{className:"mt-8 prose max-w-none",children:o.jsx("div",{className:"text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:e.content}})}),D&&o.jsxs("div",{className:"mt-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[o.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),"PDF Document"]}),o.jsxs("a",{href:D,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 flex items-center gap-2 text-sm",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download PDF"]})]}),o.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4 bg-gray-50",children:[g&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-red-600 mb-4",children:g}),o.jsx("a",{href:D,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Open PDF in new tab"})]}),!g&&o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"mb-4 border border-gray-300 rounded-lg overflow-hidden bg-white shadow-lg",children:o.jsx(pT,{file:D,onLoadSuccess:A,onLoadError:w,loading:o.jsxs("div",{className:"flex items-center justify-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"}),o.jsx("span",{className:"ml-4 text-gray-600",children:"Loading PDF..."})]}),options:{cMapUrl:`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${tl}/cmaps/`,cMapPacked:!0,standardFontDataUrl:`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${tl}/standard_fonts/`,httpHeaders:{Accept:"application/pdf"}},children:o.jsx(ST,{pageNumber:u,renderTextLayer:!0,renderAnnotationLayer:!0,className:"max-w-full",width:Math.min(800,window.innerWidth-100)})})}),r&&o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:j,disabled:u<=1,className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Previous"}),o.jsxs("span",{className:"text-gray-700 font-semibold",children:["Page ",u," of ",r]}),o.jsx("button",{onClick:N,disabled:u>=r,className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Next"})]})]})]})]}),o.jsx(Ur,{commentableType:"App\\Models\\Question",commentableId:e.id})]})})})]}),o.jsx($s,{})]})};function ET(){return o.jsx(tS,{children:o.jsx(p2,{children:o.jsx(QS,{children:o.jsxs(GN,{children:[o.jsx(Ge,{path:"/admin/login",element:o.jsx(ZS,{})}),o.jsx(Ge,{path:"/admin/dashboard",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(JS,{})})})}),o.jsx(Ge,{path:"/admin/posts",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(p_,{})})})}),o.jsx(Ge,{path:"/admin/categories",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(g_,{})})})}),o.jsx(Ge,{path:"/admin/dhammas",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(x_,{})})})}),o.jsx(Ge,{path:"/admin/donations",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(b_,{})})})}),o.jsx(Ge,{path:"/admin/biographies",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(y_,{})})})}),o.jsx(Ge,{path:"/admin/monasteries",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(v_,{})})})}),o.jsx(Ge,{path:"/admin/monastery-building-donations",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(w_,{})})})}),o.jsx(Ge,{path:"/admin/contacts",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(A_,{})})})}),o.jsx(Ge,{path:"/admin/banners",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(N_,{})})})}),o.jsx(Ge,{path:"/admin/banner-texts",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(j_,{})})})}),o.jsx(Ge,{path:"/admin/academic-years",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(S_,{})})})}),o.jsx(Ge,{path:"/admin/subjects",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(__,{})})})}),o.jsx(Ge,{path:"/admin/classes",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(E_,{})})})}),o.jsx(Ge,{path:"/admin/lessons",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(C_,{})})})}),o.jsx(Ge,{path:"/admin/video-lessons",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(T_,{})})})}),o.jsx(Ge,{path:"/admin/questions",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(R_,{})})})}),o.jsx(Ge,{path:"/admin/profile",element:o.jsx(Vt,{children:o.jsx(qt,{children:o.jsx(k_,{})})})}),o.jsx(Ge,{path:"/",element:o.jsx(O_,{})}),o.jsx(Ge,{path:"/posts/:id",element:o.jsx(B_,{})}),o.jsx(Ge,{path:"/dhammas/:id",element:o.jsx(P_,{})}),o.jsx(Ge,{path:"/biographies",element:o.jsx(F_,{})}),o.jsx(Ge,{path:"/biographies/:id",element:o.jsx(U_,{})}),o.jsx(Ge,{path:"/donations",element:o.jsx(I_,{})}),o.jsx(Ge,{path:"/monasteries",element:o.jsx(z_,{})}),o.jsx(Ge,{path:"/lessons",element:o.jsx(H_,{})}),o.jsx(Ge,{path:"/lessons/:id",element:o.jsx(V_,{})}),o.jsx(Ge,{path:"/video-lessons",element:o.jsx(q_,{})}),o.jsx(Ge,{path:"/video-lessons/:id",element:o.jsx(G_,{})}),o.jsx(Ge,{path:"/questions",element:o.jsx($_,{})}),o.jsx(Ge,{path:"/questions/:id",element:o.jsx(_T,{})}),o.jsx(Ge,{path:"*",element:o.jsx(Ty,{to:"/",replace:!0})})]})})})})}XA.createRoot(document.getElementById("root")).render(o.jsx(M.StrictMode,{children:o.jsx(ET,{})}));
